/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

"use strict";var P_=Object.create;var Bn=Object.defineProperty,A_=Object.defineProperties,k_=Object.getOwnPropertyDescriptor,N_=Object.getOwnPropertyDescriptors,x_=Object.getOwnPropertyNames,Jd=Object.getOwnPropertySymbols,S_=Object.getPrototypeOf,tf=Object.prototype.hasOwnProperty,C_=Object.prototype.propertyIsEnumerable;var ef=(r,e,t)=>e in r?Bn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,De=(r,e)=>{for(var t in e||(e={}))tf.call(e,t)&&ef(r,t,e[t]);if(Jd)for(var t of Jd(e))C_.call(e,t)&&ef(r,t,e[t]);return r},ft=(r,e)=>A_(r,N_(e));var p=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),I_=(r,e)=>{for(var t in e)Bn(r,t,{get:e[t],enumerable:!0})},rf=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of x_(e))!tf.call(r,i)&&i!==t&&Bn(r,i,{get:()=>e[i],enumerable:!(n=k_(e,i))||n.enumerable});return r};var vs=(r,e,t)=>(t=r!=null?P_(S_(r)):{},rf(e||!r||!r.__esModule?Bn(t,"default",{value:r,enumerable:!0}):t,r)),F_=r=>rf(Bn({},"__esModule",{value:!0}),r);var J=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var xf=p((CA,Ps)=>{var df,ff,pf,hf,mf,yf,gf,_f,Tf,Ms,fo,bf,vf,Ef,an,wf,Rf,Df,Mf,Of,Pf,Af,kf,Nf,Os;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof Ps=="object"&&typeof Ps.exports=="object"?r(t(e,t(Ps.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,a){return n[s]=i?i(s,a):a}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])};df=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},ff=Object.assign||function(n){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},pf=function(n,i){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)i.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(s[a[o]]=n[a[o]]);return s},hf=function(n,i,s,a){var o=arguments.length,u=o<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,s,a);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(u=(o<3?l(u):o>3?l(i,s,u):l(i,s))||u);return o>3&&u&&Object.defineProperty(i,s,u),u},mf=function(n,i){return function(s,a){i(s,a,n)}},yf=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},gf=function(n,i,s,a){function o(u){return u instanceof s?u:new s(function(l){l(u)})}return new(s||(s=Promise))(function(u,l){function c(h){try{f(a.next(h))}catch(g){l(g)}}function d(h){try{f(a.throw(h))}catch(g){l(g)}}function f(h){h.done?u(h.value):o(h.value).then(c,d)}f((a=a.apply(n,i||[])).next())})},_f=function(n,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,o,u,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(h){return d([f,h])}}function d(f){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(u=f[0]&2?o.return:f[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,f[1])).done)return u;switch(o=0,u&&(f=[f[0]&2,u.value]),f[0]){case 0:case 1:u=f;break;case 4:return s.label++,{value:f[1],done:!1};case 5:s.label++,o=f[1],f=[0];continue;case 7:f=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(f[0]===6||f[0]===2)){s=0;continue}if(f[0]===3&&(!u||f[1]>u[0]&&f[1]<u[3])){s.label=f[1];break}if(f[0]===6&&s.label<u[1]){s.label=u[1],u=f;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(f);break}u[2]&&s.ops.pop(),s.trys.pop();continue}f=i.call(n,s)}catch(h){f=[6,h],o=0}finally{a=u=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Tf=function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&Os(i,n,s)},Os=Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]},Ms=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],a=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},fo=function(n,i){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var a=s.call(n),o,u=[],l;try{for(;(i===void 0||i-- >0)&&!(o=a.next()).done;)u.push(o.value)}catch(c){l={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(l)throw l.error}}return u},bf=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(fo(arguments[i]));return n},vf=function(){for(var n=0,i=0,s=arguments.length;i<s;i++)n+=arguments[i].length;for(var a=Array(n),o=0,i=0;i<s;i++)for(var u=arguments[i],l=0,c=u.length;l<c;l++,o++)a[o]=u[l];return a},Ef=function(n,i,s){if(s||arguments.length===2)for(var a=0,o=i.length,u;a<o;a++)(u||!(a in i))&&(u||(u=Array.prototype.slice.call(i,0,a)),u[a]=i[a]);return n.concat(u||Array.prototype.slice.call(i))},an=function(n){return this instanceof an?(this.v=n,this):new an(n)},wf=function(n,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(n,i||[]),o,u=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(m){a[m]&&(o[m]=function(y){return new Promise(function(P,w){u.push([m,y,P,w])>1||c(m,y)})})}function c(m,y){try{d(a[m](y))}catch(P){g(u[0][3],P)}}function d(m){m.value instanceof an?Promise.resolve(m.value.v).then(f,h):g(u[0][2],m)}function f(m){c("next",m)}function h(m){c("throw",m)}function g(m,y){m(y),u.shift(),u.length&&c(u[0][0],u[0][1])}},Rf=function(n){var i,s;return i={},a("next"),a("throw",function(o){throw o}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(o,u){i[o]=n[o]?function(l){return(s=!s)?{value:an(n[o](l)),done:o==="return"}:u?u(l):l}:u}},Df=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],s;return i?i.call(n):(n=typeof Ms=="function"?Ms(n):n[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(u){s[u]=n[u]&&function(l){return new Promise(function(c,d){l=n[u](l),o(c,d,l.done,l.value)})}}function o(u,l,c,d){Promise.resolve(d).then(function(f){u({value:f,done:c})},l)}},Mf=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};Of=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&Os(i,n,s);return t(i,n),i},Pf=function(n){return n&&n.__esModule?n:{default:n}},Af=function(n,i,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(n):a?a.value:i.get(n)},kf=function(n,i,s,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(n,s):o?o.value=s:i.set(n,s),s},Nf=function(n,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?i===n:n.has(i)},r("__extends",df),r("__assign",ff),r("__rest",pf),r("__decorate",hf),r("__param",mf),r("__metadata",yf),r("__awaiter",gf),r("__generator",_f),r("__exportStar",Tf),r("__createBinding",Os),r("__values",Ms),r("__read",fo),r("__spread",bf),r("__spreadArrays",vf),r("__spreadArray",Ef),r("__await",an),r("__asyncGenerator",wf),r("__asyncDelegator",Rf),r("__asyncValues",Df),r("__makeTemplateObject",Mf),r("__importStar",Of),r("__importDefault",Pf),r("__classPrivateFieldGet",Af),r("__classPrivateFieldSet",kf),r("__classPrivateFieldIn",Nf)})});var se=p(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.matchAnyPattern=vr.extractTerms=vr.repeatedTimeunitPattern=void 0;function PT(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}vr.repeatedTimeunitPattern=PT;function Mp(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}vr.extractTerms=Mp;function AT(r){return`(?:${Mp(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}vr.matchAnyPattern=AT});var Z=p((Do,Mo)=>{(function(r,e){typeof Do=="object"&&typeof Mo!="undefined"?Mo.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(Do,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",d="year",f="date",h="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},P=function(x,E,b){var A=String(x);return!A||A.length>=E?x:""+Array(E+1-A.length).join(b)+x},w={s:P,z:function(x){var E=-x.utcOffset(),b=Math.abs(E),A=Math.floor(b/60),_=b%60;return(E<=0?"+":"-")+P(A,2,"0")+":"+P(_,2,"0")},m:function x(E,b){if(E.date()<b.date())return-x(b,E);var A=12*(b.year()-E.year())+(b.month()-E.month()),_=E.clone().add(A,l),S=b-_<0,k=E.clone().add(A+(S?-1:1),l);return+(-(A+(b-_)/(S?_-k:k-_))||0)},a:function(x){return x<0?Math.ceil(x)||0:Math.floor(x)},p:function(x){return{M:l,y:d,w:u,d:o,D:f,h:a,m:s,s:i,ms:n,Q:c}[x]||String(x||"").toLowerCase().replace(/s$/,"")},u:function(x){return x===void 0}},N="en",V={};V[N]=y;var le=function(x){return x instanceof dt},ge=function(x,E,b){var A;if(!x)return N;if(typeof x=="string")V[x]&&(A=x),E&&(V[x]=E,A=x);else{var _=x.name;V[_]=x,A=_}return!b&&A&&(N=A),A||!b&&N},ne=function(x,E){if(le(x))return x.clone();var b=typeof E=="object"?E:{};return b.date=x,b.args=arguments,new dt(b)},$=w;$.l=ge,$.i=le,$.w=function(x,E){return ne(x,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var dt=function(){function x(b){this.$L=ge(b.locale,null,!0),this.parse(b)}var E=x.prototype;return E.parse=function(b){this.$d=function(A){var _=A.date,S=A.utc;if(_===null)return new Date(NaN);if($.u(_))return new Date;if(_ instanceof Date)return new Date(_);if(typeof _=="string"&&!/Z$/i.test(_)){var k=_.match(g);if(k){var I=k[2]-1||0,te=(k[7]||"0").substring(0,3);return S?new Date(Date.UTC(k[1],I,k[3]||1,k[4]||0,k[5]||0,k[6]||0,te)):new Date(k[1],I,k[3]||1,k[4]||0,k[5]||0,k[6]||0,te)}}return new Date(_)}(b),this.$x=b.x||{},this.init()},E.init=function(){var b=this.$d;this.$y=b.getFullYear(),this.$M=b.getMonth(),this.$D=b.getDate(),this.$W=b.getDay(),this.$H=b.getHours(),this.$m=b.getMinutes(),this.$s=b.getSeconds(),this.$ms=b.getMilliseconds()},E.$utils=function(){return $},E.isValid=function(){return this.$d.toString()!==h},E.isSame=function(b,A){var _=ne(b);return this.startOf(A)<=_&&_<=this.endOf(A)},E.isAfter=function(b,A){return ne(b)<this.startOf(A)},E.isBefore=function(b,A){return this.endOf(A)<ne(b)},E.$g=function(b,A,_){return $.u(b)?this[A]:this.set(_,b)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(b,A){var _=this,S=!!$.u(A)||A,k=$.p(b),I=function(Vt,Ie){var rt=$.w(_.$u?Date.UTC(_.$y,Ie,Vt):new Date(_.$y,Ie,Vt),_);return S?rt:rt.endOf(o)},te=function(Vt,Ie){return $.w(_.toDate()[Vt].apply(_.toDate("s"),(S?[0,0,0,0]:[23,59,59,999]).slice(Ie)),_)},z=this.$W,oe=this.$M,de=this.$D,Ce="set"+(this.$u?"UTC":"");switch(k){case d:return S?I(1,0):I(31,11);case l:return S?I(1,oe):I(0,oe+1);case u:var ze=this.$locale().weekStart||0,tt=(z<ze?z+7:z)-ze;return I(S?de-tt:de+(6-tt),oe);case o:case f:return te(Ce+"Hours",0);case a:return te(Ce+"Minutes",1);case s:return te(Ce+"Seconds",2);case i:return te(Ce+"Milliseconds",3);default:return this.clone()}},E.endOf=function(b){return this.startOf(b,!1)},E.$set=function(b,A){var _,S=$.p(b),k="set"+(this.$u?"UTC":""),I=(_={},_[o]=k+"Date",_[f]=k+"Date",_[l]=k+"Month",_[d]=k+"FullYear",_[a]=k+"Hours",_[s]=k+"Minutes",_[i]=k+"Seconds",_[n]=k+"Milliseconds",_)[S],te=S===o?this.$D+(A-this.$W):A;if(S===l||S===d){var z=this.clone().set(f,1);z.$d[I](te),z.init(),this.$d=z.set(f,Math.min(this.$D,z.daysInMonth())).$d}else I&&this.$d[I](te);return this.init(),this},E.set=function(b,A){return this.clone().$set(b,A)},E.get=function(b){return this[$.p(b)]()},E.add=function(b,A){var _,S=this;b=Number(b);var k=$.p(A),I=function(oe){var de=ne(S);return $.w(de.date(de.date()+Math.round(oe*b)),S)};if(k===l)return this.set(l,this.$M+b);if(k===d)return this.set(d,this.$y+b);if(k===o)return I(1);if(k===u)return I(7);var te=(_={},_[s]=e,_[a]=t,_[i]=r,_)[k]||1,z=this.$d.getTime()+b*te;return $.w(z,this)},E.subtract=function(b,A){return this.add(-1*b,A)},E.format=function(b){var A=this,_=this.$locale();if(!this.isValid())return _.invalidDate||h;var S=b||"YYYY-MM-DDTHH:mm:ssZ",k=$.z(this),I=this.$H,te=this.$m,z=this.$M,oe=_.weekdays,de=_.months,Ce=function(Ie,rt,en,Xt){return Ie&&(Ie[rt]||Ie(A,S))||en[rt].substr(0,Xt)},ze=function(Ie){return $.s(I%12||12,Ie,"0")},tt=_.meridiem||function(Ie,rt,en){var Xt=Ie<12?"AM":"PM";return en?Xt.toLowerCase():Xt},Vt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:z+1,MM:$.s(z+1,2,"0"),MMM:Ce(_.monthsShort,z,de,3),MMMM:Ce(de,z),D:this.$D,DD:$.s(this.$D,2,"0"),d:String(this.$W),dd:Ce(_.weekdaysMin,this.$W,oe,2),ddd:Ce(_.weekdaysShort,this.$W,oe,3),dddd:oe[this.$W],H:String(I),HH:$.s(I,2,"0"),h:ze(1),hh:ze(2),a:tt(I,te,!0),A:tt(I,te,!1),m:String(te),mm:$.s(te,2,"0"),s:String(this.$s),ss:$.s(this.$s,2,"0"),SSS:$.s(this.$ms,3,"0"),Z:k};return S.replace(m,function(Ie,rt){return rt||Vt[Ie]||k.replace(":","")})},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(b,A,_){var S,k=$.p(A),I=ne(b),te=(I.utcOffset()-this.utcOffset())*e,z=this-I,oe=$.m(this,I);return oe=(S={},S[d]=oe/12,S[l]=oe,S[c]=oe/3,S[u]=(z-te)/6048e5,S[o]=(z-te)/864e5,S[a]=z/t,S[s]=z/e,S[i]=z/r,S)[k]||z,_?oe:$.a(oe)},E.daysInMonth=function(){return this.endOf(l).$D},E.$locale=function(){return V[this.$L]},E.locale=function(b,A){if(!b)return this.$L;var _=this.clone(),S=ge(b,A,!0);return S&&(_.$L=S),_},E.clone=function(){return $.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},x}(),Le=dt.prototype;return ne.prototype=Le,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",d],["$D",f]].forEach(function(x){Le[x[1]]=function(E){return this.$g(E,x[0],x[1])}}),ne.extend=function(x,E){return x.$i||(x(E,dt,ne),x.$i=!0),ne},ne.locale=ge,ne.isDayjs=le,ne.unix=function(x){return ne(1e3*x)},ne.en=V[N],ne.Ls=V,ne.p={},ne})});var Ue=p(Er=>{"use strict";var kT=Er&&Er.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Er,"__esModule",{value:!0});Er.findYearClosestToRef=Er.findMostLikelyADYear=void 0;var NT=kT(Z());function xT(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}Er.findMostLikelyADYear=xT;function ST(r,e,t){let n=NT.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}Er.findYearClosestToRef=ST});var qe=p(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.parseTimeUnits=W.TIME_UNITS_PATTERN=W.parseYear=W.YEAR_PATTERN=W.parseOrdinalNumberPattern=W.ORDINAL_NUMBER_PATTERN=W.parseNumberPattern=W.NUMBER_PATTERN=W.TIME_UNIT_DICTIONARY=W.ORDINAL_WORD_DICTIONARY=W.INTEGER_WORD_DICTIONARY=W.MONTH_DICTIONARY=W.FULL_MONTH_NAME_DICTIONARY=W.WEEKDAY_DICTIONARY=void 0;var Fs=se(),CT=Ue();W.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};W.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};W.MONTH_DICTIONARY=Object.assign(Object.assign({},W.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});W.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};W.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};W.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};W.NUMBER_PATTERN=`(?:${Fs.matchAnyPattern(W.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function Pp(r){let e=r.toLowerCase();return W.INTEGER_WORD_DICTIONARY[e]!==void 0?W.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}W.parseNumberPattern=Pp;W.ORDINAL_NUMBER_PATTERN=`(?:${Fs.matchAnyPattern(W.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function IT(r){let e=r.toLowerCase();return W.ORDINAL_WORD_DICTIONARY[e]!==void 0?W.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}W.parseOrdinalNumberPattern=IT;W.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function FT(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return CT.findMostLikelyADYear(e)}W.parseYear=FT;var Ap=`(${W.NUMBER_PATTERN})\\s{0,3}(${Fs.matchAnyPattern(W.TIME_UNIT_DICTIONARY)})`,Op=new RegExp(Ap,"i");W.TIME_UNITS_PATTERN=Fs.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",Ap);function UT(r){let e={},t=r,n=Op.exec(t);for(;n;)qT(e,n),t=t.substring(n[0].length).trim(),n=Op.exec(t);return e}W.parseTimeUnits=UT;function qT(r,e){let t=Pp(e[1]),n=W.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var kp=p((Oo,Po)=>{(function(r,e){typeof Oo=="object"&&typeof Po!="undefined"?Po.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(Oo,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var d=this.quarter()-1;return c?this.month(3*d).startOf(r).startOf("day"):this.month(3*d+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var yt=p(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.implySimilarTime=jt.assignSimilarTime=jt.assignSimilarDate=jt.assignTheNextDay=void 0;var Np=Re();function WT(r,e){e=e.add(1,"day"),xp(r,e),Sp(r,e)}jt.assignTheNextDay=WT;function xp(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}jt.assignSimilarDate=xp;function LT(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",Np.Meridiem.AM):r.assign("meridiem",Np.Meridiem.PM)}jt.assignSimilarTime=LT;function Sp(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}jt.implySimilarTime=Sp});var Cp=p(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.toTimezoneOffset=Wr.TIMEZONE_ABBR_MAP=void 0;Wr.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function YT(r){var e;return r==null?null:typeof r=="number"?r:(e=Wr.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}Wr.toTimezoneOffset=YT});var fe=p(Bt=>{"use strict";var Ip=Bt&&Bt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.ParsingResult=Bt.ParsingComponents=Bt.ReferenceWithTimezone=void 0;var $T=Ip(kp()),Us=Ip(Z()),Ao=yt(),jT=Cp();Us.default.extend($T.default);var ko=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=jT.toTimezoneOffset(e.timezone))}};Bt.ReferenceWithTimezone=ko;var Lr=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=Us.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new Lr(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return Us.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=Us.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new Lr(e);return t.hour||t.minute||t.second?(Ao.assignSimilarTime(i,n),Ao.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(Ao.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};Bt.ParsingComponents=Lr;var ni=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new Lr(e),this.end=s}clone(){let e=new ni(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};Bt.ParsingResult=ni});var R=p(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.AbstractParserWithWordBoundaryChecking=void 0;var No=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};qs.AbstractParserWithWordBoundaryChecking=No});var Fp=p(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});var So=qe(),BT=fe(),GT=R(),HT=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${So.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),zT=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${So.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),xo=class extends GT.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?zT:HT}innerExtract(e,t){let n=So.parseTimeUnits(t[1]);return BT.ParsingComponents.createRelativeFromReference(e.reference,n)}};Co.default=xo});var $p=p(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});var KT=Ue(),Lp=qe(),Yp=qe(),Ws=qe(),VT=se(),XT=R(),ZT=new RegExp(`(?:on\\s{0,3})?(${Ws.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${Ws.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${VT.matchAnyPattern(Lp.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${Yp.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Up=1,qp=2,QT=3,Wp=4,Io=class extends XT.AbstractParserWithWordBoundaryChecking{innerPattern(){return ZT}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Lp.MONTH_DICTIONARY[t[QT].toLowerCase()],s=Ws.parseOrdinalNumberPattern(t[Up]);if(s>31)return t.index=t.index+t[Up].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Wp]){let a=Yp.parseYear(t[Wp]);n.start.assign("year",a)}else{let a=KT.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[qp]){let a=Ws.parseOrdinalNumberPattern(t[qp]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Fo.default=Io});var zp=p(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});var JT=Ue(),Gp=qe(),Ls=qe(),Hp=qe(),eb=se(),tb=R(),rb=new RegExp(`(${eb.matchAnyPattern(Gp.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${Ls.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${Ls.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${Hp.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),nb=1,ib=2,jp=3,Bp=4,Uo=class extends tb.AbstractParserWithWordBoundaryChecking{innerPattern(){return rb}innerExtract(e,t){let n=Gp.MONTH_DICTIONARY[t[nb].toLowerCase()],i=Ls.parseOrdinalNumberPattern(t[ib]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[Bp]){let u=Hp.parseYear(t[Bp]);s.assign("year",u)}else{let u=JT.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[jp])return s;let a=Ls.parseOrdinalNumberPattern(t[jp]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};qo.default=Uo});var Xp=p(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});var Wo=qe(),sb=Ue(),ab=se(),Vp=qe(),ob=R(),ub=new RegExp(`((?:in)\\s*)?(${ab.matchAnyPattern(Wo.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Vp.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),lb=1,cb=2,Kp=3,Lo=class extends ob.AbstractParserWithWordBoundaryChecking{innerPattern(){return ub}innerExtract(e,t){let n=t[cb].toLowerCase();if(t[0].length<=3&&!Wo.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[lb]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=Wo.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Kp]){let a=Vp.parseYear(t[Kp]);i.start.assign("year",a)}else{let a=sb.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Yo.default=Lo});var Jp=p(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});var Qp=qe(),db=se(),fb=R(),pb=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${db.matchAnyPattern(Qp.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),hb=1,mb=2,Zp=3,yb=4,$o=class extends fb.AbstractParserWithWordBoundaryChecking{innerPattern(){return pb}innerExtract(e,t){let n=t[Zp]?parseInt(t[Zp]):Qp.MONTH_DICTIONARY[t[mb].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[hb]);return{day:parseInt(t[yb]),month:n,year:i}}};jo.default=$o});var eh=p(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});var gb=R(),_b=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),Tb=1,bb=2,Bo=class extends gb.AbstractParserWithWordBoundaryChecking{innerPattern(){return _b}innerExtract(e,t){let n=parseInt(t[bb]),i=parseInt(t[Tb]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Go.default=Bo});var Yr=p(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.AbstractTimeExpressionParser=void 0;var He=Re();function vb(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function Eb(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var th=2,dn=3,Ys=4,$s=5,ii=6,Ho=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[th]);if(o>100){if(this.strictMode||t[dn]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[dn]!=null){if(t[dn].length==1&&!t[ii])return null;s=parseInt(t[dn])}if(s>=60)return null;if(o>12&&(a=He.Meridiem.PM),t[ii]!=null){if(o>12)return null;let u=t[ii][0].toLowerCase();u=="a"&&(a=He.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=He.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",He.Meridiem.AM):i.imply("meridiem",He.Meridiem.PM),t[$s]!=null){let u=parseInt(t[$s].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Ys]!=null){let u=parseInt(t[Ys]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[$s]!=null){let u=parseInt(t[$s].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Ys]!=null){let u=parseInt(t[Ys]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[th]),a=0,o=-1;if(t[dn]!=null?a=parseInt(t[dn]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=He.Meridiem.PM),t[ii]!=null){if(s>12)return null;let u=t[ii][0].toLowerCase();u=="a"&&(o=He.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=He.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==He.Meridiem.AM?(n.start.imply("meridiem",He.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",He.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",He.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",He.Meridiem.PM)):s>12?i.imply("meridiem",He.Meridiem.PM):s<=12&&i.imply("meridiem",He.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=vb(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=Eb(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};js.AbstractTimeExpressionParser=Ho});var rh=p(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});var Bs=Re(),wb=Yr(),zo=class extends wb.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",Bs.Meridiem.PM)):i<6&&n.assign("meridiem",Bs.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",Bs.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",Bs.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Ko.default=zo});var gt=p(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.addImpliedTimeUnits=fn.reverseTimeUnits=void 0;function Rb(r){let e={};for(let t in r)e[t]=-r[t];return e}fn.reverseTimeUnits=Rb;function Db(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}fn.addImpliedTimeUnits=Db});var nh=p(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});var Xo=qe(),Mb=fe(),Ob=R(),Pb=gt(),Ab=new RegExp(`(${Xo.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),kb=new RegExp(`(${Xo.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),Vo=class extends Ob.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?kb:Ab}innerExtract(e,t){let n=Xo.parseTimeUnits(t[1]),i=Pb.reverseTimeUnits(n);return Mb.ParsingComponents.createRelativeFromReference(e.reference,i)}};Zo.default=Vo});var ih=p(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});var Jo=qe(),Nb=fe(),xb=R(),Sb=new RegExp(`(${Jo.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),Cb=new RegExp("("+Jo.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),Ib=1,Qo=class extends xb.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Cb:Sb}innerExtract(e,t){let n=Jo.parseTimeUnits(t[Ib]);return Nb.ParsingComponents.createRelativeFromReference(e.reference,n)}};eu.default=Qo});var hn=p(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.MergingRefiner=pn.Filter=void 0;var tu=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};pn.Filter=tu;var ru=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};pn.MergingRefiner=ru});var Gt=p(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});var Fb=hn(),nu=class extends Fb.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};iu.default=nu});var sh=p(si=>{"use strict";var Ub=si&&si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(si,"__esModule",{value:!0});var qb=Ub(Gt()),su=class extends qb.default{patternBetween(){return/^\s*(to|-)\s*$/i}};si.default=su});var ah=p(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.mergeDateTimeComponent=mn.mergeDateTimeResult=void 0;var Wb=Re();function Lb(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=au(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=au(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}mn.mergeDateTimeResult=Lb;function au(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==Wb.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}mn.mergeDateTimeComponent=au});var tr=p(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});var Yb=hn(),oh=ah(),ou=class extends Yb.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?oh.mergeDateTimeResult(t,n):oh.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};uu.default=ou});var uh=p(ai=>{"use strict";var $b=ai&&ai.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ai,"__esModule",{value:!0});var jb=$b(tr()),lu=class extends jb.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};ai.default=lu});var lh=p(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});var Bb=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),Gb={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},cu=class{constructor(e){this.timezone=Object.assign(Object.assign({},Gb),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=Bb.exec(u);if(!l)return;let c=l[1].toUpperCase(),d=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(d===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${d} for: ${s.start}`)});let f=s.start.get("timezoneOffset");f!==null&&d!=f&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",d),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",d))}),t}};du.default=cu});var Gs=p(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});var Hb=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),zb=1,Kb=2,Vb=3,fu=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=Hb.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[Kb]),o=parseInt(s[Vb]||"0"),u=a*60+o;u>14*60||(s[zb]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};pu.default=fu});var ch=p(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});var hu=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};mu.default=hu});var dh=p(oi=>{"use strict";var Xb=oi&&oi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(oi,"__esModule",{value:!0});var Zb=Xb(Z()),yu=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=Zb.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};oi.default=yu});var fh=p(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});var Qb=hn(),gu=class extends Qb.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};_u.default=gu});var vu=p(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});var Jb=R(),ev=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),tv=1,rv=2,nv=3,ph=4,iv=5,hh=6,mh=7,yh=8,gh=9,Tu=class extends Jb.AbstractParserWithWordBoundaryChecking{innerPattern(){return ev}innerExtract(e,t){let n={};if(n.year=parseInt(t[tv]),n.month=parseInt(t[rv]),n.day=parseInt(t[nv]),t[ph]!=null)if(n.hour=parseInt(t[ph]),n.minute=parseInt(t[iv]),t[hh]!=null&&(n.second=parseInt(t[hh])),t[mh]!=null&&(n.millisecond=parseInt(t[mh])),t[yh]==null)n.timezoneOffset=0;else{let i=parseInt(t[yh]),s=0;t[gh]!=null&&(s=parseInt(t[gh]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};bu.default=Tu});var _h=p(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});var sv=hn(),Eu=class extends sv.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};wu.default=Eu});var rr=p(yn=>{"use strict";var $r=yn&&yn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yn,"__esModule",{value:!0});yn.includeCommonConfiguration=void 0;var av=$r(lh()),ov=$r(Gs()),Th=$r(ch()),uv=$r(dh()),lv=$r(fh()),cv=$r(vu()),dv=$r(_h());function fv(r,e=!1){return r.parsers.unshift(new cv.default),r.refiners.unshift(new dv.default),r.refiners.unshift(new av.default),r.refiners.unshift(new ov.default),r.refiners.unshift(new Th.default),r.refiners.push(new Th.default),r.refiners.push(new uv.default),r.refiners.push(new lv.default(e)),r}yn.includeCommonConfiguration=fv});var ir=p(re=>{"use strict";var pv=re&&re.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(re,"__esModule",{value:!0});re.noon=re.morning=re.midnight=re.yesterdayEvening=re.evening=re.lastNight=re.tonight=re.theDayAfter=re.tomorrow=re.theDayBefore=re.yesterday=re.today=re.now=void 0;var Ht=fe(),gn=pv(Z()),nr=yt(),ui=Re();function hv(r){let e=gn.default(r.instant),t=new Ht.ParsingComponents(r,{});return nr.assignSimilarDate(t,e),nr.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}re.now=hv;function mv(r){let e=gn.default(r.instant),t=new Ht.ParsingComponents(r,{});return nr.assignSimilarDate(t,e),nr.implySimilarTime(t,e),t}re.today=mv;function yv(r){return bh(r,1)}re.yesterday=yv;function bh(r,e){return Ru(r,-e)}re.theDayBefore=bh;function gv(r){return Ru(r,1)}re.tomorrow=gv;function Ru(r,e){let t=gn.default(r.instant),n=new Ht.ParsingComponents(r,{});return t=t.add(e,"day"),nr.assignSimilarDate(n,t),nr.implySimilarTime(n,t),n}re.theDayAfter=Ru;function _v(r,e=22){let t=gn.default(r.instant),n=new Ht.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",ui.Meridiem.PM),nr.assignSimilarDate(n,t),n}re.tonight=_v;function Tv(r,e=0){let t=gn.default(r.instant),n=new Ht.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),nr.assignSimilarDate(n,t),n.imply("hour",e),n}re.lastNight=Tv;function bv(r,e=20){let t=new Ht.ParsingComponents(r,{});return t.imply("meridiem",ui.Meridiem.PM),t.imply("hour",e),t}re.evening=bv;function vv(r,e=20){let t=gn.default(r.instant),n=new Ht.ParsingComponents(r,{});return t=t.add(-1,"day"),nr.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",ui.Meridiem.PM),n}re.yesterdayEvening=vv;function Ev(r){let e=new Ht.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}re.midnight=Ev;function wv(r,e=6){let t=new Ht.ParsingComponents(r,{});return t.imply("meridiem",ui.Meridiem.AM),t.imply("hour",e),t}re.morning=wv;function Rv(r){let e=new Ht.ParsingComponents(r,{});return e.imply("meridiem",ui.Meridiem.AM),e.imply("hour",12),e}re.noon=Rv});var vh=p(Pt=>{"use strict";var Dv=Pt&&Pt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Mv=Pt&&Pt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Ov=Pt&&Pt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Dv(e,r,t);return Mv(e,r),e},Pv=Pt&&Pt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pt,"__esModule",{value:!0});var Av=Pv(Z()),kv=R(),Nv=yt(),li=Ov(ir()),xv=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,Du=class extends kv.AbstractParserWithWordBoundaryChecking{innerPattern(e){return xv}innerExtract(e,t){let n=Av.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return li.now(e.reference);case"today":return li.today(e.reference);case"yesterday":return li.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return li.tomorrow(e.reference);case"tonight":return li.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),Nv.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};Pt.default=Du});var Eh=p(ci=>{"use strict";var Sv=ci&&ci.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ci,"__esModule",{value:!0});var Hs=Re(),Cv=R(),Iv=Sv(Z()),Fv=yt(),Uv=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,Mu=class extends Cv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Uv}innerExtract(e,t){let n=Iv.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",Hs.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",Hs.Meridiem.PM),i.imply("hour",20);break;case"midnight":Fv.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",Hs.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",Hs.Meridiem.AM),i.imply("hour",12);break}return i}};ci.default=Mu});var jr=p(wr=>{"use strict";var qv=wr&&wr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wr,"__esModule",{value:!0});wr.toDayJSClosestWeekday=wr.toDayJSWeekday=void 0;var wh=qv(Z());function Wv(r,e,t){if(!t)return Rh(r,e);let n=wh.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}wr.toDayJSWeekday=Wv;function Rh(r,e){let t=wh.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}wr.toDayJSClosestWeekday=Rh});var Mh=p(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});var Dh=qe(),Lv=se(),Yv=R(),$v=jr(),jv=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${Lv.matchAnyPattern(Dh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),Bv=1,Gv=2,Hv=3,Ou=class extends Yv.AbstractParserWithWordBoundaryChecking{innerPattern(){return jv}innerExtract(e,t){let n=t[Gv].toLowerCase(),i=Dh.WEEKDAY_DICTIONARY[n],s=t[Bv],a=t[Hv],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=$v.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Pu.default=Ou});var Ah=p(di=>{"use strict";var zv=di&&di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(di,"__esModule",{value:!0});var Ph=qe(),Oh=fe(),Kv=zv(Z()),Vv=R(),Xv=se(),Zv=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${Xv.matchAnyPattern(Ph.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),Qv=1,Jv=2,Au=class extends Vv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Zv}innerExtract(e,t){let n=t[Qv].toLowerCase(),i=t[Jv].toLowerCase(),s=Ph.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,Oh.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,Oh.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=Kv.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};di.default=Au});var At=p(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.ParsingContext=bn.Chrono=void 0;var _n=fe(),e1=ku(),Tn=class{constructor(e){e=e||e1.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new Tn({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new zs(e,t,n),s=[];return this.parsers.forEach(a=>{let o=Tn.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof _n.ParsingResult?c=l:l instanceof _n.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};bn.Chrono=Tn;var zs=class{constructor(e,t,n){this.text=e,this.reference=new _n.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof _n.ParsingComponents?e:new _n.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new _n.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};bn.ParsingContext=zs});var Br=p(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});var kh=Ue(),t1=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),Ks=1,Nh=5,xh=2,Sh=3,Nu=4,xu=class{constructor(e){this.groupNumberMonth=e?Sh:xh,this.groupNumberDay=e?xh:Sh}pattern(){return t1}extract(e,t){if(t[Ks]=="/"||t[Nh]=="/"){t.index+=t[0].length;return}let n=t.index+t[Ks].length,i=t[0].substr(t[Ks].length,t[0].length-t[Ks].length-t[Nh].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[Nu]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[Nu]){let u=parseInt(t[Nu]),l=kh.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=kh.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};Su.default=xu});var Ih=p(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});var Ch=qe(),r1=fe(),n1=R(),i1=gt(),s1=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Ch.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Cu=class extends n1.AbstractParserWithWordBoundaryChecking{innerPattern(){return s1}innerExtract(e,t){let n=t[1].toLowerCase(),i=Ch.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=i1.reverseTimeUnits(i);break}return r1.ParsingComponents.createRelativeFromReference(e.reference,i)}};Iu.default=Cu});var Uh=p(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});var a1=hn(),Fu=fe(),o1=qe(),u1=gt();function Fh(r){return r.text.match(/\s+(before|from)$/i)!=null}function l1(r){return r.text.match(/\s+(after|since)$/i)!=null}var Uu=class extends a1.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!Fh(t)&&!l1(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=o1.parseTimeUnits(t.text);Fh(t)&&(i=u1.reverseTimeUnits(i));let s=Fu.ParsingComponents.createRelativeFromReference(new Fu.ReferenceWithTimezone(n.start.date()),i);return new Fu.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};qu.default=Uu});var ku=p(Te=>{"use strict";var Oe=Te&&Te.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Te,"__esModule",{value:!0});Te.createConfiguration=Te.createCasualConfiguration=Te.parseDate=Te.parse=Te.GB=Te.strict=Te.casual=void 0;var c1=Oe(Fp()),d1=Oe($p()),f1=Oe(zp()),p1=Oe(Xp()),h1=Oe(Jp()),m1=Oe(eh()),y1=Oe(rh()),g1=Oe(nh()),_1=Oe(ih()),T1=Oe(sh()),b1=Oe(uh()),v1=rr(),E1=Oe(vh()),w1=Oe(Eh()),R1=Oe(Mh()),D1=Oe(Ah()),Wu=At(),M1=Oe(Br()),O1=Oe(Ih()),P1=Oe(Uh());Te.casual=new Wu.Chrono(qh(!1));Te.strict=new Wu.Chrono(Vs(!0,!1));Te.GB=new Wu.Chrono(Vs(!1,!0));function A1(r,e,t){return Te.casual.parse(r,e,t)}Te.parse=A1;function k1(r,e,t){return Te.casual.parseDate(r,e,t)}Te.parseDate=k1;function qh(r=!1){let e=Vs(!1,r);return e.parsers.unshift(new E1.default),e.parsers.unshift(new w1.default),e.parsers.unshift(new p1.default),e.parsers.unshift(new D1.default),e.parsers.unshift(new O1.default),e}Te.createCasualConfiguration=qh;function Vs(r=!0,e=!1){return v1.includeCommonConfiguration({parsers:[new M1.default(e),new c1.default,new d1.default,new f1.default,new R1.default,new h1.default,new m1.default,new y1.default(r),new g1.default(r),new _1.default(r)],refiners:[new P1.default,new b1.default,new T1.default]},r)}Te.createConfiguration=Vs});var Wh=p(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});var N1=Yr(),Lu=class extends N1.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Yu.default=Lu});var fi=p(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.parseTimeUnits=ae.TIME_UNITS_PATTERN=ae.parseYear=ae.YEAR_PATTERN=ae.parseNumberPattern=ae.NUMBER_PATTERN=ae.TIME_UNIT_DICTIONARY=ae.INTEGER_WORD_DICTIONARY=ae.MONTH_DICTIONARY=ae.WEEKDAY_DICTIONARY=void 0;var $u=se(),x1=Ue();ae.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};ae.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};ae.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};ae.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};ae.NUMBER_PATTERN=`(?:${$u.matchAnyPattern(ae.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function Yh(r){let e=r.toLowerCase();return ae.INTEGER_WORD_DICTIONARY[e]!==void 0?ae.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}ae.parseNumberPattern=Yh;ae.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function S1(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return x1.findMostLikelyADYear(e)}ae.parseYear=S1;var $h=`(${ae.NUMBER_PATTERN})\\s{0,5}(${$u.matchAnyPattern(ae.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Lh=new RegExp($h,"i");ae.TIME_UNITS_PATTERN=$u.repeatedTimeunitPattern("",$h);function C1(r){let e={},t=r,n=Lh.exec(t);for(;n;)I1(e,n),t=t.substring(n[0].length),n=Lh.exec(t);return e}ae.parseTimeUnits=C1;function I1(r,e){let t=Yh(e[1]),n=ae.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Bh=p(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});var jh=fi(),F1=se(),U1=R(),q1=jr(),W1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${F1.matchAnyPattern(jh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),L1=1,Y1=3,$1=2,ju=class extends U1.AbstractParserWithWordBoundaryChecking{innerPattern(){return W1}innerExtract(e,t){let n=t[$1].toLowerCase(),i=jh.WEEKDAY_DICTIONARY[n],s=t[L1],a=t[Y1],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=q1.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Bu.default=ju});var Kh=p(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});var Rr=Re(),j1=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),B1=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),G1=2,Gh=3,Hh=4,zh=5,vn=class{pattern(e){return j1}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=vn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=B1.exec(i);return s&&(n.end=vn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[G1]),t[Gh]!=null&&(i=parseInt(t[Gh])),i>=60||n>24)return null;if(n>=12&&(s=Rr.Meridiem.PM),t[zh]!=null){if(n>12)return null;let a=t[zh].toLowerCase();a.match(/morgen|vormittag/)&&(s=Rr.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=Rr.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=Rr.Meridiem.AM,n=0):n<6?s=Rr.Meridiem.AM:(s=Rr.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Rr.Meridiem.AM):e.imply("meridiem",Rr.Meridiem.PM),t[Hh]!=null){let a=parseInt(t[Hh]);if(a>=60)return null;e.assign("second",a)}return e}};Gu.default=vn});var Vh=p(pi=>{"use strict";var H1=pi&&pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pi,"__esModule",{value:!0});var z1=H1(Gt()),Hu=class extends z1.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};pi.default=Hu});var Xh=p(hi=>{"use strict";var K1=hi&&hi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hi,"__esModule",{value:!0});var V1=K1(tr()),zu=class extends V1.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};hi.default=zu});var Ku=p(yi=>{"use strict";var X1=yi&&yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yi,"__esModule",{value:!0});var Z1=X1(Z()),Gr=Re(),Q1=R(),J1=yt(),eE=gt(),mi=class extends Q1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=Z1.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return J1.implySimilarTime(s,n),mi.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Gr.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Gr.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Gr.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Gr.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Gr.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Gr.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=eE.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Gr.Meridiem.AM);break}return e}};yi.default=mi});var Jh=p(kt=>{"use strict";var tE=kt&&kt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),rE=kt&&kt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),nE=kt&&kt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&tE(e,r,t);return rE(e,r),e},Qh=kt&&kt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(kt,"__esModule",{value:!0});var iE=Qh(Z()),sE=R(),Hr=yt(),aE=Qh(Ku()),Zh=nE(ir()),oE=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),uE=1,lE=2,Vu=class extends sE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return oE}innerExtract(e,t){let n=iE.default(e.refDate),i=(t[uE]||"").toLowerCase(),s=(t[lE]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=Zh.now(e.reference);break;case"heute":a=Zh.today(e.reference);break;case"morgen":Hr.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),Hr.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),Hr.assignSimilarDate(a,n),Hr.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),Hr.assignSimilarDate(a,n),Hr.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),Hr.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=aE.default.extractTimeComponents(a,s)),a}};kt.default=Vu});var sm=p(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});var cE=Ue(),nm=fi(),im=fi(),dE=se(),fE=R(),pE=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${dE.matchAnyPattern(nm.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${im.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),em=1,tm=2,hE=3,rm=4,Xu=class extends fE.AbstractParserWithWordBoundaryChecking{innerPattern(){return pE}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=nm.MONTH_DICTIONARY[t[hE].toLowerCase()],s=parseInt(t[em]);if(s>31)return t.index=t.index+t[em].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[rm]){let a=im.parseYear(t[rm]);n.start.assign("year",a)}else{let a=cE.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[tm]){let a=parseInt(t[tm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Zu.default=Xu});var am=p(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});var Xs=fi(),mE=fe(),yE=R(),gE=gt(),_E=se(),Qu=class extends yE.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${Xs.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${_E.matchAnyPattern(Xs.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?Xs.parseNumberPattern(t[2]):1,i=Xs.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=gE.reverseTimeUnits(s)),mE.ParsingComponents.createRelativeFromReference(e.reference,s)}};Ju.default=Qu});var lm=p(Pe=>{"use strict";var Nt=Pe&&Pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.createConfiguration=Pe.createCasualConfiguration=Pe.parseDate=Pe.parse=Pe.strict=Pe.casual=void 0;var TE=rr(),om=At(),bE=Nt(Br()),vE=Nt(vu()),EE=Nt(Wh()),wE=Nt(Bh()),RE=Nt(Kh()),DE=Nt(Vh()),ME=Nt(Xh()),OE=Nt(Jh()),PE=Nt(Ku()),AE=Nt(sm()),kE=Nt(am());Pe.casual=new om.Chrono(um());Pe.strict=new om.Chrono(el(!0));function NE(r,e,t){return Pe.casual.parse(r,e,t)}Pe.parse=NE;function xE(r,e,t){return Pe.casual.parseDate(r,e,t)}Pe.parseDate=xE;function um(r=!0){let e=el(!1,r);return e.parsers.unshift(new PE.default),e.parsers.unshift(new OE.default),e.parsers.unshift(new kE.default),e}Pe.createCasualConfiguration=um;function el(r=!0,e=!0){return TE.includeCommonConfiguration({parsers:[new vE.default,new bE.default(e),new EE.default,new RE.default,new AE.default,new wE.default],refiners:[new DE.default,new ME.default]},r)}Pe.createConfiguration=el});var dm=p(xt=>{"use strict";var SE=xt&&xt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),CE=xt&&xt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),IE=xt&&xt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&SE(e,r,t);return CE(e,r),e},FE=xt&&xt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xt,"__esModule",{value:!0});var UE=FE(Z()),qE=Re(),WE=R(),cm=yt(),Zs=IE(ir()),tl=class extends WE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=UE.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return Zs.now(e.reference);case"aujourd'hui":return Zs.today(e.reference);case"hier":return Zs.yesterday(e.reference);case"demain":return Zs.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(cm.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",qE.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),cm.assignSimilarDate(s,n),s.imply("hour",0))}return s}};xt.default=tl});var fm=p(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});var gi=Re(),LE=R(),rl=class extends LE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",gi.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",gi.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",gi.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",gi.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",gi.Meridiem.AM);break}return i}};nl.default=rl});var pm=p(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});var YE=Yr(),il=class extends YE.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};sl.default=il});var hm=p(_i=>{"use strict";var $E=_i&&_i.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_i,"__esModule",{value:!0});var jE=$E(tr()),al=class extends jE.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};_i.default=al});var mm=p(Ti=>{"use strict";var BE=Ti&&Ti.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ti,"__esModule",{value:!0});var GE=BE(Gt()),ol=class extends GE.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};Ti.default=ol});var Dr=p(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.parseTimeUnits=Q.TIME_UNITS_PATTERN=Q.parseYear=Q.YEAR_PATTERN=Q.parseOrdinalNumberPattern=Q.ORDINAL_NUMBER_PATTERN=Q.parseNumberPattern=Q.NUMBER_PATTERN=Q.TIME_UNIT_DICTIONARY=Q.INTEGER_WORD_DICTIONARY=Q.MONTH_DICTIONARY=Q.WEEKDAY_DICTIONARY=void 0;var ul=se();Q.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};Q.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};Q.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};Q.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};Q.NUMBER_PATTERN=`(?:${ul.matchAnyPattern(Q.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function gm(r){let e=r.toLowerCase();return Q.INTEGER_WORD_DICTIONARY[e]!==void 0?Q.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}Q.parseNumberPattern=gm;Q.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function HE(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}Q.parseOrdinalNumberPattern=HE;Q.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function zE(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}Q.parseYear=zE;var _m=`(${Q.NUMBER_PATTERN})\\s{0,5}(${ul.matchAnyPattern(Q.TIME_UNIT_DICTIONARY)})\\s{0,5}`,ym=new RegExp(_m,"i");Q.TIME_UNITS_PATTERN=ul.repeatedTimeunitPattern("",_m);function KE(r){let e={},t=r,n=ym.exec(t);for(;n;)VE(e,n),t=t.substring(n[0].length),n=ym.exec(t);return e}Q.parseTimeUnits=KE;function VE(r,e){let t=gm(e[1]),n=Q.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var bm=p(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});var Tm=Dr(),XE=se(),ZE=R(),QE=jr(),JE=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${XE.matchAnyPattern(Tm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),e0=1,t0=2,ll=class extends ZE.AbstractParserWithWordBoundaryChecking{innerPattern(){return JE}innerExtract(e,t){let n=t[e0].toLowerCase(),i=Tm.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[t0];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=QE.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};cl.default=ll});var Rm=p(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});var bi=Re(),r0=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),n0=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),i0=2,vm=3,Em=4,wm=5,En=class{pattern(e){return r0}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=En.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=n0.exec(i);return s&&(n.end=En.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[i0]),t[vm]!=null&&(i=parseInt(t[vm])),i>=60||n>24)return null;if(n>=12&&(s=bi.Meridiem.PM),t[wm]!=null){if(n>12)return null;let a=t[wm][0].toLowerCase();a=="a"&&(s=bi.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=bi.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",bi.Meridiem.AM):e.imply("meridiem",bi.Meridiem.PM),t[Em]!=null){let a=parseInt(t[Em]);if(a>=60)return null;e.assign("second",a)}return e}};dl.default=En});var km=p(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});var s0=Ue(),Pm=Dr(),Am=Dr(),Qs=Dr(),a0=se(),o0=R(),u0=new RegExp(`(?:on\\s*?)?(${Qs.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${Qs.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${a0.matchAnyPattern(Pm.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Am.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Dm=1,Mm=2,l0=3,Om=4,fl=class extends o0.AbstractParserWithWordBoundaryChecking{innerPattern(){return u0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Pm.MONTH_DICTIONARY[t[l0].toLowerCase()],s=Qs.parseOrdinalNumberPattern(t[Dm]);if(s>31)return t.index=t.index+t[Dm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Om]){let a=Am.parseYear(t[Om]);n.start.assign("year",a)}else{let a=s0.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Mm]){let a=Qs.parseOrdinalNumberPattern(t[Mm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};pl.default=fl});var xm=p(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});var Nm=Dr(),c0=fe(),d0=R(),f0=gt(),hl=class extends d0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${Nm.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=Nm.parseTimeUnits(t[1]),i=f0.reverseTimeUnits(n);return c0.ParsingComponents.createRelativeFromReference(e.reference,i)}};ml.default=hl});var Cm=p(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});var Sm=Dr(),p0=fe(),h0=R(),yl=class extends h0.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${Sm.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=Sm.parseTimeUnits(t[1]);return p0.ParsingComponents.createRelativeFromReference(e.reference,n)}};gl.default=yl});var Im=p(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});var Js=Dr(),m0=fe(),y0=R(),g0=gt(),_0=se(),_l=class extends y0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${Js.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${_0.matchAnyPattern(Js.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?Js.parseNumberPattern(t[1]):1,i=Js.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=g0.reverseTimeUnits(s)),m0.ParsingComponents.createRelativeFromReference(e.reference,s)}};Tl.default=_l});var qm=p(Ae=>{"use strict";var _t=Ae&&Ae.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.createConfiguration=Ae.createCasualConfiguration=Ae.parseDate=Ae.parse=Ae.strict=Ae.casual=void 0;var T0=rr(),Fm=At(),b0=_t(dm()),v0=_t(fm()),E0=_t(Br()),w0=_t(pm()),R0=_t(hm()),D0=_t(mm()),M0=_t(bm()),O0=_t(Rm()),P0=_t(km()),A0=_t(xm()),k0=_t(Cm()),N0=_t(Im());Ae.casual=new Fm.Chrono(Um());Ae.strict=new Fm.Chrono(bl(!0));function x0(r,e,t){return Ae.casual.parse(r,e,t)}Ae.parse=x0;function S0(r,e,t){return Ae.casual.parseDate(r,e,t)}Ae.parseDate=S0;function Um(r=!0){let e=bl(!1,r);return e.parsers.unshift(new b0.default),e.parsers.unshift(new v0.default),e.parsers.unshift(new N0.default),e}Ae.createCasualConfiguration=Um;function bl(r=!0,e=!0){return T0.includeCommonConfiguration({parsers:[new E0.default(e),new P0.default,new w0.default,new O0.default,new A0.default,new k0.default,new M0.default],refiners:[new R0.default,new D0.default]},r)}Ae.createConfiguration=bl});var Wm=p(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.toHankaku=void 0;function C0(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,I0)}ea.toHankaku=C0;function I0(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var Ym=p(vi=>{"use strict";var F0=vi&&vi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vi,"__esModule",{value:!0});var vl=Wm(),U0=Ue(),q0=F0(Z()),W0=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,Lm=1,L0=2,El=3,Y0=4,$0=5,j0=6,wl=class{pattern(){return W0}extract(e,t){let n=parseInt(vl.toHankaku(t[$0])),i=parseInt(vl.toHankaku(t[j0])),s=e.createParsingComponents({day:i,month:n});if(t[Lm]&&t[Lm].match("\u540C|\u4ECA|\u672C")){let a=q0.default(e.refDate);s.assign("year",a.year())}if(t[L0]){let a=t[Y0],o=a=="\u5143"?1:parseInt(vl.toHankaku(a));t[El]=="\u4EE4\u548C"?o+=2018:t[El]=="\u5E73\u6210"?o+=1988:t[El]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=U0.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};vi.default=wl});var $m=p(Ei=>{"use strict";var B0=Ei&&Ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ei,"__esModule",{value:!0});var G0=B0(Gt()),Rl=class extends G0.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};Ei.default=Rl});var Bm=p(St=>{"use strict";var H0=St&&St.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),z0=St&&St.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),K0=St&&St.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&H0(e,r,t);return z0(e,r),e},V0=St&&St.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(St,"__esModule",{value:!0});var X0=V0(Z()),jm=Re(),Dl=K0(ir()),Z0=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,Ml=class{pattern(){return Z0}extract(e,t){let n=t[0],i=X0.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return Dl.yesterday(e.reference);case"\u660E\u65E5":return Dl.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return Dl.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",jm.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",jm.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};St.default=Ml});var zm=p(ke=>{"use strict";var Ol=ke&&ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ke,"__esModule",{value:!0});ke.createConfiguration=ke.createCasualConfiguration=ke.parseDate=ke.parse=ke.strict=ke.casual=void 0;var Q0=Ol(Ym()),J0=Ol($m()),ew=Ol(Bm()),Gm=At();ke.casual=new Gm.Chrono(Hm());ke.strict=new Gm.Chrono(Pl());function tw(r,e,t){return ke.casual.parse(r,e,t)}ke.parse=tw;function rw(r,e,t){return ke.casual.parseDate(r,e,t)}ke.parseDate=rw;function Hm(){let r=Pl();return r.parsers.unshift(new ew.default),r}ke.createCasualConfiguration=Hm;function Pl(){return{parsers:[new Q0.default],refiners:[new J0.default]}}ke.createConfiguration=Pl});var ta=p(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.parseYear=zt.YEAR_PATTERN=zt.MONTH_DICTIONARY=zt.WEEKDAY_DICTIONARY=void 0;zt.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};zt.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};zt.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function nw(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}zt.parseYear=nw});var Vm=p(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});var Km=ta(),iw=se(),sw=R(),aw=jr(),ow=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${iw.matchAnyPattern(Km.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),uw=1,lw=2,cw=3,Al=class extends sw.AbstractParserWithWordBoundaryChecking{innerPattern(){return ow}innerExtract(e,t){let n=t[lw].toLowerCase(),i=Km.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[uw],a=t[cw],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=aw.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};kl.default=Al});var Xm=p(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});var dw=Yr(),Nl=class extends dw.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};xl.default=Nl});var Zm=p(wi=>{"use strict";var fw=wi&&wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wi,"__esModule",{value:!0});var pw=fw(tr()),Sl=class extends pw.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};wi.default=Sl});var Qm=p(Ri=>{"use strict";var hw=Ri&&Ri.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ri,"__esModule",{value:!0});var mw=hw(Gt()),Cl=class extends mw.default{patternBetween(){return/^\s*(?:-)\s*$/i}};Ri.default=Cl});var iy=p(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});var yw=Ue(),ry=ta(),ny=ta(),gw=se(),_w=R(),Tw=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${gw.matchAnyPattern(ry.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${ny.YEAR_PATTERN}))?(?=\\W|$)`,"i"),Jm=1,ey=2,bw=3,ty=4,Il=class extends _w.AbstractParserWithWordBoundaryChecking{innerPattern(){return Tw}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=ry.MONTH_DICTIONARY[t[bw].toLowerCase()],s=parseInt(t[Jm]);if(s>31)return t.index=t.index+t[Jm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[ty]){let a=ny.parseYear(t[ty]);n.start.assign("year",a)}else{let a=yw.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[ey]){let a=parseInt(t[ey]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Fl.default=Il});var sy=p(sr=>{"use strict";var vw=sr&&sr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Ew=sr&&sr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),ww=sr&&sr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&vw(e,r,t);return Ew(e,r),e};Object.defineProperty(sr,"__esModule",{value:!0});var Rw=R(),ra=ww(ir()),Ul=class extends Rw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return ra.now(e.reference);case"hoje":return ra.today(e.reference);case"amanha":case"amanh\xE3":return ra.tomorrow(e.reference);case"ontem":return ra.yesterday(e.reference)}return i}};sr.default=Ul});var ay=p(Di=>{"use strict";var Dw=Di&&Di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Di,"__esModule",{value:!0});var na=Re(),Mw=R(),Ow=yt(),Pw=Dw(Z()),ql=class extends Mw.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=Pw.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",na.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",na.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",na.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":Ow.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",na.Meridiem.AM),i.imply("hour",12);break}return i}};Di.default=ql});var ly=p(Ne=>{"use strict";var Mr=Ne&&Ne.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.createConfiguration=Ne.createCasualConfiguration=Ne.parseDate=Ne.parse=Ne.strict=Ne.casual=void 0;var Aw=rr(),oy=At(),kw=Mr(Br()),Nw=Mr(Vm()),xw=Mr(Xm()),Sw=Mr(Zm()),Cw=Mr(Qm()),Iw=Mr(iy()),Fw=Mr(sy()),Uw=Mr(ay());Ne.casual=new oy.Chrono(uy());Ne.strict=new oy.Chrono(Wl(!0));function qw(r,e,t){return Ne.casual.parse(r,e,t)}Ne.parse=qw;function Ww(r,e,t){return Ne.casual.parseDate(r,e,t)}Ne.parseDate=Ww;function uy(r=!0){let e=Wl(!1,r);return e.parsers.push(new Fw.default),e.parsers.push(new Uw.default),e}Ne.createCasualConfiguration=uy;function Wl(r=!0,e=!0){return Aw.includeCommonConfiguration({parsers:[new kw.default(e),new Nw.default,new xw.default,new Iw.default],refiners:[new Sw.default,new Cw.default]},r)}Ne.createConfiguration=Wl});var cy=p(Mi=>{"use strict";var Lw=Mi&&Mi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mi,"__esModule",{value:!0});var Yw=Lw(Gt()),Ll=class extends Yw.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};Mi.default=Ll});var dy=p(Oi=>{"use strict";var $w=Oi&&Oi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oi,"__esModule",{value:!0});var jw=$w(tr()),Yl=class extends jw.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};Oi.default=Yl});var fy=p(ar=>{"use strict";var Bw=ar&&ar.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Gw=ar&&ar.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Hw=ar&&ar.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Bw(e,r,t);return Gw(e,r),e};Object.defineProperty(ar,"__esModule",{value:!0});var zw=R(),ia=Hw(ir()),$l=class extends zw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return ia.now(e.reference);case"vandaag":return ia.today(e.reference);case"morgen":case"morgend":return ia.tomorrow(e.reference);case"gisteren":return ia.yesterday(e.reference)}return i}};ar.default=$l});var py=p(Pi=>{"use strict";var Kw=Pi&&Pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pi,"__esModule",{value:!0});var sa=Re(),Vw=R(),Xw=Kw(Z()),Zw=yt(),Qw=1,Jw=2,jl=class extends Vw.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=Xw.default(e.refDate),i=e.createParsingComponents();switch(t[Qw]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[Jw].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",sa.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",sa.Meridiem.PM),i.imply("hour",20);break;case"middernacht":Zw.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",sa.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",sa.Meridiem.AM),i.imply("hour",12);break}return i}};Pi.default=jl});var ot=p(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.parseTimeUnits=j.TIME_UNITS_PATTERN=j.parseYear=j.YEAR_PATTERN=j.parseOrdinalNumberPattern=j.ORDINAL_NUMBER_PATTERN=j.parseNumberPattern=j.NUMBER_PATTERN=j.TIME_UNIT_DICTIONARY=j.ORDINAL_WORD_DICTIONARY=j.INTEGER_WORD_DICTIONARY=j.MONTH_DICTIONARY=j.WEEKDAY_DICTIONARY=void 0;var aa=se(),eR=Ue();j.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};j.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};j.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};j.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};j.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};j.NUMBER_PATTERN=`(?:${aa.matchAnyPattern(j.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function my(r){let e=r.toLowerCase();return j.INTEGER_WORD_DICTIONARY[e]!==void 0?j.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}j.parseNumberPattern=my;j.ORDINAL_NUMBER_PATTERN=`(?:${aa.matchAnyPattern(j.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function tR(r){let e=r.toLowerCase();return j.ORDINAL_WORD_DICTIONARY[e]!==void 0?j.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}j.parseOrdinalNumberPattern=tR;j.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function rR(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return eR.findMostLikelyADYear(e)}j.parseYear=rR;var yy=`(${j.NUMBER_PATTERN})\\s{0,5}(${aa.matchAnyPattern(j.TIME_UNIT_DICTIONARY)})\\s{0,5}`,hy=new RegExp(yy,"i");j.TIME_UNITS_PATTERN=aa.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",yy);function nR(r){let e={},t=r,n=hy.exec(t);for(;n;)iR(e,n),t=t.substring(n[0].length),n=hy.exec(t);return e}j.parseTimeUnits=nR;function iR(r,e){let t=my(e[1]),n=j.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var _y=p(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});var gy=ot(),sR=fe(),aR=R(),Bl=class extends aR.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+gy.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=gy.parseTimeUnits(t[1]);return sR.ParsingComponents.createRelativeFromReference(e.reference,n)}};Gl.default=Bl});var by=p(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});var Ty=ot(),oR=se(),uR=R(),lR=jr(),cR=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${oR.matchAnyPattern(Ty.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),dR=1,fR=2,pR=3,Hl=class extends uR.AbstractParserWithWordBoundaryChecking{innerPattern(){return cR}innerExtract(e,t){let n=t[fR].toLowerCase(),i=Ty.WEEKDAY_DICTIONARY[n],s=t[dR],a=t[pR],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=lR.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};zl.default=Hl});var My=p(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});var hR=Ue(),Ry=ot(),oa=ot(),Dy=ot(),mR=se(),yR=R(),gR=new RegExp(`(?:on\\s*?)?(${oa.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${oa.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+mR.matchAnyPattern(Ry.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${Dy.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),_R=3,vy=1,Ey=2,wy=4,Kl=class extends yR.AbstractParserWithWordBoundaryChecking{innerPattern(){return gR}innerExtract(e,t){let n=Ry.MONTH_DICTIONARY[t[_R].toLowerCase()],i=oa.parseOrdinalNumberPattern(t[vy]);if(i>31)return t.index=t.index+t[vy].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[wy]){let u=Dy.parseYear(t[wy]);s.assign("year",u)}else{let u=hR.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[Ey])return s;let a=oa.parseOrdinalNumberPattern(t[Ey]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Vl.default=Kl});var ky=p(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});var Py=ot(),TR=Ue(),bR=se(),Ay=ot(),vR=R(),ER=new RegExp(`(${bR.matchAnyPattern(Py.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Ay.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),wR=1,Oy=2,Xl=class extends vR.AbstractParserWithWordBoundaryChecking{innerPattern(){return ER}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[wR],s=Py.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[Oy]){let a=Ay.parseYear(t[Oy]);n.assign("year",a)}else{let a=TR.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};Zl.default=Xl});var Ny=p(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});var RR=R(),DR=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),MR=1,OR=2,Ql=class extends RR.AbstractParserWithWordBoundaryChecking{innerPattern(){return DR}innerExtract(e,t){let n=parseInt(t[OR]),i=parseInt(t[MR]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Jl.default=Ql});var xy=p(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});var PR=Yr(),ec=class extends PR.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};tc.default=ec});var Iy=p(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});var Cy=ot(),AR=se(),kR=R(),NR=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${AR.matchAnyPattern(Cy.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),xR=1,SR=2,Sy=3,CR=4,rc=class extends kR.AbstractParserWithWordBoundaryChecking{innerPattern(){return NR}innerExtract(e,t){let n=t[Sy]?parseInt(t[Sy]):Cy.MONTH_DICTIONARY[t[SR].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[xR]);return{day:parseInt(t[CR]),month:n,year:i}}};nc.default=rc});var Fy=p(Ai=>{"use strict";var IR=Ai&&Ai.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ai,"__esModule",{value:!0});var FR=R(),ua=Re(),ic=yt(),UR=IR(Z()),qR=1,WR=2,sc=class extends FR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[qR].toLowerCase(),i=t[WR].toLowerCase(),s=e.createParsingComponents(),a=UR.default(e.refDate);switch(n){case"gisteren":ic.assignSimilarDate(s,a.add(-1,"day"));break;case"van":ic.assignSimilarDate(s,a);break;case"morgen":ic.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",ua.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",ua.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",ua.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",ua.Meridiem.PM),s.imply("hour",20);break}return s}};Ai.default=sc});var qy=p(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});var Uy=ot(),LR=fe(),YR=R(),$R=gt(),jR=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${Uy.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),ac=class extends YR.AbstractParserWithWordBoundaryChecking{innerPattern(){return jR}innerExtract(e,t){let n=t[1].toLowerCase(),i=Uy.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=$R.reverseTimeUnits(i);break}return LR.ParsingComponents.createRelativeFromReference(e.reference,i)}};oc.default=ac});var Yy=p(ki=>{"use strict";var BR=ki&&ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ki,"__esModule",{value:!0});var Ly=ot(),Wy=fe(),GR=BR(Z()),HR=R(),zR=se(),KR=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${zR.matchAnyPattern(Ly.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),VR=1,XR=2,uc=class extends HR.AbstractParserWithWordBoundaryChecking{innerPattern(){return KR}innerExtract(e,t){let n=t[VR].toLowerCase(),i=t[XR].toLowerCase(),s=Ly.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,Wy.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,Wy.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=GR.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};ki.default=uc});var $y=p(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});var cc=ot(),ZR=fe(),QR=R(),JR=gt(),eD=new RegExp("("+cc.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),tD=new RegExp("("+cc.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),lc=class extends QR.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?tD:eD}innerExtract(e,t){let n=cc.parseTimeUnits(t[1]),i=JR.reverseTimeUnits(n);return ZR.ParsingComponents.createRelativeFromReference(e.reference,i)}};dc.default=lc});var jy=p(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});var pc=ot(),rD=fe(),nD=R(),iD=new RegExp("("+pc.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),sD=new RegExp("("+pc.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),aD=1,fc=class extends nD.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?sD:iD}innerExtract(e,t){let n=pc.parseTimeUnits(t[aD]);return rD.ParsingComponents.createRelativeFromReference(e.reference,n)}};hc.default=fc});var zy=p(xe=>{"use strict";var We=xe&&xe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xe,"__esModule",{value:!0});xe.createConfiguration=xe.createCasualConfiguration=xe.parseDate=xe.parse=xe.strict=xe.casual=void 0;var oD=rr(),By=At(),uD=We(cy()),lD=We(dy()),cD=We(fy()),dD=We(py()),fD=We(Br()),pD=We(_y()),hD=We(by()),mD=We(My()),Gy=We(ky()),yD=We(Ny()),gD=We(xy()),_D=We(Iy()),TD=We(Fy()),bD=We(qy()),vD=We(Yy()),ED=We($y()),wD=We(jy());xe.casual=new By.Chrono(Hy());xe.strict=new By.Chrono(mc(!0));function RD(r,e,t){return xe.casual.parse(r,e,t)}xe.parse=RD;function DD(r,e,t){return xe.casual.parseDate(r,e,t)}xe.parseDate=DD;function Hy(r=!0){let e=mc(!1,r);return e.parsers.unshift(new cD.default),e.parsers.unshift(new dD.default),e.parsers.unshift(new TD.default),e.parsers.unshift(new Gy.default),e.parsers.unshift(new vD.default),e.parsers.unshift(new bD.default),e}xe.createCasualConfiguration=Hy;function mc(r=!0,e=!0){return oD.includeCommonConfiguration({parsers:[new fD.default(e),new pD.default,new mD.default,new Gy.default,new hD.default,new _D.default,new yD.default,new gD.default(r),new ED.default(r),new wD.default(r)],refiners:[new lD.default,new uD.default]},r)}xe.createConfiguration=mc});var Zy=p(Ni=>{"use strict";var MD=Ni&&Ni.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ni,"__esModule",{value:!0});var OD=MD(Z()),PD=R(),AD=1,Ky=2,kD=3,Vy=4,Xy=5,ND=6,yc=class extends PD.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=OD.default(e.refDate),a=s;if(t[AD])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[Ky]){let o=t[Ky],u=t[kD];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[Vy]){let u=t[Vy][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[Xy]){let o=t[Xy];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[ND];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Ni.default=yc});var wn=p(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.zhStringToYear=Xe.zhStringToNumber=Xe.WEEKDAY_OFFSET=Xe.NUMBER=void 0;Xe.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};Xe.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function xD(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?Xe.NUMBER[n]:e*Xe.NUMBER[n]:e+=Xe.NUMBER[n]}return e}Xe.zhStringToNumber=xD;function SD(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+Xe.NUMBER[n]}return parseInt(e)}Xe.zhStringToYear=SD});var Jy=p(xi=>{"use strict";var CD=xi&&xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xi,"__esModule",{value:!0});var ID=CD(Z()),FD=R(),zr=wn(),gc=1,Qy=2,_c=3,Tc=class extends FD.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(zr.NUMBER).join("")+"]{4}|["+Object.keys(zr.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(zr.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(zr.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=ID.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[Qy]);if(isNaN(s)&&(s=zr.zhStringToNumber(t[Qy])),i.start.assign("month",s),t[_c]){let a=parseInt(t[_c]);isNaN(a)&&(a=zr.zhStringToNumber(t[_c])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[gc]){let a=parseInt(t[gc]);isNaN(a)&&(a=zr.zhStringToYear(t[gc])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};xi.default=Tc});var tg=p(Si=>{"use strict";var UD=Si&&Si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Si,"__esModule",{value:!0});var qD=UD(Z()),WD=R(),eg=wn(),LD=new RegExp("(\\d+|["+Object.keys(eg.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),bc=1,YD=2,vc=class extends WD.AbstractParserWithWordBoundaryChecking{innerPattern(){return LD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[bc]);if(isNaN(i)&&(i=eg.zhStringToNumber(t[bc])),isNaN(i)){let u=t[bc];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=qD.default(e.refDate),o=t[YD][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Si.default=vc});var ng=p(Ci=>{"use strict";var $D=Ci&&Ci.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ci,"__esModule",{value:!0});var jD=$D(Z()),BD=R(),rg=wn(),GD=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(rg.WEEKDAY_OFFSET).join("|")+")"),Ec=class extends BD.AbstractParserWithWordBoundaryChecking{innerPattern(){return GD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=rg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=jD.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Ci.default=Ec});var ig=p(Ii=>{"use strict";var HD=Ii&&Ii.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ii,"__esModule",{value:!0});var zD=HD(Z()),KD=R(),bt=wn(),VD=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(bt.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(bt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(bt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),XD=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(bt.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(bt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(bt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),la=1,ca=2,da=3,fa=4,pa=5,ha=6,Tt=7,Rn=8,ma=9,wc=class extends KD.AbstractParserWithWordBoundaryChecking{innerPattern(){return VD}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=zD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[la]){var a=t[la];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[fa]){var o=t[fa];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[Rn]){var d=parseInt(t[Rn]);if(isNaN(d)&&(d=bt.zhStringToNumber(t[Rn])),d>=60)return null;i.start.assign("second",d)}if(u=parseInt(t[ha]),isNaN(u)&&(u=bt.zhStringToNumber(t[ha])),t[Tt]?t[Tt]=="\u534A"?l=30:t[Tt]=="\u6B63"||t[Tt]=="\u6574"?l=0:(l=parseInt(t[Tt]),isNaN(l)&&(l=bt.zhStringToNumber(t[Tt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[ma]){if(u>12)return null;var f=t[ma][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12))}else if(t[ca]){var h=t[ca],g=h[0];g=="\u671D"||g=="\u65E9"?(c=0,u==12&&(u=0)):g=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[da]){var m=t[da],y=m[0];y=="\u4E0A"||y=="\u671D"||y=="\u65E9"||y=="\u51CC"?(c=0,u==12&&(u=0)):(y=="\u4E0B"||y=="\u664F"||y=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[pa]){var P=t[pa],w=P[0];w=="\u4E0A"||w=="\u671D"||w=="\u65E9"||w=="\u51CC"?(c=0,u==12&&(u=0)):(w=="\u4E0B"||w=="\u664F"||w=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=XD.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let N=s.clone();if(i.end=e.createParsingComponents(),t[la]){var a=t[la];a=="\u660E"||a=="\u807D"?n.hour()>1&&N.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?N.add(-1,"day"):a=="\u524D"?N.add(-2,"day"):a=="\u5927\u524D"?N.add(-3,"day"):a=="\u5F8C"?N.add(2,"day"):a=="\u5927\u5F8C"&&N.add(3,"day"),i.end.assign("day",N.date()),i.end.assign("month",N.month()+1),i.end.assign("year",N.year())}else if(t[fa]){var o=t[fa];o=="\u660E"||o=="\u807D"?N.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?N.add(-1,"day"):o=="\u524D"?N.add(-2,"day"):o=="\u5927\u524D"?N.add(-3,"day"):o=="\u5F8C"?N.add(2,"day"):o=="\u5927\u5F8C"&&N.add(3,"day"),i.end.assign("day",N.date()),i.end.assign("month",N.month()+1),i.end.assign("year",N.year())}else i.end.imply("day",N.date()),i.end.imply("month",N.month()+1),i.end.imply("year",N.year());if(u=0,l=0,c=-1,t[Rn]){var d=parseInt(t[Rn]);if(isNaN(d)&&(d=bt.zhStringToNumber(t[Rn])),d>=60)return null;i.end.assign("second",d)}if(u=parseInt(t[ha]),isNaN(u)&&(u=bt.zhStringToNumber(t[ha])),t[Tt]?t[Tt]=="\u534A"?l=30:t[Tt]=="\u6B63"||t[Tt]=="\u6574"?l=0:(l=parseInt(t[Tt]),isNaN(l)&&(l=bt.zhStringToNumber(t[Tt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[ma]){if(u>12)return null;var f=t[ma][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[ca]){var h=t[ca],g=h[0];g=="\u671D"||g=="\u65E9"?(c=0,u==12&&(u=0)):g=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[da]){var m=t[da],y=m[0];y=="\u4E0A"||y=="\u671D"||y=="\u65E9"||y=="\u51CC"?(c=0,u==12&&(u=0)):(y=="\u4E0B"||y=="\u664F"||y=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[pa]){var P=t[pa],w=P[0];w=="\u4E0A"||w=="\u671D"||w=="\u65E9"||w=="\u51CC"?(c=0,u==12&&(u=0)):(w=="\u4E0B"||w=="\u664F"||w=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};Ii.default=wc});var ag=p(Fi=>{"use strict";var ZD=Fi&&Fi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fi,"__esModule",{value:!0});var QD=ZD(Z()),JD=R(),sg=wn(),eM=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(sg.WEEKDAY_OFFSET).join("|")+")"),Rc=class extends JD.AbstractParserWithWordBoundaryChecking{innerPattern(){return eM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=sg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=QD.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};Fi.default=Rc});var og=p(Ui=>{"use strict";var tM=Ui&&Ui.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ui,"__esModule",{value:!0});var rM=tM(Gt()),Dc=class extends rM.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};Ui.default=Dc});var ug=p(qi=>{"use strict";var nM=qi&&qi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qi,"__esModule",{value:!0});var iM=nM(tr()),Mc=class extends iM.default{patternBetween(){return/^\s*$/i}};qi.default=Mc});var lg=p(be=>{"use strict";var or=be&&be.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(be,"__esModule",{value:!0});be.createConfiguration=be.createCasualConfiguration=be.parseDate=be.parse=be.strict=be.casual=be.hant=void 0;var Oc=At(),sM=or(Gs()),aM=rr(),oM=or(Zy()),uM=or(Jy()),lM=or(tg()),cM=or(ng()),dM=or(ig()),fM=or(ag()),pM=or(og()),hM=or(ug());be.hant=new Oc.Chrono(Pc());be.casual=new Oc.Chrono(Pc());be.strict=new Oc.Chrono(Ac());function mM(r,e,t){return be.casual.parse(r,e,t)}be.parse=mM;function yM(r,e,t){return be.casual.parseDate(r,e,t)}be.parseDate=yM;function Pc(){let r=Ac();return r.parsers.unshift(new oM.default),r}be.createCasualConfiguration=Pc;function Ac(){let r=aM.includeCommonConfiguration({parsers:[new uM.default,new cM.default,new fM.default,new dM.default,new lM.default],refiners:[new pM.default,new hM.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof sM.default)),r}be.createConfiguration=Ac});var pg=p(Wi=>{"use strict";var gM=Wi&&Wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wi,"__esModule",{value:!0});var _M=gM(Z()),TM=R(),bM=1,cg=2,vM=3,dg=4,fg=5,EM=6,kc=class extends TM.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=_M.default(e.refDate),a=s;if(t[bM])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[cg]){let o=t[cg],u=t[vM];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[dg]){let u=t[dg][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[fg]){let o=t[fg];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[EM];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Wi.default=kc});var Dn=p(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.zhStringToYear=Ze.zhStringToNumber=Ze.WEEKDAY_OFFSET=Ze.NUMBER=void 0;Ze.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};Ze.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function wM(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?Ze.NUMBER[n]:e*Ze.NUMBER[n]:e+=Ze.NUMBER[n]}return e}Ze.zhStringToNumber=wM;function RM(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+Ze.NUMBER[n]}return parseInt(e)}Ze.zhStringToYear=RM});var mg=p(Li=>{"use strict";var DM=Li&&Li.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Li,"__esModule",{value:!0});var MM=DM(Z()),OM=R(),Kr=Dn(),Nc=1,hg=2,xc=3,Sc=class extends OM.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Kr.NUMBER).join("")+"]{4}|["+Object.keys(Kr.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Kr.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Kr.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=MM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[hg]);if(isNaN(s)&&(s=Kr.zhStringToNumber(t[hg])),i.start.assign("month",s),t[xc]){let a=parseInt(t[xc]);isNaN(a)&&(a=Kr.zhStringToNumber(t[xc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[Nc]){let a=parseInt(t[Nc]);isNaN(a)&&(a=Kr.zhStringToYear(t[Nc])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};Li.default=Sc});var gg=p(Yi=>{"use strict";var PM=Yi&&Yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yi,"__esModule",{value:!0});var AM=PM(Z()),kM=R(),yg=Dn(),NM=new RegExp("(\\d+|["+Object.keys(yg.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),Cc=1,xM=2,Ic=class extends kM.AbstractParserWithWordBoundaryChecking{innerPattern(){return NM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[Cc]);if(isNaN(i)&&(i=yg.zhStringToNumber(t[Cc])),isNaN(i)){let u=t[Cc];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=AM.default(e.refDate),o=t[xM][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Yi.default=Ic});var Tg=p($i=>{"use strict";var SM=$i&&$i.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($i,"__esModule",{value:!0});var CM=SM(Z()),IM=R(),_g=Dn(),FM=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(_g.WEEKDAY_OFFSET).join("|")+")"),Fc=class extends IM.AbstractParserWithWordBoundaryChecking{innerPattern(){return FM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=_g.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=CM.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};$i.default=Fc});var bg=p(ji=>{"use strict";var UM=ji&&ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ji,"__esModule",{value:!0});var qM=UM(Z()),WM=R(),Et=Dn(),LM=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Et.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Et.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Et.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),YM=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Et.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Et.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Et.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),ya=1,ga=2,_a=3,Ta=4,ba=5,va=6,vt=7,Mn=8,Ea=9,Uc=class extends WM.AbstractParserWithWordBoundaryChecking{innerPattern(){return LM}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=qM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[ya]){let c=t[ya];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[Ta]){let c=t[Ta];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[Mn]){let c=parseInt(t[Mn]);if(isNaN(c)&&(c=Et.zhStringToNumber(t[Mn])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[va]),isNaN(a)&&(a=Et.zhStringToNumber(t[va])),t[vt]?t[vt]=="\u534A"?o=30:t[vt]=="\u6B63"||t[vt]=="\u6574"?o=0:(o=parseInt(t[vt]),isNaN(o)&&(o=Et.zhStringToNumber(t[vt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[Ea]){if(a>12)return null;let c=t[Ea][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[ga]){let d=t[ga][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[_a]){let d=t[_a][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[ba]){let d=t[ba][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=YM.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[ya]){let c=t[ya];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[Ta]){let c=t[Ta];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[Mn]){let c=parseInt(t[Mn]);if(isNaN(c)&&(c=Et.zhStringToNumber(t[Mn])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[va]),isNaN(a)&&(a=Et.zhStringToNumber(t[va])),t[vt]?t[vt]=="\u534A"?o=30:t[vt]=="\u6B63"||t[vt]=="\u6574"?o=0:(o=parseInt(t[vt]),isNaN(o)&&(o=Et.zhStringToNumber(t[vt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[Ea]){if(a>12)return null;let c=t[Ea][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[ga]){let d=t[ga][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[_a]){let d=t[_a][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[ba]){let d=t[ba][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};ji.default=Uc});var Eg=p(Bi=>{"use strict";var $M=Bi&&Bi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bi,"__esModule",{value:!0});var jM=$M(Z()),BM=R(),vg=Dn(),GM=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(vg.WEEKDAY_OFFSET).join("|")+")"),qc=class extends BM.AbstractParserWithWordBoundaryChecking{innerPattern(){return GM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=vg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=jM.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};Bi.default=qc});var wg=p(Gi=>{"use strict";var HM=Gi&&Gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gi,"__esModule",{value:!0});var zM=HM(Gt()),Wc=class extends zM.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};Gi.default=Wc});var Rg=p(Hi=>{"use strict";var KM=Hi&&Hi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Hi,"__esModule",{value:!0});var VM=KM(tr()),Lc=class extends VM.default{patternBetween(){return/^\s*$/i}};Hi.default=Lc});var Dg=p(ve=>{"use strict";var ur=ve&&ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ve,"__esModule",{value:!0});ve.createConfiguration=ve.createCasualConfiguration=ve.parseDate=ve.parse=ve.strict=ve.casual=ve.hans=void 0;var Yc=At(),XM=ur(Gs()),ZM=rr(),QM=ur(pg()),JM=ur(mg()),eO=ur(gg()),tO=ur(Tg()),rO=ur(bg()),nO=ur(Eg()),iO=ur(wg()),sO=ur(Rg());ve.hans=new Yc.Chrono($c());ve.casual=new Yc.Chrono($c());ve.strict=new Yc.Chrono(jc());function aO(r,e,t){return ve.casual.parse(r,e,t)}ve.parse=aO;function oO(r,e,t){return ve.casual.parseDate(r,e,t)}ve.parseDate=oO;function $c(){let r=jc();return r.parsers.unshift(new QM.default),r}ve.createCasualConfiguration=$c;function jc(){let r=ZM.includeCommonConfiguration({parsers:[new JM.default,new tO.default,new nO.default,new rO.default,new eO.default],refiners:[new iO.default,new sO.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof XM.default)),r}ve.createConfiguration=jc});var Og=p(ut=>{"use strict";var Mg=ut&&ut.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),uO=ut&&ut.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),lO=ut&&ut.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Mg(e,r,t)},cO=ut&&ut.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Mg(e,r,t);return uO(e,r),e};Object.defineProperty(ut,"__esModule",{value:!0});ut.hans=void 0;lO(lg(),ut);ut.hans=cO(Dg())});var Qe=p(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.parseTimeUnits=U.TIME_UNITS_PATTERN=U.parseYear=U.YEAR_PATTERN=U.parseOrdinalNumberPattern=U.ORDINAL_NUMBER_PATTERN=U.parseNumberPattern=U.NUMBER_PATTERN=U.TIME_UNIT_DICTIONARY=U.ORDINAL_WORD_DICTIONARY=U.INTEGER_WORD_DICTIONARY=U.MONTH_DICTIONARY=U.FULL_MONTH_NAME_DICTIONARY=U.WEEKDAY_DICTIONARY=U.REGEX_PARTS=void 0;var wa=se(),dO=Ue();U.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};U.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};U.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};U.MONTH_DICTIONARY=Object.assign(Object.assign({},U.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});U.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};U.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};U.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};U.NUMBER_PATTERN=`(?:${wa.matchAnyPattern(U.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function Ag(r){let e=r.toLowerCase();return U.INTEGER_WORD_DICTIONARY[e]!==void 0?U.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}U.parseNumberPattern=Ag;U.ORDINAL_NUMBER_PATTERN=`(?:${wa.matchAnyPattern(U.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function fO(r){let e=r.toLowerCase();return U.ORDINAL_WORD_DICTIONARY[e]!==void 0?U.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}U.parseOrdinalNumberPattern=fO;var Bc="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";U.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${Bc}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${Bc}|[5-9][0-9]${Bc})`;function pO(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return dO.findMostLikelyADYear(e)}U.parseYear=pO;var kg=`(${U.NUMBER_PATTERN})\\s{0,3}(${wa.matchAnyPattern(U.TIME_UNIT_DICTIONARY)})`,Pg=new RegExp(kg,"i");U.TIME_UNITS_PATTERN=wa.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",kg);function hO(r){let e={},t=r,n=Pg.exec(t);for(;n;)mO(e,n),t=t.substring(n[0].length).trim(),n=Pg.exec(t);return e}U.parseTimeUnits=hO;function mO(r,e){let t=Ag(e[1]),n=U.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var xg=p(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});var zi=Qe(),yO=fe(),gO=R(),Ng=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${zi.TIME_UNITS_PATTERN})${zi.REGEX_PARTS.rightBoundary}`,_O=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${Ng}`,zi.REGEX_PARTS.flags),TO=new RegExp(Ng,"i"),Gc=class extends gO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return zi.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?TO:_O}innerExtract(e,t){let n=zi.parseTimeUnits(t[1]);return yO.ParsingComponents.createRelativeFromReference(e.reference,n)}};Hc.default=Gc});var Ug=p(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});var bO=Ue(),Ki=Qe(),Fg=Qe(),Ra=Qe(),vO=se(),EO=R(),wO=new RegExp(`(?:\u0441)?\\s*(${Ra.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${Ra.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${vO.matchAnyPattern(Ki.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${Fg.YEAR_PATTERN}(?![^\\s]\\d)))?${Ki.REGEX_PARTS.rightBoundary}`,Ki.REGEX_PARTS.flags),Sg=1,Cg=2,RO=3,Ig=4,zc=class extends EO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ki.REGEX_PARTS.leftBoundary}innerPattern(){return wO}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Ki.MONTH_DICTIONARY[t[RO].toLowerCase()],s=Ra.parseOrdinalNumberPattern(t[Sg]);if(s>31)return t.index=t.index+t[Sg].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Ig]){let a=Fg.parseYear(t[Ig]);n.start.assign("year",a)}else{let a=bO.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Cg]){let a=Ra.parseOrdinalNumberPattern(t[Cg]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Kc.default=zc});var Lg=p(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});var Vi=Qe(),DO=Ue(),MO=se(),Wg=Qe(),OO=R(),PO=new RegExp(`((?:\u0432)\\s*)?(${MO.matchAnyPattern(Vi.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Wg.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,Vi.REGEX_PARTS.flags),AO=2,qg=3,Vc=class extends OO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Vi.REGEX_PARTS.leftBoundary}innerPattern(){return PO}innerExtract(e,t){let n=t[AO].toLowerCase();if(t[0].length<=3&&!Vi.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=Vi.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[qg]){let a=Wg.parseYear(t[qg]);i.start.assign("year",a)}else{let a=DO.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Xc.default=Vc});var $g=p(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});var Da=Re(),kO=Yr(),Yg=Qe(),Zc=class extends kO.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return Yg.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${Yg.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",Da.Meridiem.PM)):i<6&&n.assign("meridiem",Da.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",Da.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",Da.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Qc.default=Zc});var jg=p(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});var Ma=Qe(),NO=fe(),xO=R(),SO=gt(),CO=new RegExp(`(${Ma.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,Ma.REGEX_PARTS.flags),Jc=class extends xO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ma.REGEX_PARTS.leftBoundary}innerPattern(){return CO}innerExtract(e,t){let n=Ma.parseTimeUnits(t[1]),i=SO.reverseTimeUnits(n);return NO.ParsingComponents.createRelativeFromReference(e.reference,i)}};ed.default=Jc});var Bg=p(Xi=>{"use strict";var IO=Xi&&Xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xi,"__esModule",{value:!0});var FO=IO(Gt()),td=class extends FO.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};Xi.default=td});var Gg=p(Zi=>{"use strict";var UO=Zi&&Zi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zi,"__esModule",{value:!0});var qO=UO(tr()),rd=class extends qO.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};Zi.default=rd});var Hg=p(lr=>{"use strict";var WO=lr&&lr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),LO=lr&&lr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),YO=lr&&lr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&WO(e,r,t);return LO(e,r),e};Object.defineProperty(lr,"__esModule",{value:!0});var $O=R(),Qi=YO(ir()),nd=Qe(),jO=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${nd.REGEX_PARTS.rightBoundary}`,nd.REGEX_PARTS.flags),id=class extends $O.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return nd.REGEX_PARTS.leftBoundary}innerPattern(e){return jO}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return Qi.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return Qi.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return Qi.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return Qi.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return Qi.theDayBefore(e.reference,2)}return i}};lr.default=id});var zg=p(Ct=>{"use strict";var BO=Ct&&Ct.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),GO=Ct&&Ct.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),HO=Ct&&Ct.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&BO(e,r,t);return GO(e,r),e},zO=Ct&&Ct.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ct,"__esModule",{value:!0});var KO=R(),Vr=HO(ir()),VO=yt(),XO=zO(Z()),sd=Qe(),ZO=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${sd.REGEX_PARTS.rightBoundary}`,sd.REGEX_PARTS.flags),ad=class extends KO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return sd.REGEX_PARTS.leftBoundary}innerPattern(){return ZO}innerExtract(e,t){let n=XO.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return Vr.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return Vr.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return Vr.morning(e.reference);if(i.match(/в\s*полдень/))return Vr.noon(e.reference);if(i.match(/прошлой\s*ночью/))return Vr.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return Vr.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),VO.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?Vr.midnight(e.reference):s}};Ct.default=ad});var Kg=p(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});var Ji=Qe(),QO=se(),JO=R(),eP=jr(),tP=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${QO.matchAnyPattern(Ji.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${Ji.REGEX_PARTS.rightBoundary}`,Ji.REGEX_PARTS.flags),rP=1,nP=2,iP=3,od=class extends JO.AbstractParserWithWordBoundaryChecking{innerPattern(){return tP}patternLeftBoundary(){return Ji.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[nP].toLowerCase(),i=Ji.WEEKDAY_DICTIONARY[n],s=t[rP],a=t[iP],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=eP.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};ud.default=od});var Xg=p(ts=>{"use strict";var sP=ts&&ts.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ts,"__esModule",{value:!0});var es=Qe(),Vg=fe(),aP=sP(Z()),oP=R(),uP=se(),lP=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${uP.matchAnyPattern(es.TIME_UNIT_DICTIONARY)})(?=\\s*)${es.REGEX_PARTS.rightBoundary}`,es.REGEX_PARTS.flags),cP=1,dP=2,ld=class extends oP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return es.REGEX_PARTS.leftBoundary}innerPattern(){return lP}innerExtract(e,t){let n=t[cP].toLowerCase(),i=t[dP].toLowerCase(),s=es.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,Vg.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,Vg.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=aP.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};ts.default=ld});var Zg=p(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});var rs=Qe(),fP=fe(),pP=R(),hP=gt(),mP=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${rs.TIME_UNITS_PATTERN})${rs.REGEX_PARTS.rightBoundary}`,rs.REGEX_PARTS.flags),cd=class extends pP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return rs.REGEX_PARTS.leftBoundary}innerPattern(){return mP}innerExtract(e,t){let n=t[1].toLowerCase(),i=rs.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=hP.reverseTimeUnits(i);break}return fP.ParsingComponents.createRelativeFromReference(e.reference,i)}};dd.default=cd});var e_=p(Se=>{"use strict";var lt=Se&&Se.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Se,"__esModule",{value:!0});Se.createConfiguration=Se.createCasualConfiguration=Se.parseDate=Se.parse=Se.strict=Se.casual=void 0;var yP=lt(xg()),gP=lt(Ug()),_P=lt(Lg()),TP=lt($g()),bP=lt(jg()),vP=lt(Bg()),EP=lt(Gg()),wP=rr(),RP=lt(Hg()),DP=lt(zg()),MP=lt(Kg()),OP=lt(Xg()),Qg=At(),PP=lt(Br()),AP=lt(Zg());Se.casual=new Qg.Chrono(Jg());Se.strict=new Qg.Chrono(fd(!0));function kP(r,e,t){return Se.casual.parse(r,e,t)}Se.parse=kP;function NP(r,e,t){return Se.casual.parseDate(r,e,t)}Se.parseDate=NP;function Jg(){let r=fd(!1);return r.parsers.unshift(new RP.default),r.parsers.unshift(new DP.default),r.parsers.unshift(new _P.default),r.parsers.unshift(new OP.default),r.parsers.unshift(new AP.default),r}Se.createCasualConfiguration=Jg;function fd(r=!0){return wP.includeCommonConfiguration({parsers:[new PP.default(!0),new yP.default,new gP.default,new MP.default,new TP.default(r),new bP.default],refiners:[new EP.default,new vP.default]},r)}Se.createConfiguration=fd});var Re=p(L=>{"use strict";var xP=L&&L.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),SP=L&&L.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Or=L&&L.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&xP(e,r,t);return SP(e,r),e};Object.defineProperty(L,"__esModule",{value:!0});L.parseDate=L.parse=L.casual=L.strict=L.ru=L.zh=L.nl=L.pt=L.ja=L.fr=L.de=L.Meridiem=L.Chrono=L.en=void 0;var pd=Or(ku());L.en=pd;var CP=At();Object.defineProperty(L,"Chrono",{enumerable:!0,get:function(){return CP.Chrono}});var IP;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(IP=L.Meridiem||(L.Meridiem={}));var FP=Or(lm());L.de=FP;var UP=Or(qm());L.fr=UP;var qP=Or(zm());L.ja=qP;var WP=Or(ly());L.pt=WP;var LP=Or(zy());L.nl=LP;var YP=Or(Og());L.zh=YP;var $P=Or(e_());L.ru=$P;L.strict=pd.strict;L.casual=pd.casual;function jP(r,e,t){return L.casual.parse(r,e,t)}L.parse=jP;function BP(r,e,t){return L.casual.parseDate(r,e,t)}L.parseDate=BP});var Kt=p(kr=>{"use strict";kr.__esModule=!0;var JP;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})(JP=kr.Operators||(kr.Operators={}));var eA;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})(eA=kr.StructuralCharacters||(kr.StructuralCharacters={}));var tA;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(tA=kr.Tokens||(kr.Tokens={}))});var Dd=p(Wa=>{"use strict";Wa.__esModule=!0;var he=Kt();Wa.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};Wa.VALID_TOKENS={identifierOnly:[{name:he.Tokens.IDENTIFIER},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:he.Tokens.IDENTIFIER},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.OPEN_PARENTHESIS},{name:he.Tokens.OPERATOR,value:he.Operators.NOT}],binaryOperator:[{name:he.Tokens.OPERATOR,value:he.Operators.AND},{name:he.Tokens.OPERATOR,value:he.Operators.OR},{name:he.Tokens.OPERATOR,value:he.Operators.XOR}],binaryOperatorOrClose:[{name:he.Tokens.OPERATOR,value:he.Operators.AND},{name:he.Tokens.OPERATOR,value:he.Operators.OR},{name:he.Tokens.OPERATOR,value:he.Operators.XOR},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.CLOSE_PARENTHESIS}]}});var Md=p(fr=>{"use strict";fr.__esModule=!0;var xn=Kt();fr.STRUCTURAL_CHARACTERS={"(":xn.StructuralCharacters.OPEN_PARENTHESIS,")":xn.StructuralCharacters.CLOSE_PARENTHESIS};fr.OPERATORS={AND:xn.Operators.AND,OR:xn.Operators.OR,XOR:xn.Operators.XOR,NOT:xn.Operators.NOT};fr.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));fr.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);fr.COMMENT_DELIMITER=String.fromCodePoint(35);fr.EOL=String.fromCodePoint(10);fr.ESCAPE_CHARACTER=String.fromCodePoint(92)});var p_=p(pr=>{"use strict";var Od=pr&&pr.__assign||function(){return Od=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Od.apply(this,arguments)};pr.__esModule=!0;var f_=Kt(),Zr=Md();pr.createResult=function(r,e,t){return{token:Od({name:r},e!==null?{value:e}:{}),remainingString:t}};pr.getComment=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===Zr.EOL){e=t;break}}return pr.createResult(f_.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};pr.getQuotedIdentifier=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===Zr.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+Zr.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===Zr.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!Zr.SEPARATORS.has(s)&&!Zr.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: "+s+" Expected ) character or separator");break}}if(n===null)throw new Error("Unexpected end of expression: expected "+Zr.QUOTED_IDENTIFIER_DELIMITER+" character");return pr.createResult(f_.Tokens.IDENTIFIER,t,r.slice(n+1))}});var h_=p(Pd=>{"use strict";Pd.__esModule=!0;var Sn=Kt(),ct=Md(),Cn=p_();Pd.lex=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!ct.SEPARATORS.has(s)){var a=ct.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===Sn.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!ct.SEPARATORS.has(o)&&o!==Sn.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: "+o+". A closing parenthesis should be followed by another closing parenthesis or whitespace");return Cn.createResult(Sn.Tokens.STRUCTURAL_CHARACTER,ct.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===ct.QUOTED_IDENTIFIER_DELIMITER)return Cn.getQuotedIdentifier(r.slice(i+1));if(s===ct.COMMENT_DELIMITER)return Cn.getComment(r.slice(i+1));e=i}}else if(ct.SEPARATORS.has(s)||ct.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===ct.QUOTED_IDENTIFIER_DELIMITER||s===ct.COMMENT_DELIMITER)throw new Error("Unexpected character: "+s)}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(ct.OPERATORS[u]){if(n&&!ct.SEPARATORS.has(n))throw new Error("Unexpected character: "+n+". Operators should be separated using whitespace");return Cn.createResult(Sn.Tokens.OPERATOR,ct.OPERATORS[u],l)}else return Cn.createResult(Sn.Tokens.IDENTIFIER,u,l)}return Cn.createResult(Sn.Tokens.EOF,null,"")}});var m_=p(hr=>{"use strict";var rA=hr&&hr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};hr.__esModule=!0;var nA=h_(),In=Kt(),La=Dd();hr.newTokenGenerator=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=nA.lex(e),s=i.token,a=i.remainingString;if(e=a,s.name!==In.Tokens.COMMENT)return hr.validateToken(s,t,n),s}}};hr.getValue=function(r,e){var t=r(La.VALID_TOKENS.identifierOrNot),n=t.value===In.Operators.NOT;n&&(t=r(La.VALID_TOKENS.identifierOnly));var i=t.name===In.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?rA(i,[{name:In.Tokens.OPERATOR,value:In.Operators.NOT}]):i};hr.previousOperatorTakesPrecedent=function(r,e){return La.OPERATOR_PRECEDENCE[r]<=La.OPERATOR_PRECEDENCE[e]};hr.validateToken=function(r,e,t){if(t===void 0&&(t=!1),r.name===In.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")}});var kd=p(ls=>{"use strict";var Fn=ls&&ls.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};ls.__esModule=!0;var y_=Kt(),g_=Dd(),Ya=m_();ls.parse=function(r){if(typeof r!="string")throw new Error("Expected string but received "+typeof r);var e=Ya.newTokenGenerator(r);return Ad(e)};var Ad=function(r,e){e===void 0&&(e=!1);for(var t=Fn(Ya.getValue(r,Ad)),n=[];;){var i=e?g_.VALID_TOKENS.binaryOperatorOrClose:g_.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===y_.Tokens.EOF||s.name===y_.Tokens.STRUCTURAL_CHARACTER)return Fn(t,Fn(n).reverse());for(;n.length;){var a=n[n.length-1]||null;if(a&&Ya.previousOperatorTakesPrecedent(a.value,s.value))t=Fn(t,[a]),n=n.slice(0,-1);else break}n=Fn(n,[s]),t=Fn(t,Ya.getValue(r,Ad))}}});var Nd=p(mr=>{"use strict";mr.__esModule=!0;var __=Kt();mr.andUtil=function(r,e){return r&&e};mr.orUtil=function(r,e){return r||e};mr.xorUtil=function(r,e){return r!==e};mr.notUtil=function(r){return!r};mr.isIdentifier=function(r){var e=r.name,t=r.value;return e===__.Tokens.IDENTIFIER&&typeof t=="string"};mr.isOperator=function(r){var e=r.name,t=r.value;return e===__.Tokens.OPERATOR&&typeof t=="string"};mr.throwInvalidExpression=function(r){throw new TypeError("Invalid postfix expression: "+r)}});var T_=p(Cd=>{"use strict";var cs;Cd.__esModule=!0;var xd=Kt(),Sd=Nd();Cd.OPERATOR_MAP=(cs={},cs[xd.Operators.AND]=Sd.andUtil,cs[xd.Operators.OR]=Sd.orUtil,cs[xd.Operators.XOR]=Sd.xorUtil,cs)});var v_=p(Jr=>{"use strict";var Id=Jr&&Jr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Jr.__esModule=!0;var iA=kd(),b_=Kt(),sA=T_(),Qr=Nd();Jr.getEvaluator=function(r){var e=iA.parse(r);return function(t){return Jr.evaluate(e,t)}};Jr.evaluate=function(r,e){if(!Array.isArray(r))throw new Error(r+" should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator");var t=r.reduce(function(n,i,s){if(!(i&&(Qr.isIdentifier(i)||Qr.isOperator(i))))throw new Error("Invalid token: "+i+". Found in parsed expression at index "+s);if(i.name===b_.Tokens.IDENTIFIER)return Id(n,[Boolean(e[i.value])]);var a=n[n.length-2],o=n[n.length-1];if(i.value===b_.Operators.NOT)return o===void 0&&Qr.throwInvalidExpression("missing identifier"),Id(n.slice(0,-1),[Qr.notUtil(o)]);(o===void 0||a===void 0)&&Qr.throwInvalidExpression("missing identifier");var u=sA.OPERATOR_MAP[i.value];return u||Qr.throwInvalidExpression("unknown operator"),Id(n.slice(0,-2),[u(a,o)])},[]);return t.length!==1&&Qr.throwInvalidExpression("too many identifiers after evaluation"),t[0]}});var w_=p(ds=>{"use strict";ds.__esModule=!0;var E_=v_();ds.getEvaluator=E_.getEvaluator;ds.evaluate=E_.evaluate;var aA=kd();ds.parse=aA.parse});var pA={};I_(pA,{default:()=>ro});module.exports=F_(pA);var O_=require("obsidian");var Ns=require("obsidian");var mA=new Error("timeout while waiting for mutex to become available"),yA=new Error("mutex already locked"),U_=new Error("request for lock canceled"),nf=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},oo=class{constructor(e,t=U_){if(this._maxConcurrency=e,this._cancelError=t,this._queue=[],this._waiters=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}acquire(){let e=this.isLocked(),t=new Promise((n,i)=>this._queue.push({resolve:n,reject:i}));return e||this._dispatch(),t}runExclusive(e){return nf(this,void 0,void 0,function*(){let[t,n]=yield this.acquire();try{return yield e(t)}finally{n()}})}waitForUnlock(){return nf(this,void 0,void 0,function*(){return this.isLocked()?new Promise(t=>this._waiters.push({resolve:t})):Promise.resolve()})}isLocked(){return this._value<=0}release(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){let e=this._currentReleaser;this._currentReleaser=void 0,e()}}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatch(){let e=this._queue.shift();if(!e)return;let t=!1;this._currentReleaser=()=>{t||(t=!0,this._value++,this._resolveWaiters(),this._dispatch())},e.resolve([this._value--,this._currentReleaser])}_resolveWaiters(){this._waiters.forEach(e=>e.resolve()),this._waiters=[]}},q_=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},Es=class{constructor(e){this._semaphore=new oo(1,e)}acquire(){return q_(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var fp=require("obsidian");var af=require("obsidian");var sf=[{index:9999,internalName:"INTERNAL_TESTING_ENABLED_BY_DEFAULT",displayName:"Test Item. Used to validate the Feature Framework.",description:"Description",enabledByDefault:!0,stable:!1}];var Ft=class{constructor(e,t,n,i,s,a){this.internalName=e;this.index=t;this.description=n;this.displayName=i;this.enabledByDefault=s;this.stable=a}static get values(){let e=[];return sf.forEach(t=>{e=[...e,new Ft(t.internalName,t.index,t.description,t.displayName,t.enabledByDefault,t.stable)]}),e}static get settingsFlags(){let e={};return Ft.values.forEach(t=>{e[t.internalName]=t.enabledByDefault}),e}static fromString(e){for(let t of Ft.values)if(e===t.internalName)return t;throw new RangeError(`Illegal argument passed to fromString(): ${e} does not correspond to any available Feature ${this.prototype.constructor.name}`)}};var L_={globalFilter:"",removeGlobalFilter:!1,setDoneDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6,provideAccessKeys:!0,useFilenameAsScheduledDate:!1,filenameAsDateFolders:[],features:Ft.settingsFlags},Gn=De({},L_),B=()=>{for(let r in Ft.settingsFlags)Gn.features[r]===void 0&&(Gn.features[r]=Ft.settingsFlags[r]);return De({},Gn)},pt=r=>(Gn=De(De({},Gn),r),B());var uo,lo,of=({metadataCache:r,vault:e})=>{uo=r,lo=e},ws=t=>J(void 0,[t],function*({originalTask:r,newTasks:e}){if(lo===void 0||uo===void 0){console.error("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]),uf({originalTask:r,newTasks:e,vault:lo,metadataCache:uo,previousTries:0})}),uf=s=>J(void 0,[s],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i}){let a=()=>{if(i>10){console.error("Tasks: Too many retries. File update not possible ...");return}let y=Math.min(Math.pow(10,i),100);setTimeout(()=>{uf({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i+1})},y)},o=t.getAbstractFileByPath(r.path);if(!(o instanceof af.TFile))return console.warn(`Tasks: No file found for task ${r.description}. Retrying ...`),a();if(o.extension!=="md"){console.error("Tasks: Only supporting files with the .md file extension.");return}let u=n.getFileCache(o);if(u==null||u===null)return console.warn(`Tasks: No file cache found for file ${o.path}. Retrying ...`),a();let l=u.listItems;if(l===void 0||l.length===0)return console.warn(`Tasks: No list items found in file cache of ${o.path}. Retrying ...`),a();let d=(yield t.read(o)).split(`
`),{globalFilter:f}=B(),h,g=0;for(let y of l){if(y.position.start.line<r.sectionStart||y.task===void 0)continue;if(d[y.position.start.line].includes(f)){if(g===r.sectionIndex){h=y;break}g++}}if(h===void 0){console.error("Tasks: could not find task to toggle in the file.");return}let m=[...d.slice(0,h.position.start.line),...e.map(y=>y.toFileLineString()),...d.slice(h.position.start.line+1)];yield t.modify(o,m.join(`
`))});var sn=class{constructor(){this.hideTaskCount=!1;this.hideBacklinks=!1;this.hidePriority=!1;this.hideStartDate=!1;this.hideScheduledDate=!1;this.hideDoneDate=!1;this.hideDueDate=!1;this.hideRecurrenceRule=!1;this.hideEditButton=!1;this.hideUrgency=!0;this.shortMode=!1;this.explainQuery=!1}};var Rs=["MO","TU","WE","TH","FR","SA","SU"],_e=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(Rs.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=Rs[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var ue=function(r){return r!=null},nt=function(r){return typeof r=="number"},co=function(r){return typeof r=="string"&&Rs.includes(r)},Fe=Array.isArray,ht=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var G=function(r,e){var t=0,n=[];if(Fe(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},lf=function(r){return Fe(r)?r:[r]};function Sr(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=G(t,e/t.length)),t.slice(0,e)+String(n))}var cf=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},$e=function(r,e){var t=r%e;return t*e<0?t+e:t},Ds=function(r,e){return{div:Math.floor(r/e),mod:$e(r,e)}},it=function(r){return!ue(r)||r.length===0},me=function(r){return!it(r)},H=function(r,e){return me(r)&&r.indexOf(e)!==-1};var gr;(function(r){r.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],r.ONE_DAY=1e3*60*60*24,r.MAXYEAR=9999,r.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),r.PY_WEEKDAYS=[6,0,1,2,3,4,5],r.getYearDay=function(e){var t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((t.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/r.ONE_DAY)+1},r.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},r.isDate=function(e){return e instanceof Date},r.isValidDate=function(e){return r.isDate(e)&&!isNaN(e.getTime())},r.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},r.daysBetween=function(e,t){var n=e.getTime()-r.tzOffset(e),i=t.getTime()-r.tzOffset(t),s=n-i;return Math.round(s/r.ONE_DAY)},r.toOrdinal=function(e){return r.daysBetween(e,r.ORDINAL_BASE)},r.fromOrdinal=function(e){return new Date(r.ORDINAL_BASE.getTime()+e*r.ONE_DAY)},r.getMonthDays=function(e){var t=e.getUTCMonth();return t===1&&r.isLeapYear(e.getUTCFullYear())?29:r.MONTH_DAYS[t]},r.getWeekday=function(e){return r.PY_WEEKDAYS[e.getUTCDay()]},r.monthRange=function(e,t){var n=new Date(Date.UTC(e,t,1));return[r.getWeekday(n),r.getMonthDays(n)]},r.combine=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},r.clone=function(e){var t=new Date(e.getTime());return t},r.cloneDates=function(e){for(var t=[],n=0;n<e.length;n++)t.push(r.clone(e[n]));return t},r.sort=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},r.timeToUntilString=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[Sr(n.getUTCFullYear().toString(),4,"0"),Sr(n.getUTCMonth()+1,2,"0"),Sr(n.getUTCDate(),2,"0"),"T",Sr(n.getUTCHours(),2,"0"),Sr(n.getUTCMinutes(),2,"0"),Sr(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},r.untilStringToDate=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(gr||(gr={}));var C=gr;var Y_=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),Zt=Y_;var Sf=vs(xf(),1),{__extends:on,__assign:Ge,__rest:IA,__decorate:FA,__param:UA,__metadata:qA,__awaiter:WA,__generator:LA,__exportStar:YA,__createBinding:$A,__values:jA,__read:BA,__spread:GA,__spreadArrays:HA,__spreadArray:T,__await:zA,__asyncGenerator:KA,__asyncDelegator:VA,__asyncValues:XA,__makeTemplateObject:ZA,__importStar:QA,__importDefault:JA,__classPrivateFieldGet:ek,__classPrivateFieldSet:tk,__classPrivateFieldIn:rk}=Sf.default;var $_=function(r){on(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(Zt),po=$_;var j_={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Cr=j_;var Cf=function(r,e){return r.indexOf(e)!==-1},B_=function(r){return r.toString()},G_=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},H_=function(){function r(e,t,n,i){if(t===void 0&&(t=B_),n===void 0&&(n=Cr),i===void 0&&(i=G_),this.text=[],this.language=n||Cr,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,d){return c-d}),a.sort(function(c,d){return d-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(ue(this.origOptions.byweekday)){var o=Fe(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,d){return c.weekday-d.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(Cf(["dtstart","wkst","freq"],n))return!0;if(!Cf(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[M.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=nt(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),Fe(e)||(e=[e]);var a=function(u,l,c){for(var d="",f=0;f<u.length;f++)f!==0&&(f===u.length-1?d+=" "+c+" ":d+=l+" "),d+=u[f];return d};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),Ut=H_;var z_=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function Hn(r,e){e===void 0&&(e=Cr);var t={},n=new z_(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var f=n.acceptNumber();if(f&&(t.interval=parseInt(f[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=M.DAILY,n.nextSymbol()&&(a(),d());break;case"weekday(s)":t.freq=M.WEEKLY,t.byweekday=[M.MO,M.TU,M.WE,M.TH,M.FR],n.nextSymbol(),d();break;case"week(s)":t.freq=M.WEEKLY,n.nextSymbol()&&(s(),d());break;case"hour(s)":t.freq=M.HOURLY,n.nextSymbol()&&(s(),d());break;case"minute(s)":t.freq=M.MINUTELY,n.nextSymbol()&&(s(),d());break;case"month(s)":t.freq=M.MONTHLY,n.nextSymbol()&&(s(),d());break;case"year(s)":t.freq=M.YEARLY,n.nextSymbol()&&(s(),d());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=M.WEEKLY;var h=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[M[h]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var g=u();if(!g)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(M[g]),n.nextSymbol()}c(),d();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=M.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=o();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(m),n.nextSymbol()}s(),d();break;default:throw new Error("Unknown symbol")}}function s(){var f=n.accept("on"),h=n.accept("the");if(!!(f||h))do{var g=l(),m=u(),y=o();if(g)m?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(M[m].nth(g))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(g),n.accept("day(s)"));else if(m)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(M[m]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[M.MO,M.TU,M.WE,M.TH,M.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var P=n.acceptNumber();if(!P)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(P[0],10)];n.accept("comma");){if(P=n.acceptNumber(),!P)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(P[0],10))}}else if(y)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(y);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var f=n.accept("at");if(!!f)do{var h=n.acceptNumber();if(!h)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(h[0],10)];n.accept("comma");){if(h=n.acceptNumber(),!h)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(h[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var f=parseInt(n.value[1],10);if(f<-366||f>366)throw new Error("Nth out of range: "+f);return n.nextSymbol(),n.accept("last")?-f:f;default:return!1}}function c(){n.accept("on"),n.accept("the");var f=l();if(!!f)for(t.bymonthday=[f],n.nextSymbol();n.accept("comma");){if(f=l(),!f)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(f),n.nextSymbol()}}function d(){if(n.symbol==="until"){var f=Date.parse(n.text);if(!f)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(f)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var Y;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(Y||(Y={}));function zn(r){return r<Y.HOURLY}var If=function(r,e){return e===void 0&&(e=Cr),new M(Hn(r,e)||void 0)},un=["count","until","interval","byweekday","bymonthday","bymonth"];Ut.IMPLEMENTED=[];Ut.IMPLEMENTED[Y.HOURLY]=un;Ut.IMPLEMENTED[Y.MINUTELY]=un;Ut.IMPLEMENTED[Y.DAILY]=["byhour"].concat(un);Ut.IMPLEMENTED[Y.WEEKLY]=un;Ut.IMPLEMENTED[Y.MONTHLY]=un;Ut.IMPLEMENTED[Y.YEARLY]=["byweekno","byyearday"].concat(un);var Ff=function(r,e,t,n){return new Ut(r,e,t,n).toString()},Uf=Ut.isFullyConvertible;var ln=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var qf=function(r){on(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return gr.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=$e(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=Ds(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),it(i)||H(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=Ds(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(it(i)||H(i,this.hour))&&(it(s)||H(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=Ds(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(it(i)||H(i,this.hour))&&(it(s)||H(s,this.minute))&&(it(a)||H(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=gr.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>gr.MAXYEAR))return;t=gr.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case Y.YEARLY:return this.addYears(s);case Y.MONTHLY:return this.addMonths(s);case Y.WEEKLY:return this.addWeekly(s,a);case Y.DAILY:return this.addDaily(s);case Y.HOURLY:return this.addHours(s,n,o);case Y.MINUTELY:return this.addMinutes(s,n,o,u);case Y.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(ln);function ho(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];H(Yf,s)||e.push(s),C.isDate(r[s])&&!C.isValidDate(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return Ge({},r)}function Wf(r){var e=Ge(Ge({},Kn),ho(r));if(ue(e.byeaster)&&(e.freq=M.YEARLY),!(ue(e.freq)&&M.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),ue(e.wkst)?nt(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=M.MO.weekday,ue(e.bysetpos)){nt(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||me(e.byweekno)||me(e.byyearday)||Boolean(e.bymonthday)||me(e.bymonthday)||ue(e.byweekday)||ue(e.byeaster)))switch(e.freq){case M.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case M.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case M.WEEKLY:e.byweekday=[C.getWeekday(e.dtstart)];break}if(ue(e.bymonth)&&!Fe(e.bymonth)&&(e.bymonth=[e.bymonth]),ue(e.byyearday)&&!Fe(e.byyearday)&&nt(e.byyearday)&&(e.byyearday=[e.byyearday]),!ue(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(Fe(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(ue(e.byweekno)&&!Fe(e.byweekno)&&(e.byweekno=[e.byweekno]),!ue(e.byweekday))e.bynweekday=null;else if(nt(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(co(e.byweekday))e.byweekday=[_e.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof _e)!e.byweekday.n||e.freq>M.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(nt(u)){a.push(u);continue}else if(co(u)){a.push(_e.fromStr(u).weekday);continue}!u.n||e.freq>M.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=me(a)?a:null,e.bynweekday=me(o)?o:null}return ue(e.byhour)?nt(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<M.HOURLY?[e.dtstart.getUTCHours()]:null,ue(e.byminute)?nt(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<M.MINUTELY?[e.dtstart.getUTCMinutes()]:null,ue(e.bysecond)?nt(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<M.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function Lf(r){var e=r.dtstart.getTime()%1e3;if(!zn(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new ln(n,i,s,e))})})}),t}function Xn(r){var e=r.split(`
`).map(K_).filter(function(t){return t!==null});return Ge(Ge({},e[0]),e[1])}function Vn(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=C.untilStringToDate(i),e}function K_(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return $f(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return $f(r);case"DTSTART":return Vn(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function $f(r){var e=r.replace(/^RRULE:/i,""),t=Vn(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=Y[o.toUpperCase()];break;case"WKST":t.wkst=mt[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=V_(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=X_(o);break;case"DTSTART":case"TZID":var c=Vn(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=C.untilStringToDate(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function V_(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(jf)}return jf(r)}function jf(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function X_(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return mt[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=mt[s].weekday;return new _e(a,i)})}var Ir=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=C.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:t})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid)!==null&&e!==void 0?e:"UTC"})),s=i.getTime()-n.getTime();return new Date(this.date.getTime()-s)},r}();function Zn(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(Kn),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!H(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!ue(o)||Fe(o)&&!o.length)){switch(a){case"FREQ":u=M.FREQUENCIES[r.freq];break;case"WKST":nt(o)?u=new _e(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=lf(o).map(function(h){return h instanceof _e?h:Fe(h)?new _e(h[0],h[1]):new _e(h)}).toString();break;case"DTSTART":t=Z_(o,r.tzid);break;case"UNTIL":u=C.timeToUntilString(o,!r.tzid);break;default:if(Fe(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var d=e.map(function(h){var g=h[0],m=h[1];return"".concat(g,"=").concat(m.toString())}).join(";"),f="";return d!==""&&(f="RRULE:".concat(d)),[t,f].filter(function(h){return!!h}).join(`
`)}function Z_(r,e){return r?"DTSTART"+new Ir(new Date(r),e).toString():""}function Q_(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var Bf=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?C.clone(t):C.cloneDates(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var d=0;d<i.length;d++){var f=i[d];if(!Q_(t[f],c[f]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if(Fe(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new Zt(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return Fe(n)?C.cloneDates(n):n instanceof Date?C.clone(n):n},r}();var Gf=T(T(T(T(T(T(T(T(T(T(T(T(T([],G(1,31),!0),G(2,28),!0),G(3,31),!0),G(4,30),!0),G(5,31),!0),G(6,30),!0),G(7,31),!0),G(8,31),!0),G(9,30),!0),G(10,31),!0),G(11,30),!0),G(12,31),!0),G(1,7),!0),Hf=T(T(T(T(T(T(T(T(T(T(T(T(T([],G(1,31),!0),G(2,29),!0),G(3,31),!0),G(4,30),!0),G(5,31),!0),G(6,30),!0),G(7,31),!0),G(8,31),!0),G(9,30),!0),G(10,31),!0),G(11,30),!0),G(12,31),!0),G(1,7),!0),J_=ht(1,29),eT=ht(1,30),_r=ht(1,31),je=ht(1,32),zf=T(T(T(T(T(T(T(T(T(T(T(T(T([],je,!0),eT,!0),je,!0),_r,!0),je,!0),_r,!0),je,!0),je,!0),_r,!0),je,!0),_r,!0),je,!0),je.slice(0,7),!0),Kf=T(T(T(T(T(T(T(T(T(T(T(T(T([],je,!0),J_,!0),je,!0),_r,!0),je,!0),_r,!0),je,!0),je,!0),_r,!0),je,!0),_r,!0),je,!0),je.slice(0,7),!0),tT=ht(-28,0),rT=ht(-29,0),Tr=ht(-30,0),Be=ht(-31,0),Vf=T(T(T(T(T(T(T(T(T(T(T(T(T([],Be,!0),rT,!0),Be,!0),Tr,!0),Be,!0),Tr,!0),Be,!0),Be,!0),Tr,!0),Be,!0),Tr,!0),Be,!0),Be.slice(0,7),!0),Xf=T(T(T(T(T(T(T(T(T(T(T(T(T([],Be,!0),tT,!0),Be,!0),Tr,!0),Be,!0),Tr,!0),Be,!0),Be,!0),Tr,!0),Be,!0),Tr,!0),Be,!0),Be.slice(0,7),!0),Zf=[0,31,60,91,121,152,182,213,244,274,305,335,366],Qf=[0,31,59,90,120,151,181,212,243,273,304,334,365],mo=function(){for(var r=[],e=0;e<55;e++)r=r.concat(ht(7));return r}();function Jf(r,e){var t=new Date(Date.UTC(r,0,1)),n=C.isLeapYear(r)?366:365,i=C.isLeapYear(r+1)?366:365,s=C.toOrdinal(t),a=C.getWeekday(t),o=Ge(Ge({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},nT(r)),{wnomask:null});if(it(e.byweekno))return o;o.wnomask=G(0,n+7);var u,l,c=u=$e(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+$e(a-e.wkst,7)):l=n-c;for(var d=Math.floor(l/7),f=$e(l,7),h=Math.floor(d+f/4),g=0;g<e.byweekno.length;g++){var m=e.byweekno[g];if(m<0&&(m+=h+1),m>0&&m<=h){var y=void 0;m>1?(y=c+(m-1)*7,c!==u&&(y-=7-u)):y=c;for(var P=0;P<7&&(o.wnomask[y]=1,y++,o.wdaymask[y]!==e.wkst);P++);}}if(H(e.byweekno,1)){var y=c+h*7;if(c!==u&&(y-=7-u),y<n)for(var g=0;g<7&&(o.wnomask[y]=1,y+=1,o.wdaymask[y]!==e.wkst);g++);}if(c){var w=void 0;if(H(e.byweekno,-1))w=-1;else{var N=C.getWeekday(new Date(Date.UTC(r-1,0,1))),V=$e(7-N.valueOf()+e.wkst,7),le=C.isLeapYear(r-1)?366:365,ge=void 0;V>=4?(V=0,ge=le+$e(N-e.wkst,7)):ge=n-c,w=Math.floor(52+$e(ge,7)/4)}if(H(e.byweekno,w))for(var y=0;y<c;y++)o.wnomask[y]=1}return o}function nT(r){var e=C.isLeapYear(r)?366:365,t=new Date(Date.UTC(r,0,1)),n=C.getWeekday(t);return e===365?{mmask:Gf,mdaymask:Kf,nmdaymask:Xf,wdaymask:mo.slice(n),mrange:Qf}:{mmask:Hf,mdaymask:zf,nmdaymask:Vf,wdaymask:mo.slice(n),mrange:Zf}}function ep(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===M.YEARLY)if(it(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===M.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(it(o))return a;a.nwdaymask=G(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],d=l[1]-1,f=0;f<s.bynweekday.length;f++){var h=void 0,g=s.bynweekday[f],m=g[0],y=g[1];y<0?(h=d+(y+1)*7,h-=$e(i[h]-m,7)):(h=c+(y-1)*7,h+=$e(7-i[h]+m,7)),c<=h&&h<=d&&(a.nwdaymask[h]=1)}return a}function tp(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),d=i%4,f=Math.floor(32+2*a+2*c-l-d)%7,h=Math.floor((t+11*l+22*f)/451),g=Math.floor((l+f-7*h+114)/31),m=(l+f-7*h+114)%31+1,y=Date.UTC(r,g-1,m+e),P=Date.UTC(r,0,1);return[Math.ceil((y-P)/(1e3*60*60*24))]}var iT=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=Jf(e,n)),me(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=ep(e,t,s,a,o,n)}ue(n.byeaster)&&(this.eastermask=tp(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[ht(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=G(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=G(null,this.yearlen+7),s=C.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=G(null,this.yearlen),s=C.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),C.sort(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new ln(e,t,a,i)});return C.sort(s),s},r.prototype.stimeset=function(e,t,n,i){return[new ln(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case Y.YEARLY:return this.ydayset.bind(this);case Y.MONTHLY:return this.mdayset.bind(this);case Y.WEEKLY:return this.wdayset.bind(this);case Y.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case Y.HOURLY:return this.htimeset.bind(this);case Y.MINUTELY:return this.mtimeset.bind(this);case Y.SECONDLY:return this.stimeset.bind(this)}},r}(),rp=iT;function np(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=$e(c,e.length)):(u=Math.floor((c-1)/e.length),l=$e(c-1,e.length));for(var d=[],f=t;f<n;f++){var h=s[f];!ue(h)||d.push(h)}var g=void 0;u<0?g=d.slice(u)[0]:g=d[u];var m=e[l],y=C.fromOrdinal(i.yearordinal+g),P=C.combine(y,m);H(a,P)||a.push(P)}return C.sort(a),a}function As(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return Qt(r);var u=qf.fromDate(t),l=new rp(e);l.rebuild(u.year,u.month);for(var c=oT(l,u,e);;){var d=l.getdayset(n)(u.year,u.month,u.day),f=d[0],h=d[1],g=d[2],m=aT(f,h,g,l,e);if(me(a))for(var y=np(a,c,h,g,l,f),P=0;P<y.length;P++){var w=y[P];if(s&&w>s)return Qt(r);if(w>=t){var N=ip(w,e);if(!r.accept(N)||o&&(--o,!o))return Qt(r)}}else for(var P=h;P<g;P++){var V=f[P];if(!!ue(V))for(var le=C.fromOrdinal(l.yearordinal+V),ge=0;ge<c.length;ge++){var ne=c[ge],w=C.combine(le,ne);if(s&&w>s)return Qt(r);if(w>=t){var N=ip(w,e);if(!r.accept(N)||o&&(--o,!o))return Qt(r)}}}if(e.interval===0||(u.add(e,m),u.year>C.MAXYEAR))return Qt(r);zn(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function sT(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return me(n)&&!H(n,r.mmask[e])||me(i)&&!r.wnomask[e]||me(s)&&!H(s,r.wdaymask[e])||me(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!H(r.eastermask,e)||(me(o)||me(u))&&!H(o,r.mdaymask[e])&&!H(u,r.nmdaymask[e])||me(l)&&(e<r.yearlen&&!H(l,e+1)&&!H(l,-r.yearlen+e)||e>=r.yearlen&&!H(l,e+1-r.yearlen)&&!H(l,-r.nextyearlen+e-r.yearlen))}function ip(r,e){return new Ir(r,e.tzid).rezonedDate()}function Qt(r){return r.getValue()}function aT(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=sT(n,o,i),s&&(r[o]=null)}return s}function oT(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return zn(n)?Lf(t):n>=M.HOURLY&&me(i)&&!H(i,e.hour)||n>=M.MINUTELY&&me(s)&&!H(s,e.minute)||n>=M.SECONDLY&&me(a)&&!H(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var mt={MO:new _e(0),TU:new _e(1),WE:new _e(2),TH:new _e(3),FR:new _e(4),SA:new _e(5),SU:new _e(6)},Kn={freq:Y.YEARLY,dtstart:null,interval:1,wkst:mt.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},Yf=Object.keys(Kn),M=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new Bf,this.origOptions=ho(e);var n=Wf(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return Hn(e,t)},r.fromText=function(e,t){return If(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return As(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new po("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new Zt("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!C.isValidDate(e)||!C.isValidDate(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new po("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new Zt("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!C.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Zt("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!C.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Zt("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return Zn(this.origOptions)},r.prototype.toText=function(e,t,n){return Ff(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return Uf(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=Y.YEARLY,r.MONTHLY=Y.MONTHLY,r.WEEKLY=Y.WEEKLY,r.DAILY=Y.DAILY,r.HOURLY=Y.HOURLY,r.MINUTELY=Y.MINUTELY,r.SECONDLY=Y.SECONDLY,r.MO=mt.MO,r.TU=mt.TU,r.WE=mt.WE,r.TH=mt.TH,r.FR=mt.FR,r.SA=mt.SA,r.SU=mt.SU,r.parseString=Xn,r.optionsToString=Zn,r}();function sp(r,e,t,n,i,s){var a={},o=r.accept;function u(f,h){t.forEach(function(g){g.between(f,h,!0).forEach(function(m){a[Number(m)]=!0})})}i.forEach(function(f){var h=new Ir(f,s).rezonedDate();a[Number(h)]=!0}),r.accept=function(f){var h=Number(f);return isNaN(h)?o.call(this,f):!a[h]&&(u(new Date(h-1),new Date(h+1)),!a[h])?(a[h]=!0,o.call(this,f)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(f){var h=Number(f);return a[h]?!0:(a[h]=!0,o.call(this,f))});for(var l=0;l<n.length;l++){var c=new Ir(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(f){As(r,f.options)});var d=r._result;switch(C.sort(d),r.method){case"all":case"between":return d;case"before":return d.length&&d[d.length-1]||null;case"after":default:return d.length&&d[0]||null}}var ap={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function uT(r,e){var t=[],n=[],i=[],s=[],a=Vn(r),o=a.dtstart,u=a.tzid,l=pT(r,e.unfold);return l.forEach(function(c){var d;if(!!c){var f=fT(c),h=f.name,g=f.parms,m=f.value;switch(h.toUpperCase()){case"RRULE":if(g.length)throw new Error("unsupported RRULE parm: ".concat(g.join(",")));t.push(Xn(c));break;case"RDATE":var y=(d=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&d!==void 0?d:[],P=y[1];P&&!u&&(u=P),n=n.concat(op(m,g));break;case"EXRULE":if(g.length)throw new Error("unsupported EXRULE parm: ".concat(g.join(",")));i.push(Xn(m));break;case"EXDATE":s=s.concat(op(m,g));break;case"DTSTART":break;default:throw new Error("unsupported property: "+h)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function lT(r,e){var t=uT(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new go(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(f){c.rrule(new M(yo(f,o,u),l))}),i.forEach(function(f){c.rdate(f)}),s.forEach(function(f){c.exrule(new M(yo(f,o,u),l))}),a.forEach(function(f){c.exdate(f)}),e.compatible&&e.dtstart&&c.rdate(o),c}var d=n[0]||{};return new M(yo(d,d.dtstart||e.dtstart||o,d.tzid||e.tzid||u),l)}function ks(r,e){return e===void 0&&(e={}),lT(r,cT(e))}function yo(r,e,t){return Ge(Ge({},r),{dtstart:e,tzid:t})}function cT(r){var e=[],t=Object.keys(r),n=Object.keys(ap);if(t.forEach(function(i){H(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return Ge(Ge({},ap),r)}function dT(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=cf(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function fT(r){var e=dT(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function pT(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function hT(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function op(r,e){return hT(e),r.split(",").map(function(t){return C.untilStringToDate(t)})}function up(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var go=function(r){on(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=up.apply(n,["dtstart"]),n.tzid=up.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return sp(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){lp(t,this._rrule)},e.prototype.exrule=function(t){lp(t,this._exrule)},e.prototype.rdate=function(t){cp(t,this._rdate)},e.prototype.exdate=function(t){cp(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return ks(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return ks(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(Zn({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(dp("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(dp("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(M);function lp(r,e){if(!(r instanceof M))throw new TypeError(String(r)+" is not RRule instance");H(e.map(String),String(r))||e.push(r)}function cp(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");H(e.map(Number),Number(r))||(e.push(r),C.sort(e))}function dp(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return C.timeToUntilString(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}var K=class{static by(e,t){let n=[K.compareByUrgency,K.compareByStatus,K.compareByDueDate,K.compareByPriority,K.compareByPath],i=[];for(let{property:s,reverse:a,propertyInstance:o}of e.sorting){let u=K.comparators[s];i.push(a?K.makeReversedComparator(u):u),s==="tag"&&(K.tagPropertyInstance=o)}return t.sort(K.makeCompositeComparator([...i,...n]))}static makeReversedComparator(e){return(t,n)=>e(t,n)*-1}static makeCompositeComparator(e){return(t,n)=>{for(let i of e){let s=i(t,n);if(s!==0)return s}return 0}}static compareByUrgency(e,t){return t.urgency-e.urgency}static compareByStatus(e,t){return e.status<t.status?1:e.status>t.status?-1:0}static compareByPriority(e,t){return e.priority.localeCompare(t.priority)}static compareByStartDate(e,t){return K.compareByDate(e.startDate,t.startDate)}static compareByScheduledDate(e,t){return K.compareByDate(e.scheduledDate,t.scheduledDate)}static compareByDueDate(e,t){return K.compareByDate(e.dueDate,t.dueDate)}static compareByDoneDate(e,t){return K.compareByDate(e.doneDate,t.doneDate)}static compareByTag(e,t){if(e.tags.length===0&&t.tags.length===0)return 0;if(e.tags.length===0)return 1;if(t.tags.length===0)return-1;let n=K.tagPropertyInstance-1;return e.tags.length<K.tagPropertyInstance&&t.tags.length>=K.tagPropertyInstance?1:t.tags.length<K.tagPropertyInstance&&e.tags.length>=K.tagPropertyInstance?-1:e.tags.length<K.tagPropertyInstance&&t.tags.length<K.tagPropertyInstance?0:e.tags[n]<t.tags[n]?-1:e.tags[n]>t.tags[n]?1:0}static compareByDate(e,t){return e!==null&&t===null?-1:e===null&&t!==null?1:e!==null&&t!==null?e.isValid()&&!t.isValid()?-1:!e.isValid()&&t.isValid()||e.isAfter(t)?1:e.isBefore(t)?-1:0:0}static compareByPath(e,t){return e.path<t.path?-1:e.path>t.path?1:0}static compareByDescription(e,t){return K.cleanDescription(e.description).localeCompare(K.cleanDescription(t.description))}static cleanDescription(e){let t=B().globalFilter;e=e.replace(t,"").trim();let n=/^\[\[?([^\]]*)\]/,i=e.match(n);if(i!==null){let l=i[1];e=l.substring(l.indexOf("|")+1)+e.replace(n,"")}let s=/^\*\*?([^*]*)\*/,a=e.match(s);a!==null&&(e=a[1]+e.replace(n,""));let o=/^==?([^=]*)==/,u=e.match(o);return u!==null&&(e=u[1]+e.replace(o,"")),e}},Ve=K;Ve.tagPropertyInstance=1,Ve.comparators={urgency:K.compareByUrgency,description:K.compareByDescription,priority:K.compareByPriority,start:K.compareByStartDate,scheduled:K.compareByScheduledDate,due:K.compareByDueDate,done:K.compareByDoneDate,path:K.compareByPath,status:K.compareByStatus,tag:K.compareByTag};var Me=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=M.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new M(u);return new Me({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(){var t;let e;if(this.baseOnToday){let n=window.moment(),i=new M(ft(De({},this.rrule.origOptions),{dtstart:n.startOf("day").utc(!0).toDate()}));e=this.nextAfter(n.endOf("day"),i)}else{let n=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day");e=this.nextAfter(n,this.rrule)}if(e!==null){let n=null,i=null,s=null;if(this.referenceDate){if(this.startDate){let a=window.moment.duration(this.startDate.diff(this.referenceDate));n=window.moment(e),n.add(Math.round(a.asDays()),"days")}if(this.scheduledDate){let a=window.moment.duration(this.scheduledDate.diff(this.referenceDate));i=window.moment(e),i.add(Math.round(a.asDays()),"days")}if(this.dueDate){let a=window.moment.duration(this.dueDate.diff(this.referenceDate));s=window.moment(e),s.add(Math.round(a.asDays()),"days")}}return{startDate:n,scheduledDate:i,dueDate:s}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||Ve.compareByDate(this.startDate,e.startDate)!==0||Ve.compareByDate(this.scheduledDate,e.scheduledDate)!==0||Ve.compareByDate(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}nextAfter(e,t){e.utc(!0);let n=window.moment(t.after(e.toDate())),i=this.toText(),s=i.match(/every( \d+)? month(s)?(.*)?/);s!==null&&(i.includes(" on ")||(n=Me.nextAfterMonths(e,n,t,s[1])));let a=i.match(/every( \d+)? year(s)?(.*)?/);return a!==null&&(n=Me.nextAfterYears(e,n,t,a[1])),Me.addTimezone(n).toDate()}static nextAfterMonths(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));Me.isSkippingTooManyMonths(e,t,s);)t=Me.fromOneDayEarlier(e,n);return t}static isSkippingTooManyMonths(e,t,n){let i=t.month()-e.month();return i+=(t.year()-e.year())*12,i>n}static nextAfterYears(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));Me.isSkippingTooManyYears(e,t,s);)t=Me.fromOneDayEarlier(e,n);return t}static isSkippingTooManyYears(e,t,n){return t.year()-e.year()>n}static fromOneDayEarlier(e,t){e.subtract(1,"days").endOf("day");let n=t.origOptions;return n.dtstart=e.startOf("day").toDate(),t=new M(n),window.moment(t.after(e.toDate()))}static addTimezone(e){return window.moment.utc(e).local(!0).startOf("day")}};var er=class{static calculate(e){let t=0;if(e.dueDate!==null){let n=Math.round(window.moment().diff(e.dueDate)/er.milliSecondsPerDay),i;n>=7?i=1:n>=-14?i=(n+14)*.8/21+.2:i=.2,t+=i*er.dueCoefficient}switch(e.scheduledDate!==null&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*er.scheduledCoefficient),e.startDate!==null&&window.moment().isBefore(e.startDate)&&(t+=1*er.startedCoefficient),e.priority){case"1":t+=1*er.priorityCoefficient;break;case"2":t+=.65*er.priorityCoefficient;break;case"3":t+=.325*er.priorityCoefficient;break}return t}},Jt=er;Jt.dueCoefficient=12,Jt.scheduledCoefficient=5,Jt.startedCoefficient=-3,Jt.priorityCoefficient=6,Jt.milliSecondsPerDay=1e3*60*60*24;var st=class{static fromPath(e){let{useFilenameAsScheduledDate:t,filenameAsDateFolders:n}=B();return!t||!this.matchesAnyFolder(n,e)?null:this.extractDateFromPath(e)}static matchesAnyFolder(e,t){return e.length===0?!0:e.some(n=>t.startsWith(n+"/"))}static extractDateFromPath(e){let t=Math.max(0,e.lastIndexOf("/")+1),n=e.lastIndexOf("."),i=e.substring(t,n),s=/(\d{4})-(\d{2})-(\d{2})/.exec(i);if(s||(s=/(\d{4})(\d{2})(\d{2})/.exec(i)),s){let a=window.moment([parseInt(s[1]),parseInt(s[2])-1,parseInt(s[3])]);if(a.isValid())return a}return null}static canApplyFallback({startDate:e,scheduledDate:t,dueDate:n}){return e===null&&n===null&&t===null}static updateTaskPath(e,t,n){let i=e.scheduledDate,s=e.scheduledDateIsInferred;return n===null?s&&(s=!1,i=null):s?i=n:this.canApplyFallback(e)&&(i=n,s=!0),new ie(ft(De({},e),{path:t,scheduledDate:i,scheduledDateIsInferred:s}))}static removeInferredStatusIfNeeded(e,t){let n=e.scheduledDateIsInferred?e.scheduledDate:null;return t.map(i=>(n!==null&&!n.isSame(i.scheduledDate,"day")&&(i=new ie(ft(De({},i),{scheduledDateIsInferred:!1}))),i))}};var we={High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",None:""},qt="\u{1F501}",Wt="\u{1F6EB}",Lt="\u23F3",Yt="\u{1F4C5}",_o="\u2705",at=class{},D=at;D.dateFormat="YYYY-MM-DD",D.indentationRegex=/^([\s\t>]*)/,D.listMarkerRegex=/[-*]/,D.checkboxRegex=/\[(.)\]/u,D.afterCheckboxRegex=/ *(.*)/u,D.taskRegex=new RegExp(at.indentationRegex.source+at.listMarkerRegex.source+" +"+at.checkboxRegex.source+at.afterCheckboxRegex.source,"u"),D.nonTaskRegex=new RegExp(at.indentationRegex.source+at.listMarkerRegex.source+"? *("+at.checkboxRegex.source+")?"+at.afterCheckboxRegex.source,"u"),D.listItemRegex=new RegExp(at.indentationRegex.source+"("+at.listMarkerRegex.source+")"),D.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,D.priorityRegex=/([⏫🔼🔽])$/u,D.startDateRegex=/🛫 *(\d{4}-\d{2}-\d{2})$/u,D.scheduledDateRegex=/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,D.dueDateRegex=/[📅📆🗓] *(\d{4}-\d{2}-\d{2})$/u,D.doneDateRegex=/✅ *(\d{4}-\d{2}-\d{2})$/u,D.recurrenceRegex=/🔁 ?([a-zA-Z0-9, !]+)$/iu,D.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]*/g,D.hashTagsFromEnd=new RegExp(at.hashTags.source+"$");var ie=class{constructor({status:e,description:t,path:n,indentation:i,sectionStart:s,sectionIndex:a,originalStatusCharacter:o,precedingHeader:u,priority:l,startDate:c,scheduledDate:d,dueDate:f,doneDate:h,recurrence:g,blockLink:m,tags:y,originalMarkdown:P,scheduledDateIsInferred:w}){this._urgency=null;this.status=e,this.description=t,this.path=n,this.indentation=i,this.sectionStart=s,this.sectionIndex=a,this.originalStatusCharacter=o,this.precedingHeader=u,this.tags=y,this.priority=l,this.startDate=c,this.scheduledDate=d,this.dueDate=f,this.doneDate=h,this.recurrence=g,this.blockLink=m,this.originalMarkdown=P,this.scheduledDateIsInferred=w}static fromLine({line:e,path:t,sectionStart:n,sectionIndex:i,precedingHeader:s,fallbackDate:a}){let o=e.match(D.taskRegex);if(o===null)return null;let u=o[3].trim(),{globalFilter:l}=B();if(!u.includes(l))return null;let c=u,d=o[1],f=o[2],h;switch(f){case" ":h="Todo";break;default:h="Done"}let g=c.match(D.blockLinkRegex),m=g!==null?g[0]:"";m!==""&&(c=c.replace(D.blockLinkRegex,"").trim());let y,P="3",w=null,N=null,V=!1,le=null,ge=null,ne="",$=null,dt=[],Le="",x=20,E=0;do{y=!1;let A=c.match(D.priorityRegex);if(A!==null){switch(A[1]){case we.Low:P="4";break;case we.Medium:P="2";break;case we.High:P="1";break}c=c.replace(D.priorityRegex,"").trim(),y=!0}let _=c.match(D.doneDateRegex);_!==null&&(ge=window.moment(_[1],D.dateFormat),c=c.replace(D.doneDateRegex,"").trim(),y=!0);let S=c.match(D.dueDateRegex);S!==null&&(le=window.moment(S[1],D.dateFormat),c=c.replace(D.dueDateRegex,"").trim(),y=!0);let k=c.match(D.scheduledDateRegex);k!==null&&(N=window.moment(k[1],D.dateFormat),c=c.replace(D.scheduledDateRegex,"").trim(),y=!0);let I=c.match(D.startDateRegex);I!==null&&(w=window.moment(I[1],D.dateFormat),c=c.replace(D.startDateRegex,"").trim(),y=!0);let te=c.match(D.recurrenceRegex);te!==null&&(ne=te[1].trim(),c=c.replace(D.recurrenceRegex,"").trim(),y=!0);let z=c.match(D.hashTagsFromEnd);if(z!=null){c=c.replace(D.hashTagsFromEnd,"").trim(),y=!0;let oe=z[0].trim();Le=Le.length>0?[oe,Le].join(" "):oe}E++}while(y&&E<=x);ne.length>0&&($=Me.fromText({recurrenceRuleText:ne,startDate:w,scheduledDate:N,dueDate:le})),st.canApplyFallback({startDate:w,scheduledDate:N,dueDate:le})&&a!==null&&(N=a,V=!0),Le.length>0&&(c+=" "+Le);let b=c.match(D.hashTags);return b!==null&&(dt=b.filter(A=>A!==l).map(A=>A.trim())),new ie({status:h,description:c,path:t,indentation:d,sectionStart:n,sectionIndex:i,originalStatusCharacter:f,precedingHeader:s,priority:P,startDate:w,scheduledDate:N,dueDate:le,doneDate:ge,recurrence:$,blockLink:m,tags:dt,originalMarkdown:e,scheduledDateIsInferred:V})}toLi(s){return J(this,arguments,function*({parentUlElement:e,listIndex:t,layoutOptions:n,isFilenameUnique:i}){let a=e.createEl("li");a.addClasses(["task-list-item","plugin-tasks-list-item"]);let o=this.toString(n),{globalFilter:u,removeGlobalFilter:l}=B();l&&(o=o.replace(u,"").trim());let c=a.createSpan();c.addClass("tasks-list-text"),yield fp.MarkdownRenderer.renderMarkdown(o,c,this.path,null);let d=c.querySelector("blockquote"),f=d!=null?d:c,h=f.querySelector("p");if(h!==null){for(;h.firstChild;)f.insertBefore(h.firstChild,h);h.remove()}c.findAll("p").forEach(m=>{m.hasChildNodes()||m.remove()}),c.findAll(".footnotes").forEach(m=>{m.remove()});let g=a.createEl("input");return g.addClass("task-list-item-checkbox"),g.type="checkbox",this.status!=="Todo"&&(g.checked=!0,a.addClass("is-checked")),g.onClickEvent(m=>{m.preventDefault(),m.stopPropagation(),g.disabled=!0;let y=this.toggle();ws({originalTask:this,newTasks:y})}),a.prepend(g),a.setAttr("data-task",this.originalStatusCharacter.trim()),a.setAttr("data-line",t),g.setAttr("data-line",t),n!=null&&n.shortMode&&this.addTooltip({element:c,isFilenameUnique:i}),a})}toString(e){var i;e=e!=null?e:new sn;let t=this.description;if(!e.hidePriority){let s="";this.priority==="1"?s=" "+we.High:this.priority==="2"?s=" "+we.Medium:this.priority==="4"&&(s=" "+we.Low),t+=s}return!e.hideRecurrenceRule&&this.recurrence&&(t+=e.shortMode?" "+qt:` ${qt} ${this.recurrence.toText()}`),!e.hideStartDate&&this.startDate&&(t+=e.shortMode?" "+Wt:` ${Wt} ${this.startDate.format(D.dateFormat)}`),!e.hideScheduledDate&&this.scheduledDate&&!this.scheduledDateIsInferred&&(t+=e.shortMode?" "+Lt:` ${Lt} ${this.scheduledDate.format(D.dateFormat)}`),!e.hideDueDate&&this.dueDate&&(t+=e.shortMode?" "+Yt:` ${Yt} ${this.dueDate.format(D.dateFormat)}`),!e.hideDoneDate&&this.doneDate&&(t+=e.shortMode?" "+_o:` ${_o} ${this.doneDate.format(D.dateFormat)}`),t+=(i=this.blockLink)!=null?i:"",t}toFileLineString(){return`${this.indentation}- [${this.originalStatusCharacter}] ${this.toString()}`}toggle(){let e=this.status==="Todo"?"Done":"Todo",t=null,n=null;if(e!=="Todo"){let{setDoneDate:a}=B();a&&(t=window.moment()),this.recurrence!==null&&(n=this.recurrence.next())}let i=new ie(ft(De({},this),{status:e,doneDate:t,originalStatusCharacter:e==="Done"?"x":" "})),s=[];if(n!==null){let a=new ie(ft(De(De({},this),n),{blockLink:""}));s.push(a)}return s.push(i),s}get urgency(){return this._urgency===null&&(this._urgency=Jt.calculate(this)),this._urgency}get filename(){let e=this.path.match(/([^/]+)\.md$/);return e!==null?e[1]:null}getLinkText({isFilenameUnique:e}){let t;return e?t=this.filename:t="/"+this.path,t===null?null:(this.precedingHeader!==null&&this.precedingHeader!==t&&(t=t+" > "+this.precedingHeader),t)}static tasksListsIdentical(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.identicalTo(t[i]))}identicalTo(e){let t=["status","description","path","indentation","sectionStart","sectionIndex","originalStatusCharacter","precedingHeader","priority","blockLink","scheduledDateIsInferred"];for(let s of t)if(this[s]!==e[s])return!1;if(this.tags.length!==e.tags.length||!this.tags.every(function(s,a){return s===e.tags[a]}))return!1;t=["startDate","scheduledDate","dueDate","doneDate"];for(let s of t){let a=this[s],o=e[s];if(Ve.compareByDate(a,o)!==0)return!1}let n=this.recurrence,i=e.recurrence;return n===null&&i!==null||n!==null&&i===null?!1:!(n&&i&&!n.identicalTo(i))}addTooltip({element:e,isFilenameUnique:t}){e.addEventListener("mouseenter",()=>{let n=e.createDiv();n.addClasses(["tooltip","mod-right"]),this.recurrence&&n.createDiv().setText(`${qt} ${this.recurrence.toText()}`),this.startDate&&n.createDiv().setText(ie.toTooltipDate({signifier:Wt,date:this.startDate})),this.scheduledDate&&n.createDiv().setText(ie.toTooltipDate({signifier:Lt,date:this.scheduledDate})),this.dueDate&&n.createDiv().setText(ie.toTooltipDate({signifier:Yt,date:this.dueDate})),this.doneDate&&n.createDiv().setText(ie.toTooltipDate({signifier:_o,date:this.doneDate}));let i=this.getLinkText({isFilenameUnique:t});i&&n.createDiv().setText(`\u{1F517} ${i}`),e.addEventListener("mouseleave",()=>{n.remove()})})}static toTooltipDate({signifier:e,date:t}){return`${e} ${t.format(D.dateFormat)} (${t.from(window.moment().startOf("day"))})`}escapeRegExp(e){return e.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}getDescriptionWithoutGlobalFilter(){let{globalFilter:e}=B(),t=this.description;if(e.length===0)return t;let n=RegExp("(^|\\s)"+this.escapeRegExp(e)+"($|\\s)","ug");return this.description.search(n)>-1&&(t=t.replace(n,"$1$2").replace("  "," ").trim()),t}};var Qn=class{constructor(e){this.fetch=e;this._value=void 0}get value(){return this._value===void 0&&(this._value=this.fetch()),this._value}};var br=class{constructor({metadataCache:e,vault:t,events:n}){this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new Es,this.state="Cold",this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){let e=this.metadataCache.on("resolved",()=>J(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){let{useFilenameAsScheduledDate:e}=B(),t=this.vault.on("create",s=>{s instanceof Ns.TFile&&this.tasksMutex.runExclusive(()=>{this.indexFile(s)})});this.vaultEventReferences.push(t);let n=this.vault.on("delete",s=>{s instanceof Ns.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(a=>a.path!==s.path),this.notifySubscribers()})});this.vaultEventReferences.push(n);let i=this.vault.on("rename",(s,a)=>{s instanceof Ns.TFile&&this.tasksMutex.runExclusive(()=>{let o=new Qn(()=>st.fromPath(s.path));this.tasks=this.tasks.map(u=>u.path===a?e?st.updateTaskPath(u,s.path,o.value):new ie(ft(De({},u),{path:s.path})):u),this.notifySubscribers()})});this.vaultEventReferences.push(i)}subscribeToEvents(){let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.tasksMutex.runExclusive(()=>J(this,null,function*(){this.state="Initializing",yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.notifySubscribers()}))}indexFile(e){return J(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=br.getTasksFromFileContent(a,i,t,e)}ie.tasksListsIdentical(n,s)||(this.getState()=="Warm"&&console.debug(`At least one task, its line number or its heading has changed in ${e.path}: triggering a refresh of all active Tasks blocks in Live Preview and Reading mode views.`),this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.notifySubscribers())})}static getTasksFromFileContent(e,t,n,i){let s=[],a=e.split(`
`),o=new Qn(()=>st.fromPath(i.path)),u=null,l=0;for(let c of t)if(c.task!==void 0){if((u===null||u.position.end.line<c.position.start.line)&&(u=br.getSection(c.position.start.line,n.sections),l=0),u===null)continue;let d=a[c.position.start.line],f=ie.fromLine({line:d,path:i.path,sectionStart:u.position.start.line,sectionIndex:l,precedingHeader:br.getPrecedingHeader(c.position.start.line,n.headings),fallbackDate:o.value});f!==null&&(l++,s.push(f))}return s}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var gd=require("obsidian");var s_=require("obsidian");function Ur(){}function Eo(r){return r()}function hp(){return Object.create(null)}function qr(r){r.forEach(Eo)}function yp(r){return typeof r=="function"}function gp(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function _p(r){return Object.keys(r).length===0}var Tp=!1;function mT(){Tp=!0}function yT(){Tp=!1}function v(r,e){r.appendChild(e)}function ri(r,e,t){r.insertBefore(e,t||null)}function cn(r){r.parentNode.removeChild(r)}function bp(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function q(r){return document.createElement(r)}function gT(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function $t(r){return document.createTextNode(r)}function X(){return $t(" ")}function Mt(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function vp(r){return function(e){return e.preventDefault(),r.call(this,e)}}function O(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function _T(r){return Array.from(r.childNodes)}function Ep(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function Ot(r,e){r.value=e==null?"":e}function wo(r,e,t){r.classList[t?"add":"remove"](e)}var Fr=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=gT(t.nodeName):this.e=q(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)ri(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(cn)}};var ti;function ei(r){ti=r}function TT(){if(!ti)throw new Error("Function called outside component initialization");return ti}function Ro(r){TT().$$.on_mount.push(r)}var Jn=[];var Cs=[],Ss=[],mp=[],bT=Promise.resolve(),bo=!1;function vT(){bo||(bo=!0,bT.then(wp))}function vo(r){Ss.push(r)}var To=new Set,xs=0;function wp(){let r=ti;do{for(;xs<Jn.length;){let e=Jn[xs];xs++,ei(e),ET(e.$$)}for(ei(null),Jn.length=0,xs=0;Cs.length;)Cs.pop()();for(let e=0;e<Ss.length;e+=1){let t=Ss[e];To.has(t)||(To.add(t),t())}Ss.length=0}while(Jn.length);for(;mp.length;)mp.pop()();bo=!1,To.clear(),ei(r)}function ET(r){if(r.fragment!==null){r.update(),qr(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(vo)}}var wT=new Set;function RT(r,e){r&&r.i&&(wT.delete(r),r.i(e))}var $x=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function DT(r,e,t,n){let{fragment:i,on_mount:s,on_destroy:a,after_update:o}=r.$$;i&&i.m(e,t),n||vo(()=>{let u=s.map(Eo).filter(yp);a?a.push(...u):qr(u),r.$$.on_mount=[]}),o.forEach(vo)}function Rp(r,e){let t=r.$$;t.fragment!==null&&(qr(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function MT(r,e){r.$$.dirty[0]===-1&&(Jn.push(r),vT(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function Dp(r,e,t,n,i,s,a,o=[-1]){let u=ti;ei(r);let l=r.$$={fragment:null,ctx:null,props:s,update:Ur,not_equal:i,bound:hp(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:hp(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(d,f,...h)=>{let g=h.length?h[0]:f;return l.ctx&&i(l.ctx[d],l.ctx[d]=g)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](g),c&&MT(r,d)),f}):[],l.update(),c=!0,qr(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){mT();let d=_T(e.target);l.fragment&&l.fragment.l(d),d.forEach(cn)}else l.fragment&&l.fragment.c();e.intro&&RT(r.$$.fragment),DT(r,e.target,e.anchor,e.customElement),yT(),wp()}ei(u)}var OT;typeof HTMLElement=="function"&&(OT=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(Eo).filter(yp);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){qr(this.$$.on_disconnect)}$destroy(){Rp(this,1),this.$destroy=Ur}$on(r,e){let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!_p(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var Is=class{$destroy(){Rp(this,1),this.$destroy=Ur}$on(e,t){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!_p(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var ns=vs(Re());var GP={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function On(r){for(let[e,t]of Object.entries(GP))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}function t_(r,e,t){let n=r.slice();return n[28]=e[t].value,n[29]=e[t].label,n[30]=e[t].symbol,n}function HP(r){let e,t=r[30]+"",n;return{c(){e=q("span"),n=$t(t)},m(i,s){ri(i,e,s),v(e,n)},p:Ur,d(i){i&&cn(e)}}}function r_(r){let e,t,n,i,s,a,o,u,l=r[29]+"",c,d,f=r[30]&&r[30].charCodeAt(0)>=256,h,g,m,y,P=f&&HP(r);return{c(){e=q("span"),t=q("input"),a=X(),o=q("label"),u=q("span"),c=$t(l),d=X(),P&&P.c(),g=X(),O(t,"type","radio"),O(t,"id",n="priority-"+r[28]),t.__value=i=r[28],t.value=t.__value,O(t,"accesskey",s=r[8](r[29].charAt(0).toLowerCase())),r[20][0].push(t),O(u,"class","accesskey-first"),O(o,"for",h="priority-"+r[28])},m(w,N){ri(w,e,N),v(e,t),t.checked=t.__value===r[0].priority,v(e,a),v(e,o),v(o,u),v(u,c),v(o,d),P&&P.m(o,null),v(e,g),m||(y=Mt(t,"change",r[19]),m=!0)},p(w,N){N[0]&256&&s!==(s=w[8](w[29].charAt(0).toLowerCase()))&&O(t,"accesskey",s),N[0]&1&&(t.checked=t.__value===w[0].priority),f&&P.p(w,N)},d(w){w&&cn(e),r[20][0].splice(r[20][0].indexOf(t),1),P&&P.d(),m=!1,y()}}}function zP(r){let e,t,n,i,s,a,o,u,l,c,d,f,h,g,m,y,P,w,N,V,le,ge,ne,$,dt,Le,x,E,b,A,_,S,k,I,te,z,oe,de,Ce,ze,tt,Vt,Ie,rt,en,Xt,qd,Dt,ps,Wd,Wn,Ld,Yd,hs,$d,Ln,ms,jd,It,ys,Bd,tn,xr,gs,Gd,yr,_s,Hd,no,Ts=r[0].status+"",io,zd,Yn,so,Kd,bs,Vd,rn,$n,Xd,jn,ao,Zd,nn=r[9],Ke=[];for(let F=0;F<nn.length;F+=1)Ke[F]=r_(t_(r,nn,F));return{c(){e=q("div"),t=q("form"),n=q("div"),i=q("label"),i.innerHTML='Descrip<span class="accesskey">t</span>ion',s=X(),a=q("input"),u=X(),l=q("div"),c=q("label"),d=$t("Priority"),h=X();for(let F=0;F<Ke.length;F+=1)Ke[F].c();g=X(),m=q("div"),y=q("label"),y.textContent="Recurs",P=X(),w=q("input"),V=X(),le=q("code"),ge=$t(qt),ne=X(),$=new Fr(!1),dt=X(),Le=q("label"),Le.textContent="Due",x=X(),E=q("input"),A=X(),_=q("code"),S=$t(Yt),k=X(),I=new Fr(!1),te=X(),z=q("label"),z.textContent="Scheduled",oe=X(),de=q("input"),ze=X(),tt=q("code"),Vt=$t(Lt),Ie=X(),rt=new Fr(!1),en=X(),Xt=q("label"),Xt.innerHTML='St<span class="accesskey">a</span>rt',qd=X(),Dt=q("input"),Wd=X(),Wn=q("code"),Ld=$t(Wt),Yd=X(),hs=new Fr(!1),$d=X(),Ln=q("div"),ms=q("label"),ms.innerHTML=`Only
                    <span class="accesskey-first">future</span> dates:`,jd=X(),It=q("input"),Bd=X(),tn=q("div"),xr=q("div"),gs=q("label"),gs.textContent="Status:",Gd=X(),yr=q("input"),Hd=X(),no=q("code"),io=$t(Ts),zd=X(),Yn=q("div"),so=q("span"),so.textContent="Done on:",Kd=X(),bs=q("code"),Vd=X(),rn=q("div"),$n=q("button"),$n.textContent="Apply",Xd=X(),jn=q("button"),jn.textContent="Cancel",O(i,"for","description"),O(a,"id","description"),O(a,"type","text"),O(a,"class","tasks-modal-description"),O(a,"placeholder","Take out the trash"),O(a,"accesskey",o=r[8]("t")),O(n,"class","tasks-modal-section"),O(c,"for",f="priority-"+r[0].priority),O(l,"class","tasks-modal-section tasks-modal-priorities"),O(y,"for","recurrence"),O(y,"class","accesskey-first"),O(w,"id","description"),O(w,"type","text"),O(w,"placeholder","Try 'every 2 weeks on Thursday'."),O(w,"accesskey",N=r[8]("r")),$.a=null,O(Le,"for","due"),O(Le,"class","accesskey-first"),O(E,"id","due"),O(E,"type","text"),O(E,"placeholder",hd),O(E,"accesskey",b=r[8]("d")),I.a=null,O(z,"for","scheduled"),O(z,"class","accesskey-first"),O(de,"id","scheduled"),O(de,"type","text"),O(de,"placeholder",hd),O(de,"accesskey",Ce=r[8]("s")),rt.a=null,O(Xt,"for","start"),O(Dt,"id","start"),O(Dt,"type","text"),O(Dt,"placeholder",hd),O(Dt,"accesskey",ps=r[8]("a")),hs.a=null,O(ms,"for","forwardOnly"),O(It,"id","forwardOnly"),O(It,"type","checkbox"),O(It,"class","task-list-item-checkbox tasks-modal-checkbox"),O(It,"accesskey",ys=r[8]("f")),O(m,"class","tasks-modal-section tasks-modal-dates"),O(gs,"for","status"),O(yr,"id","status"),O(yr,"type","checkbox"),O(yr,"class","task-list-item-checkbox tasks-modal-checkbox"),yr.checked=_s=r[0].status==="Done",yr.disabled=!0,O(tn,"class","tasks-modal-section tasks-modal-status"),O($n,"type","submit"),O($n,"class","mod-cta"),O(jn,"type","button"),O(rn,"class","tasks-modal-section tasks-modal-buttons"),wo(t,"with-accesskeys",r[1]),O(e,"class","tasks-modal")},m(F,ce){ri(F,e,ce),v(e,t),v(t,n),v(n,i),v(n,s),v(n,a),Ot(a,r[0].description),r[18](a),v(t,u),v(t,l),v(l,c),v(c,d),v(l,h);for(let Ye=0;Ye<Ke.length;Ye+=1)Ke[Ye].m(l,null);v(t,g),v(t,m),v(m,y),v(m,P),v(m,w),Ot(w,r[0].recurrenceRule),v(m,V),v(m,le),v(le,ge),v(le,ne),$.m(r[6],le),v(m,dt),v(m,Le),v(m,x),v(m,E),Ot(E,r[0].dueDate),v(m,A),v(m,_),v(_,S),v(_,k),I.m(r[5],_),v(m,te),v(m,z),v(m,oe),v(m,de),Ot(de,r[0].scheduledDate),v(m,ze),v(m,tt),v(tt,Vt),v(tt,Ie),rt.m(r[4],tt),v(m,en),v(m,Xt),v(m,qd),v(m,Dt),Ot(Dt,r[0].startDate),v(m,Wd),v(m,Wn),v(Wn,Ld),v(Wn,Yd),hs.m(r[3],Wn),v(m,$d),v(m,Ln),v(Ln,ms),v(Ln,jd),v(Ln,It),It.checked=r[0].forwardOnly,v(t,Bd),v(t,tn),v(tn,xr),v(xr,gs),v(xr,Gd),v(xr,yr),v(xr,Hd),v(xr,no),v(no,io),v(tn,zd),v(tn,Yn),v(Yn,so),v(Yn,Kd),v(Yn,bs),bs.innerHTML=r[7],v(t,Vd),v(t,rn),v(rn,$n),v(rn,Xd),v(rn,jn),ao||(Zd=[Mt(a,"input",r[17]),Mt(l,"keyup",r[10]),Mt(w,"input",r[21]),Mt(E,"input",r[22]),Mt(de,"input",r[23]),Mt(Dt,"input",r[24]),Mt(It,"change",r[25]),Mt(jn,"click",r[11]),Mt(t,"submit",vp(r[12]))],ao=!0)},p(F,ce){if(ce[0]&256&&o!==(o=F[8]("t"))&&O(a,"accesskey",o),ce[0]&1&&a.value!==F[0].description&&Ot(a,F[0].description),ce[0]&1&&f!==(f="priority-"+F[0].priority)&&O(c,"for",f),ce[0]&769){nn=F[9];let Ye;for(Ye=0;Ye<nn.length;Ye+=1){let Qd=t_(F,nn,Ye);Ke[Ye]?Ke[Ye].p(Qd,ce):(Ke[Ye]=r_(Qd),Ke[Ye].c(),Ke[Ye].m(l,null))}for(;Ye<Ke.length;Ye+=1)Ke[Ye].d(1);Ke.length=nn.length}ce[0]&256&&N!==(N=F[8]("r"))&&O(w,"accesskey",N),ce[0]&1&&w.value!==F[0].recurrenceRule&&Ot(w,F[0].recurrenceRule),ce[0]&64&&$.p(F[6]),ce[0]&256&&b!==(b=F[8]("d"))&&O(E,"accesskey",b),ce[0]&1&&E.value!==F[0].dueDate&&Ot(E,F[0].dueDate),ce[0]&32&&I.p(F[5]),ce[0]&256&&Ce!==(Ce=F[8]("s"))&&O(de,"accesskey",Ce),ce[0]&1&&de.value!==F[0].scheduledDate&&Ot(de,F[0].scheduledDate),ce[0]&16&&rt.p(F[4]),ce[0]&256&&ps!==(ps=F[8]("a"))&&O(Dt,"accesskey",ps),ce[0]&1&&Dt.value!==F[0].startDate&&Ot(Dt,F[0].startDate),ce[0]&8&&hs.p(F[3]),ce[0]&256&&ys!==(ys=F[8]("f"))&&O(It,"accesskey",ys),ce[0]&1&&(It.checked=F[0].forwardOnly),ce[0]&1&&_s!==(_s=F[0].status==="Done")&&(yr.checked=_s),ce[0]&1&&Ts!==(Ts=F[0].status+"")&&Ep(io,Ts),ce[0]&128&&(bs.innerHTML=F[7]),ce[0]&2&&wo(t,"with-accesskeys",F[1])},i:Ur,o:Ur,d(F){F&&cn(e),r[18](null),bp(Ke,F),ao=!1,qr(Zd)}}}var hd="Try 'Monday' or 'tomorrow', or [td|tm|yd|tw|nw|we] then space.";function KP(r,e,t){let n;var i,s;let{task:a}=e,{onSubmit:o}=e,u,l={description:"",status:"Todo",priority:"none",recurrenceRule:"",startDate:"",scheduledDate:"",dueDate:"",doneDate:"",forwardOnly:!0},c="",d="",f="",h="",g="",m=!1,y=!0,P=[{value:"low",label:"Low",symbol:we.Low},{value:"none",label:"Normal",symbol:we.None},{value:"medium",label:"Medium",symbol:we.Medium},{value:"high",label:"High",symbol:we.High}];function w(_,S,k=void 0){if(!S)return`<i>no ${_} date</i>`;let I=ns.parseDate(S,k,{forwardDate:k!=null});return I!==null?window.moment(I).format("YYYY-MM-DD"):`<i>invalid ${_} date</i>`}Ro(()=>{let{globalFilter:_,provideAccessKeys:S}=B();t(1,y=S);let k=a.getDescriptionWithoutGlobalFilter();(k!=a.description||k.indexOf(_)==-1)&&(m=!0);let I="none";a.priority==="4"?I="low":a.priority==="2"?I="medium":a.priority==="1"&&(I="high"),t(0,l={description:k,status:a.status,priority:I,recurrenceRule:a.recurrence?a.recurrence.toText():"",startDate:a.startDate?a.startDate.format("YYYY-MM-DD"):"",scheduledDate:a.scheduledDate?a.scheduledDate.format("YYYY-MM-DD"):"",dueDate:a.dueDate?a.dueDate.format("YYYY-MM-DD"):"",doneDate:a.doneDate?a.doneDate.format("YYYY-MM-DD"):"",forwardOnly:!0}),setTimeout(()=>{u.focus()},10)});let N=_=>{if(_.key&&!_.altKey&&!_.ctrlKey){let S=P.find(k=>k.label.charAt(0).toLowerCase()==_.key);S&&t(0,l.priority=S.value,l)}},V=()=>{o([])},le=()=>{let{globalFilter:_}=B(),S=l.description.trim();m&&(S=_+" "+S);let k=null,I=ns.parseDate(l.startDate,new Date,{forwardDate:l.forwardOnly});I!==null&&(k=window.moment(I));let te=null,z=ns.parseDate(l.scheduledDate,new Date,{forwardDate:l.forwardOnly});z!==null&&(te=window.moment(z));let oe=null,de=ns.parseDate(l.dueDate,new Date,{forwardDate:l.forwardOnly});de!==null&&(oe=window.moment(de));let Ce=null;l.recurrenceRule&&(Ce=Me.fromText({recurrenceRuleText:l.recurrenceRule,startDate:k,scheduledDate:te,dueDate:oe}));let ze;switch(l.priority){case"low":ze="4";break;case"medium":ze="2";break;case"high":ze="1";break;default:ze="3"}let tt=new ie(Object.assign(Object.assign({},a),{description:S,status:l.status,priority:ze,recurrence:Ce,startDate:k,scheduledDate:te,dueDate:oe,doneDate:window.moment(l.doneDate,"YYYY-MM-DD").isValid()?window.moment(l.doneDate,"YYYY-MM-DD"):null}));o([tt])},ge=[[]];function ne(){l.description=this.value,t(0,l)}function $(_){Cs[_?"unshift":"push"](()=>{u=_,t(2,u)})}function dt(){l.priority=this.__value,t(0,l)}function Le(){l.recurrenceRule=this.value,t(0,l)}function x(){l.dueDate=this.value,t(0,l)}function E(){l.scheduledDate=this.value,t(0,l)}function b(){l.startDate=this.value,t(0,l)}function A(){l.forwardOnly=this.checked,t(0,l)}return r.$$set=_=>{"task"in _&&t(13,a=_.task),"onSubmit"in _&&t(14,o=_.onSubmit)},r.$$.update=()=>{if(r.$$.dirty[0]&2){e:t(8,n=_=>y?_:null)}if(r.$$.dirty[0]&1){e:t(0,l.startDate=On(l.startDate),l),t(3,c=w("start",l.startDate,l.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&1){e:t(0,l.scheduledDate=On(l.scheduledDate),l),t(4,d=w("scheduled",l.scheduledDate,l.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&1){e:t(0,l.dueDate=On(l.dueDate),l),t(5,f=w("due",l.dueDate,l.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&98305){e:l.recurrenceRule?t(6,h=t(16,s=t(15,i=Me.fromText({recurrenceRuleText:l.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))===null||i===void 0?void 0:i.toText())!==null&&s!==void 0?s:"<i>invalid recurrence rule</i>"):t(6,h="<i>not recurring</>")}if(r.$$.dirty[0]&1){e:t(7,g=w("done",l.doneDate))}},[l,y,u,c,d,f,h,g,n,P,N,V,le,a,o,i,s,ne,$,dt,ge,Le,x,E,b,A]}var md=class extends Is{constructor(e){super(),Dp(this,e,KP,zP,gp,{task:13,onSubmit:14},null,[-1,-1])}},i_=md;var Pn=class extends s_.Modal{constructor({app:t,task:n,onSubmit:i}){super(t);this.task=n,this.onSubmit=s=>{s.length&&i(s),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task");let{contentEl:t}=this;new i_({target:t,props:{task:this.task,onSubmit:this.onSubmit}})}onClose(){let{contentEl:t}=this;t.empty()}};var a_=(r,e,t,n)=>{var d;if(r)return t instanceof gd.MarkdownView;if(!(t instanceof gd.MarkdownView))return;let i=(d=t.file)==null?void 0:d.path;if(i===void 0)return;let a=e.getCursor().line,o=e.getLine(a),u=VP({line:o,path:i}),l=f=>{let h=st.removeInferredStatusIfNeeded(u,f).map(g=>g.toFileLineString()).join(`
`);e.setLine(a,h)};new Pn({app:n,task:u,onSubmit:l}).open()},VP=({line:r,path:e})=>{var d;let t=st.fromPath(e),n=ie.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:t});if(n!==null)return n;let i=r.match(D.nonTaskRegex);if(i===null)return console.error("Tasks: Cannot create task on line:",r),new ie({status:"Todo",description:"",path:e,indentation:"",originalStatusCharacter:" ",priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,blockLink:"",tags:[],originalMarkdown:"",scheduledDateIsInferred:!1});let s=i[1],a=(d=i[3])!=null?d:" ",o=a===" "?"Todo":"Done",u=i[4],l=r.match(D.blockLinkRegex),c=l!==null?l[0]:"";return c!==""&&(u=u.replace(D.blockLinkRegex,"")),new ie({status:o,description:u,path:e,indentation:s,originalStatusCharacter:a,blockLink:c,priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,tags:[],originalMarkdown:"",scheduledDateIsInferred:!1})};var _d=require("obsidian");var o_=(r,e,t)=>{var u;if(r)return t instanceof _d.MarkdownView;if(!(t instanceof _d.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=XP(a,n);e.setLine(s,o),e.setCursor({line:i.line,ch:QP(i.ch,a,o)})},XP=(r,e)=>{let t=r,n=ie.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:null});if(n!==null)t=ZP(n);else{let i=r.match(D.taskRegex);if(i!==null){let a=i[2].toLowerCase()===" "?"x":" ";t=r.replace(D.taskRegex,`$1- [${a}] $3`)}else D.listItemRegex.test(r)?t=r.replace(D.listItemRegex,"$1$2 [ ]"):t=r.replace(D.indentationRegex,"$1- ")}return t},ZP=r=>r.toggle().map(n=>n.toFileLineString()).join(`
`),QP=(r,e,t)=>{let n=t.length;if(n<=e.length)return r>=t.length?n:r;let i=13;if(t.match(D.doneDateRegex)&&n-e.length>=i&&(n-=i),n>=2*e.length&&t.search(`.+
.+`)!==-1)return r+n-e.length;let s=t.search(/[-*]/);return r<s?r:r+n-e.length};var Oa=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>a_(t,n,i,this.app)}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:o_})}};var Pa=class{constructor({obsidianEvents:e}){this.obsidianEvents=e}onCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.obsidianEvents.offref(e)}};var Aa=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return J(this,null,function*(){var c;let{globalFilter:n}=B(),i=e.findAll(".task-list-item").filter(d=>{var g;let f=(g=d.textContent)==null?void 0:g.split(`
`);if(f===void 0)return!1;let h=null;for(let m=0;m<f.length;m=m+1)if(f[m]!==""){h=f[m];break}return h===null?!1:h.includes(n)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let d=a.lineStart;d<=a.lineEnd;d++){let f=o[d];if(f===void 0)continue;let h=ie.fromLine({line:f,path:s,sectionStart:a.lineStart,sectionIndex:u,precedingHeader:null,fallbackDate:null});h!==null&&(l.push(h),u++)}for(let d=0;d<i.length;d++){let f=l[d],h=i[d];if(f===void 0||h===void 0)continue;let g=(c=h.getAttr("data-line"))!=null?c:"0",m=Number.parseInt(g,10),y=yield f.toLi({parentUlElement:e,listIndex:m}),P=h.childNodes;for(let V=0;V<P.length;V=V+1){let le=P[V];le.nodeName.toLowerCase()==="div"?y.prepend(le):le.nodeName.toLowerCase()==="ul"&&y.append(le)}let w=h.querySelectorAll("[data-footnote-id]"),N=y.querySelectorAll("[data-footnote-id]");if(w.length===N.length)for(let V=0;V<w.length;V++)N[V].replaceWith(w[V]);h.replaceWith(y)}})}};var u_=require("@codemirror/view"),l_=require("obsidian");var c_=()=>u_.ViewPlugin.fromClass(Td),Td=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let f=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(f),new l_.Notice(f,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=ie.fromLine({line:a.text,path:"",sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:null});if(console.debug(`Live Preview Extension: toggle called. Position: ${s} Line: ${a.text}`),o===null)return!1;e.preventDefault();let l=o.toggle().map(f=>f.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let d=t.checked;return setTimeout(()=>{t.checked=d},1),!0}};var eo=require("obsidian");var An=class{matchesAnyOf(e){return e.some(t=>this.matches(t))}};var Xr=class extends An{constructor(t){super();this.stringToFind=t}matches(t){return Xr.stringIncludesCaseInsensitive(t,this.stringToFind)}static stringIncludesCaseInsensitive(t,n){return t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}};var kn=class extends An{constructor(t){super();this.regex=t}static validateAndConstruct(t){let n=/\/((?![*+?])(?:[^\r\n[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*])+)\/((?:g(?:im?|mi?)?|i(?:gm?|mg?)?|m(?:gi?|ig?)?)?)/,i=t.match(n);if(i!==null){let s=new RegExp(i[1],i[2]);return new kn(s)}else return null}matches(t){return t.match(this.regex)!==null}};var ye=class{constructor(e,t=[],n=""){this.description=e,this.symbol=n,this.children=t}static booleanAnd(e){return this.combineOrCreateExplanation("All of",e,"AND")}static booleanOr(e){return this.combineOrCreateExplanation("At least one of",e,"OR")}static booleanNot(e){return new ye("None of",e,"NOT")}static booleanXor(e){return new ye("Exactly one of",e,"XOR")}asString(e=""){if(this.children.length==0)return e+this.description;let t=e+`${this.symbol}`;this.children.length>1&&(t+=` (${this.description})`),t+=":";let n=e+"  ";for(let i=0;i<this.children.length;i++)t+=`
${this.children[i].asString(n)}`;return t}static combineOrCreateExplanation(e,t,n){if(t.length===2){let i=t[0],s=t[1];if(i.symbol===n&&s.symbol==="")return i.children.push(s),i}return new ye(e,t,n)}};var Ee=class{canCreateFilterForLine(e){return Ee.lineMatchesFilter(this.filterRegExp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}};var Je=class{constructor(e,t,n){this.instruction=e,this.explanation=n,this.filterFunction=t}explainFilterIndented(e){let t=this.explanation;return t.asString()===this.instruction?`${e}${this.instruction}
`:`${e}${this.instruction} =>
${t.asString("  ")}
`}},pe=class{constructor(e){this.instruction=e}get filter(){return this._filter}set filter(e){this._filter=e}get filterFunction(){if(this._filter)return this._filter.filterFunction}static fromFilter(e){let t=new pe(e.instruction);return t.filter=e,t}static fromError(e,t){let n=new pe(e);return n.error=t,n}};var wt=class extends Ee{createFilterOrErrorMessage(e){let t=Ee.getMatch(this.filterRegExp(),e);if(t===null)return pe.fromError(e,`do not understand query filter (${this.fieldName()})`);let[n,i,s]=t,a=null;if(i.includes("include"))a=new Xr(s);else if(i.includes("regex")&&(a=kn.validateAndConstruct(s),a===null))return pe.fromError(e,`cannot parse regex (${this.fieldName()}); check your leading and trailing slashes for your query`);if(a===null)return pe.fromError(e,`do not understand query filter (${this.fieldName()})`);let o=i.match(/not/)!==null,u=new Je(e,this.getFilter(a,o),new ye(e));return pe.fromFilter(u)}static stringIncludesCaseInsensitive(e,t){return Xr.stringIncludesCaseInsensitive(e,t)}fieldPattern(){return this.fieldName()}filterOperatorPattern(){return"includes|does not include|regex matches|regex does not match"}filterRegExp(){return new RegExp(`^(?:${this.fieldPattern()}) (${this.filterOperatorPattern()}) (.*)`)}getFilter(e,t){return n=>{let i=e.matches(this.value(n));return t?!i:i}}};var ka=class extends wt{fieldName(){return"description"}value(e){let t=B().globalFilter;return e.description.replace(t,"").trim()}};var d_=vs(Re()),cr=class{static parseDate(e,t=!1){return window.moment(d_.parseDate(e,void 0,{forwardDate:t})).startOf("day")}};var Na=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e==this._instruction}createFilterOrErrorMessage(e){let t=new pe(e);return e===this._instruction?(t.filter=new Je(e,this._filter,new ye(e)),t):(t.error=`do not understand filter: ${e}`,t)}};var Pr=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new Na(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let n of this._filters){let i=n.createFilterOrErrorMessage(e);if(i.error===void 0)return i}let t=new pe(e);return t.error=`do not understand filter: ${e}`,t}};var et=class extends Ee{constructor(){super();this.filterInstructions=new Pr,this.filterInstructions.add(`has ${this.fieldName()} date`,t=>this.date(t)!==null),this.filterInstructions.add(`no ${this.fieldName()} date`,t=>this.date(t)===null),this.filterInstructions.add(`${this.fieldName()} date is invalid`,t=>{let n=this.date(t);return n!==null&&!n.isValid()})}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);if(n.filter!==void 0)return n;let i=new pe(t),s=Ee.getMatch(this.filterRegExp(),t),a;if(s!==null){let o=cr.parseDate(s[2]);if(!o.isValid())i.error="do not understand "+this.fieldName()+" date";else{let u;s[1]==="before"?(a=c=>{let d=this.date(c);return d?d.isBefore(o):this.filterResultIfFieldMissing()},u=" "+s[1]):s[1]==="after"?(a=c=>{let d=this.date(c);return d?d.isAfter(o):this.filterResultIfFieldMissing()},u=" "+s[1]):(a=c=>{let d=this.date(c);return d?d.isSame(o):this.filterResultIfFieldMissing()},u=" on");let l=et.getExplanationString(this.fieldName(),u,this.filterResultIfFieldMissing(),o);i.filter=new Je(t,a,new ye(l))}}else i.error="do not understand query filter ("+this.fieldName()+" date)";return i}static getExplanationString(t,n,i,s){let a=s.format("YYYY-MM-DD (dddd Do MMMM YYYY)"),o=`${t} date is${n} ${a}`;return i&&(o+=` OR no ${t} date`),o}};var bd=class extends et{filterRegExp(){return bd.doneRegexp}fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}},is=bd;is.doneRegexp=/^done (before|after|on)? ?(.*)/;var vd=class extends et{filterRegExp(){return vd.dueRegexp}fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}},ss=vd;ss.dueRegexp=/^due (before|after|on)? ?(.*)/;var Ar=class extends Ee{constructor(){super(...arguments);this._filters=new Pr}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegExp(){return null}};var xa=class extends Ar{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};var Sa=class extends wt{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}};var Ca=class extends wt{fieldName(){return"path"}value(e){return e.path}};var Ed=class extends Ee{createFilterOrErrorMessage(e){let t=new pe(e),n=Ee.getMatch(this.filterRegExp(),e);if(n!==null){let i=n[3],s=null;switch(i){case"low":s="4";break;case"none":s="3";break;case"medium":s="2";break;case"high":s="1";break}if(s===null)return t.error="do not understand priority",t;let a=e,o;n[2]==="above"?o=u=>u.priority?u.priority.localeCompare(s)<0:!1:n[2]==="below"?o=u=>u.priority?u.priority.localeCompare(s)>0:!1:(o=u=>u.priority?u.priority===s:!1,a=`${this.fieldName()} is ${i}`),t.filter=new Je(e,o,new ye(a))}else t.error="do not understand query filter (priority)";return t}fieldName(){return"priority"}filterRegExp(){return Ed.priorityRegexp}},as=Ed;as.priorityRegexp=/^priority (is )?(above|below)? ?(low|none|medium|high)/;var wd=class extends et{filterRegExp(){return wd.scheduledRegexp}fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}},os=wd;os.scheduledRegexp=/^scheduled (before|after|on)? ?(.*)/;var Rd=class extends et{filterRegExp(){return Rd.startRegexp}fieldName(){return"start"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}},us=Rd;us.startRegexp=/^starts (before|after|on)? ?(.*)/;var Nn=class extends Ee{constructor(){super();this.filterInstructions=new Pr,this.filterInstructions.add(Nn.instructionForFieldPresence,t=>this.dates(t).some(n=>n!==null)),this.filterInstructions.add(Nn.instructionForFieldAbsence,t=>!this.dates(t).some(n=>n!==null))}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);if(n.filter!==void 0)return n;let i=new pe(t),s=Ee.getMatch(this.filterRegExp(),t);if(s!==null){let a=cr.parseDate(s[2]);if(!a.isValid())i.error="do not understand happens date";else{let o,u;s[1]==="before"?(o=c=>this.dates(c).some(d=>d&&d.isBefore(a)),u=" "+s[1]):s[1]==="after"?(o=c=>this.dates(c).some(d=>d&&d.isAfter(a)),u=" "+s[1]):(o=c=>this.dates(c).some(d=>d&&d.isSame(a)),u=" on");let l=et.getExplanationString("due, start or scheduled",u,!1,a);i.filter=new Je(t,o,new ye(l))}}else i.error="do not understand query filter (happens date)";return i}earliestDate(t){return new Nn().dates(t).sort(Ve.compareByDate)[0]}filterRegExp(){return Nn.happensRegexp}dates(t){return Array.of(t.startDate,t.scheduledDate,t.dueDate)}fieldName(){return"happens"}},dr=Nn;dr.happensRegexp=/^happens (before|after|on)? ?(.*)/,dr.instructionForFieldPresence="has happens date",dr.instructionForFieldAbsence="no happens date";var Ia=class extends Ar{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}};var Fa=class extends Ar{constructor(){super(),this._filters.add("done",e=>e.status==="Done"),this._filters.add("not done",e=>e.status!=="Done")}fieldName(){return"status"}};var Ua=class extends wt{fieldNamePlural(){return this.fieldNameSingular()+"s"}fieldName(){return`${this.fieldNameSingular()}/${this.fieldNamePlural()}`}fieldPattern(){return`${this.fieldNameSingular()}|${this.fieldNamePlural()}`}filterOperatorPattern(){return`${super.filterOperatorPattern()}|include|do not include`}value(e){return this.values(e).join(", ")}getFilter(e,t){return n=>{let i=e.matchesAnyOf(this.values(n));return t?!i:i}}};var qa=class extends Ua{fieldNameSingular(){return"tag"}values(e){return e.tags}};var R_=vs(w_());var $a=class extends Ee{constructor(){super(...arguments);this.basicBooleanRegexp=/(.*(AND|OR|XOR|NOT)\s*[("].*|\(.+\))/g;this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={}}filterRegExp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){let n=new pe(t);if(t.length===0)return n.error="empty line",n;let i=this.preprocessExpression(t);try{let s=(0,R_.parse)(i);for(let u of s)if(u.name==="IDENTIFIER"&&u.value){let l=u.value.trim();if(!(l in this.subFields)){let c=ja(l);if(c===null)return n.error=`couldn't parse sub-expression '${l}'`,n;if(c.error)return n.error=`couldn't parse sub-expression '${l}': ${c.error}`,n;c.filter&&(this.subFields[l]=c.filter)}}else if(u.name==="OPERATOR"){if(u.value==null)return n.error="empty operator in boolean query",n;if(!this.supportedOperators.includes(u.value))return n.error=`unknown boolean operator '${u.value}'`,n}let a=u=>this.filterTaskWithParsedQuery(u,s),o=this.constructExplanation(s);return n.filter=new Je(t,a,o),n}catch(s){let a=s instanceof Error?s.message:"unknown error type";return n.error=`malformed boolean query -- ${a} (check the documentation for guidelines)`,n}return n}preprocessExpression(t){return t.replace(/\(([^()]+)\)/g,'("$1")')}filterTaskWithParsedQuery(t,n){let i=o=>o==="true",s=o=>o?"true":"false",a=[];for(let o of n)if(o.name==="IDENTIFIER"){if(o.value==null)throw Error("null token value");let l=this.subFields[o.value.trim()].filterFunction(t);a.push(s(l))}else if(o.name==="OPERATOR")if(o.value==="NOT"){let u=i(a.pop());a.push(s(!u))}else if(o.value==="OR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u||l))}else if(o.value==="AND"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&l))}else if(o.value==="XOR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&!l||!u&&l))}else throw Error("Unsupported operator: "+o.value);else throw Error("Unsupported token type: "+o);return i(a[0])}constructExplanation(t){let n=[];for(let i of t)if(i.name==="IDENTIFIER"){if(i.value==null)throw Error("null token value");let s=this.subFields[i.value.trim()];n.push(s.explanation)}else if(i.name==="OPERATOR")if(i.value==="NOT"){let s=n.pop();n.push(ye.booleanNot([s]))}else if(i.value==="OR"){let s=n.pop(),a=n.pop();n.push(ye.booleanOr([a,s]))}else if(i.value==="AND"){let s=n.pop(),a=n.pop();n.push(ye.booleanAnd([a,s]))}else if(i.value==="XOR"){let s=n.pop(),a=n.pop();n.push(ye.booleanXor([a,s]))}else throw Error("Unsupported operator: "+i.value);else throw Error("Unsupported token type: "+i);return n[0]}};var Ba=class extends wt{fieldName(){return"filename"}value(e){let t=e.filename;return t===null?"":t+".md"}};var oA=[()=>new Fa,()=>new Ia,()=>new as,()=>new dr,()=>new us,()=>new os,()=>new ss,()=>new is,()=>new Ca,()=>new ka,()=>new qa,()=>new Sa,()=>new xa,()=>new $a,()=>new Ba];function ja(r){for(let e of oA){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}var Ga=class{constructor(e,t){this.nestingLevel=e,this.name=t}};var Ha=class{constructor(e){this.lastHeadingAtLevel=new Array;let n=e.keys().next().value.length;for(let i=0;i<n;i++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new Ga(n,i));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var za=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var Ka=class extends Map{},Va=class extends za{},Xa=class{constructor(e,t){this.groups=new Ka;let n=this.buildGroupingTree(e,t);this.groups=n.generateAllPaths(),this.groups=this.getSortedGroups()}buildGroupingTree(e,t){let n=new Va(t),i=[n];for(let s of e){let a=[];for(let o of i)for(let u of o.values){let l=Nr.getGroupNamesForTask(s.property,u);for(let c of l){let d=o.children.get(c);d===void 0&&(d=new Va([]),o.children.set(c,d),a.push(d)),d.values.push(u)}}i=a}return n}getSortedGroups(){return new Ka([...this.groups.entries()].sort())}};var Za=class{constructor(e,t,n){this.groups=e,this.groupHeadings=t,this.tasks=n}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} ${t.name}
`;return e+=this.tasksAsStringOfLines(),e}};var Qa=class{constructor(e,t){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length;let n=new Xa(e,t);this.addTasks(n)}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTasks(e){let t=new Ha(e.groups);for(let[n,i]of e.groups){let s=t.getHeadingsForTaskGroup(n),a=new Za(n,s,i);this.add(a)}}add(e){this._groups.push(e)}};var ee=class{static by(e,t){return new Qa(e,t)}static getGroupNamesForTask(e,t){let n=ee.groupers[e];return n(t)}static escapeMarkdownCharacters(e){return e.replace(/\\/g,"\\\\").replace(/_/g,"\\_")}static groupByPriority(e){let t="ERROR";switch(e.priority){case"1":t="High";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break}return[`Priority ${e.priority}: ${t}`]}static groupByRecurrence(e){return e.recurrence!==null?[e.recurrence.toText()]:["None"]}static groupByRecurring(e){return e.recurrence!==null?["Recurring"]:["Not Recurring"]}static groupByStartDate(e){return[ee.stringFromDate(e.startDate,"start")]}static groupByScheduledDate(e){return[ee.stringFromDate(e.scheduledDate,"scheduled")]}static groupByDueDate(e){return[ee.stringFromDate(e.dueDate,"due")]}static groupByDoneDate(e){return[ee.stringFromDate(e.doneDate,"done")]}static groupByHappensDate(e){let t=new dr().earliestDate(e);return[ee.stringFromDate(t,"happens")]}static stringFromDate(e,t){return e===null?"No "+t+" date":e.format(ee.groupDateFormat)}static groupByPath(e){return[ee.escapeMarkdownCharacters(e.path.replace(".md",""))]}static groupByFolder(e){let t=e.path,n=e.filename+".md",i=t.substring(0,t.lastIndexOf(n));return i===""?["/"]:[ee.escapeMarkdownCharacters(i)]}static groupByFileName(e){let t=e.filename;return t===null?["Unknown Location"]:[ee.escapeMarkdownCharacters(t)]}static groupByRoot(e){let t=e.path.replace(/\\/g,"/"),n=t.indexOf("/");return n==-1?["/"]:[ee.escapeMarkdownCharacters(t.substring(0,n+1))]}static groupByBacklink(e){if(e.getLinkText({isFilenameUnique:!0})===null)return["Unknown Location"];let n=ee.groupByFileName(e)[0];if(e.precedingHeader===null||e.precedingHeader.length===0)return[n];let i=ee.groupByHeading(e)[0];return n===i?[n]:[`${n} > ${i}`]}static groupByStatus(e){return[e.status]}static groupByHeading(e){return e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}static groupByTags(e){return e.tags.length==0?["(No tags)"]:e.tags}},Nr=ee;Nr.groupDateFormat="YYYY-MM-DD dddd",Nr.groupers={backlink:ee.groupByBacklink,done:ee.groupByDoneDate,due:ee.groupByDueDate,filename:ee.groupByFileName,folder:ee.groupByFolder,happens:ee.groupByHappensDate,heading:ee.groupByHeading,path:ee.groupByPath,priority:ee.groupByPriority,recurrence:ee.groupByRecurrence,recurring:ee.groupByRecurring,root:ee.groupByRoot,scheduled:ee.groupByScheduledDate,start:ee.groupByStartDate,status:ee.groupByStatus,tags:ee.groupByTags};var Un=class{constructor({source:e}){this._limit=void 0;this._layoutOptions=new sn;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this.sortByRegexp=/^sort by (urgency|status|priority|start|scheduled|due|done|path|description|tag)( reverse)?[\s]*(\d+)?/;this.groupByRegexp=/^group by (backlink|done|due|filename|folder|happens|heading|path|priority|recurrence|recurring|root|scheduled|start|status|tags)/;this.hideOptionsRegexp=/^(hide|show) (task count|backlink|priority|start date|scheduled date|done date|due date|recurrence rule|edit button|urgency)/;this.shortModeRegexp=/^short/;this.explainQueryRegexp=/^explain/;this.limitRegexp=/^limit (to )?(\d+)( tasks?)?/;this.commentRegexp=/^#.*/;this.source=e,e.split(`
`).map(t=>t.trim()).forEach(t=>{switch(!0){case t==="":break;case this.shortModeRegexp.test(t):this._layoutOptions.shortMode=!0;break;case this.explainQueryRegexp.test(t):this._layoutOptions.explainQuery=!0;break;case this.limitRegexp.test(t):this.parseLimit({line:t});break;case this.sortByRegexp.test(t):this.parseSortBy({line:t});break;case this.groupByRegexp.test(t):this.parseGroupBy({line:t});break;case this.hideOptionsRegexp.test(t):this.parseHideOptions({line:t});break;case this.commentRegexp.test(t):break;case this.parseFilter(t):break;default:this._error=`do not understand query: ${t}`}})}explainQuery(){return`Explanation of this Tasks code block query:

`+this.explainQueryWithoutIntroduction()}explainQueryWithoutIntroduction(){let e="",{globalFilter:t}=B();t.length!==0&&(e+=`Only tasks containing the global filter '${t}'.

`);let n=this.filters.length;if(n===0)e+="No filters supplied. All tasks will match the query.";else for(let i=0;i<n;i++)i>0&&(e+=`
`),e+=this.filters[i].explainFilterIndented("");return this._limit!==void 0&&(e+=`

At most ${this._limit} task`,this._limit!==1&&(e+="s"),e+=`.
`),e}get limit(){return this._limit}get layoutOptions(){return this._layoutOptions}get filters(){return this._filters}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}applyQueryToTasks(e){this.filters.forEach(n=>{e=e.filter(n.filterFunction)});let t=Ve.by(this,e).slice(0,this.limit);return Nr.by(this.grouping,t)}parseHideOptions({line:e}){let t=e.match(this.hideOptionsRegexp);if(t!==null){let n=t[1]==="hide";switch(t[2]){case"task count":this._layoutOptions.hideTaskCount=n;break;case"backlink":this._layoutOptions.hideBacklinks=n;break;case"priority":this._layoutOptions.hidePriority=n;break;case"start date":this._layoutOptions.hideStartDate=n;break;case"scheduled date":this._layoutOptions.hideScheduledDate=n;break;case"due date":this._layoutOptions.hideDueDate=n;break;case"done date":this._layoutOptions.hideDoneDate=n;break;case"recurrence rule":this._layoutOptions.hideRecurrenceRule=n;break;case"edit button":this._layoutOptions.hideEditButton=n;break;case"urgency":this._layoutOptions.hideUrgency=n;break;default:this._error="do not understand hide/show option"}}}parseFilter(e){let t=ja(e);return t!=null?(t.filter?this._filters.push(t.filter):this._error=t.error,!0):!1}parseLimit({line:e}){let t=e.match(this.limitRegexp);t!==null?this._limit=Number.parseInt(t[2],10):this._error="do not understand query limit"}parseSortBy({line:e}){let t=e.match(this.sortByRegexp);t!==null?this._sorting.push({property:t[1],reverse:!!t[2],propertyInstance:isNaN(+t[3])?1:+t[3]}):this._error="do not understand query sorting"}parseGroupBy({line:e}){let t=e.match(this.groupByRegexp);t!==null?this._grouping.push({property:t[1]}):this._error="do not understand query grouping"}};var Ja=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return J(this,null,function*(){n.addChild(new Fd({app:this.app,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},Fd=class extends eo.MarkdownRenderChild{constructor({app:t,events:n,container:i,source:s,filePath:a}){super(i);switch(this.app=t,this.events=n,this.source=s,this.filePath=a,this.containerEl.className){case"block-language-tasks":this.query=new Un({source:s}),this.queryType="tasks";break;default:this.query=new Un({source:s}),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=new Un({source:this.source}),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return J(this,arguments,function*({tasks:t,state:n}){var a;let s=this.containerEl.createEl("div");if(n==="Warm"&&this.query.error===void 0){console.debug(`Render ${this.queryType} called for a block in active file "${this.filePath}", to select from ${t.length} tasks: plugin state: ${n}`),this.query.layoutOptions.explainQuery&&this.createExplanation(s);let o=this.query.applyQueryToTasks(t);for(let l of o.groups){this.addGroupHeadings(s,l.groupHeadings);let{taskList:c}=yield this.createTasksList({tasks:l.tasks,content:s});s.appendChild(c)}let u=o.totalTasksCount();console.debug(`${u} of ${t.length} tasks displayed in a block in "${this.filePath}"`),this.addTaskCount(s,u)}else this.query.error!==void 0?s.setText(`Tasks query: ${this.query.error}`):s.setText("Loading Tasks ...");(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}createExplanation(t){let n=this.query.explainQuery(),i=t.createEl("pre");i.addClasses(["plugin-tasks-query-explanation"]),i.setText(n),t.appendChild(i)}createTasksList(i){return J(this,arguments,function*({tasks:t,content:n}){let s=t.length,a=n.createEl("ul");a.addClasses(["contains-task-list","plugin-tasks-query-result"]);for(let o=0;o<s;o++){let u=t[o],l=this.isFilenameUnique({task:u}),c=yield u.toLi({parentUlElement:a,listIndex:o,layoutOptions:this.query.layoutOptions,isFilenameUnique:l});c.querySelectorAll("[data-footnote-id]").forEach(h=>h.remove());let f=this.query.layoutOptions.shortMode;this.query.layoutOptions.hideUrgency||this.addUrgency(c,u),this.query.layoutOptions.hideBacklinks||this.addBacklinks(c,u,f,l),this.query.layoutOptions.hideEditButton||this.addEditButton(c,u),a.appendChild(c)}return{taskList:a,tasksCount:s}})}addEditButton(t,n){t.createEl("a",{cls:"tasks-edit"}).onClickEvent(s=>{s.preventDefault();let a=u=>{ws({originalTask:n,newTasks:st.removeInferredStatusIfNeeded(n,u)})};new Pn({app:this.app,task:n,onSubmit:a}).open()})}addUrgency(t,n){let i=new Intl.NumberFormat().format(n.urgency);t.createSpan({text:i,cls:"tasks-urgency"})}addGroupHeadings(t,n){for(let i of n)this.addGroupHeading(t,i)}addGroupHeading(t,n){return J(this,null,function*(){let i;n.nestingLevel===0?i=t.createEl("h4",{cls:"tasks-group-heading"}):n.nestingLevel===1?i=t.createEl("h5",{cls:"tasks-group-heading"}):i=t.createEl("h6",{cls:"tasks-group-heading"}),yield eo.MarkdownRenderer.renderMarkdown(n.name,i,this.filePath,this)})}addBacklinks(t,n,i,s){var l;let a=t.createSpan({cls:"tasks-backlink"});i||a.append(" (");let o=a.createEl("a");if(o.href=n.path,o.setAttribute("data-href",n.path),o.rel="noopener",o.target="_blank",o.addClass("internal-link"),i&&o.addClass("internal-link-short-mode"),n.precedingHeader!==null){let c=n.precedingHeader.replace(/#/g,"");o.href=o.href+"#"+c,o.setAttribute("data-href",o.getAttribute("data-href")+"#"+c)}let u;i?u=" \u{1F517}":u=(l=n.getLinkText({isFilenameUnique:s}))!=null?l:"",o.setText(u),i||a.append(")")}addTaskCount(t,n){this.query.layoutOptions.hideTaskCount||t.createDiv({text:`${n} task${n!==1?"s":""}`,cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}};var Rt=require("obsidian");var qn=class extends Rt.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.plugin=t}display(){let{containerEl:t}=this;t.empty(),t.createEl("h3",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),t.createEl("h4",{text:"Global filter Settings"}),new Rt.Setting(t).setName("Global task filter").setDesc(qn.createFragmentWithHTML('<p><b>Recommended: Leave empty if you want all checklist items in your vault to be tasks managed by this plugin.</b></p><p>Use a global filter if you want Tasks to only act on a subset of your "<code>- [ ]</code>" checklist items, so that a checklist item must include the specified string in its description in order to be considered a task.<p><p>For example, if you set the global filter to <code>#task</code>, the Tasks plugin will only handle checklist items tagged with <code>#task</code>.</br>Other checklist items will remain normal checklist items and not appear in queries or get a done date set.</p><p>See the <a href="https://obsidian-tasks-group.github.io/obsidian-tasks/getting-started/global-filter/">documentation</a>.</p>')).addText(n=>{let i=B();n.setPlaceholder("e.g. #task or TODO").setValue(i.globalFilter).onChange(s=>J(this,null,function*(){pt({globalFilter:s}),yield this.plugin.saveSettings()}))}),new Rt.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(n=>{let i=B();n.setValue(i.removeGlobalFilter).onChange(s=>J(this,null,function*(){pt({removeGlobalFilter:s}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Date Settings"}),new Rt.Setting(t).setName("Set done date on every completed task").setDesc("Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done").addToggle(n=>{let i=B();n.setValue(i.setDoneDate).onChange(s=>J(this,null,function*(){pt({setDoneDate:s}),yield this.plugin.saveSettings()}))}),new Rt.Setting(t).setName("Use filename as Scheduled date for undated tasks").setDesc(qn.createFragmentWithHTML('Save time entering Scheduled (\u23F3) dates.</br>If this option is enabled, any undated tasks will be given a default Scheduled date extracted from their file name.</br>The date in the file name must be in one of <code>YYYY-MM-DD</code> or <code>YYYYMMDD</code> formats.</br>Undated tasks have none of Due (\u{1F4C5} ), Scheduled (\u23F3) and Start (\u{1F6EB}) dates.</br><p>See the <a href="https://obsidian-tasks-group.github.io/obsidian-tasks/getting-started/use-filename-as-default-date/">documentation</a>.</p>')).addToggle(n=>{let i=B();n.setValue(i.useFilenameAsScheduledDate).onChange(s=>J(this,null,function*(){pt({useFilenameAsScheduledDate:s}),yield this.plugin.saveSettings()}))}),new Rt.Setting(t).setName("Folders with default Scheduled dates").setDesc("Leave empty if you want to use default Scheduled dates everywhere, or enter a comma-separated list of folders.").addText(n=>J(this,null,function*(){let i=B();yield this.plugin.saveSettings(),n.setValue(qn.renderFolderArray(i.filenameAsDateFolders)).onChange(s=>J(this,null,function*(){let a=qn.parseCommaSeparatedFolders(s);pt({filenameAsDateFolders:a}),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Auto-suggest Settings"}),new Rt.Setting(t).setName("Auto-suggest task content").setDesc("Enabling this will open an intelligent suggest menu while typing inside a recognized task line.").addToggle(n=>{let i=B();n.setValue(i.autoSuggestInEditor).onChange(s=>J(this,null,function*(){pt({autoSuggestInEditor:s}),yield this.plugin.saveSettings()}))}),new Rt.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(n=>{let i=B();n.setLimits(0,3,1).setValue(i.autoSuggestMinMatch).setDynamicTooltip().onChange(s=>J(this,null,function*(){pt({autoSuggestMinMatch:s}),yield this.plugin.saveSettings()}))}),new Rt.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(n=>{let i=B();n.setLimits(3,12,1).setValue(i.autoSuggestMaxItems).setDynamicTooltip().onChange(s=>J(this,null,function*(){pt({autoSuggestMaxItems:s}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Dialog Settings"}),new Rt.Setting(t).setName("Provide access keys in dialogs").setDesc("If the access keys (keyboard shortcuts) for various controls in dialog boxes conflict with system keyboard shortcuts or assistive technology functionality that is important for you, you may want to deactivate them here.").addToggle(n=>{let i=B();n.setValue(i.provideAccessKeys).onChange(s=>J(this,null,function*(){pt({provideAccessKeys:s}),yield this.plugin.saveSettings()}))})}static parseCommaSeparatedFolders(t){return t.split(",").map(n=>n.trim()).map(n=>n.replace(/^\/|\/$/g,"")).filter(n=>n!=="")}static renderFolderArray(t){return t.join(",")}},fs=qn;fs.createFragmentWithHTML=t=>createFragment(n=>n.createDiv().innerHTML=t);var M_=require("obsidian");var uA=`${Wt}${Lt}${Yt}`;function D_(r,e,t){let n=[];n=n.concat(dA(r,e,t)),n=n.concat(fA(r,e,t));let i=cA(r,t),s=Ud(r,/([a-zA-Z'_-]*)/g,e),a=!1;if(s&&s.length>0){let o=s[0];if(o.length>=Math.max(1,t.autoSuggestMinMatch)){let u=i.filter(l=>l.displayText.toLowerCase().includes(o.toLowerCase()));for(let l of u)n.push({suggestionType:"match",displayText:l.displayText,appendText:l.appendText,insertAt:s.index,insertSkip:o.length}),a=!0}}return!a&&t.autoSuggestMinMatch===0&&(n=n.concat(i)),n.length>0&&!n.some(o=>o.suggestionType==="match")&&n.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`}),n=n.slice(0,t.autoSuggestMaxItems),n}function lA(r){if(Object.values(we).some(e=>e.length>0&&r.includes(e)))return!0}function cA(r,e){let t=[];return r.includes(Yt)||t.push({displayText:`${Yt} due date`,appendText:`${Yt} `}),r.includes(Wt)||t.push({displayText:`${Wt} start date`,appendText:`${Wt} `}),r.includes(Lt)||t.push({displayText:`${Lt} scheduled date`,appendText:`${Lt} `}),lA(r)||(t.push({displayText:`${we.High} high priority`,appendText:`${we.High} `}),t.push({displayText:`${we.Medium} medium priority`,appendText:`${we.Medium} `}),t.push({displayText:`${we.Low} low priority`,appendText:`${we.Low} `})),r.includes(qt)||t.push({displayText:`${qt} recurring (repeat)`,appendText:`${qt} `}),t}function dA(r,e,t){let n=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],i=[],s=new RegExp(`([${uA}])\\s*([0-9a-zA-Z ]*)`,"ug"),a=Ud(r,s,e);if(a&&a.length>=2){let o=a[1],u=a[2];if(u.length<t.autoSuggestMinMatch)return[];let l=u&&u.length>1?cr.parseDate(On(u),!0):null;l&&l.isValid()&&i.push({displayText:`${l.format(D.dateFormat)}`,appendText:`${o} ${l.format(D.dateFormat)} `,insertAt:a.index,insertSkip:a[0].length});let c=1,d=5,f=n.filter(h=>u&&u.length>=c&&h.toLowerCase().includes(u.toLowerCase())).slice(0,d);f.length===0&&(f=n.slice(0,d));for(let h of f){let m=`${cr.parseDate(h,!0).format(D.dateFormat)}`;i.push({suggestionType:"match",displayText:`${h} (${m})`,appendText:`${o} ${m} `,insertAt:a.index,insertSkip:a[0].length})}}return i}function fA(r,e,t){var o;let n=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],i=[],s=new RegExp(`(${qt})\\s*([0-9a-zA-Z ]*)`,"ug"),a=Ud(r,s,e);if(a&&a.length>=2){let u=a[1],l=a[2];if(l.length<t.autoSuggestMinMatch)return[];if(l.length>0){let h=(o=Me.fromText({recurrenceRuleText:l,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:o.toText();if(h){let g=`${u} ${h} `;if(i.push({suggestionType:"match",displayText:`\u2705 ${h}`,appendText:g,insertAt:a.index,insertSkip:a[0].length}),a[0]==g)return[]}}let c=1,d=t.autoSuggestMaxItems/2,f=n.filter(h=>l&&l.length>=c&&h.toLowerCase().includes(l.toLowerCase())).slice(0,d);f.length===0&&l.trim().length===0&&(f=n.slice(0,d));for(let h of f)i.push({suggestionType:"match",displayText:`${h}`,appendText:`${u} ${h} `,insertAt:a.index,insertSkip:a[0].length})}return i}function Ud(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<=t&&t<=i.index+i[0].length)return i;return[]}var to=class extends M_.EditorSuggest{constructor(t,n){super(t);this.settings=n}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return s.contains(this.settings.globalFilter)&&s.match(D.taskRegex)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){let n=t.query,i=t.editor.getCursor(),s=D_(n,i.ch,this.settings),a=[];for(let o of s)a.push(ft(De({},o),{context:t}));return a}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){var u,l,c;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let d=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(l=(u=i==null?void 0:i.cm)==null?void 0:u.contentDOM)==null||l.dispatchEvent(d);return}let s=t.context.editor.getCursor(),a={line:s.line,ch:(c=t.insertAt)!=null?c:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length})}};var ro=class extends O_.Plugin{onload(){return J(this,null,function*(){console.log('loading plugin "tasks"'),yield this.loadSettings(),this.addSettingTab(new fs({plugin:this})),of({metadataCache:this.app.metadataCache,vault:this.app.vault});let t=new Pa({obsidianEvents:this.app.workspace});this.cache=new br({metadataCache:this.app.metadataCache,vault:this.app.vault,events:t}),this.inlineRenderer=new Aa({plugin:this}),this.queryRenderer=new Ja({plugin:this,events:t}),this.registerEditorExtension(c_()),this.registerEditorSuggest(new to(this.app,B())),new Oa({plugin:this})})}onunload(){var t;console.log('unloading plugin "tasks"'),(t=this.cache)==null||t.unload()}loadSettings(){return J(this,null,function*(){let t=yield this.loadData();pt(t)})}saveSettings(){return J(this,null,function*(){yield this.saveData(B())})}};
