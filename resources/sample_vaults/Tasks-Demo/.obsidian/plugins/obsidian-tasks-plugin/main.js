/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

"use strict";var T_=Object.create;var Nn=Object.defineProperty,b_=Object.defineProperties,v_=Object.getOwnPropertyDescriptor,E_=Object.getOwnPropertyDescriptors,R_=Object.getOwnPropertyNames,Hd=Object.getOwnPropertySymbols,w_=Object.getPrototypeOf,Kd=Object.prototype.hasOwnProperty,M_=Object.prototype.propertyIsEnumerable;var zd=(r,e,t)=>e in r?Nn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,$e=(r,e)=>{for(var t in e||(e={}))Kd.call(e,t)&&zd(r,t,e[t]);if(Hd)for(var t of Hd(e))M_.call(e,t)&&zd(r,t,e[t]);return r},Ft=(r,e)=>b_(r,E_(e));var h=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),D_=(r,e)=>{for(var t in e)Nn(r,t,{get:e[t],enumerable:!0})},Vd=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of R_(e))!Kd.call(r,i)&&i!==t&&Nn(r,i,{get:()=>e[i],enumerable:!(n=v_(e,i))||n.enumerable});return r};var os=(r,e,t)=>(t=r!=null?T_(w_(r)):{},Vd(e||!r||!r.__esModule?Nn(t,"default",{value:r,enumerable:!0}):t,r)),P_=r=>Vd(Nn({},"__esModule",{value:!0}),r);var se=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var Mf=h((wA,hs)=>{var nf,sf,af,of,uf,lf,cf,df,ff,fs,Qa,pf,hf,mf,Qr,yf,gf,_f,Tf,bf,vf,Ef,Rf,wf,ps;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof hs=="object"&&typeof hs.exports=="object"?r(t(e,t(hs.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,a){return n[s]=i?i(s,a):a}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])};nf=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},sf=Object.assign||function(n){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},af=function(n,i){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)i.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(s[a[o]]=n[a[o]]);return s},of=function(n,i,s,a){var o=arguments.length,u=o<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,s,a);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(u=(o<3?l(u):o>3?l(i,s,u):l(i,s))||u);return o>3&&u&&Object.defineProperty(i,s,u),u},uf=function(n,i){return function(s,a){i(s,a,n)}},lf=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},cf=function(n,i,s,a){function o(u){return u instanceof s?u:new s(function(l){l(u)})}return new(s||(s=Promise))(function(u,l){function c(p){try{f(a.next(p))}catch(y){l(y)}}function d(p){try{f(a.throw(p))}catch(y){l(y)}}function f(p){p.done?u(p.value):o(p.value).then(c,d)}f((a=a.apply(n,i||[])).next())})},df=function(n,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,o,u,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(p){return d([f,p])}}function d(f){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(u=f[0]&2?o.return:f[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,f[1])).done)return u;switch(o=0,u&&(f=[f[0]&2,u.value]),f[0]){case 0:case 1:u=f;break;case 4:return s.label++,{value:f[1],done:!1};case 5:s.label++,o=f[1],f=[0];continue;case 7:f=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(f[0]===6||f[0]===2)){s=0;continue}if(f[0]===3&&(!u||f[1]>u[0]&&f[1]<u[3])){s.label=f[1];break}if(f[0]===6&&s.label<u[1]){s.label=u[1],u=f;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(f);break}u[2]&&s.ops.pop(),s.trys.pop();continue}f=i.call(n,s)}catch(p){f=[6,p],o=0}finally{a=u=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},ff=function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&ps(i,n,s)},ps=Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]},fs=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],a=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Qa=function(n,i){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var a=s.call(n),o,u=[],l;try{for(;(i===void 0||i-- >0)&&!(o=a.next()).done;)u.push(o.value)}catch(c){l={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(l)throw l.error}}return u},pf=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(Qa(arguments[i]));return n},hf=function(){for(var n=0,i=0,s=arguments.length;i<s;i++)n+=arguments[i].length;for(var a=Array(n),o=0,i=0;i<s;i++)for(var u=arguments[i],l=0,c=u.length;l<c;l++,o++)a[o]=u[l];return a},mf=function(n,i,s){if(s||arguments.length===2)for(var a=0,o=i.length,u;a<o;a++)(u||!(a in i))&&(u||(u=Array.prototype.slice.call(i,0,a)),u[a]=i[a]);return n.concat(u||Array.prototype.slice.call(i))},Qr=function(n){return this instanceof Qr?(this.v=n,this):new Qr(n)},yf=function(n,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(n,i||[]),o,u=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(m){a[m]&&(o[m]=function(g){return new Promise(function(A,C){u.push([m,g,A,C])>1||c(m,g)})})}function c(m,g){try{d(a[m](g))}catch(A){y(u[0][3],A)}}function d(m){m.value instanceof Qr?Promise.resolve(m.value.v).then(f,p):y(u[0][2],m)}function f(m){c("next",m)}function p(m){c("throw",m)}function y(m,g){m(g),u.shift(),u.length&&c(u[0][0],u[0][1])}},gf=function(n){var i,s;return i={},a("next"),a("throw",function(o){throw o}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(o,u){i[o]=n[o]?function(l){return(s=!s)?{value:Qr(n[o](l)),done:o==="return"}:u?u(l):l}:u}},_f=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],s;return i?i.call(n):(n=typeof fs=="function"?fs(n):n[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(u){s[u]=n[u]&&function(l){return new Promise(function(c,d){l=n[u](l),o(c,d,l.done,l.value)})}}function o(u,l,c,d){Promise.resolve(d).then(function(f){u({value:f,done:c})},l)}},Tf=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};bf=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&ps(i,n,s);return t(i,n),i},vf=function(n){return n&&n.__esModule?n:{default:n}},Ef=function(n,i,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(n):a?a.value:i.get(n)},Rf=function(n,i,s,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(n,s):o?o.value=s:i.set(n,s),s},wf=function(n,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?i===n:n.has(i)},r("__extends",nf),r("__assign",sf),r("__rest",af),r("__decorate",of),r("__param",uf),r("__metadata",lf),r("__awaiter",cf),r("__generator",df),r("__exportStar",ff),r("__createBinding",ps),r("__values",fs),r("__read",Qa),r("__spread",pf),r("__spreadArrays",hf),r("__spreadArray",mf),r("__await",Qr),r("__asyncGenerator",yf),r("__asyncDelegator",gf),r("__asyncValues",_f),r("__makeTemplateObject",Tf),r("__importStar",bf),r("__importDefault",vf),r("__classPrivateFieldGet",Ef),r("__classPrivateFieldSet",Rf),r("__classPrivateFieldIn",wf)})});var J=h(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.matchAnyPattern=yr.extractTerms=yr.repeatedTimeunitPattern=void 0;function TT(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}yr.repeatedTimeunitPattern=TT;function Tp(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}yr.extractTerms=Tp;function bT(r){return`(?:${Tp(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}yr.matchAnyPattern=bT});var K=h((fo,po)=>{(function(r,e){typeof fo=="object"&&typeof po!="undefined"?po.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(fo,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",d="year",f="date",p="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},A=function(D,v,_){var P=String(D);return!P||P.length>=v?D:""+Array(v+1-P.length).join(_)+D},C={s:A,z:function(D){var v=-D.utcOffset(),_=Math.abs(v),P=Math.floor(_/60),E=_%60;return(v<=0?"+":"-")+A(P,2,"0")+":"+A(E,2,"0")},m:function D(v,_){if(v.date()<_.date())return-D(_,v);var P=12*(_.year()-v.year())+(_.month()-v.month()),E=v.clone().add(P,l),S=_-E<0,O=v.clone().add(P+(S?-1:1),l);return+(-(P+(_-E)/(S?E-O:O-E))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:l,y:d,w:u,d:o,D:f,h:a,m:s,s:i,ms:n,Q:c}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return D===void 0}},x="en",z={};z[x]=g;var ie=function(D){return D instanceof ge},fe=function(D,v,_){var P;if(!D)return x;if(typeof D=="string")z[D]&&(P=D),v&&(z[D]=v,P=D);else{var E=D.name;z[E]=D,P=E}return!_&&P&&(x=P),P||!_&&x},te=function(D,v){if(ie(D))return D.clone();var _=typeof v=="object"?v:{};return _.date=D,_.args=arguments,new ge(_)},M=C;M.l=fe,M.i=ie,M.w=function(D,v){return te(D,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var ge=function(){function D(_){this.$L=fe(_.locale,null,!0),this.parse(_)}var v=D.prototype;return v.parse=function(_){this.$d=function(P){var E=P.date,S=P.utc;if(E===null)return new Date(NaN);if(M.u(E))return new Date;if(E instanceof Date)return new Date(E);if(typeof E=="string"&&!/Z$/i.test(E)){var O=E.match(y);if(O){var W=O[2]-1||0,re=(O[7]||"0").substring(0,3);return S?new Date(Date.UTC(O[1],W,O[3]||1,O[4]||0,O[5]||0,O[6]||0,re)):new Date(O[1],W,O[3]||1,O[4]||0,O[5]||0,O[6]||0,re)}}return new Date(E)}(_),this.$x=_.x||{},this.init()},v.init=function(){var _=this.$d;this.$y=_.getFullYear(),this.$M=_.getMonth(),this.$D=_.getDate(),this.$W=_.getDay(),this.$H=_.getHours(),this.$m=_.getMinutes(),this.$s=_.getSeconds(),this.$ms=_.getMilliseconds()},v.$utils=function(){return M},v.isValid=function(){return this.$d.toString()!==p},v.isSame=function(_,P){var E=te(_);return this.startOf(P)<=E&&E<=this.endOf(P)},v.isAfter=function(_,P){return te(_)<this.startOf(P)},v.isBefore=function(_,P){return this.endOf(P)<te(_)},v.$g=function(_,P,E){return M.u(_)?this[P]:this.set(E,_)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(_,P){var E=this,S=!!M.u(P)||P,O=M.p(_),W=function(ft,Ne){var xe=M.w(E.$u?Date.UTC(E.$y,Ne,ft):new Date(E.$y,Ne,ft),E);return S?xe:xe.endOf(o)},re=function(ft,Ne){return M.w(E.toDate()[ft].apply(E.toDate("s"),(S?[0,0,0,0]:[23,59,59,999]).slice(Ne)),E)},le=this.$W,oe=this.$M,dt=this.$D,Le="set"+(this.$u?"UTC":"");switch(O){case d:return S?W(1,0):W(31,11);case l:return S?W(1,oe):W(0,oe+1);case u:var or=this.$locale().weekStart||0,ur=(le<or?le+7:le)-or;return W(S?dt-ur:dt+(6-ur),oe);case o:case f:return re(Le+"Hours",0);case a:return re(Le+"Minutes",1);case s:return re(Le+"Seconds",2);case i:return re(Le+"Milliseconds",3);default:return this.clone()}},v.endOf=function(_){return this.startOf(_,!1)},v.$set=function(_,P){var E,S=M.p(_),O="set"+(this.$u?"UTC":""),W=(E={},E[o]=O+"Date",E[f]=O+"Date",E[l]=O+"Month",E[d]=O+"FullYear",E[a]=O+"Hours",E[s]=O+"Minutes",E[i]=O+"Seconds",E[n]=O+"Milliseconds",E)[S],re=S===o?this.$D+(P-this.$W):P;if(S===l||S===d){var le=this.clone().set(f,1);le.$d[W](re),le.init(),this.$d=le.set(f,Math.min(this.$D,le.daysInMonth())).$d}else W&&this.$d[W](re);return this.init(),this},v.set=function(_,P){return this.clone().$set(_,P)},v.get=function(_){return this[M.p(_)]()},v.add=function(_,P){var E,S=this;_=Number(_);var O=M.p(P),W=function(oe){var dt=te(S);return M.w(dt.date(dt.date()+Math.round(oe*_)),S)};if(O===l)return this.set(l,this.$M+_);if(O===d)return this.set(d,this.$y+_);if(O===o)return W(1);if(O===u)return W(7);var re=(E={},E[s]=e,E[a]=t,E[i]=r,E)[O]||1,le=this.$d.getTime()+_*re;return M.w(le,this)},v.subtract=function(_,P){return this.add(-1*_,P)},v.format=function(_){var P=this,E=this.$locale();if(!this.isValid())return E.invalidDate||p;var S=_||"YYYY-MM-DDTHH:mm:ssZ",O=M.z(this),W=this.$H,re=this.$m,le=this.$M,oe=E.weekdays,dt=E.months,Le=function(Ne,xe,lr,Or){return Ne&&(Ne[xe]||Ne(P,S))||lr[xe].substr(0,Or)},or=function(Ne){return M.s(W%12||12,Ne,"0")},ur=E.meridiem||function(Ne,xe,lr){var Or=Ne<12?"AM":"PM";return lr?Or.toLowerCase():Or},ft={YY:String(this.$y).slice(-2),YYYY:this.$y,M:le+1,MM:M.s(le+1,2,"0"),MMM:Le(E.monthsShort,le,dt,3),MMMM:Le(dt,le),D:this.$D,DD:M.s(this.$D,2,"0"),d:String(this.$W),dd:Le(E.weekdaysMin,this.$W,oe,2),ddd:Le(E.weekdaysShort,this.$W,oe,3),dddd:oe[this.$W],H:String(W),HH:M.s(W,2,"0"),h:or(1),hh:or(2),a:ur(W,re,!0),A:ur(W,re,!1),m:String(re),mm:M.s(re,2,"0"),s:String(this.$s),ss:M.s(this.$s,2,"0"),SSS:M.s(this.$ms,3,"0"),Z:O};return S.replace(m,function(Ne,xe){return xe||ft[Ne]||O.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(_,P,E){var S,O=M.p(P),W=te(_),re=(W.utcOffset()-this.utcOffset())*e,le=this-W,oe=M.m(this,W);return oe=(S={},S[d]=oe/12,S[l]=oe,S[c]=oe/3,S[u]=(le-re)/6048e5,S[o]=(le-re)/864e5,S[a]=le/t,S[s]=le/e,S[i]=le/r,S)[O]||le,E?oe:M.a(oe)},v.daysInMonth=function(){return this.endOf(l).$D},v.$locale=function(){return z[this.$L]},v.locale=function(_,P){if(!_)return this.$L;var E=this.clone(),S=fe(_,P,!0);return S&&(E.$L=S),E},v.clone=function(){return M.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},D}(),ce=ge.prototype;return te.prototype=ce,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",d],["$D",f]].forEach(function(D){ce[D[1]]=function(v){return this.$g(v,D[0],D[1])}}),te.extend=function(D,v){return D.$i||(D(v,ge,te),D.$i=!0),te},te.locale=fe,te.isDayjs=ie,te.unix=function(D){return te(1e3*D)},te.en=z[x],te.Ls=z,te.p={},te})});var Se=h(gr=>{"use strict";var vT=gr&&gr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gr,"__esModule",{value:!0});gr.findYearClosestToRef=gr.findMostLikelyADYear=void 0;var ET=vT(K());function RT(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}gr.findMostLikelyADYear=RT;function wT(r,e,t){let n=ET.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}gr.findYearClosestToRef=wT});var Ie=h(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.parseTimeUnits=q.TIME_UNITS_PATTERN=q.parseYear=q.YEAR_PATTERN=q.parseOrdinalNumberPattern=q.ORDINAL_NUMBER_PATTERN=q.parseNumberPattern=q.NUMBER_PATTERN=q.TIME_UNIT_DICTIONARY=q.ORDINAL_WORD_DICTIONARY=q.INTEGER_WORD_DICTIONARY=q.MONTH_DICTIONARY=q.FULL_MONTH_NAME_DICTIONARY=q.WEEKDAY_DICTIONARY=void 0;var Rs=J(),MT=Se();q.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};q.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};q.MONTH_DICTIONARY=Object.assign(Object.assign({},q.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});q.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};q.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};q.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};q.NUMBER_PATTERN=`(?:${Rs.matchAnyPattern(q.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function vp(r){let e=r.toLowerCase();return q.INTEGER_WORD_DICTIONARY[e]!==void 0?q.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}q.parseNumberPattern=vp;q.ORDINAL_NUMBER_PATTERN=`(?:${Rs.matchAnyPattern(q.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function DT(r){let e=r.toLowerCase();return q.ORDINAL_WORD_DICTIONARY[e]!==void 0?q.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}q.parseOrdinalNumberPattern=DT;q.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function PT(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return MT.findMostLikelyADYear(e)}q.parseYear=PT;var Ep=`(${q.NUMBER_PATTERN})\\s{0,3}(${Rs.matchAnyPattern(q.TIME_UNIT_DICTIONARY)})`,bp=new RegExp(Ep,"i");q.TIME_UNITS_PATTERN=Rs.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",Ep);function OT(r){let e={},t=r,n=bp.exec(t);for(;n;)AT(e,n),t=t.substring(n[0].length).trim(),n=bp.exec(t);return e}q.parseTimeUnits=OT;function AT(r,e){let t=vp(e[1]),n=q.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Rp=h((ho,mo)=>{(function(r,e){typeof ho=="object"&&typeof mo!="undefined"?mo.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(ho,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var d=this.quarter()-1;return c?this.month(3*d).startOf(r).startOf("day"):this.month(3*d+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var it=h(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.implySimilarTime=Ot.assignSimilarTime=Ot.assignSimilarDate=Ot.assignTheNextDay=void 0;var wp=Ee();function kT(r,e){e=e.add(1,"day"),Mp(r,e),Dp(r,e)}Ot.assignTheNextDay=kT;function Mp(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}Ot.assignSimilarDate=Mp;function NT(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",wp.Meridiem.AM):r.assign("meridiem",wp.Meridiem.PM)}Ot.assignSimilarTime=NT;function Dp(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}Ot.implySimilarTime=Dp});var Pp=h(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.toTimezoneOffset=Ir.TIMEZONE_ABBR_MAP=void 0;Ir.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function xT(r){var e;return r==null?null:typeof r=="number"?r:(e=Ir.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}Ir.toTimezoneOffset=xT});var he=h(At=>{"use strict";var Op=At&&At.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(At,"__esModule",{value:!0});At.ParsingResult=At.ParsingComponents=At.ReferenceWithTimezone=void 0;var CT=Op(Rp()),ws=Op(K()),yo=it(),ST=Pp();ws.default.extend(CT.default);var go=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=ST.toTimezoneOffset(e.timezone))}};At.ReferenceWithTimezone=go;var Ur=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=ws.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new Ur(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return ws.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=ws.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new Ur(e);return t.hour||t.minute||t.second?(yo.assignSimilarTime(i,n),yo.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(yo.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};At.ParsingComponents=Ur;var jn=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new Ur(e),this.end=s}clone(){let e=new jn(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};At.ParsingResult=jn});var R=h(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.AbstractParserWithWordBoundaryChecking=void 0;var _o=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};Ms.AbstractParserWithWordBoundaryChecking=_o});var Ap=h(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});var bo=Ie(),IT=he(),UT=R(),FT=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${bo.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),qT=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${bo.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),To=class extends UT.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?qT:FT}innerExtract(e,t){let n=bo.parseTimeUnits(t[1]);return IT.ParsingComponents.createRelativeFromReference(e.reference,n)}};vo.default=To});var Ip=h(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});var WT=Se(),Cp=Ie(),Sp=Ie(),Ds=Ie(),LT=J(),YT=R(),$T=new RegExp(`(?:on\\s{0,3})?(${Ds.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${Ds.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${LT.matchAnyPattern(Cp.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${Sp.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),kp=1,Np=2,jT=3,xp=4,Eo=class extends YT.AbstractParserWithWordBoundaryChecking{innerPattern(){return $T}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Cp.MONTH_DICTIONARY[t[jT].toLowerCase()],s=Ds.parseOrdinalNumberPattern(t[kp]);if(s>31)return t.index=t.index+t[kp].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[xp]){let a=Sp.parseYear(t[xp]);n.start.assign("year",a)}else{let a=WT.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Np]){let a=Ds.parseOrdinalNumberPattern(t[Np]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Ro.default=Eo});var Lp=h(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});var BT=Se(),qp=Ie(),Ps=Ie(),Wp=Ie(),GT=J(),HT=R(),zT=new RegExp(`(${GT.matchAnyPattern(qp.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${Ps.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${Ps.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${Wp.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),KT=1,VT=2,Up=3,Fp=4,wo=class extends HT.AbstractParserWithWordBoundaryChecking{innerPattern(){return zT}innerExtract(e,t){let n=qp.MONTH_DICTIONARY[t[KT].toLowerCase()],i=Ps.parseOrdinalNumberPattern(t[VT]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[Fp]){let u=Wp.parseYear(t[Fp]);s.assign("year",u)}else{let u=BT.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[Up])return s;let a=Ps.parseOrdinalNumberPattern(t[Up]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Mo.default=wo});var jp=h(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});var Do=Ie(),ZT=Se(),XT=J(),$p=Ie(),QT=R(),JT=new RegExp(`((?:in)\\s*)?(${XT.matchAnyPattern(Do.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${$p.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),eb=1,tb=2,Yp=3,Po=class extends QT.AbstractParserWithWordBoundaryChecking{innerPattern(){return JT}innerExtract(e,t){let n=t[tb].toLowerCase();if(t[0].length<=3&&!Do.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[eb]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=Do.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Yp]){let a=$p.parseYear(t[Yp]);i.start.assign("year",a)}else{let a=ZT.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Oo.default=Po});var Hp=h(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});var Gp=Ie(),rb=J(),nb=R(),ib=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${rb.matchAnyPattern(Gp.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),sb=1,ab=2,Bp=3,ob=4,Ao=class extends nb.AbstractParserWithWordBoundaryChecking{innerPattern(){return ib}innerExtract(e,t){let n=t[Bp]?parseInt(t[Bp]):Gp.MONTH_DICTIONARY[t[ab].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[sb]);return{day:parseInt(t[ob]),month:n,year:i}}};ko.default=Ao});var zp=h(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});var ub=R(),lb=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),cb=1,db=2,No=class extends ub.AbstractParserWithWordBoundaryChecking{innerPattern(){return lb}innerExtract(e,t){let n=parseInt(t[db]),i=parseInt(t[cb]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};xo.default=No});var Fr=h(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.AbstractTimeExpressionParser=void 0;var Be=Ee();function fb(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function pb(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var Kp=2,nn=3,Os=4,As=5,Bn=6,Co=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[Kp]);if(o>100){if(this.strictMode||t[nn]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[nn]!=null){if(t[nn].length==1&&!t[Bn])return null;s=parseInt(t[nn])}if(s>=60)return null;if(o>12&&(a=Be.Meridiem.PM),t[Bn]!=null){if(o>12)return null;let u=t[Bn][0].toLowerCase();u=="a"&&(a=Be.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=Be.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",Be.Meridiem.AM):i.imply("meridiem",Be.Meridiem.PM),t[As]!=null){let u=parseInt(t[As].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Os]!=null){let u=parseInt(t[Os]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[As]!=null){let u=parseInt(t[As].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Os]!=null){let u=parseInt(t[Os]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[Kp]),a=0,o=-1;if(t[nn]!=null?a=parseInt(t[nn]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=Be.Meridiem.PM),t[Bn]!=null){if(s>12)return null;let u=t[Bn][0].toLowerCase();u=="a"&&(o=Be.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=Be.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==Be.Meridiem.AM?(n.start.imply("meridiem",Be.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",Be.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",Be.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",Be.Meridiem.PM)):s>12?i.imply("meridiem",Be.Meridiem.PM):s<=12&&i.imply("meridiem",Be.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=fb(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=pb(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};ks.AbstractTimeExpressionParser=Co});var Vp=h(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});var Ns=Ee(),hb=Fr(),So=class extends hb.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",Ns.Meridiem.PM)):i<6&&n.assign("meridiem",Ns.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",Ns.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",Ns.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Io.default=So});var st=h(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.addImpliedTimeUnits=sn.reverseTimeUnits=void 0;function mb(r){let e={};for(let t in r)e[t]=-r[t];return e}sn.reverseTimeUnits=mb;function yb(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}sn.addImpliedTimeUnits=yb});var Zp=h(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});var Fo=Ie(),gb=he(),_b=R(),Tb=st(),bb=new RegExp(`(${Fo.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),vb=new RegExp(`(${Fo.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),Uo=class extends _b.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?vb:bb}innerExtract(e,t){let n=Fo.parseTimeUnits(t[1]),i=Tb.reverseTimeUnits(n);return gb.ParsingComponents.createRelativeFromReference(e.reference,i)}};qo.default=Uo});var Xp=h(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});var Lo=Ie(),Eb=he(),Rb=R(),wb=new RegExp(`(${Lo.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),Mb=new RegExp("("+Lo.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),Db=1,Wo=class extends Rb.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Mb:wb}innerExtract(e,t){let n=Lo.parseTimeUnits(t[Db]);return Eb.ParsingComponents.createRelativeFromReference(e.reference,n)}};Yo.default=Wo});var on=h(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.MergingRefiner=an.Filter=void 0;var $o=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};an.Filter=$o;var jo=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};an.MergingRefiner=jo});var kt=h(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});var Pb=on(),Bo=class extends Pb.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};Go.default=Bo});var Qp=h(Gn=>{"use strict";var Ob=Gn&&Gn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gn,"__esModule",{value:!0});var Ab=Ob(kt()),Ho=class extends Ab.default{patternBetween(){return/^\s*(to|-)\s*$/i}};Gn.default=Ho});var Jp=h(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.mergeDateTimeComponent=un.mergeDateTimeResult=void 0;var kb=Ee();function Nb(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=zo(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=zo(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}un.mergeDateTimeResult=Nb;function zo(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==kb.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}un.mergeDateTimeComponent=zo});var Bt=h(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});var xb=on(),eh=Jp(),Ko=class extends xb.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?eh.mergeDateTimeResult(t,n):eh.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};Vo.default=Ko});var th=h(Hn=>{"use strict";var Cb=Hn&&Hn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Hn,"__esModule",{value:!0});var Sb=Cb(Bt()),Zo=class extends Sb.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};Hn.default=Zo});var rh=h(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});var Ib=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),Ub={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},Xo=class{constructor(e){this.timezone=Object.assign(Object.assign({},Ub),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=Ib.exec(u);if(!l)return;let c=l[1].toUpperCase(),d=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(d===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${d} for: ${s.start}`)});let f=s.start.get("timezoneOffset");f!==null&&d!=f&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",d),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",d))}),t}};Qo.default=Xo});var xs=h(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});var Fb=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),qb=1,Wb=2,Lb=3,Jo=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=Fb.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[Wb]),o=parseInt(s[Lb]||"0"),u=a*60+o;u>14*60||(s[qb]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};eu.default=Jo});var nh=h(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});var tu=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};ru.default=tu});var ih=h(zn=>{"use strict";var Yb=zn&&zn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zn,"__esModule",{value:!0});var $b=Yb(K()),nu=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=$b.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};zn.default=nu});var sh=h(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});var jb=on(),iu=class extends jb.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};su.default=iu});var uu=h(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});var Bb=R(),Gb=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),Hb=1,zb=2,Kb=3,ah=4,Vb=5,oh=6,uh=7,lh=8,ch=9,au=class extends Bb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Gb}innerExtract(e,t){let n={};if(n.year=parseInt(t[Hb]),n.month=parseInt(t[zb]),n.day=parseInt(t[Kb]),t[ah]!=null)if(n.hour=parseInt(t[ah]),n.minute=parseInt(t[Vb]),t[oh]!=null&&(n.second=parseInt(t[oh])),t[uh]!=null&&(n.millisecond=parseInt(t[uh])),t[lh]==null)n.timezoneOffset=0;else{let i=parseInt(t[lh]),s=0;t[ch]!=null&&(s=parseInt(t[ch]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};ou.default=au});var dh=h(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});var Zb=on(),lu=class extends Zb.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};cu.default=lu});var Gt=h(ln=>{"use strict";var qr=ln&&ln.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ln,"__esModule",{value:!0});ln.includeCommonConfiguration=void 0;var Xb=qr(rh()),Qb=qr(xs()),fh=qr(nh()),Jb=qr(ih()),ev=qr(sh()),tv=qr(uu()),rv=qr(dh());function nv(r,e=!1){return r.parsers.unshift(new tv.default),r.refiners.unshift(new rv.default),r.refiners.unshift(new Xb.default),r.refiners.unshift(new Qb.default),r.refiners.unshift(new fh.default),r.refiners.push(new fh.default),r.refiners.push(new Jb.default),r.refiners.push(new ev.default(e)),r}ln.includeCommonConfiguration=nv});var zt=h(Q=>{"use strict";var iv=Q&&Q.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Q,"__esModule",{value:!0});Q.noon=Q.morning=Q.midnight=Q.yesterdayEvening=Q.evening=Q.lastNight=Q.tonight=Q.theDayAfter=Q.tomorrow=Q.theDayBefore=Q.yesterday=Q.today=Q.now=void 0;var Nt=he(),cn=iv(K()),Ht=it(),Kn=Ee();function sv(r){let e=cn.default(r.instant),t=new Nt.ParsingComponents(r,{});return Ht.assignSimilarDate(t,e),Ht.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}Q.now=sv;function av(r){let e=cn.default(r.instant),t=new Nt.ParsingComponents(r,{});return Ht.assignSimilarDate(t,e),Ht.implySimilarTime(t,e),t}Q.today=av;function ov(r){return ph(r,1)}Q.yesterday=ov;function ph(r,e){return du(r,-e)}Q.theDayBefore=ph;function uv(r){return du(r,1)}Q.tomorrow=uv;function du(r,e){let t=cn.default(r.instant),n=new Nt.ParsingComponents(r,{});return t=t.add(e,"day"),Ht.assignSimilarDate(n,t),Ht.implySimilarTime(n,t),n}Q.theDayAfter=du;function lv(r,e=22){let t=cn.default(r.instant),n=new Nt.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",Kn.Meridiem.PM),Ht.assignSimilarDate(n,t),n}Q.tonight=lv;function cv(r,e=0){let t=cn.default(r.instant),n=new Nt.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),Ht.assignSimilarDate(n,t),n.imply("hour",e),n}Q.lastNight=cv;function dv(r,e=20){let t=new Nt.ParsingComponents(r,{});return t.imply("meridiem",Kn.Meridiem.PM),t.imply("hour",e),t}Q.evening=dv;function fv(r,e=20){let t=cn.default(r.instant),n=new Nt.ParsingComponents(r,{});return t=t.add(-1,"day"),Ht.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",Kn.Meridiem.PM),n}Q.yesterdayEvening=fv;function pv(r){let e=new Nt.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}Q.midnight=pv;function hv(r,e=6){let t=new Nt.ParsingComponents(r,{});return t.imply("meridiem",Kn.Meridiem.AM),t.imply("hour",e),t}Q.morning=hv;function mv(r){let e=new Nt.ParsingComponents(r,{});return e.imply("meridiem",Kn.Meridiem.AM),e.imply("hour",12),e}Q.noon=mv});var hh=h(mt=>{"use strict";var yv=mt&&mt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),gv=mt&&mt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),_v=mt&&mt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&yv(e,r,t);return gv(e,r),e},Tv=mt&&mt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mt,"__esModule",{value:!0});var bv=Tv(K()),vv=R(),Ev=it(),Vn=_v(zt()),Rv=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,fu=class extends vv.AbstractParserWithWordBoundaryChecking{innerPattern(e){return Rv}innerExtract(e,t){let n=bv.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return Vn.now(e.reference);case"today":return Vn.today(e.reference);case"yesterday":return Vn.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return Vn.tomorrow(e.reference);case"tonight":return Vn.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),Ev.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};mt.default=fu});var mh=h(Zn=>{"use strict";var wv=Zn&&Zn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zn,"__esModule",{value:!0});var Cs=Ee(),Mv=R(),Dv=wv(K()),Pv=it(),Ov=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,pu=class extends Mv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Ov}innerExtract(e,t){let n=Dv.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",Cs.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",Cs.Meridiem.PM),i.imply("hour",20);break;case"midnight":Pv.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",Cs.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",Cs.Meridiem.AM),i.imply("hour",12);break}return i}};Zn.default=pu});var Wr=h(_r=>{"use strict";var Av=_r&&_r.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_r,"__esModule",{value:!0});_r.toDayJSClosestWeekday=_r.toDayJSWeekday=void 0;var yh=Av(K());function kv(r,e,t){if(!t)return gh(r,e);let n=yh.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}_r.toDayJSWeekday=kv;function gh(r,e){let t=yh.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}_r.toDayJSClosestWeekday=gh});var Th=h(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});var _h=Ie(),Nv=J(),xv=R(),Cv=Wr(),Sv=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${Nv.matchAnyPattern(_h.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),Iv=1,Uv=2,Fv=3,hu=class extends xv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Sv}innerExtract(e,t){let n=t[Uv].toLowerCase(),i=_h.WEEKDAY_DICTIONARY[n],s=t[Iv],a=t[Fv],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=Cv.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};mu.default=hu});var Eh=h(Xn=>{"use strict";var qv=Xn&&Xn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xn,"__esModule",{value:!0});var vh=Ie(),bh=he(),Wv=qv(K()),Lv=R(),Yv=J(),$v=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${Yv.matchAnyPattern(vh.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),jv=1,Bv=2,yu=class extends Lv.AbstractParserWithWordBoundaryChecking{innerPattern(){return $v}innerExtract(e,t){let n=t[jv].toLowerCase(),i=t[Bv].toLowerCase(),s=vh.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,bh.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,bh.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=Wv.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Xn.default=yu});var yt=h(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.ParsingContext=pn.Chrono=void 0;var dn=he(),Gv=gu(),fn=class{constructor(e){e=e||Gv.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new fn({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new Ss(e,t,n),s=[];return this.parsers.forEach(a=>{let o=fn.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof dn.ParsingResult?c=l:l instanceof dn.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};pn.Chrono=fn;var Ss=class{constructor(e,t,n){this.text=e,this.reference=new dn.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof dn.ParsingComponents?e:new dn.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new dn.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};pn.ParsingContext=Ss});var Lr=h(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});var Rh=Se(),Hv=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),Is=1,wh=5,Mh=2,Dh=3,_u=4,Tu=class{constructor(e){this.groupNumberMonth=e?Dh:Mh,this.groupNumberDay=e?Mh:Dh}pattern(){return Hv}extract(e,t){if(t[Is]=="/"||t[wh]=="/"){t.index+=t[0].length;return}let n=t.index+t[Is].length,i=t[0].substr(t[Is].length,t[0].length-t[Is].length-t[wh].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[_u]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[_u]){let u=parseInt(t[_u]),l=Rh.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=Rh.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};bu.default=Tu});var Oh=h(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});var Ph=Ie(),zv=he(),Kv=R(),Vv=st(),Zv=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Ph.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),vu=class extends Kv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Zv}innerExtract(e,t){let n=t[1].toLowerCase(),i=Ph.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=Vv.reverseTimeUnits(i);break}return zv.ParsingComponents.createRelativeFromReference(e.reference,i)}};Eu.default=vu});var kh=h(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});var Xv=on(),Ru=he(),Qv=Ie(),Jv=st();function Ah(r){return r.text.match(/\s+(before|from)$/i)!=null}function e1(r){return r.text.match(/\s+(after|since)$/i)!=null}var wu=class extends Xv.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!Ah(t)&&!e1(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=Qv.parseTimeUnits(t.text);Ah(t)&&(i=Jv.reverseTimeUnits(i));let s=Ru.ParsingComponents.createRelativeFromReference(new Ru.ReferenceWithTimezone(n.start.date()),i);return new Ru.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};Mu.default=wu});var gu=h(Te=>{"use strict";var we=Te&&Te.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Te,"__esModule",{value:!0});Te.createConfiguration=Te.createCasualConfiguration=Te.parseDate=Te.parse=Te.GB=Te.strict=Te.casual=void 0;var t1=we(Ap()),r1=we(Ip()),n1=we(Lp()),i1=we(jp()),s1=we(Hp()),a1=we(zp()),o1=we(Vp()),u1=we(Zp()),l1=we(Xp()),c1=we(Qp()),d1=we(th()),f1=Gt(),p1=we(hh()),h1=we(mh()),m1=we(Th()),y1=we(Eh()),Du=yt(),g1=we(Lr()),_1=we(Oh()),T1=we(kh());Te.casual=new Du.Chrono(Nh(!1));Te.strict=new Du.Chrono(Us(!0,!1));Te.GB=new Du.Chrono(Us(!1,!0));function b1(r,e,t){return Te.casual.parse(r,e,t)}Te.parse=b1;function v1(r,e,t){return Te.casual.parseDate(r,e,t)}Te.parseDate=v1;function Nh(r=!1){let e=Us(!1,r);return e.parsers.unshift(new p1.default),e.parsers.unshift(new h1.default),e.parsers.unshift(new i1.default),e.parsers.unshift(new y1.default),e.parsers.unshift(new _1.default),e}Te.createCasualConfiguration=Nh;function Us(r=!0,e=!1){return f1.includeCommonConfiguration({parsers:[new g1.default(e),new t1.default,new r1.default,new n1.default,new m1.default,new s1.default,new a1.default,new o1.default(r),new u1.default(r),new l1.default(r)],refiners:[new T1.default,new d1.default,new c1.default]},r)}Te.createConfiguration=Us});var xh=h(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});var E1=Fr(),Pu=class extends E1.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Ou.default=Pu});var Qn=h(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.parseTimeUnits=ne.TIME_UNITS_PATTERN=ne.parseYear=ne.YEAR_PATTERN=ne.parseNumberPattern=ne.NUMBER_PATTERN=ne.TIME_UNIT_DICTIONARY=ne.INTEGER_WORD_DICTIONARY=ne.MONTH_DICTIONARY=ne.WEEKDAY_DICTIONARY=void 0;var Au=J(),R1=Se();ne.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};ne.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};ne.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};ne.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};ne.NUMBER_PATTERN=`(?:${Au.matchAnyPattern(ne.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function Sh(r){let e=r.toLowerCase();return ne.INTEGER_WORD_DICTIONARY[e]!==void 0?ne.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}ne.parseNumberPattern=Sh;ne.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function w1(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return R1.findMostLikelyADYear(e)}ne.parseYear=w1;var Ih=`(${ne.NUMBER_PATTERN})\\s{0,5}(${Au.matchAnyPattern(ne.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Ch=new RegExp(Ih,"i");ne.TIME_UNITS_PATTERN=Au.repeatedTimeunitPattern("",Ih);function M1(r){let e={},t=r,n=Ch.exec(t);for(;n;)D1(e,n),t=t.substring(n[0].length),n=Ch.exec(t);return e}ne.parseTimeUnits=M1;function D1(r,e){let t=Sh(e[1]),n=ne.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Fh=h(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});var Uh=Qn(),P1=J(),O1=R(),A1=Wr(),k1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${P1.matchAnyPattern(Uh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),N1=1,x1=3,C1=2,ku=class extends O1.AbstractParserWithWordBoundaryChecking{innerPattern(){return k1}innerExtract(e,t){let n=t[C1].toLowerCase(),i=Uh.WEEKDAY_DICTIONARY[n],s=t[N1],a=t[x1],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=A1.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Nu.default=ku});var Yh=h(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});var Tr=Ee(),S1=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),I1=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),U1=2,qh=3,Wh=4,Lh=5,hn=class{pattern(e){return S1}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=hn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=I1.exec(i);return s&&(n.end=hn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[U1]),t[qh]!=null&&(i=parseInt(t[qh])),i>=60||n>24)return null;if(n>=12&&(s=Tr.Meridiem.PM),t[Lh]!=null){if(n>12)return null;let a=t[Lh].toLowerCase();a.match(/morgen|vormittag/)&&(s=Tr.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=Tr.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=Tr.Meridiem.AM,n=0):n<6?s=Tr.Meridiem.AM:(s=Tr.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Tr.Meridiem.AM):e.imply("meridiem",Tr.Meridiem.PM),t[Wh]!=null){let a=parseInt(t[Wh]);if(a>=60)return null;e.assign("second",a)}return e}};xu.default=hn});var $h=h(Jn=>{"use strict";var F1=Jn&&Jn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jn,"__esModule",{value:!0});var q1=F1(kt()),Cu=class extends q1.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};Jn.default=Cu});var jh=h(ei=>{"use strict";var W1=ei&&ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ei,"__esModule",{value:!0});var L1=W1(Bt()),Su=class extends L1.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};ei.default=Su});var Iu=h(ri=>{"use strict";var Y1=ri&&ri.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ri,"__esModule",{value:!0});var $1=Y1(K()),Yr=Ee(),j1=R(),B1=it(),G1=st(),ti=class extends j1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=$1.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return B1.implySimilarTime(s,n),ti.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=G1.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.AM);break}return e}};ri.default=ti});var Hh=h(gt=>{"use strict";var H1=gt&&gt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),z1=gt&&gt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),K1=gt&&gt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&H1(e,r,t);return z1(e,r),e},Gh=gt&&gt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gt,"__esModule",{value:!0});var V1=Gh(K()),Z1=R(),$r=it(),X1=Gh(Iu()),Bh=K1(zt()),Q1=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),J1=1,eE=2,Uu=class extends Z1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return Q1}innerExtract(e,t){let n=V1.default(e.refDate),i=(t[J1]||"").toLowerCase(),s=(t[eE]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=Bh.now(e.reference);break;case"heute":a=Bh.today(e.reference);break;case"morgen":$r.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),$r.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),$r.assignSimilarDate(a,n),$r.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),$r.assignSimilarDate(a,n),$r.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),$r.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=X1.default.extractTimeComponents(a,s)),a}};gt.default=Uu});var Qh=h(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});var tE=Se(),Zh=Qn(),Xh=Qn(),rE=J(),nE=R(),iE=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${rE.matchAnyPattern(Zh.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Xh.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),zh=1,Kh=2,sE=3,Vh=4,Fu=class extends nE.AbstractParserWithWordBoundaryChecking{innerPattern(){return iE}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Zh.MONTH_DICTIONARY[t[sE].toLowerCase()],s=parseInt(t[zh]);if(s>31)return t.index=t.index+t[zh].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Vh]){let a=Xh.parseYear(t[Vh]);n.start.assign("year",a)}else{let a=tE.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Kh]){let a=parseInt(t[Kh]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};qu.default=Fu});var Jh=h(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});var Fs=Qn(),aE=he(),oE=R(),uE=st(),lE=J(),Wu=class extends oE.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${Fs.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${lE.matchAnyPattern(Fs.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?Fs.parseNumberPattern(t[2]):1,i=Fs.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=uE.reverseTimeUnits(s)),aE.ParsingComponents.createRelativeFromReference(e.reference,s)}};Lu.default=Wu});var rm=h(Me=>{"use strict";var _t=Me&&Me.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Me,"__esModule",{value:!0});Me.createConfiguration=Me.createCasualConfiguration=Me.parseDate=Me.parse=Me.strict=Me.casual=void 0;var cE=Gt(),em=yt(),dE=_t(Lr()),fE=_t(uu()),pE=_t(xh()),hE=_t(Fh()),mE=_t(Yh()),yE=_t($h()),gE=_t(jh()),_E=_t(Hh()),TE=_t(Iu()),bE=_t(Qh()),vE=_t(Jh());Me.casual=new em.Chrono(tm());Me.strict=new em.Chrono(Yu(!0));function EE(r,e,t){return Me.casual.parse(r,e,t)}Me.parse=EE;function RE(r,e,t){return Me.casual.parseDate(r,e,t)}Me.parseDate=RE;function tm(r=!0){let e=Yu(!1,r);return e.parsers.unshift(new TE.default),e.parsers.unshift(new _E.default),e.parsers.unshift(new vE.default),e}Me.createCasualConfiguration=tm;function Yu(r=!0,e=!0){return cE.includeCommonConfiguration({parsers:[new fE.default,new dE.default(e),new pE.default,new mE.default,new bE.default,new hE.default],refiners:[new yE.default,new gE.default]},r)}Me.createConfiguration=Yu});var im=h(Tt=>{"use strict";var wE=Tt&&Tt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),ME=Tt&&Tt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),DE=Tt&&Tt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&wE(e,r,t);return ME(e,r),e},PE=Tt&&Tt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Tt,"__esModule",{value:!0});var OE=PE(K()),AE=Ee(),kE=R(),nm=it(),qs=DE(zt()),$u=class extends kE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=OE.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return qs.now(e.reference);case"aujourd'hui":return qs.today(e.reference);case"hier":return qs.yesterday(e.reference);case"demain":return qs.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(nm.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",AE.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),nm.assignSimilarDate(s,n),s.imply("hour",0))}return s}};Tt.default=$u});var sm=h(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});var ni=Ee(),NE=R(),ju=class extends NE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",ni.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",ni.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",ni.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",ni.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",ni.Meridiem.AM);break}return i}};Bu.default=ju});var am=h(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});var xE=Fr(),Gu=class extends xE.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Hu.default=Gu});var om=h(ii=>{"use strict";var CE=ii&&ii.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ii,"__esModule",{value:!0});var SE=CE(Bt()),zu=class extends SE.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};ii.default=zu});var um=h(si=>{"use strict";var IE=si&&si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(si,"__esModule",{value:!0});var UE=IE(kt()),Ku=class extends UE.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};si.default=Ku});var br=h(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.parseTimeUnits=V.TIME_UNITS_PATTERN=V.parseYear=V.YEAR_PATTERN=V.parseOrdinalNumberPattern=V.ORDINAL_NUMBER_PATTERN=V.parseNumberPattern=V.NUMBER_PATTERN=V.TIME_UNIT_DICTIONARY=V.INTEGER_WORD_DICTIONARY=V.MONTH_DICTIONARY=V.WEEKDAY_DICTIONARY=void 0;var Vu=J();V.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};V.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};V.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};V.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};V.NUMBER_PATTERN=`(?:${Vu.matchAnyPattern(V.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function cm(r){let e=r.toLowerCase();return V.INTEGER_WORD_DICTIONARY[e]!==void 0?V.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}V.parseNumberPattern=cm;V.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function FE(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}V.parseOrdinalNumberPattern=FE;V.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function qE(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}V.parseYear=qE;var dm=`(${V.NUMBER_PATTERN})\\s{0,5}(${Vu.matchAnyPattern(V.TIME_UNIT_DICTIONARY)})\\s{0,5}`,lm=new RegExp(dm,"i");V.TIME_UNITS_PATTERN=Vu.repeatedTimeunitPattern("",dm);function WE(r){let e={},t=r,n=lm.exec(t);for(;n;)LE(e,n),t=t.substring(n[0].length),n=lm.exec(t);return e}V.parseTimeUnits=WE;function LE(r,e){let t=cm(e[1]),n=V.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var pm=h(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});var fm=br(),YE=J(),$E=R(),jE=Wr(),BE=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${YE.matchAnyPattern(fm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),GE=1,HE=2,Zu=class extends $E.AbstractParserWithWordBoundaryChecking{innerPattern(){return BE}innerExtract(e,t){let n=t[GE].toLowerCase(),i=fm.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[HE];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=jE.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};Xu.default=Zu});var gm=h(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});var ai=Ee(),zE=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),KE=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),VE=2,hm=3,mm=4,ym=5,mn=class{pattern(e){return zE}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=mn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=KE.exec(i);return s&&(n.end=mn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[VE]),t[hm]!=null&&(i=parseInt(t[hm])),i>=60||n>24)return null;if(n>=12&&(s=ai.Meridiem.PM),t[ym]!=null){if(n>12)return null;let a=t[ym][0].toLowerCase();a=="a"&&(s=ai.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=ai.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",ai.Meridiem.AM):e.imply("meridiem",ai.Meridiem.PM),t[mm]!=null){let a=parseInt(t[mm]);if(a>=60)return null;e.assign("second",a)}return e}};Qu.default=mn});var Rm=h(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});var ZE=Se(),vm=br(),Em=br(),Ws=br(),XE=J(),QE=R(),JE=new RegExp(`(?:on\\s*?)?(${Ws.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${Ws.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${XE.matchAnyPattern(vm.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Em.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),_m=1,Tm=2,e0=3,bm=4,Ju=class extends QE.AbstractParserWithWordBoundaryChecking{innerPattern(){return JE}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=vm.MONTH_DICTIONARY[t[e0].toLowerCase()],s=Ws.parseOrdinalNumberPattern(t[_m]);if(s>31)return t.index=t.index+t[_m].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[bm]){let a=Em.parseYear(t[bm]);n.start.assign("year",a)}else{let a=ZE.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Tm]){let a=Ws.parseOrdinalNumberPattern(t[Tm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};el.default=Ju});var Mm=h(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});var wm=br(),t0=he(),r0=R(),n0=st(),tl=class extends r0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${wm.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=wm.parseTimeUnits(t[1]),i=n0.reverseTimeUnits(n);return t0.ParsingComponents.createRelativeFromReference(e.reference,i)}};rl.default=tl});var Pm=h(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});var Dm=br(),i0=he(),s0=R(),nl=class extends s0.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${Dm.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=Dm.parseTimeUnits(t[1]);return i0.ParsingComponents.createRelativeFromReference(e.reference,n)}};il.default=nl});var Om=h(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});var Ls=br(),a0=he(),o0=R(),u0=st(),l0=J(),sl=class extends o0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${Ls.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${l0.matchAnyPattern(Ls.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?Ls.parseNumberPattern(t[1]):1,i=Ls.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=u0.reverseTimeUnits(s)),a0.ParsingComponents.createRelativeFromReference(e.reference,s)}};al.default=sl});var Nm=h(De=>{"use strict";var at=De&&De.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(De,"__esModule",{value:!0});De.createConfiguration=De.createCasualConfiguration=De.parseDate=De.parse=De.strict=De.casual=void 0;var c0=Gt(),Am=yt(),d0=at(im()),f0=at(sm()),p0=at(Lr()),h0=at(am()),m0=at(om()),y0=at(um()),g0=at(pm()),_0=at(gm()),T0=at(Rm()),b0=at(Mm()),v0=at(Pm()),E0=at(Om());De.casual=new Am.Chrono(km());De.strict=new Am.Chrono(ol(!0));function R0(r,e,t){return De.casual.parse(r,e,t)}De.parse=R0;function w0(r,e,t){return De.casual.parseDate(r,e,t)}De.parseDate=w0;function km(r=!0){let e=ol(!1,r);return e.parsers.unshift(new d0.default),e.parsers.unshift(new f0.default),e.parsers.unshift(new E0.default),e}De.createCasualConfiguration=km;function ol(r=!0,e=!0){return c0.includeCommonConfiguration({parsers:[new p0.default(e),new T0.default,new h0.default,new _0.default,new b0.default,new v0.default,new g0.default],refiners:[new m0.default,new y0.default]},r)}De.createConfiguration=ol});var xm=h(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.toHankaku=void 0;function M0(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,D0)}Ys.toHankaku=M0;function D0(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var Sm=h(oi=>{"use strict";var P0=oi&&oi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(oi,"__esModule",{value:!0});var ul=xm(),O0=Se(),A0=P0(K()),k0=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,Cm=1,N0=2,ll=3,x0=4,C0=5,S0=6,cl=class{pattern(){return k0}extract(e,t){let n=parseInt(ul.toHankaku(t[C0])),i=parseInt(ul.toHankaku(t[S0])),s=e.createParsingComponents({day:i,month:n});if(t[Cm]&&t[Cm].match("\u540C|\u4ECA|\u672C")){let a=A0.default(e.refDate);s.assign("year",a.year())}if(t[N0]){let a=t[x0],o=a=="\u5143"?1:parseInt(ul.toHankaku(a));t[ll]=="\u4EE4\u548C"?o+=2018:t[ll]=="\u5E73\u6210"?o+=1988:t[ll]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=O0.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};oi.default=cl});var Im=h(ui=>{"use strict";var I0=ui&&ui.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ui,"__esModule",{value:!0});var U0=I0(kt()),dl=class extends U0.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};ui.default=dl});var Fm=h(bt=>{"use strict";var F0=bt&&bt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),q0=bt&&bt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),W0=bt&&bt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&F0(e,r,t);return q0(e,r),e},L0=bt&&bt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bt,"__esModule",{value:!0});var Y0=L0(K()),Um=Ee(),fl=W0(zt()),$0=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,pl=class{pattern(){return $0}extract(e,t){let n=t[0],i=Y0.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return fl.yesterday(e.reference);case"\u660E\u65E5":return fl.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return fl.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",Um.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",Um.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};bt.default=pl});var Lm=h(Pe=>{"use strict";var hl=Pe&&Pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.createConfiguration=Pe.createCasualConfiguration=Pe.parseDate=Pe.parse=Pe.strict=Pe.casual=void 0;var j0=hl(Sm()),B0=hl(Im()),G0=hl(Fm()),qm=yt();Pe.casual=new qm.Chrono(Wm());Pe.strict=new qm.Chrono(ml());function H0(r,e,t){return Pe.casual.parse(r,e,t)}Pe.parse=H0;function z0(r,e,t){return Pe.casual.parseDate(r,e,t)}Pe.parseDate=z0;function Wm(){let r=ml();return r.parsers.unshift(new G0.default),r}Pe.createCasualConfiguration=Wm;function ml(){return{parsers:[new j0.default],refiners:[new B0.default]}}Pe.createConfiguration=ml});var $s=h(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.parseYear=xt.YEAR_PATTERN=xt.MONTH_DICTIONARY=xt.WEEKDAY_DICTIONARY=void 0;xt.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};xt.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};xt.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function K0(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}xt.parseYear=K0});var $m=h(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});var Ym=$s(),V0=J(),Z0=R(),X0=Wr(),Q0=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${V0.matchAnyPattern(Ym.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),J0=1,eR=2,tR=3,yl=class extends Z0.AbstractParserWithWordBoundaryChecking{innerPattern(){return Q0}innerExtract(e,t){let n=t[eR].toLowerCase(),i=Ym.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[J0],a=t[tR],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=X0.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};gl.default=yl});var jm=h(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});var rR=Fr(),_l=class extends rR.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};Tl.default=_l});var Bm=h(li=>{"use strict";var nR=li&&li.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(li,"__esModule",{value:!0});var iR=nR(Bt()),bl=class extends iR.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};li.default=bl});var Gm=h(ci=>{"use strict";var sR=ci&&ci.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ci,"__esModule",{value:!0});var aR=sR(kt()),vl=class extends aR.default{patternBetween(){return/^\s*(?:-)\s*$/i}};ci.default=vl});var Xm=h(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});var oR=Se(),Vm=$s(),Zm=$s(),uR=J(),lR=R(),cR=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${uR.matchAnyPattern(Vm.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${Zm.YEAR_PATTERN}))?(?=\\W|$)`,"i"),Hm=1,zm=2,dR=3,Km=4,El=class extends lR.AbstractParserWithWordBoundaryChecking{innerPattern(){return cR}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Vm.MONTH_DICTIONARY[t[dR].toLowerCase()],s=parseInt(t[Hm]);if(s>31)return t.index=t.index+t[Hm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Km]){let a=Zm.parseYear(t[Km]);n.start.assign("year",a)}else{let a=oR.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[zm]){let a=parseInt(t[zm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Rl.default=El});var Qm=h(Kt=>{"use strict";var fR=Kt&&Kt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),pR=Kt&&Kt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),hR=Kt&&Kt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&fR(e,r,t);return pR(e,r),e};Object.defineProperty(Kt,"__esModule",{value:!0});var mR=R(),js=hR(zt()),wl=class extends mR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return js.now(e.reference);case"hoje":return js.today(e.reference);case"amanha":case"amanh\xE3":return js.tomorrow(e.reference);case"ontem":return js.yesterday(e.reference)}return i}};Kt.default=wl});var Jm=h(di=>{"use strict";var yR=di&&di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(di,"__esModule",{value:!0});var Bs=Ee(),gR=R(),_R=it(),TR=yR(K()),Ml=class extends gR.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=TR.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",Bs.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",Bs.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",Bs.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":_R.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",Bs.Meridiem.AM),i.imply("hour",12);break}return i}};di.default=Ml});var ry=h(Oe=>{"use strict";var vr=Oe&&Oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.createConfiguration=Oe.createCasualConfiguration=Oe.parseDate=Oe.parse=Oe.strict=Oe.casual=void 0;var bR=Gt(),ey=yt(),vR=vr(Lr()),ER=vr($m()),RR=vr(jm()),wR=vr(Bm()),MR=vr(Gm()),DR=vr(Xm()),PR=vr(Qm()),OR=vr(Jm());Oe.casual=new ey.Chrono(ty());Oe.strict=new ey.Chrono(Dl(!0));function AR(r,e,t){return Oe.casual.parse(r,e,t)}Oe.parse=AR;function kR(r,e,t){return Oe.casual.parseDate(r,e,t)}Oe.parseDate=kR;function ty(r=!0){let e=Dl(!1,r);return e.parsers.push(new PR.default),e.parsers.push(new OR.default),e}Oe.createCasualConfiguration=ty;function Dl(r=!0,e=!0){return bR.includeCommonConfiguration({parsers:[new vR.default(e),new ER.default,new RR.default,new DR.default],refiners:[new wR.default,new MR.default]},r)}Oe.createConfiguration=Dl});var ny=h(fi=>{"use strict";var NR=fi&&fi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fi,"__esModule",{value:!0});var xR=NR(kt()),Pl=class extends xR.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};fi.default=Pl});var iy=h(pi=>{"use strict";var CR=pi&&pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pi,"__esModule",{value:!0});var SR=CR(Bt()),Ol=class extends SR.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};pi.default=Ol});var sy=h(Vt=>{"use strict";var IR=Vt&&Vt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),UR=Vt&&Vt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),FR=Vt&&Vt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&IR(e,r,t);return UR(e,r),e};Object.defineProperty(Vt,"__esModule",{value:!0});var qR=R(),Gs=FR(zt()),Al=class extends qR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return Gs.now(e.reference);case"vandaag":return Gs.today(e.reference);case"morgen":case"morgend":return Gs.tomorrow(e.reference);case"gisteren":return Gs.yesterday(e.reference)}return i}};Vt.default=Al});var ay=h(hi=>{"use strict";var WR=hi&&hi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hi,"__esModule",{value:!0});var Hs=Ee(),LR=R(),YR=WR(K()),$R=it(),jR=1,BR=2,kl=class extends LR.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=YR.default(e.refDate),i=e.createParsingComponents();switch(t[jR]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[BR].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",Hs.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",Hs.Meridiem.PM),i.imply("hour",20);break;case"middernacht":$R.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",Hs.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",Hs.Meridiem.AM),i.imply("hour",12);break}return i}};hi.default=kl});var Qe=h(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.parseTimeUnits=j.TIME_UNITS_PATTERN=j.parseYear=j.YEAR_PATTERN=j.parseOrdinalNumberPattern=j.ORDINAL_NUMBER_PATTERN=j.parseNumberPattern=j.NUMBER_PATTERN=j.TIME_UNIT_DICTIONARY=j.ORDINAL_WORD_DICTIONARY=j.INTEGER_WORD_DICTIONARY=j.MONTH_DICTIONARY=j.WEEKDAY_DICTIONARY=void 0;var zs=J(),GR=Se();j.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};j.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};j.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};j.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};j.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};j.NUMBER_PATTERN=`(?:${zs.matchAnyPattern(j.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function uy(r){let e=r.toLowerCase();return j.INTEGER_WORD_DICTIONARY[e]!==void 0?j.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}j.parseNumberPattern=uy;j.ORDINAL_NUMBER_PATTERN=`(?:${zs.matchAnyPattern(j.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function HR(r){let e=r.toLowerCase();return j.ORDINAL_WORD_DICTIONARY[e]!==void 0?j.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}j.parseOrdinalNumberPattern=HR;j.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function zR(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return GR.findMostLikelyADYear(e)}j.parseYear=zR;var ly=`(${j.NUMBER_PATTERN})\\s{0,5}(${zs.matchAnyPattern(j.TIME_UNIT_DICTIONARY)})\\s{0,5}`,oy=new RegExp(ly,"i");j.TIME_UNITS_PATTERN=zs.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",ly);function KR(r){let e={},t=r,n=oy.exec(t);for(;n;)VR(e,n),t=t.substring(n[0].length),n=oy.exec(t);return e}j.parseTimeUnits=KR;function VR(r,e){let t=uy(e[1]),n=j.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var dy=h(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});var cy=Qe(),ZR=he(),XR=R(),Nl=class extends XR.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+cy.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=cy.parseTimeUnits(t[1]);return ZR.ParsingComponents.createRelativeFromReference(e.reference,n)}};xl.default=Nl});var py=h(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});var fy=Qe(),QR=J(),JR=R(),ew=Wr(),tw=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${QR.matchAnyPattern(fy.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),rw=1,nw=2,iw=3,Cl=class extends JR.AbstractParserWithWordBoundaryChecking{innerPattern(){return tw}innerExtract(e,t){let n=t[nw].toLowerCase(),i=fy.WEEKDAY_DICTIONARY[n],s=t[rw],a=t[iw],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=ew.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Sl.default=Cl});var Ty=h(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});var sw=Se(),gy=Qe(),Ks=Qe(),_y=Qe(),aw=J(),ow=R(),uw=new RegExp(`(?:on\\s*?)?(${Ks.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${Ks.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+aw.matchAnyPattern(gy.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${_y.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),lw=3,hy=1,my=2,yy=4,Il=class extends ow.AbstractParserWithWordBoundaryChecking{innerPattern(){return uw}innerExtract(e,t){let n=gy.MONTH_DICTIONARY[t[lw].toLowerCase()],i=Ks.parseOrdinalNumberPattern(t[hy]);if(i>31)return t.index=t.index+t[hy].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[yy]){let u=_y.parseYear(t[yy]);s.assign("year",u)}else{let u=sw.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[my])return s;let a=Ks.parseOrdinalNumberPattern(t[my]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Ul.default=Il});var Ry=h(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});var vy=Qe(),cw=Se(),dw=J(),Ey=Qe(),fw=R(),pw=new RegExp(`(${dw.matchAnyPattern(vy.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Ey.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),hw=1,by=2,Fl=class extends fw.AbstractParserWithWordBoundaryChecking{innerPattern(){return pw}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[hw],s=vy.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[by]){let a=Ey.parseYear(t[by]);n.assign("year",a)}else{let a=cw.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};ql.default=Fl});var wy=h(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});var mw=R(),yw=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),gw=1,_w=2,Wl=class extends mw.AbstractParserWithWordBoundaryChecking{innerPattern(){return yw}innerExtract(e,t){let n=parseInt(t[_w]),i=parseInt(t[gw]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Ll.default=Wl});var My=h($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});var Tw=Fr(),Yl=class extends Tw.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};$l.default=Yl});var Oy=h(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});var Py=Qe(),bw=J(),vw=R(),Ew=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${bw.matchAnyPattern(Py.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),Rw=1,ww=2,Dy=3,Mw=4,jl=class extends vw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Ew}innerExtract(e,t){let n=t[Dy]?parseInt(t[Dy]):Py.MONTH_DICTIONARY[t[ww].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[Rw]);return{day:parseInt(t[Mw]),month:n,year:i}}};Bl.default=jl});var Ay=h(mi=>{"use strict";var Dw=mi&&mi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mi,"__esModule",{value:!0});var Pw=R(),Vs=Ee(),Gl=it(),Ow=Dw(K()),Aw=1,kw=2,Hl=class extends Pw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[Aw].toLowerCase(),i=t[kw].toLowerCase(),s=e.createParsingComponents(),a=Ow.default(e.refDate);switch(n){case"gisteren":Gl.assignSimilarDate(s,a.add(-1,"day"));break;case"van":Gl.assignSimilarDate(s,a);break;case"morgen":Gl.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",Vs.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",Vs.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",Vs.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",Vs.Meridiem.PM),s.imply("hour",20);break}return s}};mi.default=Hl});var Ny=h(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});var ky=Qe(),Nw=he(),xw=R(),Cw=st(),Sw=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${ky.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),zl=class extends xw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Sw}innerExtract(e,t){let n=t[1].toLowerCase(),i=ky.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=Cw.reverseTimeUnits(i);break}return Nw.ParsingComponents.createRelativeFromReference(e.reference,i)}};Kl.default=zl});var Sy=h(yi=>{"use strict";var Iw=yi&&yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yi,"__esModule",{value:!0});var Cy=Qe(),xy=he(),Uw=Iw(K()),Fw=R(),qw=J(),Ww=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${qw.matchAnyPattern(Cy.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),Lw=1,Yw=2,Vl=class extends Fw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Ww}innerExtract(e,t){let n=t[Lw].toLowerCase(),i=t[Yw].toLowerCase(),s=Cy.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,xy.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,xy.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=Uw.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};yi.default=Vl});var Iy=h(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});var Xl=Qe(),$w=he(),jw=R(),Bw=st(),Gw=new RegExp("("+Xl.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),Hw=new RegExp("("+Xl.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),Zl=class extends jw.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Hw:Gw}innerExtract(e,t){let n=Xl.parseTimeUnits(t[1]),i=Bw.reverseTimeUnits(n);return $w.ParsingComponents.createRelativeFromReference(e.reference,i)}};Ql.default=Zl});var Uy=h(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});var ec=Qe(),zw=he(),Kw=R(),Vw=new RegExp("("+ec.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),Zw=new RegExp("("+ec.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),Xw=1,Jl=class extends Kw.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Zw:Vw}innerExtract(e,t){let n=ec.parseTimeUnits(t[Xw]);return zw.ParsingComponents.createRelativeFromReference(e.reference,n)}};tc.default=Jl});var Ly=h(Ae=>{"use strict";var Ue=Ae&&Ae.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.createConfiguration=Ae.createCasualConfiguration=Ae.parseDate=Ae.parse=Ae.strict=Ae.casual=void 0;var Qw=Gt(),Fy=yt(),Jw=Ue(ny()),eM=Ue(iy()),tM=Ue(sy()),rM=Ue(ay()),nM=Ue(Lr()),iM=Ue(dy()),sM=Ue(py()),aM=Ue(Ty()),qy=Ue(Ry()),oM=Ue(wy()),uM=Ue(My()),lM=Ue(Oy()),cM=Ue(Ay()),dM=Ue(Ny()),fM=Ue(Sy()),pM=Ue(Iy()),hM=Ue(Uy());Ae.casual=new Fy.Chrono(Wy());Ae.strict=new Fy.Chrono(rc(!0));function mM(r,e,t){return Ae.casual.parse(r,e,t)}Ae.parse=mM;function yM(r,e,t){return Ae.casual.parseDate(r,e,t)}Ae.parseDate=yM;function Wy(r=!0){let e=rc(!1,r);return e.parsers.unshift(new tM.default),e.parsers.unshift(new rM.default),e.parsers.unshift(new cM.default),e.parsers.unshift(new qy.default),e.parsers.unshift(new fM.default),e.parsers.unshift(new dM.default),e}Ae.createCasualConfiguration=Wy;function rc(r=!0,e=!0){return Qw.includeCommonConfiguration({parsers:[new nM.default(e),new iM.default,new aM.default,new qy.default,new sM.default,new lM.default,new oM.default,new uM.default(r),new pM.default(r),new hM.default(r)],refiners:[new eM.default,new Jw.default]},r)}Ae.createConfiguration=rc});var By=h(gi=>{"use strict";var gM=gi&&gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gi,"__esModule",{value:!0});var _M=gM(K()),TM=R(),bM=1,Yy=2,vM=3,$y=4,jy=5,EM=6,nc=class extends TM.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=_M.default(e.refDate),a=s;if(t[bM])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[Yy]){let o=t[Yy],u=t[vM];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[$y]){let u=t[$y][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[jy]){let o=t[jy];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[EM];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};gi.default=nc});var yn=h(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.zhStringToYear=He.zhStringToNumber=He.WEEKDAY_OFFSET=He.NUMBER=void 0;He.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};He.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function RM(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?He.NUMBER[n]:e*He.NUMBER[n]:e+=He.NUMBER[n]}return e}He.zhStringToNumber=RM;function wM(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+He.NUMBER[n]}return parseInt(e)}He.zhStringToYear=wM});var Hy=h(_i=>{"use strict";var MM=_i&&_i.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_i,"__esModule",{value:!0});var DM=MM(K()),PM=R(),jr=yn(),ic=1,Gy=2,sc=3,ac=class extends PM.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(jr.NUMBER).join("")+"]{4}|["+Object.keys(jr.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(jr.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(jr.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=DM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[Gy]);if(isNaN(s)&&(s=jr.zhStringToNumber(t[Gy])),i.start.assign("month",s),t[sc]){let a=parseInt(t[sc]);isNaN(a)&&(a=jr.zhStringToNumber(t[sc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[ic]){let a=parseInt(t[ic]);isNaN(a)&&(a=jr.zhStringToYear(t[ic])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};_i.default=ac});var Ky=h(Ti=>{"use strict";var OM=Ti&&Ti.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ti,"__esModule",{value:!0});var AM=OM(K()),kM=R(),zy=yn(),NM=new RegExp("(\\d+|["+Object.keys(zy.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),oc=1,xM=2,uc=class extends kM.AbstractParserWithWordBoundaryChecking{innerPattern(){return NM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[oc]);if(isNaN(i)&&(i=zy.zhStringToNumber(t[oc])),isNaN(i)){let u=t[oc];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=AM.default(e.refDate),o=t[xM][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Ti.default=uc});var Zy=h(bi=>{"use strict";var CM=bi&&bi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bi,"__esModule",{value:!0});var SM=CM(K()),IM=R(),Vy=yn(),UM=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(Vy.WEEKDAY_OFFSET).join("|")+")"),lc=class extends IM.AbstractParserWithWordBoundaryChecking{innerPattern(){return UM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Vy.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=SM.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};bi.default=lc});var Xy=h(vi=>{"use strict";var FM=vi&&vi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vi,"__esModule",{value:!0});var qM=FM(K()),WM=R(),ut=yn(),LM=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(ut.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(ut.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(ut.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),YM=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(ut.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(ut.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(ut.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),Zs=1,Xs=2,Qs=3,Js=4,ea=5,ta=6,ot=7,gn=8,ra=9,cc=class extends WM.AbstractParserWithWordBoundaryChecking{innerPattern(){return LM}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=qM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[Zs]){var a=t[Zs];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[Js]){var o=t[Js];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[gn]){var d=parseInt(t[gn]);if(isNaN(d)&&(d=ut.zhStringToNumber(t[gn])),d>=60)return null;i.start.assign("second",d)}if(u=parseInt(t[ta]),isNaN(u)&&(u=ut.zhStringToNumber(t[ta])),t[ot]?t[ot]=="\u534A"?l=30:t[ot]=="\u6B63"||t[ot]=="\u6574"?l=0:(l=parseInt(t[ot]),isNaN(l)&&(l=ut.zhStringToNumber(t[ot]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[ra]){if(u>12)return null;var f=t[ra][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12))}else if(t[Xs]){var p=t[Xs],y=p[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[Qs]){var m=t[Qs],g=m[0];g=="\u4E0A"||g=="\u671D"||g=="\u65E9"||g=="\u51CC"?(c=0,u==12&&(u=0)):(g=="\u4E0B"||g=="\u664F"||g=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[ea]){var A=t[ea],C=A[0];C=="\u4E0A"||C=="\u671D"||C=="\u65E9"||C=="\u51CC"?(c=0,u==12&&(u=0)):(C=="\u4E0B"||C=="\u664F"||C=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=YM.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let x=s.clone();if(i.end=e.createParsingComponents(),t[Zs]){var a=t[Zs];a=="\u660E"||a=="\u807D"?n.hour()>1&&x.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?x.add(-1,"day"):a=="\u524D"?x.add(-2,"day"):a=="\u5927\u524D"?x.add(-3,"day"):a=="\u5F8C"?x.add(2,"day"):a=="\u5927\u5F8C"&&x.add(3,"day"),i.end.assign("day",x.date()),i.end.assign("month",x.month()+1),i.end.assign("year",x.year())}else if(t[Js]){var o=t[Js];o=="\u660E"||o=="\u807D"?x.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?x.add(-1,"day"):o=="\u524D"?x.add(-2,"day"):o=="\u5927\u524D"?x.add(-3,"day"):o=="\u5F8C"?x.add(2,"day"):o=="\u5927\u5F8C"&&x.add(3,"day"),i.end.assign("day",x.date()),i.end.assign("month",x.month()+1),i.end.assign("year",x.year())}else i.end.imply("day",x.date()),i.end.imply("month",x.month()+1),i.end.imply("year",x.year());if(u=0,l=0,c=-1,t[gn]){var d=parseInt(t[gn]);if(isNaN(d)&&(d=ut.zhStringToNumber(t[gn])),d>=60)return null;i.end.assign("second",d)}if(u=parseInt(t[ta]),isNaN(u)&&(u=ut.zhStringToNumber(t[ta])),t[ot]?t[ot]=="\u534A"?l=30:t[ot]=="\u6B63"||t[ot]=="\u6574"?l=0:(l=parseInt(t[ot]),isNaN(l)&&(l=ut.zhStringToNumber(t[ot]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[ra]){if(u>12)return null;var f=t[ra][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[Xs]){var p=t[Xs],y=p[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[Qs]){var m=t[Qs],g=m[0];g=="\u4E0A"||g=="\u671D"||g=="\u65E9"||g=="\u51CC"?(c=0,u==12&&(u=0)):(g=="\u4E0B"||g=="\u664F"||g=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[ea]){var A=t[ea],C=A[0];C=="\u4E0A"||C=="\u671D"||C=="\u65E9"||C=="\u51CC"?(c=0,u==12&&(u=0)):(C=="\u4E0B"||C=="\u664F"||C=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};vi.default=cc});var Jy=h(Ei=>{"use strict";var $M=Ei&&Ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ei,"__esModule",{value:!0});var jM=$M(K()),BM=R(),Qy=yn(),GM=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(Qy.WEEKDAY_OFFSET).join("|")+")"),dc=class extends BM.AbstractParserWithWordBoundaryChecking{innerPattern(){return GM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Qy.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=jM.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};Ei.default=dc});var eg=h(Ri=>{"use strict";var HM=Ri&&Ri.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ri,"__esModule",{value:!0});var zM=HM(kt()),fc=class extends zM.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};Ri.default=fc});var tg=h(wi=>{"use strict";var KM=wi&&wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wi,"__esModule",{value:!0});var VM=KM(Bt()),pc=class extends VM.default{patternBetween(){return/^\s*$/i}};wi.default=pc});var rg=h(be=>{"use strict";var Zt=be&&be.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(be,"__esModule",{value:!0});be.createConfiguration=be.createCasualConfiguration=be.parseDate=be.parse=be.strict=be.casual=be.hant=void 0;var hc=yt(),ZM=Zt(xs()),XM=Gt(),QM=Zt(By()),JM=Zt(Hy()),eD=Zt(Ky()),tD=Zt(Zy()),rD=Zt(Xy()),nD=Zt(Jy()),iD=Zt(eg()),sD=Zt(tg());be.hant=new hc.Chrono(mc());be.casual=new hc.Chrono(mc());be.strict=new hc.Chrono(yc());function aD(r,e,t){return be.casual.parse(r,e,t)}be.parse=aD;function oD(r,e,t){return be.casual.parseDate(r,e,t)}be.parseDate=oD;function mc(){let r=yc();return r.parsers.unshift(new QM.default),r}be.createCasualConfiguration=mc;function yc(){let r=XM.includeCommonConfiguration({parsers:[new JM.default,new tD.default,new nD.default,new rD.default,new eD.default],refiners:[new iD.default,new sD.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof ZM.default)),r}be.createConfiguration=yc});var ag=h(Mi=>{"use strict";var uD=Mi&&Mi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mi,"__esModule",{value:!0});var lD=uD(K()),cD=R(),dD=1,ng=2,fD=3,ig=4,sg=5,pD=6,gc=class extends cD.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=lD.default(e.refDate),a=s;if(t[dD])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[ng]){let o=t[ng],u=t[fD];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[ig]){let u=t[ig][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[sg]){let o=t[sg];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[pD];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Mi.default=gc});var _n=h(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.zhStringToYear=ze.zhStringToNumber=ze.WEEKDAY_OFFSET=ze.NUMBER=void 0;ze.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};ze.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function hD(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?ze.NUMBER[n]:e*ze.NUMBER[n]:e+=ze.NUMBER[n]}return e}ze.zhStringToNumber=hD;function mD(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+ze.NUMBER[n]}return parseInt(e)}ze.zhStringToYear=mD});var ug=h(Di=>{"use strict";var yD=Di&&Di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Di,"__esModule",{value:!0});var gD=yD(K()),_D=R(),Br=_n(),_c=1,og=2,Tc=3,bc=class extends _D.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Br.NUMBER).join("")+"]{4}|["+Object.keys(Br.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Br.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Br.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=gD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[og]);if(isNaN(s)&&(s=Br.zhStringToNumber(t[og])),i.start.assign("month",s),t[Tc]){let a=parseInt(t[Tc]);isNaN(a)&&(a=Br.zhStringToNumber(t[Tc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[_c]){let a=parseInt(t[_c]);isNaN(a)&&(a=Br.zhStringToYear(t[_c])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};Di.default=bc});var cg=h(Pi=>{"use strict";var TD=Pi&&Pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pi,"__esModule",{value:!0});var bD=TD(K()),vD=R(),lg=_n(),ED=new RegExp("(\\d+|["+Object.keys(lg.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),vc=1,RD=2,Ec=class extends vD.AbstractParserWithWordBoundaryChecking{innerPattern(){return ED}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[vc]);if(isNaN(i)&&(i=lg.zhStringToNumber(t[vc])),isNaN(i)){let u=t[vc];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=bD.default(e.refDate),o=t[RD][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Pi.default=Ec});var fg=h(Oi=>{"use strict";var wD=Oi&&Oi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oi,"__esModule",{value:!0});var MD=wD(K()),DD=R(),dg=_n(),PD=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(dg.WEEKDAY_OFFSET).join("|")+")"),Rc=class extends DD.AbstractParserWithWordBoundaryChecking{innerPattern(){return PD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=dg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=MD.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Oi.default=Rc});var pg=h(Ai=>{"use strict";var OD=Ai&&Ai.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ai,"__esModule",{value:!0});var AD=OD(K()),kD=R(),ct=_n(),ND=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(ct.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(ct.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(ct.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),xD=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(ct.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(ct.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(ct.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),na=1,ia=2,sa=3,aa=4,oa=5,ua=6,lt=7,Tn=8,la=9,wc=class extends kD.AbstractParserWithWordBoundaryChecking{innerPattern(){return ND}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=AD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[na]){let c=t[na];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[aa]){let c=t[aa];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[Tn]){let c=parseInt(t[Tn]);if(isNaN(c)&&(c=ct.zhStringToNumber(t[Tn])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[ua]),isNaN(a)&&(a=ct.zhStringToNumber(t[ua])),t[lt]?t[lt]=="\u534A"?o=30:t[lt]=="\u6B63"||t[lt]=="\u6574"?o=0:(o=parseInt(t[lt]),isNaN(o)&&(o=ct.zhStringToNumber(t[lt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[la]){if(a>12)return null;let c=t[la][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[ia]){let d=t[ia][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[sa]){let d=t[sa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[oa]){let d=t[oa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=xD.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[na]){let c=t[na];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[aa]){let c=t[aa];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[Tn]){let c=parseInt(t[Tn]);if(isNaN(c)&&(c=ct.zhStringToNumber(t[Tn])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[ua]),isNaN(a)&&(a=ct.zhStringToNumber(t[ua])),t[lt]?t[lt]=="\u534A"?o=30:t[lt]=="\u6B63"||t[lt]=="\u6574"?o=0:(o=parseInt(t[lt]),isNaN(o)&&(o=ct.zhStringToNumber(t[lt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[la]){if(a>12)return null;let c=t[la][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[ia]){let d=t[ia][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[sa]){let d=t[sa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[oa]){let d=t[oa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};Ai.default=wc});var mg=h(ki=>{"use strict";var CD=ki&&ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ki,"__esModule",{value:!0});var SD=CD(K()),ID=R(),hg=_n(),UD=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(hg.WEEKDAY_OFFSET).join("|")+")"),Mc=class extends ID.AbstractParserWithWordBoundaryChecking{innerPattern(){return UD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=hg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=SD.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};ki.default=Mc});var yg=h(Ni=>{"use strict";var FD=Ni&&Ni.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ni,"__esModule",{value:!0});var qD=FD(kt()),Dc=class extends qD.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};Ni.default=Dc});var gg=h(xi=>{"use strict";var WD=xi&&xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xi,"__esModule",{value:!0});var LD=WD(Bt()),Pc=class extends LD.default{patternBetween(){return/^\s*$/i}};xi.default=Pc});var _g=h(ve=>{"use strict";var Xt=ve&&ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ve,"__esModule",{value:!0});ve.createConfiguration=ve.createCasualConfiguration=ve.parseDate=ve.parse=ve.strict=ve.casual=ve.hans=void 0;var Oc=yt(),YD=Xt(xs()),$D=Gt(),jD=Xt(ag()),BD=Xt(ug()),GD=Xt(cg()),HD=Xt(fg()),zD=Xt(pg()),KD=Xt(mg()),VD=Xt(yg()),ZD=Xt(gg());ve.hans=new Oc.Chrono(Ac());ve.casual=new Oc.Chrono(Ac());ve.strict=new Oc.Chrono(kc());function XD(r,e,t){return ve.casual.parse(r,e,t)}ve.parse=XD;function QD(r,e,t){return ve.casual.parseDate(r,e,t)}ve.parseDate=QD;function Ac(){let r=kc();return r.parsers.unshift(new jD.default),r}ve.createCasualConfiguration=Ac;function kc(){let r=$D.includeCommonConfiguration({parsers:[new BD.default,new HD.default,new KD.default,new zD.default,new GD.default],refiners:[new VD.default,new ZD.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof YD.default)),r}ve.createConfiguration=kc});var bg=h(Je=>{"use strict";var Tg=Je&&Je.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),JD=Je&&Je.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),eP=Je&&Je.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Tg(e,r,t)},tP=Je&&Je.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Tg(e,r,t);return JD(e,r),e};Object.defineProperty(Je,"__esModule",{value:!0});Je.hans=void 0;eP(rg(),Je);Je.hans=tP(_g())});var Ke=h(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.parseTimeUnits=F.TIME_UNITS_PATTERN=F.parseYear=F.YEAR_PATTERN=F.parseOrdinalNumberPattern=F.ORDINAL_NUMBER_PATTERN=F.parseNumberPattern=F.NUMBER_PATTERN=F.TIME_UNIT_DICTIONARY=F.ORDINAL_WORD_DICTIONARY=F.INTEGER_WORD_DICTIONARY=F.MONTH_DICTIONARY=F.FULL_MONTH_NAME_DICTIONARY=F.WEEKDAY_DICTIONARY=F.REGEX_PARTS=void 0;var ca=J(),rP=Se();F.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};F.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};F.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};F.MONTH_DICTIONARY=Object.assign(Object.assign({},F.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});F.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};F.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};F.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};F.NUMBER_PATTERN=`(?:${ca.matchAnyPattern(F.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function Eg(r){let e=r.toLowerCase();return F.INTEGER_WORD_DICTIONARY[e]!==void 0?F.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}F.parseNumberPattern=Eg;F.ORDINAL_NUMBER_PATTERN=`(?:${ca.matchAnyPattern(F.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function nP(r){let e=r.toLowerCase();return F.ORDINAL_WORD_DICTIONARY[e]!==void 0?F.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}F.parseOrdinalNumberPattern=nP;var Nc="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";F.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${Nc}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${Nc}|[5-9][0-9]${Nc})`;function iP(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return rP.findMostLikelyADYear(e)}F.parseYear=iP;var Rg=`(${F.NUMBER_PATTERN})\\s{0,3}(${ca.matchAnyPattern(F.TIME_UNIT_DICTIONARY)})`,vg=new RegExp(Rg,"i");F.TIME_UNITS_PATTERN=ca.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",Rg);function sP(r){let e={},t=r,n=vg.exec(t);for(;n;)aP(e,n),t=t.substring(n[0].length).trim(),n=vg.exec(t);return e}F.parseTimeUnits=sP;function aP(r,e){let t=Eg(e[1]),n=F.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Mg=h(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});var Ci=Ke(),oP=he(),uP=R(),wg=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${Ci.TIME_UNITS_PATTERN})${Ci.REGEX_PARTS.rightBoundary}`,lP=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${wg}`,Ci.REGEX_PARTS.flags),cP=new RegExp(wg,"i"),xc=class extends uP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ci.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?cP:lP}innerExtract(e,t){let n=Ci.parseTimeUnits(t[1]);return oP.ParsingComponents.createRelativeFromReference(e.reference,n)}};Cc.default=xc});var kg=h(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});var dP=Se(),Si=Ke(),Ag=Ke(),da=Ke(),fP=J(),pP=R(),hP=new RegExp(`(?:\u0441)?\\s*(${da.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${da.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${fP.matchAnyPattern(Si.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${Ag.YEAR_PATTERN}(?![^\\s]\\d)))?${Si.REGEX_PARTS.rightBoundary}`,Si.REGEX_PARTS.flags),Dg=1,Pg=2,mP=3,Og=4,Sc=class extends pP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Si.REGEX_PARTS.leftBoundary}innerPattern(){return hP}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Si.MONTH_DICTIONARY[t[mP].toLowerCase()],s=da.parseOrdinalNumberPattern(t[Dg]);if(s>31)return t.index=t.index+t[Dg].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Og]){let a=Ag.parseYear(t[Og]);n.start.assign("year",a)}else{let a=dP.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Pg]){let a=da.parseOrdinalNumberPattern(t[Pg]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Ic.default=Sc});var Cg=h(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});var Ii=Ke(),yP=Se(),gP=J(),xg=Ke(),_P=R(),TP=new RegExp(`((?:\u0432)\\s*)?(${gP.matchAnyPattern(Ii.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${xg.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,Ii.REGEX_PARTS.flags),bP=2,Ng=3,Uc=class extends _P.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ii.REGEX_PARTS.leftBoundary}innerPattern(){return TP}innerExtract(e,t){let n=t[bP].toLowerCase();if(t[0].length<=3&&!Ii.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=Ii.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Ng]){let a=xg.parseYear(t[Ng]);i.start.assign("year",a)}else{let a=yP.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Fc.default=Uc});var Ig=h(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});var fa=Ee(),vP=Fr(),Sg=Ke(),qc=class extends vP.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return Sg.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${Sg.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",fa.Meridiem.PM)):i<6&&n.assign("meridiem",fa.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",fa.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",fa.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Wc.default=qc});var Ug=h(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});var pa=Ke(),EP=he(),RP=R(),wP=st(),MP=new RegExp(`(${pa.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,pa.REGEX_PARTS.flags),Lc=class extends RP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return pa.REGEX_PARTS.leftBoundary}innerPattern(){return MP}innerExtract(e,t){let n=pa.parseTimeUnits(t[1]),i=wP.reverseTimeUnits(n);return EP.ParsingComponents.createRelativeFromReference(e.reference,i)}};Yc.default=Lc});var Fg=h(Ui=>{"use strict";var DP=Ui&&Ui.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ui,"__esModule",{value:!0});var PP=DP(kt()),$c=class extends PP.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};Ui.default=$c});var qg=h(Fi=>{"use strict";var OP=Fi&&Fi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fi,"__esModule",{value:!0});var AP=OP(Bt()),jc=class extends AP.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};Fi.default=jc});var Wg=h(Qt=>{"use strict";var kP=Qt&&Qt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),NP=Qt&&Qt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),xP=Qt&&Qt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&kP(e,r,t);return NP(e,r),e};Object.defineProperty(Qt,"__esModule",{value:!0});var CP=R(),qi=xP(zt()),Bc=Ke(),SP=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${Bc.REGEX_PARTS.rightBoundary}`,Bc.REGEX_PARTS.flags),Gc=class extends CP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Bc.REGEX_PARTS.leftBoundary}innerPattern(e){return SP}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return qi.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return qi.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return qi.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return qi.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return qi.theDayBefore(e.reference,2)}return i}};Qt.default=Gc});var Lg=h(vt=>{"use strict";var IP=vt&&vt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),UP=vt&&vt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),FP=vt&&vt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&IP(e,r,t);return UP(e,r),e},qP=vt&&vt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vt,"__esModule",{value:!0});var WP=R(),Gr=FP(zt()),LP=it(),YP=qP(K()),Hc=Ke(),$P=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${Hc.REGEX_PARTS.rightBoundary}`,Hc.REGEX_PARTS.flags),zc=class extends WP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Hc.REGEX_PARTS.leftBoundary}innerPattern(){return $P}innerExtract(e,t){let n=YP.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return Gr.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return Gr.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return Gr.morning(e.reference);if(i.match(/в\s*полдень/))return Gr.noon(e.reference);if(i.match(/прошлой\s*ночью/))return Gr.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return Gr.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),LP.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?Gr.midnight(e.reference):s}};vt.default=zc});var Yg=h(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});var Wi=Ke(),jP=J(),BP=R(),GP=Wr(),HP=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${jP.matchAnyPattern(Wi.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${Wi.REGEX_PARTS.rightBoundary}`,Wi.REGEX_PARTS.flags),zP=1,KP=2,VP=3,Kc=class extends BP.AbstractParserWithWordBoundaryChecking{innerPattern(){return HP}patternLeftBoundary(){return Wi.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[KP].toLowerCase(),i=Wi.WEEKDAY_DICTIONARY[n],s=t[zP],a=t[VP],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=GP.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Vc.default=Kc});var jg=h(Yi=>{"use strict";var ZP=Yi&&Yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yi,"__esModule",{value:!0});var Li=Ke(),$g=he(),XP=ZP(K()),QP=R(),JP=J(),eO=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${JP.matchAnyPattern(Li.TIME_UNIT_DICTIONARY)})(?=\\s*)${Li.REGEX_PARTS.rightBoundary}`,Li.REGEX_PARTS.flags),tO=1,rO=2,Zc=class extends QP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Li.REGEX_PARTS.leftBoundary}innerPattern(){return eO}innerExtract(e,t){let n=t[tO].toLowerCase(),i=t[rO].toLowerCase(),s=Li.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,$g.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,$g.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=XP.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Yi.default=Zc});var Bg=h(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});var $i=Ke(),nO=he(),iO=R(),sO=st(),aO=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${$i.TIME_UNITS_PATTERN})${$i.REGEX_PARTS.rightBoundary}`,$i.REGEX_PARTS.flags),Xc=class extends iO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return $i.REGEX_PARTS.leftBoundary}innerPattern(){return aO}innerExtract(e,t){let n=t[1].toLowerCase(),i=$i.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=sO.reverseTimeUnits(i);break}return nO.ParsingComponents.createRelativeFromReference(e.reference,i)}};Qc.default=Xc});var zg=h(ke=>{"use strict";var et=ke&&ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ke,"__esModule",{value:!0});ke.createConfiguration=ke.createCasualConfiguration=ke.parseDate=ke.parse=ke.strict=ke.casual=void 0;var oO=et(Mg()),uO=et(kg()),lO=et(Cg()),cO=et(Ig()),dO=et(Ug()),fO=et(Fg()),pO=et(qg()),hO=Gt(),mO=et(Wg()),yO=et(Lg()),gO=et(Yg()),_O=et(jg()),Gg=yt(),TO=et(Lr()),bO=et(Bg());ke.casual=new Gg.Chrono(Hg());ke.strict=new Gg.Chrono(Jc(!0));function vO(r,e,t){return ke.casual.parse(r,e,t)}ke.parse=vO;function EO(r,e,t){return ke.casual.parseDate(r,e,t)}ke.parseDate=EO;function Hg(){let r=Jc(!1);return r.parsers.unshift(new mO.default),r.parsers.unshift(new yO.default),r.parsers.unshift(new lO.default),r.parsers.unshift(new _O.default),r.parsers.unshift(new bO.default),r}ke.createCasualConfiguration=Hg;function Jc(r=!0){return hO.includeCommonConfiguration({parsers:[new TO.default(!0),new oO.default,new uO.default,new gO.default,new cO.default(r),new dO.default],refiners:[new pO.default,new fO.default]},r)}ke.createConfiguration=Jc});var Ee=h(L=>{"use strict";var RO=L&&L.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),wO=L&&L.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Er=L&&L.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&RO(e,r,t);return wO(e,r),e};Object.defineProperty(L,"__esModule",{value:!0});L.parseDate=L.parse=L.casual=L.strict=L.ru=L.zh=L.nl=L.pt=L.ja=L.fr=L.de=L.Meridiem=L.Chrono=L.en=void 0;var ed=Er(gu());L.en=ed;var MO=yt();Object.defineProperty(L,"Chrono",{enumerable:!0,get:function(){return MO.Chrono}});var DO;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(DO=L.Meridiem||(L.Meridiem={}));var PO=Er(rm());L.de=PO;var OO=Er(Nm());L.fr=OO;var AO=Er(Lm());L.ja=AO;var kO=Er(ry());L.pt=kO;var NO=Er(Ly());L.nl=NO;var xO=Er(bg());L.zh=xO;var CO=Er(zg());L.ru=CO;L.strict=ed.strict;L.casual=ed.casual;function SO(r,e,t){return L.casual.parse(r,e,t)}L.parse=SO;function IO(r,e,t){return L.casual.parseDate(r,e,t)}L.parseDate=IO});var St=h(Pr=>{"use strict";Pr.__esModule=!0;var jO;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})(jO=Pr.Operators||(Pr.Operators={}));var BO;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})(BO=Pr.StructuralCharacters||(Pr.StructuralCharacters={}));var GO;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(GO=Pr.Tokens||(Pr.Tokens={}))});var pd=h(Ca=>{"use strict";Ca.__esModule=!0;var me=St();Ca.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};Ca.VALID_TOKENS={identifierOnly:[{name:me.Tokens.IDENTIFIER},{name:me.Tokens.STRUCTURAL_CHARACTER,value:me.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:me.Tokens.IDENTIFIER},{name:me.Tokens.STRUCTURAL_CHARACTER,value:me.StructuralCharacters.OPEN_PARENTHESIS},{name:me.Tokens.OPERATOR,value:me.Operators.NOT}],binaryOperator:[{name:me.Tokens.OPERATOR,value:me.Operators.AND},{name:me.Tokens.OPERATOR,value:me.Operators.OR},{name:me.Tokens.OPERATOR,value:me.Operators.XOR}],binaryOperatorOrClose:[{name:me.Tokens.OPERATOR,value:me.Operators.AND},{name:me.Tokens.OPERATOR,value:me.Operators.OR},{name:me.Tokens.OPERATOR,value:me.Operators.XOR},{name:me.Tokens.STRUCTURAL_CHARACTER,value:me.StructuralCharacters.CLOSE_PARENTHESIS}]}});var hd=h(rr=>{"use strict";rr.__esModule=!0;var Rn=St();rr.STRUCTURAL_CHARACTERS={"(":Rn.StructuralCharacters.OPEN_PARENTHESIS,")":Rn.StructuralCharacters.CLOSE_PARENTHESIS};rr.OPERATORS={AND:Rn.Operators.AND,OR:Rn.Operators.OR,XOR:Rn.Operators.XOR,NOT:Rn.Operators.NOT};rr.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));rr.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);rr.COMMENT_DELIMITER=String.fromCodePoint(35);rr.EOL=String.fromCodePoint(10);rr.ESCAPE_CHARACTER=String.fromCodePoint(92)});var i_=h(nr=>{"use strict";var md=nr&&nr.__assign||function(){return md=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},md.apply(this,arguments)};nr.__esModule=!0;var n_=St(),Hr=hd();nr.createResult=function(r,e,t){return{token:md({name:r},e!==null?{value:e}:{}),remainingString:t}};nr.getComment=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===Hr.EOL){e=t;break}}return nr.createResult(n_.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};nr.getQuotedIdentifier=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===Hr.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+Hr.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===Hr.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!Hr.SEPARATORS.has(s)&&!Hr.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: "+s+" Expected ) character or separator");break}}if(n===null)throw new Error("Unexpected end of expression: expected "+Hr.QUOTED_IDENTIFIER_DELIMITER+" character");return nr.createResult(n_.Tokens.IDENTIFIER,t,r.slice(n+1))}});var s_=h(yd=>{"use strict";yd.__esModule=!0;var wn=St(),tt=hd(),Mn=i_();yd.lex=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!tt.SEPARATORS.has(s)){var a=tt.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===wn.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!tt.SEPARATORS.has(o)&&o!==wn.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: "+o+". A closing parenthesis should be followed by another closing parenthesis or whitespace");return Mn.createResult(wn.Tokens.STRUCTURAL_CHARACTER,tt.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===tt.QUOTED_IDENTIFIER_DELIMITER)return Mn.getQuotedIdentifier(r.slice(i+1));if(s===tt.COMMENT_DELIMITER)return Mn.getComment(r.slice(i+1));e=i}}else if(tt.SEPARATORS.has(s)||tt.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===tt.QUOTED_IDENTIFIER_DELIMITER||s===tt.COMMENT_DELIMITER)throw new Error("Unexpected character: "+s)}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(tt.OPERATORS[u]){if(n&&!tt.SEPARATORS.has(n))throw new Error("Unexpected character: "+n+". Operators should be separated using whitespace");return Mn.createResult(wn.Tokens.OPERATOR,tt.OPERATORS[u],l)}else return Mn.createResult(wn.Tokens.IDENTIFIER,u,l)}return Mn.createResult(wn.Tokens.EOF,null,"")}});var a_=h(ir=>{"use strict";var HO=ir&&ir.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};ir.__esModule=!0;var zO=s_(),Dn=St(),Sa=pd();ir.newTokenGenerator=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=zO.lex(e),s=i.token,a=i.remainingString;if(e=a,s.name!==Dn.Tokens.COMMENT)return ir.validateToken(s,t,n),s}}};ir.getValue=function(r,e){var t=r(Sa.VALID_TOKENS.identifierOrNot),n=t.value===Dn.Operators.NOT;n&&(t=r(Sa.VALID_TOKENS.identifierOnly));var i=t.name===Dn.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?HO(i,[{name:Dn.Tokens.OPERATOR,value:Dn.Operators.NOT}]):i};ir.previousOperatorTakesPrecedent=function(r,e){return Sa.OPERATOR_PRECEDENCE[r]<=Sa.OPERATOR_PRECEDENCE[e]};ir.validateToken=function(r,e,t){if(t===void 0&&(t=!1),r.name===Dn.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")}});var _d=h(Zi=>{"use strict";var Pn=Zi&&Zi.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Zi.__esModule=!0;var o_=St(),u_=pd(),Ia=a_();Zi.parse=function(r){if(typeof r!="string")throw new Error("Expected string but received "+typeof r);var e=Ia.newTokenGenerator(r);return gd(e)};var gd=function(r,e){e===void 0&&(e=!1);for(var t=Pn(Ia.getValue(r,gd)),n=[];;){var i=e?u_.VALID_TOKENS.binaryOperatorOrClose:u_.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===o_.Tokens.EOF||s.name===o_.Tokens.STRUCTURAL_CHARACTER)return Pn(t,Pn(n).reverse());for(;n.length;){var a=n[n.length-1]||null;if(a&&Ia.previousOperatorTakesPrecedent(a.value,s.value))t=Pn(t,[a]),n=n.slice(0,-1);else break}n=Pn(n,[s]),t=Pn(t,Ia.getValue(r,gd))}}});var Td=h(sr=>{"use strict";sr.__esModule=!0;var l_=St();sr.andUtil=function(r,e){return r&&e};sr.orUtil=function(r,e){return r||e};sr.xorUtil=function(r,e){return r!==e};sr.notUtil=function(r){return!r};sr.isIdentifier=function(r){var e=r.name,t=r.value;return e===l_.Tokens.IDENTIFIER&&typeof t=="string"};sr.isOperator=function(r){var e=r.name,t=r.value;return e===l_.Tokens.OPERATOR&&typeof t=="string"};sr.throwInvalidExpression=function(r){throw new TypeError("Invalid postfix expression: "+r)}});var c_=h(Ed=>{"use strict";var Xi;Ed.__esModule=!0;var bd=St(),vd=Td();Ed.OPERATOR_MAP=(Xi={},Xi[bd.Operators.AND]=vd.andUtil,Xi[bd.Operators.OR]=vd.orUtil,Xi[bd.Operators.XOR]=vd.xorUtil,Xi)});var f_=h(Kr=>{"use strict";var Rd=Kr&&Kr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Kr.__esModule=!0;var KO=_d(),d_=St(),VO=c_(),zr=Td();Kr.getEvaluator=function(r){var e=KO.parse(r);return function(t){return Kr.evaluate(e,t)}};Kr.evaluate=function(r,e){if(!Array.isArray(r))throw new Error(r+" should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator");var t=r.reduce(function(n,i,s){if(!(i&&(zr.isIdentifier(i)||zr.isOperator(i))))throw new Error("Invalid token: "+i+". Found in parsed expression at index "+s);if(i.name===d_.Tokens.IDENTIFIER)return Rd(n,[Boolean(e[i.value])]);var a=n[n.length-2],o=n[n.length-1];if(i.value===d_.Operators.NOT)return o===void 0&&zr.throwInvalidExpression("missing identifier"),Rd(n.slice(0,-1),[zr.notUtil(o)]);(o===void 0||a===void 0)&&zr.throwInvalidExpression("missing identifier");var u=VO.OPERATOR_MAP[i.value];return u||zr.throwInvalidExpression("unknown operator"),Rd(n.slice(0,-2),[u(a,o)])},[]);return t.length!==1&&zr.throwInvalidExpression("too many identifiers after evaluation"),t[0]}});var h_=h(Qi=>{"use strict";Qi.__esModule=!0;var p_=f_();Qi.getEvaluator=p_.getEvaluator;Qi.evaluate=p_.evaluate;var ZO=_d();Qi.parse=ZO.parse});var nA={};D_(nA,{default:()=>ja});module.exports=P_(nA);var __=require("obsidian");var gs=require("obsidian");var sA=new Error("timeout while waiting for mutex to become available"),aA=new Error("mutex already locked"),O_=new Error("request for lock canceled"),Zd=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},Ka=class{constructor(e,t=O_){if(this._maxConcurrency=e,this._cancelError=t,this._queue=[],this._waiters=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}acquire(){let e=this.isLocked(),t=new Promise((n,i)=>this._queue.push({resolve:n,reject:i}));return e||this._dispatch(),t}runExclusive(e){return Zd(this,void 0,void 0,function*(){let[t,n]=yield this.acquire();try{return yield e(t)}finally{n()}})}waitForUnlock(){return Zd(this,void 0,void 0,function*(){return this.isLocked()?new Promise(t=>this._waiters.push({resolve:t})):Promise.resolve()})}isLocked(){return this._value<=0}release(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){let e=this._currentReleaser;this._currentReleaser=void 0,e()}}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatch(){let e=this._queue.shift();if(!e)return;let t=!1;this._currentReleaser=()=>{t||(t=!0,this._value++,this._resolveWaiters(),this._dispatch())},e.resolve([this._value--,this._currentReleaser])}_resolveWaiters(){this._waiters.forEach(e=>e.resolve()),this._waiters=[]}},A_=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},us=class{constructor(e){this._semaphore=new Ka(1,e)}acquire(){return A_(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var sp=require("obsidian");var Qd=require("obsidian");var Xd=[{index:9999,internalName:"INTERNAL_TESTING_ENABLED_BY_DEFAULT",displayName:"Test Item. Used to validate the Feature Framework.",description:"Description",enabledByDefault:!0,stable:!1}];var Et=class{constructor(e,t,n,i,s,a){this.internalName=e;this.index=t;this.description=n;this.displayName=i;this.enabledByDefault=s;this.stable=a}static get values(){let e=[];return Xd.forEach(t=>{e=[...e,new Et(t.internalName,t.index,t.description,t.displayName,t.enabledByDefault,t.stable)]}),e}static get settingsFlags(){let e={};return Et.values.forEach(t=>{e[t.internalName]=t.enabledByDefault}),e}static fromString(e){for(let t of Et.values)if(e===t.internalName)return t;throw new RangeError(`Illegal argument passed to fromString(): ${e} does not correspond to any available Feature ${this.prototype.constructor.name}`)}};var N_={globalFilter:"",removeGlobalFilter:!1,setDoneDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6,features:Et.settingsFlags},xn=$e({},N_),ae=()=>{for(let r in Et.settingsFlags)xn.features[r]===void 0&&(xn.features[r]=Et.settingsFlags[r]);return $e({},xn)},qt=r=>(xn=$e($e({},xn),r),ae());var Va,Za,Jd=({metadataCache:r,vault:e})=>{Va=r,Za=e},ls=t=>se(void 0,[t],function*({originalTask:r,newTasks:e}){if(Za===void 0||Va===void 0){console.error("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]),ef({originalTask:r,newTasks:e,vault:Za,metadataCache:Va,previousTries:0})}),ef=s=>se(void 0,[s],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i}){let a=()=>{if(i>10){console.error("Tasks: Too many retries. File update not possible ...");return}let g=Math.min(Math.pow(10,i),100);setTimeout(()=>{ef({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i+1})},g)},o=t.getAbstractFileByPath(r.path);if(!(o instanceof Qd.TFile))return console.warn(`Tasks: No file found for task ${r.description}. Retrying ...`),a();if(o.extension!=="md"){console.error("Tasks: Only supporting files with the .md file extension.");return}let u=n.getFileCache(o);if(u==null||u===null)return console.warn(`Tasks: No file cache found for file ${o.path}. Retrying ...`),a();let l=u.listItems;if(l===void 0||l.length===0)return console.warn(`Tasks: No list items found in file cache of ${o.path}. Retrying ...`),a();let d=(yield t.read(o)).split(`
`),{globalFilter:f}=ae(),p,y=0;for(let g of l){if(g.position.start.line<r.sectionStart||g.task===void 0)continue;if(d[g.position.start.line].includes(f)){if(y===r.sectionIndex){p=g;break}y++}}if(p===void 0){console.error("Tasks: could not find task to toggle in the file.");return}let m=[...d.slice(0,p.position.start.line),...e.map(g=>g.toFileLineString()),...d.slice(p.position.start.line+1)];yield t.modify(o,m.join(`
`))});var Xr=class{constructor(){this.hideTaskCount=!1;this.hideBacklinks=!1;this.hidePriority=!1;this.hideStartDate=!1;this.hideScheduledDate=!1;this.hideDoneDate=!1;this.hideDueDate=!1;this.hideRecurrenceRule=!1;this.hideEditButton=!1;this.shortMode=!1}};var cs=["MO","TU","WE","TH","FR","SA","SU"],_e=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(cs.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=cs[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var ue=function(r){return r!=null},Ze=function(r){return typeof r=="number"},Xa=function(r){return typeof r=="string"&&cs.includes(r)},Ce=Array.isArray,rt=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var B=function(r,e){var t=0,n=[];if(Ce(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},tf=function(r){return Ce(r)?r:[r]};function kr(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=B(t,e/t.length)),t.slice(0,e)+String(n))}var rf=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},Fe=function(r,e){var t=r%e;return t*e<0?t+e:t},ds=function(r,e){return{div:Math.floor(r/e),mod:Fe(r,e)}},Xe=function(r){return!ue(r)||r.length===0},ye=function(r){return!Xe(r)},G=function(r,e){return ye(r)&&r.indexOf(e)!==-1};var dr;(function(r){r.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],r.ONE_DAY=1e3*60*60*24,r.MAXYEAR=9999,r.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),r.PY_WEEKDAYS=[6,0,1,2,3,4,5],r.getYearDay=function(e){var t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((t.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/r.ONE_DAY)+1},r.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},r.isDate=function(e){return e instanceof Date},r.isValidDate=function(e){return r.isDate(e)&&!isNaN(e.getTime())},r.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},r.daysBetween=function(e,t){var n=e.getTime()-r.tzOffset(e),i=t.getTime()-r.tzOffset(t),s=n-i;return Math.round(s/r.ONE_DAY)},r.toOrdinal=function(e){return r.daysBetween(e,r.ORDINAL_BASE)},r.fromOrdinal=function(e){return new Date(r.ORDINAL_BASE.getTime()+e*r.ONE_DAY)},r.getMonthDays=function(e){var t=e.getUTCMonth();return t===1&&r.isLeapYear(e.getUTCFullYear())?29:r.MONTH_DAYS[t]},r.getWeekday=function(e){return r.PY_WEEKDAYS[e.getUTCDay()]},r.monthRange=function(e,t){var n=new Date(Date.UTC(e,t,1));return[r.getWeekday(n),r.getMonthDays(n)]},r.combine=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},r.clone=function(e){var t=new Date(e.getTime());return t},r.cloneDates=function(e){for(var t=[],n=0;n<e.length;n++)t.push(r.clone(e[n]));return t},r.sort=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},r.timeToUntilString=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[kr(n.getUTCFullYear().toString(),4,"0"),kr(n.getUTCMonth()+1,2,"0"),kr(n.getUTCDate(),2,"0"),"T",kr(n.getUTCHours(),2,"0"),kr(n.getUTCMinutes(),2,"0"),kr(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},r.untilStringToDate=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(dr||(dr={}));var k=dr;var x_=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),Wt=x_;var Df=os(Mf(),1),{__extends:Jr,__assign:je,__rest:MA,__decorate:DA,__param:PA,__metadata:OA,__awaiter:AA,__generator:kA,__exportStar:NA,__createBinding:xA,__values:CA,__read:SA,__spread:IA,__spreadArrays:UA,__spreadArray:T,__await:FA,__asyncGenerator:qA,__asyncDelegator:WA,__asyncValues:LA,__makeTemplateObject:YA,__importStar:$A,__importDefault:jA,__classPrivateFieldGet:BA,__classPrivateFieldSet:GA,__classPrivateFieldIn:HA}=Df.default;var C_=function(r){Jr(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(Wt),Ja=C_;var S_={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Nr=S_;var Pf=function(r,e){return r.indexOf(e)!==-1},I_=function(r){return r.toString()},U_=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},F_=function(){function r(e,t,n,i){if(t===void 0&&(t=I_),n===void 0&&(n=Nr),i===void 0&&(i=U_),this.text=[],this.language=n||Nr,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,d){return c-d}),a.sort(function(c,d){return d-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(ue(this.origOptions.byweekday)){var o=Ce(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,d){return c.weekday-d.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(Pf(["dtstart","wkst","freq"],n))return!0;if(!Pf(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[w.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=Ze(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),Ce(e)||(e=[e]);var a=function(u,l,c){for(var d="",f=0;f<u.length;f++)f!==0&&(f===u.length-1?d+=" "+c+" ":d+=l+" "),d+=u[f];return d};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),Rt=F_;var q_=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function Cn(r,e){e===void 0&&(e=Nr);var t={},n=new q_(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var f=n.acceptNumber();if(f&&(t.interval=parseInt(f[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=w.DAILY,n.nextSymbol()&&(a(),d());break;case"weekday(s)":t.freq=w.WEEKLY,t.byweekday=[w.MO,w.TU,w.WE,w.TH,w.FR],n.nextSymbol(),d();break;case"week(s)":t.freq=w.WEEKLY,n.nextSymbol()&&(s(),d());break;case"hour(s)":t.freq=w.HOURLY,n.nextSymbol()&&(s(),d());break;case"minute(s)":t.freq=w.MINUTELY,n.nextSymbol()&&(s(),d());break;case"month(s)":t.freq=w.MONTHLY,n.nextSymbol()&&(s(),d());break;case"year(s)":t.freq=w.YEARLY,n.nextSymbol()&&(s(),d());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=w.WEEKLY;var p=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[w[p]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=u();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(w[y]),n.nextSymbol()}c(),d();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=w.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=o();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(m),n.nextSymbol()}s(),d();break;default:throw new Error("Unknown symbol")}}function s(){var f=n.accept("on"),p=n.accept("the");if(!!(f||p))do{var y=l(),m=u(),g=o();if(y)m?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(w[m].nth(y))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(y),n.accept("day(s)"));else if(m)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(w[m]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[w.MO,w.TU,w.WE,w.TH,w.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var A=n.acceptNumber();if(!A)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(A[0],10)];n.accept("comma");){if(A=n.acceptNumber(),!A)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(A[0],10))}}else if(g)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(g);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var f=n.accept("at");if(!!f)do{var p=n.acceptNumber();if(!p)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(p[0],10)];n.accept("comma");){if(p=n.acceptNumber(),!p)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(p[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var f=parseInt(n.value[1],10);if(f<-366||f>366)throw new Error("Nth out of range: "+f);return n.nextSymbol(),n.accept("last")?-f:f;default:return!1}}function c(){n.accept("on"),n.accept("the");var f=l();if(!!f)for(t.bymonthday=[f],n.nextSymbol();n.accept("comma");){if(f=l(),!f)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(f),n.nextSymbol()}}function d(){if(n.symbol==="until"){var f=Date.parse(n.text);if(!f)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(f)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var Y;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(Y||(Y={}));function Sn(r){return r<Y.HOURLY}var Of=function(r,e){return e===void 0&&(e=Nr),new w(Cn(r,e)||void 0)},en=["count","until","interval","byweekday","bymonthday","bymonth"];Rt.IMPLEMENTED=[];Rt.IMPLEMENTED[Y.HOURLY]=en;Rt.IMPLEMENTED[Y.MINUTELY]=en;Rt.IMPLEMENTED[Y.DAILY]=["byhour"].concat(en);Rt.IMPLEMENTED[Y.WEEKLY]=en;Rt.IMPLEMENTED[Y.MONTHLY]=en;Rt.IMPLEMENTED[Y.YEARLY]=["byweekno","byyearday"].concat(en);var Af=function(r,e,t,n){return new Rt(r,e,t,n).toString()},kf=Rt.isFullyConvertible;var tn=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var Nf=function(r){Jr(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return dr.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=Fe(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=ds(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),Xe(i)||G(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=ds(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(Xe(i)||G(i,this.hour))&&(Xe(s)||G(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=ds(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(Xe(i)||G(i,this.hour))&&(Xe(s)||G(s,this.minute))&&(Xe(a)||G(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=dr.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>dr.MAXYEAR))return;t=dr.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case Y.YEARLY:return this.addYears(s);case Y.MONTHLY:return this.addMonths(s);case Y.WEEKLY:return this.addWeekly(s,a);case Y.DAILY:return this.addDaily(s);case Y.HOURLY:return this.addHours(s,n,o);case Y.MINUTELY:return this.addMinutes(s,n,o,u);case Y.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(tn);function eo(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];G(Sf,s)||e.push(s),k.isDate(r[s])&&!k.isValidDate(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return je({},r)}function xf(r){var e=je(je({},In),eo(r));if(ue(e.byeaster)&&(e.freq=w.YEARLY),!(ue(e.freq)&&w.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),ue(e.wkst)?Ze(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=w.MO.weekday,ue(e.bysetpos)){Ze(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||ye(e.byweekno)||ye(e.byyearday)||Boolean(e.bymonthday)||ye(e.bymonthday)||ue(e.byweekday)||ue(e.byeaster)))switch(e.freq){case w.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case w.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case w.WEEKLY:e.byweekday=[k.getWeekday(e.dtstart)];break}if(ue(e.bymonth)&&!Ce(e.bymonth)&&(e.bymonth=[e.bymonth]),ue(e.byyearday)&&!Ce(e.byyearday)&&Ze(e.byyearday)&&(e.byyearday=[e.byyearday]),!ue(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(Ce(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(ue(e.byweekno)&&!Ce(e.byweekno)&&(e.byweekno=[e.byweekno]),!ue(e.byweekday))e.bynweekday=null;else if(Ze(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(Xa(e.byweekday))e.byweekday=[_e.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof _e)!e.byweekday.n||e.freq>w.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(Ze(u)){a.push(u);continue}else if(Xa(u)){a.push(_e.fromStr(u).weekday);continue}!u.n||e.freq>w.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=ye(a)?a:null,e.bynweekday=ye(o)?o:null}return ue(e.byhour)?Ze(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<w.HOURLY?[e.dtstart.getUTCHours()]:null,ue(e.byminute)?Ze(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<w.MINUTELY?[e.dtstart.getUTCMinutes()]:null,ue(e.bysecond)?Ze(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<w.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function Cf(r){var e=r.dtstart.getTime()%1e3;if(!Sn(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new tn(n,i,s,e))})})}),t}function Fn(r){var e=r.split(`
`).map(W_).filter(function(t){return t!==null});return je(je({},e[0]),e[1])}function Un(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=k.untilStringToDate(i),e}function W_(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return If(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return If(r);case"DTSTART":return Un(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function If(r){var e=r.replace(/^RRULE:/i,""),t=Un(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=Y[o.toUpperCase()];break;case"WKST":t.wkst=nt[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=L_(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=Y_(o);break;case"DTSTART":case"TZID":var c=Un(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=k.untilStringToDate(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function L_(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(Uf)}return Uf(r)}function Uf(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function Y_(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return nt[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=nt[s].weekday;return new _e(a,i)})}var xr=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=k.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:t})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid)!==null&&e!==void 0?e:"UTC"})),s=i.getTime()-n.getTime();return new Date(this.date.getTime()-s)},r}();function qn(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(In),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!G(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!ue(o)||Ce(o)&&!o.length)){switch(a){case"FREQ":u=w.FREQUENCIES[r.freq];break;case"WKST":Ze(o)?u=new _e(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=tf(o).map(function(p){return p instanceof _e?p:Ce(p)?new _e(p[0],p[1]):new _e(p)}).toString();break;case"DTSTART":t=$_(o,r.tzid);break;case"UNTIL":u=k.timeToUntilString(o,!r.tzid);break;default:if(Ce(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var d=e.map(function(p){var y=p[0],m=p[1];return"".concat(y,"=").concat(m.toString())}).join(";"),f="";return d!==""&&(f="RRULE:".concat(d)),[t,f].filter(function(p){return!!p}).join(`
`)}function $_(r,e){return r?"DTSTART"+new xr(new Date(r),e).toString():""}function j_(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var Ff=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?k.clone(t):k.cloneDates(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var d=0;d<i.length;d++){var f=i[d];if(!j_(t[f],c[f]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if(Ce(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new Wt(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return Ce(n)?k.cloneDates(n):n instanceof Date?k.clone(n):n},r}();var qf=T(T(T(T(T(T(T(T(T(T(T(T(T([],B(1,31),!0),B(2,28),!0),B(3,31),!0),B(4,30),!0),B(5,31),!0),B(6,30),!0),B(7,31),!0),B(8,31),!0),B(9,30),!0),B(10,31),!0),B(11,30),!0),B(12,31),!0),B(1,7),!0),Wf=T(T(T(T(T(T(T(T(T(T(T(T(T([],B(1,31),!0),B(2,29),!0),B(3,31),!0),B(4,30),!0),B(5,31),!0),B(6,30),!0),B(7,31),!0),B(8,31),!0),B(9,30),!0),B(10,31),!0),B(11,30),!0),B(12,31),!0),B(1,7),!0),B_=rt(1,29),G_=rt(1,30),fr=rt(1,31),qe=rt(1,32),Lf=T(T(T(T(T(T(T(T(T(T(T(T(T([],qe,!0),G_,!0),qe,!0),fr,!0),qe,!0),fr,!0),qe,!0),qe,!0),fr,!0),qe,!0),fr,!0),qe,!0),qe.slice(0,7),!0),Yf=T(T(T(T(T(T(T(T(T(T(T(T(T([],qe,!0),B_,!0),qe,!0),fr,!0),qe,!0),fr,!0),qe,!0),qe,!0),fr,!0),qe,!0),fr,!0),qe,!0),qe.slice(0,7),!0),H_=rt(-28,0),z_=rt(-29,0),pr=rt(-30,0),We=rt(-31,0),$f=T(T(T(T(T(T(T(T(T(T(T(T(T([],We,!0),z_,!0),We,!0),pr,!0),We,!0),pr,!0),We,!0),We,!0),pr,!0),We,!0),pr,!0),We,!0),We.slice(0,7),!0),jf=T(T(T(T(T(T(T(T(T(T(T(T(T([],We,!0),H_,!0),We,!0),pr,!0),We,!0),pr,!0),We,!0),We,!0),pr,!0),We,!0),pr,!0),We,!0),We.slice(0,7),!0),Bf=[0,31,60,91,121,152,182,213,244,274,305,335,366],Gf=[0,31,59,90,120,151,181,212,243,273,304,334,365],to=function(){for(var r=[],e=0;e<55;e++)r=r.concat(rt(7));return r}();function Hf(r,e){var t=new Date(Date.UTC(r,0,1)),n=k.isLeapYear(r)?366:365,i=k.isLeapYear(r+1)?366:365,s=k.toOrdinal(t),a=k.getWeekday(t),o=je(je({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},K_(r)),{wnomask:null});if(Xe(e.byweekno))return o;o.wnomask=B(0,n+7);var u,l,c=u=Fe(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+Fe(a-e.wkst,7)):l=n-c;for(var d=Math.floor(l/7),f=Fe(l,7),p=Math.floor(d+f/4),y=0;y<e.byweekno.length;y++){var m=e.byweekno[y];if(m<0&&(m+=p+1),m>0&&m<=p){var g=void 0;m>1?(g=c+(m-1)*7,c!==u&&(g-=7-u)):g=c;for(var A=0;A<7&&(o.wnomask[g]=1,g++,o.wdaymask[g]!==e.wkst);A++);}}if(G(e.byweekno,1)){var g=c+p*7;if(c!==u&&(g-=7-u),g<n)for(var y=0;y<7&&(o.wnomask[g]=1,g+=1,o.wdaymask[g]!==e.wkst);y++);}if(c){var C=void 0;if(G(e.byweekno,-1))C=-1;else{var x=k.getWeekday(new Date(Date.UTC(r-1,0,1))),z=Fe(7-x.valueOf()+e.wkst,7),ie=k.isLeapYear(r-1)?366:365,fe=void 0;z>=4?(z=0,fe=ie+Fe(x-e.wkst,7)):fe=n-c,C=Math.floor(52+Fe(fe,7)/4)}if(G(e.byweekno,C))for(var g=0;g<c;g++)o.wnomask[g]=1}return o}function K_(r){var e=k.isLeapYear(r)?366:365,t=new Date(Date.UTC(r,0,1)),n=k.getWeekday(t);return e===365?{mmask:qf,mdaymask:Yf,nmdaymask:jf,wdaymask:to.slice(n),mrange:Gf}:{mmask:Wf,mdaymask:Lf,nmdaymask:$f,wdaymask:to.slice(n),mrange:Bf}}function zf(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===w.YEARLY)if(Xe(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===w.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(Xe(o))return a;a.nwdaymask=B(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],d=l[1]-1,f=0;f<s.bynweekday.length;f++){var p=void 0,y=s.bynweekday[f],m=y[0],g=y[1];g<0?(p=d+(g+1)*7,p-=Fe(i[p]-m,7)):(p=c+(g-1)*7,p+=Fe(7-i[p]+m,7)),c<=p&&p<=d&&(a.nwdaymask[p]=1)}return a}function Kf(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),d=i%4,f=Math.floor(32+2*a+2*c-l-d)%7,p=Math.floor((t+11*l+22*f)/451),y=Math.floor((l+f-7*p+114)/31),m=(l+f-7*p+114)%31+1,g=Date.UTC(r,y-1,m+e),A=Date.UTC(r,0,1);return[Math.ceil((g-A)/(1e3*60*60*24))]}var V_=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=Hf(e,n)),ye(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=zf(e,t,s,a,o,n)}ue(n.byeaster)&&(this.eastermask=Kf(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[rt(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=B(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=B(null,this.yearlen+7),s=k.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=B(null,this.yearlen),s=k.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),k.sort(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new tn(e,t,a,i)});return k.sort(s),s},r.prototype.stimeset=function(e,t,n,i){return[new tn(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case Y.YEARLY:return this.ydayset.bind(this);case Y.MONTHLY:return this.mdayset.bind(this);case Y.WEEKLY:return this.wdayset.bind(this);case Y.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case Y.HOURLY:return this.htimeset.bind(this);case Y.MINUTELY:return this.mtimeset.bind(this);case Y.SECONDLY:return this.stimeset.bind(this)}},r}(),Vf=V_;function Zf(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=Fe(c,e.length)):(u=Math.floor((c-1)/e.length),l=Fe(c-1,e.length));for(var d=[],f=t;f<n;f++){var p=s[f];!ue(p)||d.push(p)}var y=void 0;u<0?y=d.slice(u)[0]:y=d[u];var m=e[l],g=k.fromOrdinal(i.yearordinal+y),A=k.combine(g,m);G(a,A)||a.push(A)}return k.sort(a),a}function ms(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return Lt(r);var u=Nf.fromDate(t),l=new Vf(e);l.rebuild(u.year,u.month);for(var c=Q_(l,u,e);;){var d=l.getdayset(n)(u.year,u.month,u.day),f=d[0],p=d[1],y=d[2],m=X_(f,p,y,l,e);if(ye(a))for(var g=Zf(a,c,p,y,l,f),A=0;A<g.length;A++){var C=g[A];if(s&&C>s)return Lt(r);if(C>=t){var x=Xf(C,e);if(!r.accept(x)||o&&(--o,!o))return Lt(r)}}else for(var A=p;A<y;A++){var z=f[A];if(!!ue(z))for(var ie=k.fromOrdinal(l.yearordinal+z),fe=0;fe<c.length;fe++){var te=c[fe],C=k.combine(ie,te);if(s&&C>s)return Lt(r);if(C>=t){var x=Xf(C,e);if(!r.accept(x)||o&&(--o,!o))return Lt(r)}}}if(e.interval===0||(u.add(e,m),u.year>k.MAXYEAR))return Lt(r);Sn(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function Z_(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return ye(n)&&!G(n,r.mmask[e])||ye(i)&&!r.wnomask[e]||ye(s)&&!G(s,r.wdaymask[e])||ye(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!G(r.eastermask,e)||(ye(o)||ye(u))&&!G(o,r.mdaymask[e])&&!G(u,r.nmdaymask[e])||ye(l)&&(e<r.yearlen&&!G(l,e+1)&&!G(l,-r.yearlen+e)||e>=r.yearlen&&!G(l,e+1-r.yearlen)&&!G(l,-r.nextyearlen+e-r.yearlen))}function Xf(r,e){return new xr(r,e.tzid).rezonedDate()}function Lt(r){return r.getValue()}function X_(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=Z_(n,o,i),s&&(r[o]=null)}return s}function Q_(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return Sn(n)?Cf(t):n>=w.HOURLY&&ye(i)&&!G(i,e.hour)||n>=w.MINUTELY&&ye(s)&&!G(s,e.minute)||n>=w.SECONDLY&&ye(a)&&!G(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var nt={MO:new _e(0),TU:new _e(1),WE:new _e(2),TH:new _e(3),FR:new _e(4),SA:new _e(5),SU:new _e(6)},In={freq:Y.YEARLY,dtstart:null,interval:1,wkst:nt.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},Sf=Object.keys(In),w=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new Ff,this.origOptions=eo(e);var n=xf(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return Cn(e,t)},r.fromText=function(e,t){return Of(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return ms(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new Ja("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new Wt("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!k.isValidDate(e)||!k.isValidDate(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new Ja("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new Wt("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!k.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Wt("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!k.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Wt("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return qn(this.origOptions)},r.prototype.toText=function(e,t,n){return Af(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return kf(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=Y.YEARLY,r.MONTHLY=Y.MONTHLY,r.WEEKLY=Y.WEEKLY,r.DAILY=Y.DAILY,r.HOURLY=Y.HOURLY,r.MINUTELY=Y.MINUTELY,r.SECONDLY=Y.SECONDLY,r.MO=nt.MO,r.TU=nt.TU,r.WE=nt.WE,r.TH=nt.TH,r.FR=nt.FR,r.SA=nt.SA,r.SU=nt.SU,r.parseString=Fn,r.optionsToString=qn,r}();function Qf(r,e,t,n,i,s){var a={},o=r.accept;function u(f,p){t.forEach(function(y){y.between(f,p,!0).forEach(function(m){a[Number(m)]=!0})})}i.forEach(function(f){var p=new xr(f,s).rezonedDate();a[Number(p)]=!0}),r.accept=function(f){var p=Number(f);return isNaN(p)?o.call(this,f):!a[p]&&(u(new Date(p-1),new Date(p+1)),!a[p])?(a[p]=!0,o.call(this,f)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(f){var p=Number(f);return a[p]?!0:(a[p]=!0,o.call(this,f))});for(var l=0;l<n.length;l++){var c=new xr(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(f){ms(r,f.options)});var d=r._result;switch(k.sort(d),r.method){case"all":case"between":return d;case"before":return d.length&&d[d.length-1]||null;case"after":default:return d.length&&d[0]||null}}var Jf={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function J_(r,e){var t=[],n=[],i=[],s=[],a=Un(r),o=a.dtstart,u=a.tzid,l=iT(r,e.unfold);return l.forEach(function(c){var d;if(!!c){var f=nT(c),p=f.name,y=f.parms,m=f.value;switch(p.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: ".concat(y.join(",")));t.push(Fn(c));break;case"RDATE":var g=(d=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&d!==void 0?d:[],A=g[1];A&&!u&&(u=A),n=n.concat(ep(m,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: ".concat(y.join(",")));i.push(Fn(m));break;case"EXDATE":s=s.concat(ep(m,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+p)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function eT(r,e){var t=J_(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new no(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(f){c.rrule(new w(ro(f,o,u),l))}),i.forEach(function(f){c.rdate(f)}),s.forEach(function(f){c.exrule(new w(ro(f,o,u),l))}),a.forEach(function(f){c.exdate(f)}),e.compatible&&e.dtstart&&c.rdate(o),c}var d=n[0]||{};return new w(ro(d,d.dtstart||e.dtstart||o,d.tzid||e.tzid||u),l)}function ys(r,e){return e===void 0&&(e={}),eT(r,tT(e))}function ro(r,e,t){return je(je({},r),{dtstart:e,tzid:t})}function tT(r){var e=[],t=Object.keys(r),n=Object.keys(Jf);if(t.forEach(function(i){G(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return je(je({},Jf),r)}function rT(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=rf(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function nT(r){var e=rT(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function iT(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function sT(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function ep(r,e){return sT(e),r.split(",").map(function(t){return k.untilStringToDate(t)})}function tp(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var no=function(r){Jr(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=tp.apply(n,["dtstart"]),n.tzid=tp.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return Qf(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){rp(t,this._rrule)},e.prototype.exrule=function(t){rp(t,this._exrule)},e.prototype.rdate=function(t){np(t,this._rdate)},e.prototype.exdate=function(t){np(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return ys(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return ys(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(qn({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(ip("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(ip("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(w);function rp(r,e){if(!(r instanceof w))throw new TypeError(String(r)+" is not RRule instance");G(e.map(String),String(r))||e.push(r)}function np(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");G(e.map(Number),Number(r))||(e.push(r),k.sort(e))}function ip(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return k.timeToUntilString(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}var H=class{static by(e,t){let n=[H.compareByUrgency,H.compareByStatus,H.compareByDueDate,H.compareByPriority,H.compareByPath],i=[];for(let{property:s,reverse:a,propertyInstance:o}of e.sorting){let u=H.comparators[s];i.push(a?H.makeReversedComparator(u):u),s==="tag"&&(H.tagPropertyInstance=o)}return t.sort(H.makeCompositeComparator([...i,...n]))}static makeReversedComparator(e){return(t,n)=>e(t,n)*-1}static makeCompositeComparator(e){return(t,n)=>{for(let i of e){let s=i(t,n);if(s!==0)return s}return 0}}static compareByUrgency(e,t){return t.urgency-e.urgency}static compareByStatus(e,t){return e.status<t.status?1:e.status>t.status?-1:0}static compareByPriority(e,t){return e.priority.localeCompare(t.priority)}static compareByStartDate(e,t){return H.compareByDate(e.startDate,t.startDate)}static compareByScheduledDate(e,t){return H.compareByDate(e.scheduledDate,t.scheduledDate)}static compareByDueDate(e,t){return H.compareByDate(e.dueDate,t.dueDate)}static compareByDoneDate(e,t){return H.compareByDate(e.doneDate,t.doneDate)}static compareByTag(e,t){if(e.tags.length===0&&t.tags.length===0)return 0;if(e.tags.length===0)return 1;if(t.tags.length===0)return-1;let n=H.tagPropertyInstance-1;return e.tags.length<H.tagPropertyInstance&&t.tags.length>=H.tagPropertyInstance?1:t.tags.length<H.tagPropertyInstance&&e.tags.length>=H.tagPropertyInstance?-1:e.tags.length<H.tagPropertyInstance&&t.tags.length<H.tagPropertyInstance?0:e.tags[n]<t.tags[n]?-1:e.tags[n]>t.tags[n]?1:0}static compareByDate(e,t){return e!==null&&t===null?-1:e===null&&t!==null?1:e!==null&&t!==null?e.isAfter(t)?1:e.isBefore(t)?-1:0:0}static compareByPath(e,t){return e.path<t.path?-1:e.path>t.path?1:0}static compareByDescription(e,t){return H.cleanDescription(e.description).localeCompare(H.cleanDescription(t.description))}static cleanDescription(e){let t=ae().globalFilter;e=e.replace(t,"").trim();let n=/^\[\[?([^\]]*)\]/,i=e.match(n);if(i!==null){let l=i[1];e=l.substring(l.indexOf("|")+1)+e.replace(n,"")}let s=/^\*\*?([^*]*)\*/,a=e.match(s);a!==null&&(e=a[1]+e.replace(n,""));let o=/^==?([^=]*)==/,u=e.match(o);return u!==null&&(e=u[1]+e.replace(o,"")),e}},Ge=H;Ge.tagPropertyInstance=1,Ge.comparators={urgency:H.compareByUrgency,description:H.compareByDescription,priority:H.compareByPriority,start:H.compareByStartDate,scheduled:H.compareByScheduledDate,due:H.compareByDueDate,done:H.compareByDoneDate,path:H.compareByPath,status:H.compareByStatus,tag:H.compareByTag};var pt=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=w.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new w(u);return new pt({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(){var t;let e;if(this.baseOnToday){let n=window.moment();e=new w(Ft($e({},this.rrule.origOptions),{dtstart:n.startOf("day").utc(!0).toDate()})).after(n.endOf("day").utc(!0).toDate())}else{let n=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day").utc(!0);e=this.rrule.after(n.toDate())}if(e!==null){let i=window.moment.utc(e).local(!0).startOf("day"),s=null,a=null,o=null;if(this.referenceDate){if(this.startDate){let u=window.moment.duration(this.startDate.diff(this.referenceDate));s=window.moment(i),s.add(Math.round(u.asDays()),"days")}if(this.scheduledDate){let u=window.moment.duration(this.scheduledDate.diff(this.referenceDate));a=window.moment(i),a.add(Math.round(u.asDays()),"days")}if(this.dueDate){let u=window.moment.duration(this.dueDate.diff(this.referenceDate));o=window.moment(i),o.add(Math.round(u.asDays()),"days")}}return{startDate:s,scheduledDate:a,dueDate:o}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||Ge.compareByDate(this.startDate,e.startDate)!==0||Ge.compareByDate(this.scheduledDate,e.scheduledDate)!==0||Ge.compareByDate(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}};var $t=class{static calculate(e){let t=0;if(e.dueDate!==null){let n=Math.round(window.moment().diff(e.dueDate)/$t.milliSecondsPerDay),i;n>=7?i=1:n>=-14?i=(n+14)*.8/21+.2:i=.2,t+=i*$t.dueCoefficient}switch(e.scheduledDate!==null&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*$t.scheduledCoefficient),e.startDate!==null&&window.moment().isBefore(e.startDate)&&(t+=1*$t.startedCoefficient),e.priority){case"1":t+=1*$t.priorityCoefficient;break;case"2":t+=.65*$t.priorityCoefficient;break;case"3":t+=.325*$t.priorityCoefficient;break}return t}},Yt=$t;Yt.dueCoefficient=12,Yt.scheduledCoefficient=5,Yt.startedCoefficient=-3,Yt.priorityCoefficient=6,Yt.milliSecondsPerDay=1e3*60*60*24;var Re={High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",None:""},wt="\u{1F501}",Mt="\u{1F6EB}",Dt="\u23F3",Pt="\u{1F4C5}",io="\u2705",I=class{constructor({status:e,description:t,path:n,indentation:i,sectionStart:s,sectionIndex:a,originalStatusCharacter:o,precedingHeader:u,priority:l,startDate:c,scheduledDate:d,dueDate:f,doneDate:p,recurrence:y,blockLink:m,tags:g}){this._urgency=null;this.status=e,this.description=t,this.path=n,this.indentation=i,this.sectionStart=s,this.sectionIndex=a,this.originalStatusCharacter=o,this.precedingHeader=u,this.tags=g,this.priority=l,this.startDate=c,this.scheduledDate=d,this.dueDate=f,this.doneDate=p,this.recurrence=y,this.blockLink=m}static fromLine({line:e,path:t,sectionStart:n,sectionIndex:i,precedingHeader:s}){let a=e.match(I.taskRegex);if(a===null)return null;let o=a[3].trim(),{globalFilter:u}=ae();if(!o.includes(u))return null;let l=o,c=a[1],d=a[2].toLowerCase(),f;switch(d){case" ":f="Todo";break;default:f="Done"}let p=l.match(this.blockLinkRegex),y=p!==null?p[0]:"";y!==""&&(l=l.replace(this.blockLinkRegex,"").trim());let m,g="3",A=null,C=null,x=null,z=null,ie="",fe=null,te=[],M="",ge=20,ce=0;do{m=!1;let v=l.match(I.priorityRegex);if(v!==null){switch(v[1]){case Re.Low:g="4";break;case Re.Medium:g="2";break;case Re.High:g="1";break}l=l.replace(I.priorityRegex,"").trim(),m=!0}let _=l.match(I.doneDateRegex);_!==null&&(z=window.moment(_[1],I.dateFormat),l=l.replace(I.doneDateRegex,"").trim(),m=!0);let P=l.match(I.dueDateRegex);P!==null&&(x=window.moment(P[1],I.dateFormat),l=l.replace(I.dueDateRegex,"").trim(),m=!0);let E=l.match(I.scheduledDateRegex);E!==null&&(C=window.moment(E[1],I.dateFormat),l=l.replace(I.scheduledDateRegex,"").trim(),m=!0);let S=l.match(I.startDateRegex);S!==null&&(A=window.moment(S[1],I.dateFormat),l=l.replace(I.startDateRegex,"").trim(),m=!0);let O=l.match(I.recurrenceRegex);O!==null&&(ie=O[1].trim(),l=l.replace(I.recurrenceRegex,"").trim(),m=!0);let W=l.match(I.hashTagsFromEnd);if(W!=null){l=l.replace(I.hashTagsFromEnd,"").trim(),m=!0;let re=W[0].trim();M=M.length>0?[re,M].join(" "):re}ce++}while(m&&ce<=ge);ie.length>0&&(fe=pt.fromText({recurrenceRuleText:ie,startDate:A,scheduledDate:C,dueDate:x})),M.length>0&&(l+=" "+M);let D=l.match(this.hashTags);return D!==null&&(te=D.filter(v=>v!==u).map(v=>v.trim())),new I({status:f,description:l,path:t,indentation:c,sectionStart:n,sectionIndex:i,originalStatusCharacter:d,precedingHeader:s,priority:g,startDate:A,scheduledDate:C,dueDate:x,doneDate:z,recurrence:fe,blockLink:y,tags:te})}toLi(s){return se(this,arguments,function*({parentUlElement:e,listIndex:t,layoutOptions:n,isFilenameUnique:i}){let a=e.createEl("li");a.addClasses(["task-list-item","plugin-tasks-list-item"]);let o=this.toString(n),{globalFilter:u,removeGlobalFilter:l}=ae();l&&(o=o.replace(u,"").trim());let c=a.createSpan();c.addClass("tasks-list-text"),yield sp.MarkdownRenderer.renderMarkdown(o,c,this.path,null);let d=c.querySelector("blockquote"),f=d!=null?d:c,p=f.querySelector("p");if(p!==null){for(;p.firstChild;)f.insertBefore(p.firstChild,p);p.remove()}c.findAll("p").forEach(m=>{m.hasChildNodes()||m.remove()}),c.findAll(".footnotes").forEach(m=>{m.remove()});let y=a.createEl("input");return y.addClass("task-list-item-checkbox"),y.type="checkbox",this.status!=="Todo"&&(y.checked=!0,a.addClass("is-checked")),y.onClickEvent(m=>{m.preventDefault(),m.stopPropagation(),y.disabled=!0;let g=this.toggle();ls({originalTask:this,newTasks:g})}),a.prepend(y),a.setAttr("data-task",this.originalStatusCharacter.trim()),a.setAttr("data-line",t),y.setAttr("data-line",t),n!=null&&n.shortMode&&this.addTooltip({element:c,isFilenameUnique:i}),a})}toString(e){var i;e=e!=null?e:new Xr;let t=this.description;if(!e.hidePriority){let s="";this.priority==="1"?s=" "+Re.High:this.priority==="2"?s=" "+Re.Medium:this.priority==="4"&&(s=" "+Re.Low),t+=s}return!e.hideRecurrenceRule&&this.recurrence&&(t+=e.shortMode?" "+wt:` ${wt} ${this.recurrence.toText()}`),!e.hideStartDate&&this.startDate&&(t+=e.shortMode?" "+Mt:` ${Mt} ${this.startDate.format(I.dateFormat)}`),!e.hideScheduledDate&&this.scheduledDate&&(t+=e.shortMode?" "+Dt:` ${Dt} ${this.scheduledDate.format(I.dateFormat)}`),!e.hideDueDate&&this.dueDate&&(t+=e.shortMode?" "+Pt:` ${Pt} ${this.dueDate.format(I.dateFormat)}`),!e.hideDoneDate&&this.doneDate&&(t+=e.shortMode?" "+io:` ${io} ${this.doneDate.format(I.dateFormat)}`),t+=(i=this.blockLink)!=null?i:"",t}toFileLineString(){return`${this.indentation}- [${this.originalStatusCharacter}] ${this.toString()}`}toggle(){let e=this.status==="Todo"?"Done":"Todo",t=null,n=null;if(e!=="Todo"){let{setDoneDate:a}=ae();a&&(t=window.moment()),this.recurrence!==null&&(n=this.recurrence.next())}let i=new I(Ft($e({},this),{status:e,doneDate:t,originalStatusCharacter:e==="Done"?"x":" "})),s=[];if(n!==null){let a=new I(Ft($e($e({},this),n),{blockLink:""}));s.push(a)}return s.push(i),s}get urgency(){return this._urgency===null&&(this._urgency=Yt.calculate(this)),this._urgency}get filename(){let e=this.path.match(/([^/]+)\.md$/);return e!==null?e[1]:null}getLinkText({isFilenameUnique:e}){let t;return e?t=this.filename:t="/"+this.path,t===null?null:(this.precedingHeader!==null&&this.precedingHeader!==t&&(t=t+" > "+this.precedingHeader),t)}static tasksListsIdentical(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.identicalTo(t[i]))}identicalTo(e){let t=["status","description","path","indentation","sectionStart","sectionIndex","originalStatusCharacter","precedingHeader","priority","blockLink"];for(let s of t)if(this[s]!==e[s])return!1;if(this.tags.length!==e.tags.length||!this.tags.every(function(s,a){return s===e.tags[a]}))return!1;t=["startDate","scheduledDate","dueDate","doneDate"];for(let s of t){let a=this[s],o=e[s];if(Ge.compareByDate(a,o)!==0)return!1}let n=this.recurrence,i=e.recurrence;return n===null&&i!==null||n!==null&&i===null?!1:!(n&&i&&!n.identicalTo(i))}addTooltip({element:e,isFilenameUnique:t}){e.addEventListener("mouseenter",()=>{let n=e.createDiv();n.addClasses(["tooltip","mod-right"]),this.recurrence&&n.createDiv().setText(`${wt} ${this.recurrence.toText()}`),this.startDate&&n.createDiv().setText(I.toTooltipDate({signifier:Mt,date:this.startDate})),this.scheduledDate&&n.createDiv().setText(I.toTooltipDate({signifier:Dt,date:this.scheduledDate})),this.dueDate&&n.createDiv().setText(I.toTooltipDate({signifier:Pt,date:this.dueDate})),this.doneDate&&n.createDiv().setText(I.toTooltipDate({signifier:io,date:this.doneDate}));let i=this.getLinkText({isFilenameUnique:t});i&&n.createDiv().setText(`\u{1F517} ${i}`),e.addEventListener("mouseleave",()=>{n.remove()})})}static toTooltipDate({signifier:e,date:t}){return`${e} ${t.format(I.dateFormat)} (${t.from(window.moment().startOf("day"))})`}escapeRegExp(e){return e.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}getDescriptionWithoutGlobalFilter(){let{globalFilter:e}=ae(),t=this.description;if(e.length===0)return t;let n=RegExp("(^|\\s)"+this.escapeRegExp(e)+"($|\\s)","ug");return this.description.search(n)>-1&&(t=t.replace(n,"$1$2").replace("  "," ").trim()),t}},N=I;N.dateFormat="YYYY-MM-DD",N.indentationRegex=/^([\s\t>]*)/,N.listMarkerRegex=/[-*]/,N.checkboxRegex=/\[(.)\]/u,N.afterCheckboxRegex=/ *(.*)/u,N.taskRegex=new RegExp(I.indentationRegex.source+I.listMarkerRegex.source+" +"+I.checkboxRegex.source+I.afterCheckboxRegex.source,"u"),N.nonTaskRegex=new RegExp(I.indentationRegex.source+I.listMarkerRegex.source+"? *("+I.checkboxRegex.source+")?"+I.afterCheckboxRegex.source,"u"),N.listItemRegex=new RegExp(I.indentationRegex.source+"("+I.listMarkerRegex.source+")"),N.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,N.priorityRegex=/([⏫🔼🔽])$/u,N.startDateRegex=/🛫 *(\d{4}-\d{2}-\d{2})$/u,N.scheduledDateRegex=/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,N.dueDateRegex=/[📅📆🗓] *(\d{4}-\d{2}-\d{2})$/u,N.doneDateRegex=/✅ *(\d{4}-\d{2}-\d{2})$/u,N.recurrenceRegex=/🔁 ?([a-zA-Z0-9, !]+)$/iu,N.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]*/g,N.hashTagsFromEnd=new RegExp(I.hashTags.source+"$");var hr=class{constructor({metadataCache:e,vault:t,events:n}){this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new us,this.state="Cold",this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){let e=this.metadataCache.on("resolved",()=>se(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){let e=this.vault.on("create",i=>{i instanceof gs.TFile&&this.tasksMutex.runExclusive(()=>{this.indexFile(i)})});this.vaultEventReferences.push(e);let t=this.vault.on("delete",i=>{i instanceof gs.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(s=>s.path!==i.path),this.notifySubscribers()})});this.vaultEventReferences.push(t);let n=this.vault.on("rename",(i,s)=>{i instanceof gs.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.map(a=>a.path===s?new N(Ft($e({},a),{path:i.path})):a),this.notifySubscribers()})});this.vaultEventReferences.push(n)}subscribeToEvents(){let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.tasksMutex.runExclusive(()=>se(this,null,function*(){this.state="Initializing",yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.notifySubscribers()}))}indexFile(e){return se(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=hr.getTasksFromFileContent(a,i,t,e)}N.tasksListsIdentical(n,s)||(this.getState()=="Warm"&&console.debug(`At least one task, its line number or its heading has changed in ${e.path}: triggering a refresh of all active Tasks blocks in Live Preview and Reading mode views.`),this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.notifySubscribers())})}static getTasksFromFileContent(e,t,n,i){let s=[],a=e.split(`
`),o=null,u=0;for(let l of t)if(l.task!==void 0){if((o===null||o.position.end.line<l.position.start.line)&&(o=hr.getSection(l.position.start.line,n.sections),u=0),o===null)continue;let c=a[l.position.start.line],d=N.fromLine({line:c,path:i.path,sectionStart:o.position.start.line,sectionIndex:u,precedingHeader:hr.getPrecedingHeader(l.position.start.line,n.headings)});d!==null&&(u++,s.push(d))}return s}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var id=require("obsidian");var Zg=require("obsidian");function rn(){}function oo(r){return r()}function op(){return Object.create(null)}function Sr(r){r.forEach(oo)}function lp(r){return typeof r=="function"}function cp(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function dp(r){return Object.keys(r).length===0}var fp=!1;function aT(){fp=!0}function oT(){fp=!1}function b(r,e){r.appendChild(e)}function uo(r,e,t){r.insertBefore(e,t||null)}function Es(r){r.parentNode.removeChild(r)}function U(r){return document.createElement(r)}function uT(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function jt(r){return document.createTextNode(r)}function X(){return jt(" ")}function mr(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function pp(r){return function(e){return e.preventDefault(),r.call(this,e)}}function $(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function lT(r){return Array.from(r.childNodes)}function hp(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function ht(r,e){r.value=e==null?"":e}function lo(r,e){for(let t=0;t<r.options.length;t+=1){let n=r.options[t];if(n.__value===e){n.selected=!0;return}}r.selectedIndex=-1}function mp(r){let e=r.querySelector(":checked")||r.options[0];return e&&e.__value}var Cr=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=uT(t.nodeName):this.e=U(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)uo(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Es)}};var Yn;function Ln(r){Yn=r}function cT(){if(!Yn)throw new Error("Function called outside component initialization");return Yn}function co(r){cT().$$.on_mount.push(r)}var Wn=[];var bs=[],Ts=[],up=[],dT=Promise.resolve(),ao=!1;function fT(){ao||(ao=!0,dT.then(yp))}function $n(r){Ts.push(r)}var so=new Set,_s=0;function yp(){let r=Yn;do{for(;_s<Wn.length;){let e=Wn[_s];_s++,Ln(e),pT(e.$$)}for(Ln(null),Wn.length=0,_s=0;bs.length;)bs.pop()();for(let e=0;e<Ts.length;e+=1){let t=Ts[e];so.has(t)||(so.add(t),t())}Ts.length=0}while(Wn.length);for(;up.length;)up.pop()();ao=!1,so.clear(),Ln(r)}function pT(r){if(r.fragment!==null){r.update(),Sr(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach($n)}}var hT=new Set;function mT(r,e){r&&r.i&&(hT.delete(r),r.i(e))}var wx=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function yT(r,e,t,n){let{fragment:i,on_mount:s,on_destroy:a,after_update:o}=r.$$;i&&i.m(e,t),n||$n(()=>{let u=s.map(oo).filter(lp);a?a.push(...u):Sr(u),r.$$.on_mount=[]}),o.forEach($n)}function gp(r,e){let t=r.$$;t.fragment!==null&&(Sr(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function gT(r,e){r.$$.dirty[0]===-1&&(Wn.push(r),fT(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function _p(r,e,t,n,i,s,a,o=[-1]){let u=Yn;Ln(r);let l=r.$$={fragment:null,ctx:null,props:s,update:rn,not_equal:i,bound:op(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:op(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(d,f,...p)=>{let y=p.length?p[0]:f;return l.ctx&&i(l.ctx[d],l.ctx[d]=y)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](y),c&&gT(r,d)),f}):[],l.update(),c=!0,Sr(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){aT();let d=lT(e.target);l.fragment&&l.fragment.l(d),d.forEach(Es)}else l.fragment&&l.fragment.c();e.intro&&mT(r.$$.fragment),yT(r,e.target,e.anchor,e.customElement),oT(),yp()}Ln(u)}var _T;typeof HTMLElement=="function"&&(_T=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(oo).filter(lp);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){Sr(this.$$.on_disconnect)}$destroy(){gp(this,1),this.$destroy=rn}$on(r,e){let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!dp(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var vs=class{$destroy(){gp(this,1),this.$destroy=rn}$on(e,t){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!dp(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var ji=os(Ee());var UO={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function bn(r){for(let[e,t]of Object.entries(UO))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}function FO(r){let e,t,n,i,s,a,o,u,l,c,d,f,p,y,m,g,A,C,x,z,ie,fe,te,M,ge,ce,D,v,_,P,E,S,O,W,re,le,oe,dt,Le,or,ur,ft,Ne,xe,lr,Or,It,Dd,An,Pd,Od,Ji,Ad,cr,es,kd,Ut,Nd,kn,xd,Cd,ts,Sd,Id,Ud,Vr,Zr,Fd,Ar,rs,qd,Ba,ns=r[0].status+"",Ga,Wd,is,Ld,ss,Yd,$d,jd,Ha,Bd,as,za,Gd;return{c(){e=U("div"),t=U("form"),n=U("div"),i=U("label"),i.textContent="Description",s=X(),a=U("input"),o=X(),u=U("hr"),l=X(),c=U("div"),d=U("label"),d.textContent="Priority",f=X(),p=U("select"),y=U("option"),y.textContent="None",m=U("option"),m.textContent=`${Re.High} High`,g=U("option"),g.textContent=`${Re.Medium} Medium`,A=U("option"),A.textContent=`${Re.Low} Low`,C=X(),x=U("hr"),z=X(),ie=U("div"),fe=U("label"),fe.textContent="Recurrence",te=X(),M=U("input"),ge=X(),ce=U("code"),D=jt(wt),v=X(),_=new Cr(!1),P=X(),E=U("hr"),S=X(),O=U("div"),W=U("div"),re=U("label"),re.textContent="Due",le=X(),oe=U("input"),dt=X(),Le=U("code"),or=jt(Pt),ur=X(),ft=new Cr(!1),Ne=X(),xe=U("div"),lr=U("label"),lr.textContent="Scheduled",Or=X(),It=U("input"),Dd=X(),An=U("code"),Pd=jt(Dt),Od=X(),Ji=new Cr(!1),Ad=X(),cr=U("div"),es=U("label"),es.textContent="Start",kd=X(),Ut=U("input"),Nd=X(),kn=U("code"),xd=jt(Mt),Cd=X(),ts=new Cr(!1),Sd=X(),Id=U("hr"),Ud=X(),Vr=U("div"),Zr=U("div"),Fd=jt(`Status:
                `),Ar=U("input"),qd=X(),Ba=U("code"),Ga=jt(ns),Wd=X(),is=U("div"),Ld=jt(`Done on:
                `),ss=U("code"),Yd=X(),$d=U("hr"),jd=X(),Ha=U("div"),Bd=X(),as=U("div"),as.innerHTML='<button type="submit" class="mod-cta">Apply</button>',$(i,"for","description"),$(a,"id","description"),$(a,"type","text"),$(a,"class","tasks-modal-description"),$(a,"placeholder","Take out the trash"),$(n,"class","tasks-modal-section"),$(d,"for","priority"),y.__value="none",y.value=y.__value,m.__value="high",m.value=m.__value,g.__value="medium",g.value=g.__value,A.__value="low",A.value=A.__value,$(p,"id","priority"),$(p,"class","dropdown"),r[0].priority===void 0&&$n(()=>r[14].call(p)),$(c,"class","tasks-modal-section"),$(fe,"for","recurrence"),$(M,"id","description"),$(M,"type","text"),$(M,"placeholder","Try 'every 2 weeks on Thursday'."),_.a=null,$(ie,"class","tasks-modal-section"),$(re,"for","due"),$(oe,"id","due"),$(oe,"type","text"),$(oe,"placeholder",td),ft.a=null,$(W,"class","tasks-modal-date"),$(lr,"for","scheduled"),$(It,"id","scheduled"),$(It,"type","text"),$(It,"placeholder",td),Ji.a=null,$(xe,"class","tasks-modal-date"),$(es,"for","start"),$(Ut,"id","start"),$(Ut,"type","text"),$(Ut,"placeholder",td),ts.a=null,$(cr,"class","tasks-modal-date"),$(O,"class","tasks-modal-section"),$(Ar,"type","checkbox"),$(Ar,"class","task-list-item-checkbox tasks-modal-checkbox"),Ar.checked=rs=r[0].status==="Done",Ar.disabled=!0,$(Vr,"class","tasks-modal-section"),$(Ha,"class","tasks-modal-section"),$(as,"class","tasks-modal-section"),$(e,"class","tasks-modal")},m(pe,Ye){uo(pe,e,Ye),b(e,t),b(t,n),b(n,i),b(n,s),b(n,a),ht(a,r[0].description),r[13](a),b(t,o),b(t,u),b(t,l),b(t,c),b(c,d),b(c,f),b(c,p),b(p,y),b(p,m),b(p,g),b(p,A),lo(p,r[0].priority),b(t,C),b(t,x),b(t,z),b(t,ie),b(ie,fe),b(ie,te),b(ie,M),ht(M,r[0].recurrenceRule),b(ie,ge),b(ie,ce),b(ce,D),b(ce,v),_.m(r[5],ce),b(t,P),b(t,E),b(t,S),b(t,O),b(O,W),b(W,re),b(W,le),b(W,oe),ht(oe,r[0].dueDate),b(W,dt),b(W,Le),b(Le,or),b(Le,ur),ft.m(r[4],Le),b(O,Ne),b(O,xe),b(xe,lr),b(xe,Or),b(xe,It),ht(It,r[0].scheduledDate),b(xe,Dd),b(xe,An),b(An,Pd),b(An,Od),Ji.m(r[3],An),b(O,Ad),b(O,cr),b(cr,es),b(cr,kd),b(cr,Ut),ht(Ut,r[0].startDate),b(cr,Nd),b(cr,kn),b(kn,xd),b(kn,Cd),ts.m(r[2],kn),b(t,Sd),b(t,Id),b(t,Ud),b(t,Vr),b(Vr,Zr),b(Zr,Fd),b(Zr,Ar),b(Zr,qd),b(Zr,Ba),b(Ba,Ga),b(Vr,Wd),b(Vr,is),b(is,Ld),b(is,ss),ss.innerHTML=r[6],b(t,Yd),b(t,$d),b(t,jd),b(t,Ha),b(t,Bd),b(t,as),za||(Gd=[mr(a,"input",r[12]),mr(p,"change",r[14]),mr(M,"input",r[15]),mr(oe,"input",r[16]),mr(It,"input",r[17]),mr(Ut,"input",r[18]),mr(t,"submit",pp(r[7]))],za=!0)},p(pe,[Ye]){Ye&1&&a.value!==pe[0].description&&ht(a,pe[0].description),Ye&1&&lo(p,pe[0].priority),Ye&1&&M.value!==pe[0].recurrenceRule&&ht(M,pe[0].recurrenceRule),Ye&32&&_.p(pe[5]),Ye&1&&oe.value!==pe[0].dueDate&&ht(oe,pe[0].dueDate),Ye&16&&ft.p(pe[4]),Ye&1&&It.value!==pe[0].scheduledDate&&ht(It,pe[0].scheduledDate),Ye&8&&Ji.p(pe[3]),Ye&1&&Ut.value!==pe[0].startDate&&ht(Ut,pe[0].startDate),Ye&4&&ts.p(pe[2]),Ye&1&&rs!==(rs=pe[0].status==="Done")&&(Ar.checked=rs),Ye&1&&ns!==(ns=pe[0].status+"")&&hp(Ga,ns),Ye&64&&(ss.innerHTML=pe[6])},i:rn,o:rn,d(pe){pe&&Es(e),r[13](null),za=!1,Sr(Gd)}}}var td="Try 'Monday' or 'tomorrow', or [td|tm|yd|tw|nw|we] then space.";function qO(r,e,t){var n,i;let{task:s}=e,{onSubmit:a}=e,o,u={description:"",status:"Todo",priority:"none",recurrenceRule:"",startDate:"",scheduledDate:"",dueDate:"",doneDate:""},l="",c="",d="",f="",p="",y=!1;function m(M,ge,ce=void 0){if(!ge)return`<i>no ${M} date</i>`;let D=ji.parseDate(ge,ce,{forwardDate:ce!=null});return D!==null?window.moment(D).format("YYYY-MM-DD"):`<i>invalid ${M} date</i>`}co(()=>{let{globalFilter:M}=ae(),ge=s.getDescriptionWithoutGlobalFilter();(ge!=s.description||ge.indexOf(M)==-1)&&(y=!0);let ce="none";s.priority==="4"?ce="low":s.priority==="2"?ce="medium":s.priority==="1"&&(ce="high"),t(0,u={description:ge,status:s.status,priority:ce,recurrenceRule:s.recurrence?s.recurrence.toText():"",startDate:s.startDate?s.startDate.format("YYYY-MM-DD"):"",scheduledDate:s.scheduledDate?s.scheduledDate.format("YYYY-MM-DD"):"",dueDate:s.dueDate?s.dueDate.format("YYYY-MM-DD"):"",doneDate:s.doneDate?s.doneDate.format("YYYY-MM-DD"):""}),setTimeout(()=>{o.focus()},10)});let g=()=>{let{globalFilter:M}=ae(),ge=u.description.trim();y&&(ge=M+" "+ge);let ce=null,D=ji.parseDate(u.startDate,new Date,{forwardDate:!0});D!==null&&(ce=window.moment(D));let v=null,_=ji.parseDate(u.scheduledDate,new Date,{forwardDate:!0});_!==null&&(v=window.moment(_));let P=null,E=ji.parseDate(u.dueDate,new Date,{forwardDate:!0});E!==null&&(P=window.moment(E));let S=null;u.recurrenceRule&&(S=pt.fromText({recurrenceRuleText:u.recurrenceRule,startDate:ce,scheduledDate:v,dueDate:P}));let O;switch(u.priority){case"low":O="4";break;case"medium":O="2";break;case"high":O="1";break;default:O="3"}let W=new N(Object.assign(Object.assign({},s),{description:ge,status:u.status,priority:O,recurrence:S,startDate:ce,scheduledDate:v,dueDate:P,doneDate:window.moment(u.doneDate,"YYYY-MM-DD").isValid()?window.moment(u.doneDate,"YYYY-MM-DD"):null}));a([W])};function A(){u.description=this.value,t(0,u)}function C(M){bs[M?"unshift":"push"](()=>{o=M,t(1,o)})}function x(){u.priority=mp(this),t(0,u)}function z(){u.recurrenceRule=this.value,t(0,u)}function ie(){u.dueDate=this.value,t(0,u)}function fe(){u.scheduledDate=this.value,t(0,u)}function te(){u.startDate=this.value,t(0,u)}return r.$$set=M=>{"task"in M&&t(8,s=M.task),"onSubmit"in M&&t(9,a=M.onSubmit)},r.$$.update=()=>{if(r.$$.dirty&1){e:t(0,u.startDate=bn(u.startDate),u),t(2,l=m("start",u.startDate,new Date))}if(r.$$.dirty&1){e:t(0,u.scheduledDate=bn(u.scheduledDate),u),t(3,c=m("scheduled",u.scheduledDate,new Date))}if(r.$$.dirty&1){e:t(0,u.dueDate=bn(u.dueDate),u),t(4,d=m("due",u.dueDate,new Date))}if(r.$$.dirty&3073){e:u.recurrenceRule?t(5,f=t(11,i=t(10,n=pt.fromText({recurrenceRuleText:u.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))===null||n===void 0?void 0:n.toText())!==null&&i!==void 0?i:"<i>invalid recurrence rule</i>"):t(5,f="<i>not recurring</>")}if(r.$$.dirty&1){e:t(6,p=m("done",u.doneDate))}},[u,o,l,c,d,f,p,g,s,a,n,i,A,C,x,z,ie,fe,te]}var rd=class extends vs{constructor(e){super(),_p(this,e,qO,FO,cp,{task:8,onSubmit:9})}},Vg=rd;var vn=class extends Zg.Modal{constructor({app:t,task:n,onSubmit:i}){super(t);this.task=n,this.onSubmit=s=>{i(s),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task");let{contentEl:t}=this;new Vg({target:t,props:{task:this.task,onSubmit:this.onSubmit}})}onClose(){let{contentEl:t}=this;t.empty()}};var Xg=(r,e,t,n)=>{var d;if(r)return t instanceof id.MarkdownView;if(!(t instanceof id.MarkdownView))return;let i=(d=t.file)==null?void 0:d.path;if(i===void 0)return;let a=e.getCursor().line,o=e.getLine(a),u=WO({line:o,path:i}),l=f=>{let p=f.map(y=>y.toFileLineString()).join(`
`);e.setLine(a,p)};new vn({app:n,task:u,onSubmit:l}).open()},WO=({line:r,path:e})=>{var c;let t=N.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null});if(t!==null)return t;let n=r.match(N.nonTaskRegex);if(n===null)return console.error("Tasks: Cannot create task on line:",r),new N({status:"Todo",description:"",path:e,indentation:"",originalStatusCharacter:" ",priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,blockLink:"",tags:[]});let i=n[1],s=(c=n[3])!=null?c:" ",a=s===" "?"Todo":"Done",o=n[4],u=r.match(N.blockLinkRegex),l=u!==null?u[0]:"";return l!==""&&(o=o.replace(N.blockLinkRegex,"")),new N({status:a,description:o,path:e,indentation:i,originalStatusCharacter:s,blockLink:l,priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,tags:[]})};var sd=require("obsidian");var Qg=(r,e,t)=>{var u;if(r)return t instanceof sd.MarkdownView;if(!(t instanceof sd.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=LO(a,n);e.setLine(s,o),e.setCursor({line:i.line,ch:$O(i.ch,a,o)})},LO=(r,e)=>{let t=r,n=N.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null});if(n!==null)t=YO(n);else{let i=r.match(N.taskRegex);if(i!==null){let a=i[2].toLowerCase()===" "?"x":" ";t=r.replace(N.taskRegex,`$1- [${a}] $3`)}else N.listItemRegex.test(r)?t=r.replace(N.listItemRegex,"$1$2 [ ]"):t=r.replace(N.indentationRegex,"$1- ")}return t},YO=r=>r.toggle().map(n=>n.toFileLineString()).join(`
`),$O=(r,e,t)=>{let n=t.length;if(n<=e.length)return r>=t.length?n:r;let i=13;if(t.match(N.doneDateRegex)&&n-e.length>=i&&(n-=i),n>=2*e.length&&t.search(`.+
.+`)!==-1)return r+n-e.length;let s=t.search(/[-*]/);return r<s?r:r+n-e.length};var ha=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>Xg(t,n,i,this.app)}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:Qg})}};var ma=class{constructor({obsidianEvents:e}){this.obsidianEvents=e}onCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.obsidianEvents.offref(e)}};var ya=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return se(this,null,function*(){var c;let{globalFilter:n}=ae(),i=e.findAll(".task-list-item").filter(d=>{var y;let f=(y=d.textContent)==null?void 0:y.split(`
`);if(f===void 0)return!1;let p=null;for(let m=0;m<f.length;m=m+1)if(f[m]!==""){p=f[m];break}return p===null?!1:p.includes(n)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let d=a.lineStart;d<=a.lineEnd;d++){let f=o[d];if(f===void 0)continue;let p=N.fromLine({line:f,path:s,sectionStart:a.lineStart,sectionIndex:u,precedingHeader:null});p!==null&&(l.push(p),u++)}for(let d=0;d<i.length;d++){let f=l[d],p=i[d];if(f===void 0||p===void 0)continue;let y=(c=p.getAttr("data-line"))!=null?c:"0",m=Number.parseInt(y,10),g=yield f.toLi({parentUlElement:e,listIndex:m}),A=p.childNodes;for(let z=0;z<A.length;z=z+1){let ie=A[z];ie.nodeName.toLowerCase()==="div"?g.prepend(ie):ie.nodeName.toLowerCase()==="ul"&&g.append(ie)}let C=p.querySelectorAll("[data-footnote-id]"),x=g.querySelectorAll("[data-footnote-id]");if(C.length===x.length)for(let z=0;z<C.length;z++)x[z].replaceWith(C[z]);p.replaceWith(g)}})}};var Jg=require("@codemirror/view"),e_=require("obsidian");var t_=()=>Jg.ViewPlugin.fromClass(ad),ad=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let f=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(f),new e_.Notice(f,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=N.fromLine({line:a.text,path:"",sectionStart:0,sectionIndex:0,precedingHeader:null});if(console.debug(`Live Preview Extension: toggle called. Position: ${s} Line: ${a.text}`),o===null)return!1;e.preventDefault();let l=o.toggle().map(f=>f.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let d=t.checked;return setTimeout(()=>{t.checked=d},1),!0}};var La=require("obsidian");var ga=class{constructor(e,t){this.nestingLevel=e,this.name=t}};var _a=class{constructor(e){this.lastHeadingAtLevel=new Array;let n=e.keys().next().value.length;for(let i=0;i<n;i++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new ga(n,i));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var Ta=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var ba=class extends Map{},va=class extends Ta{},Ea=class{constructor(e,t){this.groups=new ba;let n=this.buildGroupingTree(e,t);this.groups=n.generateAllPaths(),this.groups=this.getSortedGroups()}buildGroupingTree(e,t){let n=new va(t),i=[n];for(let s of e){let a=[];for(let o of i)for(let u of o.values){let l=Rr.getGroupNamesForTask(s.property,u);for(let c of l){let d=o.children.get(c);d===void 0&&(d=new va([]),o.children.set(c,d),a.push(d)),d.values.push(u)}}i=a}return n}getSortedGroups(){return new ba([...this.groups.entries()].sort())}};var Ra=class{constructor(e,t,n){this.groups=e,this.groupHeadings=t,this.tasks=n}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} ${t.name}
`;return e+=this.tasksAsStringOfLines(),e}};var wa=class{constructor(e,t){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length;let n=new Ea(e,t);this.addTasks(n)}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTasks(e){let t=new _a(e.groups);for(let[n,i]of e.groups){let s=t.getHeadingsForTaskGroup(n),a=new Ra(n,s,i);this.add(a)}}add(e){this._groups.push(e)}};var r_=os(Ee()),Jt=class{static parseDate(e,t=!1){return window.moment(r_.parseDate(e,void 0,{forwardDate:t})).startOf("day")}};var de=class{canCreateFilterForLine(e){return de.lineMatchesFilter(this.filterRegexp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}};var ee=class{static fromFilter(e){let t=new ee;return t.filter=e,t}static fromError(e){let t=new ee;return t.error=e,t}};var wr=class extends de{canCreateFilterForLine(e){return e===wr.instructionForFieldPresence||e===wr.instructionForFieldAbsence?!0:super.canCreateFilterForLine(e)}createFilterOrErrorMessage(e){let t=new ee;if(e===wr.instructionForFieldPresence){let i=new ee;return i.filter=s=>this.dates(s).some(a=>a!==null),i}if(e===wr.instructionForFieldAbsence){let i=new ee;return i.filter=s=>!this.dates(s).some(a=>a!==null),i}let n=de.getMatch(this.filterRegexp(),e);if(n!==null){let i=Jt.parseDate(n[2]);i.isValid()?n[1]==="before"?t.filter=s=>this.dates(s).some(a=>a&&a.isBefore(i)):n[1]==="after"?t.filter=s=>this.dates(s).some(a=>a&&a.isAfter(i)):t.filter=s=>this.dates(s).some(a=>a&&a.isSame(i)):t.error="do not understand happens date"}else t.error="do not understand query filter (happens date)";return t}earliestDate(e){return new wr().dates(e).sort(Ge.compareByDate)[0]}filterRegexp(){return wr.happensRegexp}dates(e){return Array.of(e.startDate,e.scheduledDate,e.dueDate)}fieldName(){return"happens"}},er=wr;er.happensRegexp=/^happens (before|after|on)? ?(.*)/,er.instructionForFieldPresence="has happens date",er.instructionForFieldAbsence="no happens date";var Z=class{static by(e,t){return new wa(e,t)}static getGroupNamesForTask(e,t){let n=Z.groupers[e];return n(t)}static escapeMarkdownCharacters(e){return e.replace(/\\/g,"\\\\").replace(/_/g,"\\_")}static groupByPriority(e){let t="ERROR";switch(e.priority){case"1":t="High";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break}return[`Priority ${e.priority}: ${t}`]}static groupByRecurrence(e){return e.recurrence!==null?[e.recurrence.toText()]:["None"]}static groupByRecurring(e){return e.recurrence!==null?["Recurring"]:["Not Recurring"]}static groupByStartDate(e){return[Z.stringFromDate(e.startDate,"start")]}static groupByScheduledDate(e){return[Z.stringFromDate(e.scheduledDate,"scheduled")]}static groupByDueDate(e){return[Z.stringFromDate(e.dueDate,"due")]}static groupByDoneDate(e){return[Z.stringFromDate(e.doneDate,"done")]}static groupByHappensDate(e){let t=new er().earliestDate(e);return[Z.stringFromDate(t,"happens")]}static stringFromDate(e,t){return e===null?"No "+t+" date":e.format(Z.groupDateFormat)}static groupByPath(e){return[Z.escapeMarkdownCharacters(e.path.replace(".md",""))]}static groupByFolder(e){let t=e.path,n=e.filename+".md",i=t.substring(0,t.lastIndexOf(n));return i===""?["/"]:[Z.escapeMarkdownCharacters(i)]}static groupByFileName(e){let t=e.filename;return t===null?["Unknown Location"]:[Z.escapeMarkdownCharacters(t)]}static groupByRoot(e){let t=e.path.replace(/\\/g,"/"),n=t.indexOf("/");return n==-1?["/"]:[Z.escapeMarkdownCharacters(t.substring(0,n+1))]}static groupByBacklink(e){if(e.getLinkText({isFilenameUnique:!0})===null)return["Unknown Location"];let n=Z.groupByFileName(e)[0];if(e.precedingHeader===null||e.precedingHeader.length===0)return[n];let i=Z.groupByHeading(e)[0];return n===i?[n]:[`${n} > ${i}`]}static groupByStatus(e){return[e.status]}static groupByHeading(e){return e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}static groupByTags(e){return e.tags.length==0?["(No tags)"]:e.tags}},Rr=Z;Rr.groupDateFormat="YYYY-MM-DD dddd",Rr.groupers={backlink:Z.groupByBacklink,done:Z.groupByDoneDate,due:Z.groupByDueDate,filename:Z.groupByFileName,folder:Z.groupByFolder,happens:Z.groupByHappensDate,heading:Z.groupByHeading,path:Z.groupByPath,priority:Z.groupByPriority,recurrence:Z.groupByRecurrence,recurring:Z.groupByRecurring,root:Z.groupByRoot,scheduled:Z.groupByScheduledDate,start:Z.groupByStartDate,status:Z.groupByStatus,tags:Z.groupByTags};var En=class{matchesAnyOf(e){return e.some(t=>this.matches(t))}};var tr=class extends En{constructor(t){super();this.stringToFind=t}matches(t){return tr.stringIncludesCaseInsensitive(t,this.stringToFind)}static stringIncludesCaseInsensitive(t,n){return t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}};var Mr=class extends En{constructor(t){super();this.regex=t}static validateAndConstruct(t){let n=/\/((?![*+?])(?:[^\r\n[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*])+)\/((?:g(?:im?|mi?)?|i(?:gm?|mg?)?|m(?:gi?|ig?)?)?)/,i=t.match(n);if(i!==null){let s=new RegExp(i[1],i[2]);return new Mr(s)}else return null}matches(t){return t.match(this.regex)!==null}};var Ve=class extends de{createFilterOrErrorMessage(e){let t=de.getMatch(this.filterRegexp(),e);if(t===null)return ee.fromError(`do not understand query filter (${this.fieldName()})`);let n=t[1],i=t[2],s=null;if(["includes","does not include"].includes(n))s=new tr(i);else if(["regex matches","regex does not match"].includes(n)&&(s=Mr.validateAndConstruct(i),s===null))return ee.fromError(`cannot parse regex (${this.fieldName()}); check your leading and trailing slashes for your query`);return s===null?ee.fromError(`do not understand query filter (${this.fieldName()})`):ee.fromFilter(a=>Ve.maybeNegate(s.matches(this.value(a)),n))}static stringIncludesCaseInsensitive(e,t){return tr.stringIncludesCaseInsensitive(e,t)}filterRegexp(){return new RegExp(`^${this.fieldName()} (includes|does not include|regex matches|regex does not match) (.*)`)}static maybeNegate(e,t){return t.match(/not/)?!e:e}};var Ma=class extends Ve{fieldName(){return"description"}value(e){let t=ae().globalFilter;return e.description.replace(t,"").trim()}};var Ct=class extends de{constructor(){super(...arguments);this.instructionForFieldPresence=`has ${this.fieldName()} date`;this.instructionForFieldAbsence=`no ${this.fieldName()} date`}canCreateFilterForLine(t){return t===this.instructionForFieldPresence||t===this.instructionForFieldAbsence?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=new ee;if(t===this.instructionForFieldPresence)return n.filter=s=>this.date(s)!==null,n;if(t===this.instructionForFieldAbsence)return n.filter=s=>this.date(s)===null,n;let i=de.getMatch(this.filterRegexp(),t);if(i!==null){let s=Jt.parseDate(i[2]);s.isValid()?i[1]==="before"?n.filter=a=>{let o=this.date(a);return o?o.isBefore(s):this.filterResultIfFieldMissing()}:i[1]==="after"?n.filter=a=>{let o=this.date(a);return o?o.isAfter(s):this.filterResultIfFieldMissing()}:n.filter=a=>{let o=this.date(a);return o?o.isSame(s):this.filterResultIfFieldMissing()}:n.error="do not understand "+this.fieldName()+" date"}else n.error="do not understand query filter ("+this.fieldName()+" date)";return n}};var od=class extends Ct{filterRegexp(){return od.doneRegexp}fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}},Bi=od;Bi.doneRegexp=/^done (before|after|on)? ?(.*)/;var ud=class extends Ct{filterRegexp(){return ud.dueRegexp}fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}},Gi=ud;Gi.dueRegexp=/^due (before|after|on)? ?(.*)/;var Da=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e==this._instruction}createFilterOrErrorMessage(e){let t=new ee;return e===this._instruction?(t.filter=this._filter,t):(t.error=`do not understand filter: ${e}`,t)}};var Pa=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new Da(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let n of this._filters){let i=n.createFilterOrErrorMessage(e);if(i.error===void 0)return i}let t=new ee;return t.error=`do not understand filter: ${e}`,t}};var Dr=class extends de{constructor(){super(...arguments);this._filters=new Pa}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegexp(){return null}};var Oa=class extends Dr{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};var Aa=class extends Ve{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}};var ka=class extends Ve{fieldName(){return"path"}value(e){return e.path}};var ld=class extends de{createFilterOrErrorMessage(e){let t=new ee,n=de.getMatch(this.filterRegexp(),e);if(n!==null){let i=n[3],s=null;switch(i){case"low":s="4";break;case"none":s="3";break;case"medium":s="2";break;case"high":s="1";break}if(s===null)return t.error="do not understand priority",t;let a;n[2]==="above"?a=o=>o.priority?o.priority.localeCompare(s)<0:!1:n[2]==="below"?a=o=>o.priority?o.priority.localeCompare(s)>0:!1:a=o=>o.priority?o.priority===s:!1,t.filter=a}else t.error="do not understand query filter (priority)";return t}fieldName(){return"priority"}filterRegexp(){return ld.priorityRegexp}},Hi=ld;Hi.priorityRegexp=/^priority (is )?(above|below)? ?(low|none|medium|high)/;var cd=class extends Ct{filterRegexp(){return cd.scheduledRegexp}fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}},zi=cd;zi.scheduledRegexp=/^scheduled (before|after|on)? ?(.*)/;var dd=class extends Ct{filterRegexp(){return dd.startRegexp}fieldName(){return"start"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}},Ki=dd;Ki.startRegexp=/^starts (before|after|on)? ?(.*)/;var Na=class extends Dr{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}};var xa=class extends Dr{constructor(){super(),this._filters.add("done",e=>e.status==="Done"),this._filters.add("not done",e=>e.status!=="Done")}fieldName(){return"status"}};var fd=class extends de{createFilterOrErrorMessage(e){let t=de.getMatch(this.filterRegexp(),e);if(t===null)return ee.fromError(`do not understand query filter (${this.fieldName()})`);let n=t[2],i=t[3],s=null;if(n.includes("include"))s=new tr(i);else if(n.includes("regex")&&(s=Mr.validateAndConstruct(i),s===null))return ee.fromError(`cannot parse regex (${this.fieldName()}); check your leading and trailing slashes for your query`);return s===null?ee.fromError(`do not understand query filter (${this.fieldName()})`):ee.fromFilter(a=>Ve.maybeNegate(s.matchesAnyOf(a.tags),n))}fieldName(){return"tag/tags"}filterRegexp(){return fd.tagRegexp}},Vi=fd;Vi.tagRegexp=/^(tag|tags) (includes|does not include|include|do not include|regex matches|regex does not match) (.*)/;var m_=os(h_());var Ua=class extends de{constructor(){super(...arguments);this.basicBooleanRegexp=/.*(AND|OR|XOR|NOT)\s*[("].*/g;this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={}}filterRegexp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){let n=new ee;if(t.length===0)return n.error="empty line",n;let i=this.preprocessExpression(t);try{let s=(0,m_.parse)(i);for(let a of s)if(a.name==="IDENTIFIER"&&a.value){let o=a.value.trim();if(!(o in this.subFields)){let u=Fa(o);if(u===null)return n.error=`couldn't parse sub-expression '${o}'`,n;if(u.error)return n.error=`couldn't parse sub-expression '${o}': ${u.error}`,n;u.filter&&(this.subFields[o]=u.filter)}}else if(a.name==="OPERATOR"){if(a.value==null)return n.error="empty operator in boolean query",n;if(!this.supportedOperators.includes(a.value))return n.error=`unknown boolean operator '${a.value}'`,n}return n.filter=a=>this.filterTaskWithParsedQuery(a,s),n}catch(s){let a=s instanceof Error?s.message:"unknown error type";return n.error=`malformed boolean query -- ${a} (check the documentation for guidelines)`,n}return n}preprocessExpression(t){return t.replace(/\(([^()]+)\)/g,'("$1")')}filterTaskWithParsedQuery(t,n){let i=o=>o==="true",s=o=>o?"true":"false",a=[];for(let o of n)if(o.name==="IDENTIFIER"){if(o.value==null)throw Error("null token value");let u=this.subFields[o.value.trim()],l=u(t);a.push(s(l))}else if(o.name==="OPERATOR")if(o.value==="NOT"){let u=i(a.pop());a.push(s(!u))}else if(o.value==="OR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u||l))}else if(o.value==="AND"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&l))}else if(o.value==="XOR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&!l||!u&&l))}else throw Error("Unsupported operator: "+o.value);else throw Error("Unsupported token type: "+o);return i(a[0])}};var qa=class extends Ve{fieldName(){return"filename"}value(e){let t=e.filename;return t===null?"":t+".md"}};var XO=[()=>new xa,()=>new Na,()=>new Hi,()=>new er,()=>new Ki,()=>new zi,()=>new Gi,()=>new Bi,()=>new ka,()=>new Ma,()=>new Vi,()=>new Aa,()=>new Oa,()=>new Ua,()=>new qa];function Fa(r){for(let e of XO){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}var On=class{constructor({source:e}){this._limit=void 0;this._layoutOptions=new Xr;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this.sortByRegexp=/^sort by (urgency|status|priority|start|scheduled|due|done|path|description|tag)( reverse)?[\s]*(\d+)?/;this.groupByRegexp=/^group by (backlink|done|due|filename|folder|happens|heading|path|priority|recurrence|recurring|root|scheduled|start|status|tags)/;this.hideOptionsRegexp=/^hide (task count|backlink|priority|start date|scheduled date|done date|due date|recurrence rule|edit button)/;this.shortModeRegexp=/^short/;this.limitRegexp=/^limit (to )?(\d+)( tasks?)?/;this.commentRegexp=/^#.*/;this.source=e,e.split(`
`).map(t=>t.trim()).forEach(t=>{switch(!0){case t==="":break;case this.shortModeRegexp.test(t):this._layoutOptions.shortMode=!0;break;case this.limitRegexp.test(t):this.parseLimit({line:t});break;case this.sortByRegexp.test(t):this.parseSortBy({line:t});break;case this.groupByRegexp.test(t):this.parseGroupBy({line:t});break;case this.hideOptionsRegexp.test(t):this.parseHideOptions({line:t});break;case this.commentRegexp.test(t):break;case this.parseFilter(t):break;default:this._error=`do not understand query: ${t}`}})}get limit(){return this._limit}get layoutOptions(){return this._layoutOptions}get filters(){return this._filters}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}applyQueryToTasks(e){this.filters.forEach(n=>{e=e.filter(n)});let t=Ge.by(this,e).slice(0,this.limit);return Rr.by(this.grouping,t)}parseHideOptions({line:e}){let t=e.match(this.hideOptionsRegexp);if(t!==null)switch(t[1].trim().toLowerCase()){case"task count":this._layoutOptions.hideTaskCount=!0;break;case"backlink":this._layoutOptions.hideBacklinks=!0;break;case"priority":this._layoutOptions.hidePriority=!0;break;case"start date":this._layoutOptions.hideStartDate=!0;break;case"scheduled date":this._layoutOptions.hideScheduledDate=!0;break;case"due date":this._layoutOptions.hideDueDate=!0;break;case"done date":this._layoutOptions.hideDoneDate=!0;break;case"recurrence rule":this._layoutOptions.hideRecurrenceRule=!0;break;case"edit button":this._layoutOptions.hideEditButton=!0;break;default:this._error="do not understand hide option"}}parseFilter(e){let t=Fa(e);return t!=null?(t.filter?this._filters.push(t.filter):this._error=t.error,!0):!1}parseLimit({line:e}){let t=e.match(this.limitRegexp);t!==null?this._limit=Number.parseInt(t[2],10):this._error="do not understand query limit"}parseSortBy({line:e}){let t=e.match(this.sortByRegexp);t!==null?this._sorting.push({property:t[1],reverse:!!t[2],propertyInstance:isNaN(+t[3])?1:+t[3]}):this._error="do not understand query sorting"}parseGroupBy({line:e}){let t=e.match(this.groupByRegexp);t!==null?this._grouping.push({property:t[1]}):this._error="do not understand query grouping"}};var Wa=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return se(this,null,function*(){n.addChild(new wd({app:this.app,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},wd=class extends La.MarkdownRenderChild{constructor({app:t,events:n,container:i,source:s,filePath:a}){super(i);switch(this.app=t,this.events=n,this.source=s,this.filePath=a,this.containerEl.className){case"block-language-tasks":this.query=new On({source:s}),this.queryType="tasks";break;default:this.query=new On({source:s}),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=new On({source:this.source}),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return se(this,arguments,function*({tasks:t,state:n}){var a;let s=this.containerEl.createEl("div");if(n==="Warm"&&this.query.error===void 0){console.debug(`Render ${this.queryType} called for a block in active file "${this.filePath}", to select from ${t.length} tasks: plugin state: ${n}`);let o=this.query.applyQueryToTasks(t);for(let l of o.groups){this.addGroupHeadings(s,l.groupHeadings);let{taskList:c}=yield this.createTasksList({tasks:l.tasks,content:s});s.appendChild(c)}let u=o.totalTasksCount();console.debug(`${u} of ${t.length} tasks displayed in a block in "${this.filePath}"`),this.addTaskCount(s,u)}else this.query.error!==void 0?s.setText(`Tasks query: ${this.query.error}`):s.setText("Loading Tasks ...");(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}createTasksList(i){return se(this,arguments,function*({tasks:t,content:n}){let s=t.length,a=n.createEl("ul");a.addClasses(["contains-task-list","plugin-tasks-query-result"]);for(let o=0;o<s;o++){let u=t[o],l=this.isFilenameUnique({task:u}),c=yield u.toLi({parentUlElement:a,listIndex:o,layoutOptions:this.query.layoutOptions,isFilenameUnique:l});c.querySelectorAll("[data-footnote-id]").forEach(y=>y.remove());let f=c.createSpan(),p=this.query.layoutOptions.shortMode;this.query.layoutOptions.hideBacklinks||this.addBacklinks(f,u,p,l),this.query.layoutOptions.hideEditButton||this.addEditButton(f,u),a.appendChild(c)}return{taskList:a,tasksCount:s}})}addEditButton(t,n){t.createEl("a",{cls:"tasks-edit"}).onClickEvent(s=>{s.preventDefault();let a=u=>{ls({originalTask:n,newTasks:u})};new vn({app:this.app,task:n,onSubmit:a}).open()})}addGroupHeadings(t,n){for(let i of n)this.addGroupHeading(t,i)}addGroupHeading(t,n){return se(this,null,function*(){let i;n.nestingLevel===0?i=t.createEl("h4",{cls:"tasks-group-heading"}):n.nestingLevel===1?i=t.createEl("h5",{cls:"tasks-group-heading"}):i=t.createEl("h6",{cls:"tasks-group-heading"}),yield La.MarkdownRenderer.renderMarkdown(n.name,i,this.filePath,this)})}addBacklinks(t,n,i,s){var u;t.addClass("tasks-backlink"),i||t.append(" (");let a=t.createEl("a");if(a.href=n.path,a.setAttribute("data-href",n.path),a.rel="noopener",a.target="_blank",a.addClass("internal-link"),i&&a.addClass("internal-link-short-mode"),n.precedingHeader!==null){let l=n.precedingHeader.replace(/#/g,"");a.href=a.href+"#"+l,a.setAttribute("data-href",a.getAttribute("data-href")+"#"+l)}let o;i?o=" \u{1F517}":o=(u=n.getLinkText({isFilenameUnique:s}))!=null?u:"",a.setText(o),i||t.append(")")}addTaskCount(t,n){this.query.layoutOptions.hideTaskCount||t.createDiv({text:`${n} task${n!==1?"s":""}`,cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}};var ar=require("obsidian");var Ya=class extends ar.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.plugin=t}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),new ar.Setting(t).setName("Global task filter").setDesc("The global filter will be applied to all checklist items.").addText(n=>{let i=ae();n.setPlaceholder("#task").setValue(i.globalFilter).onChange(s=>se(this,null,function*(){qt({globalFilter:s}),yield this.plugin.saveSettings()}))}),t.createEl("div",{cls:"setting-item-description",text:'The global filter will be applied to all checklist items to filter out "non-task" checklist items.\nA checklist item must include the specified string in its description in order to be considered a task.\nFor example, if you set the global filter to `#task`, the Tasks plugin will only handle checklist items tagged with `#task`.\nOther checklist items will remain normal checklist items and not appear in queries or get a done date set.\nLeave empty if you want all checklist items from your vault to be tasks managed by this plugin.'}),new ar.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(n=>{let i=ae();n.setValue(i.removeGlobalFilter).onChange(s=>se(this,null,function*(){qt({removeGlobalFilter:s}),yield this.plugin.saveSettings()}))}),new ar.Setting(t).setName("Set done date on every completed task").setDesc("Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done").addToggle(n=>{let i=ae();n.setValue(i.setDoneDate).onChange(s=>se(this,null,function*(){qt({setDoneDate:s}),yield this.plugin.saveSettings()}))}),new ar.Setting(t).setName("Auto-suggest task content").setDesc("Enabling this will open an intelligent suggest menu while typing inside a recognized task line.").addToggle(n=>{let i=ae();n.setValue(i.autoSuggestInEditor).onChange(s=>se(this,null,function*(){qt({autoSuggestInEditor:s}),yield this.plugin.saveSettings()}))}),new ar.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(n=>{let i=ae();n.setLimits(0,3,1).setValue(i.autoSuggestMinMatch).setDynamicTooltip().onChange(s=>se(this,null,function*(){qt({autoSuggestMinMatch:s}),yield this.plugin.saveSettings()}))}),new ar.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(n=>{let i=ae();n.setLimits(3,12,1).setValue(i.autoSuggestMaxItems).setDynamicTooltip().onChange(s=>se(this,null,function*(){qt({autoSuggestMaxItems:s}),yield this.plugin.saveSettings()}))})}};var g_=require("obsidian");var QO=`${Mt}${Dt}${Pt}`;function y_(r,e,t){let n=[];n=n.concat(tA(r,e,t)),n=n.concat(rA(r,e,t));let i=eA(r,t),s=Md(r,/([a-zA-Z'_-]*)/g,e),a=!1;if(s&&s.length>0){let o=s[0];if(o.length>=Math.max(1,t.autoSuggestMinMatch)){let u=i.filter(l=>l.displayText.toLowerCase().includes(o.toLowerCase()));for(let l of u)n.push({suggestionType:"match",displayText:l.displayText,appendText:l.appendText,insertAt:s.index,insertSkip:o.length}),a=!0}}return!a&&t.autoSuggestMinMatch===0&&(n=n.concat(i)),n.length>0&&!n.some(o=>o.suggestionType==="match")&&n.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`}),n=n.slice(0,t.autoSuggestMaxItems),n}function JO(r){if(Object.values(Re).some(e=>e.length>0&&r.includes(e)))return!0}function eA(r,e){let t=[];return r.includes(Pt)||t.push({displayText:`${Pt} due date`,appendText:`${Pt} `}),r.includes(Mt)||t.push({displayText:`${Mt} start date`,appendText:`${Mt} `}),r.includes(Dt)||t.push({displayText:`${Dt} scheduled date`,appendText:`${Dt} `}),JO(r)||(t.push({displayText:`${Re.High} high priority`,appendText:`${Re.High} `}),t.push({displayText:`${Re.Medium} medium priority`,appendText:`${Re.Medium} `}),t.push({displayText:`${Re.Low} low priority`,appendText:`${Re.Low} `})),r.includes(wt)||t.push({displayText:`${wt} recurring (repeat)`,appendText:`${wt} `}),t}function tA(r,e,t){let n=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],i=[],s=new RegExp(`([${QO}])\\s*([0-9a-zA-Z ]*)`,"ug"),a=Md(r,s,e);if(a&&a.length>=2){let o=a[1],u=a[2];if(u.length<t.autoSuggestMinMatch)return[];let l=u&&u.length>1?Jt.parseDate(bn(u),!0):null;l&&l.isValid()&&i.push({displayText:`${l.format(N.dateFormat)}`,appendText:`${o} ${l.format(N.dateFormat)} `,insertAt:a.index,insertSkip:a[0].length});let c=1,d=5,f=n.filter(p=>u&&u.length>=c&&p.toLowerCase().includes(u.toLowerCase())).slice(0,d);f.length===0&&(f=n.slice(0,d));for(let p of f){let m=`${Jt.parseDate(p,!0).format(N.dateFormat)}`;i.push({suggestionType:"match",displayText:`${p} (${m})`,appendText:`${o} ${m} `,insertAt:a.index,insertSkip:a[0].length})}}return i}function rA(r,e,t){var o;let n=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],i=[],s=new RegExp(`(${wt})\\s*([0-9a-zA-Z ]*)`,"ug"),a=Md(r,s,e);if(a&&a.length>=2){let u=a[1],l=a[2];if(l.length<t.autoSuggestMinMatch)return[];if(l.length>0){let p=(o=pt.fromText({recurrenceRuleText:l,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:o.toText();if(p){let y=`${u} ${p} `;if(i.push({suggestionType:"match",displayText:`\u2705 ${p}`,appendText:y,insertAt:a.index,insertSkip:a[0].length}),a[0]==y)return[]}}let c=1,d=t.autoSuggestMaxItems/2,f=n.filter(p=>l&&l.length>=c&&p.toLowerCase().includes(l.toLowerCase())).slice(0,d);f.length===0&&l.trim().length===0&&(f=n.slice(0,d));for(let p of f)i.push({suggestionType:"match",displayText:`${p}`,appendText:`${u} ${p} `,insertAt:a.index,insertSkip:a[0].length})}return i}function Md(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<=t&&t<=i.index+i[0].length)return i;return[]}var $a=class extends g_.EditorSuggest{constructor(t,n){super(t);this.settings=n}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return s.contains(this.settings.globalFilter)&&s.match(N.taskRegex)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){let n=t.query,i=t.editor.getCursor(),s=y_(n,i.ch,this.settings),a=[];for(let o of s)a.push(Ft($e({},o),{context:t}));return a}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){var u,l,c;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let d=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(l=(u=i==null?void 0:i.cm)==null?void 0:u.contentDOM)==null||l.dispatchEvent(d);return}let s=t.context.editor.getCursor(),a={line:s.line,ch:(c=t.insertAt)!=null?c:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length})}};var ja=class extends __.Plugin{onload(){return se(this,null,function*(){console.log('loading plugin "tasks"'),yield this.loadSettings(),this.addSettingTab(new Ya({plugin:this})),Jd({metadataCache:this.app.metadataCache,vault:this.app.vault});let t=new ma({obsidianEvents:this.app.workspace});this.cache=new hr({metadataCache:this.app.metadataCache,vault:this.app.vault,events:t}),this.inlineRenderer=new ya({plugin:this}),this.queryRenderer=new Wa({plugin:this,events:t}),this.registerEditorExtension(t_()),this.registerEditorSuggest(new $a(this.app,ae())),new ha({plugin:this})})}onunload(){var t;console.log('unloading plugin "tasks"'),(t=this.cache)==null||t.unload()}loadSettings(){return se(this,null,function*(){let t=yield this.loadData();qt(t)})}saveSettings(){return se(this,null,function*(){yield this.saveData(ae())})}};
