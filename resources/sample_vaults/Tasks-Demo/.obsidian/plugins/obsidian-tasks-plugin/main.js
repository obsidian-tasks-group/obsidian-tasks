/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck and Clare Macrae

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

"use strict";var _T=Object.create;var vi=Object.defineProperty,TT=Object.defineProperties,bT=Object.getOwnPropertyDescriptor,vT=Object.getOwnPropertyDescriptors,ET=Object.getOwnPropertyNames,Pf=Object.getOwnPropertySymbols,wT=Object.getPrototypeOf,Cf=Object.prototype.hasOwnProperty,OT=Object.prototype.propertyIsEnumerable;var xf=(r,e,t)=>e in r?vi(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Re=(r,e)=>{for(var t in e||(e={}))Cf.call(e,t)&&xf(r,t,e[t]);if(Pf)for(var t of Pf(e))OT.call(e,t)&&xf(r,t,e[t]);return r},wt=(r,e)=>TT(r,vT(e));var p=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),DT=(r,e)=>{for(var t in e)vi(r,t,{get:e[t],enumerable:!0})},Nf=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ET(e))!Cf.call(r,i)&&i!==t&&vi(r,i,{get:()=>e[i],enumerable:!(n=bT(e,i))||n.enumerable});return r};var Xs=(r,e,t)=>(t=r!=null?_T(wT(r)):{},Nf(e||!r||!r.__esModule?vi(t,"default",{value:r,enumerable:!0}):t,r)),RT=r=>Nf(vi({},"__esModule",{value:!0}),r);var N=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var sp=p((EA,ra)=>{var Lf,qf,Wf,Yf,jf,$f,Bf,Gf,Hf,ea,Uo,zf,Kf,Vf,kn,Xf,Zf,Qf,Jf,ep,tp,rp,np,ip,ta;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof ra=="object"&&typeof ra.exports=="object"?r(t(e,t(ra.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,a){return n[s]=i?i(s,a):a}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])};Lf=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},qf=Object.assign||function(n){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},Wf=function(n,i){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)i.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(s[a[o]]=n[a[o]]);return s},Yf=function(n,i,s,a){var o=arguments.length,u=o<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,s,a);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(u=(o<3?l(u):o>3?l(i,s,u):l(i,s))||u);return o>3&&u&&Object.defineProperty(i,s,u),u},jf=function(n,i){return function(s,a){i(s,a,n)}},$f=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},Bf=function(n,i,s,a){function o(u){return u instanceof s?u:new s(function(l){l(u)})}return new(s||(s=Promise))(function(u,l){function c(h){try{f(a.next(h))}catch(y){l(y)}}function d(h){try{f(a.throw(h))}catch(y){l(y)}}function f(h){h.done?u(h.value):o(h.value).then(c,d)}f((a=a.apply(n,i||[])).next())})},Gf=function(n,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,o,u,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(h){return d([f,h])}}function d(f){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(u=f[0]&2?o.return:f[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,f[1])).done)return u;switch(o=0,u&&(f=[f[0]&2,u.value]),f[0]){case 0:case 1:u=f;break;case 4:return s.label++,{value:f[1],done:!1};case 5:s.label++,o=f[1],f=[0];continue;case 7:f=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(f[0]===6||f[0]===2)){s=0;continue}if(f[0]===3&&(!u||f[1]>u[0]&&f[1]<u[3])){s.label=f[1];break}if(f[0]===6&&s.label<u[1]){s.label=u[1],u=f;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(f);break}u[2]&&s.ops.pop(),s.trys.pop();continue}f=i.call(n,s)}catch(h){f=[6,h],o=0}finally{a=u=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Hf=function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&ta(i,n,s)},ta=Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]},ea=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],a=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Uo=function(n,i){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var a=s.call(n),o,u=[],l;try{for(;(i===void 0||i-- >0)&&!(o=a.next()).done;)u.push(o.value)}catch(c){l={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(l)throw l.error}}return u},zf=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(Uo(arguments[i]));return n},Kf=function(){for(var n=0,i=0,s=arguments.length;i<s;i++)n+=arguments[i].length;for(var a=Array(n),o=0,i=0;i<s;i++)for(var u=arguments[i],l=0,c=u.length;l<c;l++,o++)a[o]=u[l];return a},Vf=function(n,i,s){if(s||arguments.length===2)for(var a=0,o=i.length,u;a<o;a++)(u||!(a in i))&&(u||(u=Array.prototype.slice.call(i,0,a)),u[a]=i[a]);return n.concat(u||Array.prototype.slice.call(i))},kn=function(n){return this instanceof kn?(this.v=n,this):new kn(n)},Xf=function(n,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(n,i||[]),o,u=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(m){a[m]&&(o[m]=function(g){return new Promise(function(O,w){u.push([m,g,O,w])>1||c(m,g)})})}function c(m,g){try{d(a[m](g))}catch(O){y(u[0][3],O)}}function d(m){m.value instanceof kn?Promise.resolve(m.value.v).then(f,h):y(u[0][2],m)}function f(m){c("next",m)}function h(m){c("throw",m)}function y(m,g){m(g),u.shift(),u.length&&c(u[0][0],u[0][1])}},Zf=function(n){var i,s;return i={},a("next"),a("throw",function(o){throw o}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(o,u){i[o]=n[o]?function(l){return(s=!s)?{value:kn(n[o](l)),done:o==="return"}:u?u(l):l}:u}},Qf=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],s;return i?i.call(n):(n=typeof ea=="function"?ea(n):n[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(u){s[u]=n[u]&&function(l){return new Promise(function(c,d){l=n[u](l),o(c,d,l.done,l.value)})}}function o(u,l,c,d){Promise.resolve(d).then(function(f){u({value:f,done:c})},l)}},Jf=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};ep=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&ta(i,n,s);return t(i,n),i},tp=function(n){return n&&n.__esModule?n:{default:n}},rp=function(n,i,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(n):a?a.value:i.get(n)},np=function(n,i,s,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(n,s):o?o.value=s:i.set(n,s),s},ip=function(n,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?i===n:n.has(i)},r("__extends",Lf),r("__assign",qf),r("__rest",Wf),r("__decorate",Yf),r("__param",jf),r("__metadata",$f),r("__awaiter",Bf),r("__generator",Gf),r("__exportStar",Hf),r("__createBinding",ta),r("__values",ea),r("__read",Uo),r("__spread",zf),r("__spreadArrays",Kf),r("__spreadArray",Vf),r("__await",kn),r("__asyncGenerator",Xf),r("__asyncDelegator",Zf),r("__asyncValues",Qf),r("__makeTemplateObject",Jf),r("__importStar",ep),r("__importDefault",tp),r("__classPrivateFieldGet",rp),r("__classPrivateFieldSet",np),r("__classPrivateFieldIn",ip)})});var oe=p(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.matchAnyPattern=Ir.extractTerms=Ir.repeatedTimeunitPattern=void 0;function wb(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}Ir.repeatedTimeunitPattern=wb;function ih(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}Ir.extractTerms=ih;function Ob(r){return`(?:${ih(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}Ir.matchAnyPattern=Ob});var te=p((Jo,eu)=>{(function(r,e){typeof Jo=="object"&&typeof eu!="undefined"?eu.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(Jo,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",d="year",f="date",h="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},O=function(A,E,b){var C=String(A);return!C||C.length>=E?A:""+Array(E+1-C.length).join(b)+A},w={s:O,z:function(A){var E=-A.utcOffset(),b=Math.abs(E),C=Math.floor(b/60),v=b%60;return(E<=0?"+":"-")+O(C,2,"0")+":"+O(v,2,"0")},m:function A(E,b){if(E.date()<b.date())return-A(b,E);var C=12*(b.year()-E.year())+(b.month()-E.month()),v=E.clone().add(C,l),q=b-v<0,F=E.clone().add(C+(q?-1:1),l);return+(-(C+(b-v)/(q?v-F:F-v))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:l,y:d,w:u,d:o,D:f,h:a,m:s,s:i,ms:n,Q:c}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},P="en",H={};H[P]=g;var ye=function(A){return A instanceof vt},_e=function(A,E,b){var C;if(!A)return P;if(typeof A=="string")H[A]&&(C=A),E&&(H[A]=E,C=A);else{var v=A.name;H[v]=A,C=v}return!b&&C&&(P=C),C||!b&&P},se=function(A,E){if(ye(A))return A.clone();var b=typeof E=="object"?E:{};return b.date=A,b.args=arguments,new vt(b)},j=w;j.l=_e,j.i=ye,j.w=function(A,E){return se(A,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var vt=function(){function A(b){this.$L=_e(b.locale,null,!0),this.parse(b)}var E=A.prototype;return E.parse=function(b){this.$d=function(C){var v=C.date,q=C.utc;if(v===null)return new Date(NaN);if(j.u(v))return new Date;if(v instanceof Date)return new Date(v);if(typeof v=="string"&&!/Z$/i.test(v)){var F=v.match(y);if(F){var V=F[2]-1||0,ue=(F[7]||"0").substring(0,3);return q?new Date(Date.UTC(F[1],V,F[3]||1,F[4]||0,F[5]||0,F[6]||0,ue)):new Date(F[1],V,F[3]||1,F[4]||0,F[5]||0,F[6]||0,ue)}}return new Date(v)}(b),this.$x=b.x||{},this.init()},E.init=function(){var b=this.$d;this.$y=b.getFullYear(),this.$M=b.getMonth(),this.$D=b.getDate(),this.$W=b.getDay(),this.$H=b.getHours(),this.$m=b.getMinutes(),this.$s=b.getSeconds(),this.$ms=b.getMilliseconds()},E.$utils=function(){return j},E.isValid=function(){return this.$d.toString()!==h},E.isSame=function(b,C){var v=se(b);return this.startOf(C)<=v&&v<=this.endOf(C)},E.isAfter=function(b,C){return se(b)<this.startOf(C)},E.isBefore=function(b,C){return this.endOf(C)<se(b)},E.$g=function(b,C,v){return j.u(b)?this[C]:this.set(v,b)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(b,C){var v=this,q=!!j.u(C)||C,F=j.p(b),V=function(Et,De){var Pe=j.w(v.$u?Date.UTC(v.$y,De,Et):new Date(v.$y,De,Et),v);return q?Pe:Pe.endOf(o)},ue=function(Et,De){return j.w(v.toDate()[Et].apply(v.toDate("s"),(q?[0,0,0,0]:[23,59,59,999]).slice(De)),v)},Z=this.$W,ge=this.$M,x=this.$D,ie="set"+(this.$u?"UTC":"");switch(F){case d:return q?V(1,0):V(31,11);case l:return q?V(1,ge):V(0,ge+1);case u:var Te=this.$locale().weekStart||0,ve=(Z<Te?Z+7:Z)-Te;return V(q?x-ve:x+(6-ve),ge);case o:case f:return ue(ie+"Hours",0);case a:return ue(ie+"Minutes",1);case s:return ue(ie+"Seconds",2);case i:return ue(ie+"Milliseconds",3);default:return this.clone()}},E.endOf=function(b){return this.startOf(b,!1)},E.$set=function(b,C){var v,q=j.p(b),F="set"+(this.$u?"UTC":""),V=(v={},v[o]=F+"Date",v[f]=F+"Date",v[l]=F+"Month",v[d]=F+"FullYear",v[a]=F+"Hours",v[s]=F+"Minutes",v[i]=F+"Seconds",v[n]=F+"Milliseconds",v)[q],ue=q===o?this.$D+(C-this.$W):C;if(q===l||q===d){var Z=this.clone().set(f,1);Z.$d[V](ue),Z.init(),this.$d=Z.set(f,Math.min(this.$D,Z.daysInMonth())).$d}else V&&this.$d[V](ue);return this.init(),this},E.set=function(b,C){return this.clone().$set(b,C)},E.get=function(b){return this[j.p(b)]()},E.add=function(b,C){var v,q=this;b=Number(b);var F=j.p(C),V=function(ge){var x=se(q);return j.w(x.date(x.date()+Math.round(ge*b)),q)};if(F===l)return this.set(l,this.$M+b);if(F===d)return this.set(d,this.$y+b);if(F===o)return V(1);if(F===u)return V(7);var ue=(v={},v[s]=e,v[a]=t,v[i]=r,v)[F]||1,Z=this.$d.getTime()+b*ue;return j.w(Z,this)},E.subtract=function(b,C){return this.add(-1*b,C)},E.format=function(b){var C=this,v=this.$locale();if(!this.isValid())return v.invalidDate||h;var q=b||"YYYY-MM-DDTHH:mm:ssZ",F=j.z(this),V=this.$H,ue=this.$m,Z=this.$M,ge=v.weekdays,x=v.months,ie=function(De,Pe,kr,ar){return De&&(De[Pe]||De(C,q))||kr[Pe].substr(0,ar)},Te=function(De){return j.s(V%12||12,De,"0")},ve=v.meridiem||function(De,Pe,kr){var ar=De<12?"AM":"PM";return kr?ar.toLowerCase():ar},Et={YY:String(this.$y).slice(-2),YYYY:this.$y,M:Z+1,MM:j.s(Z+1,2,"0"),MMM:ie(v.monthsShort,Z,x,3),MMMM:ie(x,Z),D:this.$D,DD:j.s(this.$D,2,"0"),d:String(this.$W),dd:ie(v.weekdaysMin,this.$W,ge,2),ddd:ie(v.weekdaysShort,this.$W,ge,3),dddd:ge[this.$W],H:String(V),HH:j.s(V,2,"0"),h:Te(1),hh:Te(2),a:ve(V,ue,!0),A:ve(V,ue,!1),m:String(ue),mm:j.s(ue,2,"0"),s:String(this.$s),ss:j.s(this.$s,2,"0"),SSS:j.s(this.$ms,3,"0"),Z:F};return q.replace(m,function(De,Pe){return Pe||Et[De]||F.replace(":","")})},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(b,C,v){var q,F=j.p(C),V=se(b),ue=(V.utcOffset()-this.utcOffset())*e,Z=this-V,ge=j.m(this,V);return ge=(q={},q[d]=ge/12,q[l]=ge,q[c]=ge/3,q[u]=(Z-ue)/6048e5,q[o]=(Z-ue)/864e5,q[a]=Z/t,q[s]=Z/e,q[i]=Z/r,q)[F]||Z,v?ge:j.a(ge)},E.daysInMonth=function(){return this.endOf(l).$D},E.$locale=function(){return H[this.$L]},E.locale=function(b,C){if(!b)return this.$L;var v=this.clone(),q=_e(b,C,!0);return q&&(v.$L=q),v},E.clone=function(){return j.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},A}(),dt=vt.prototype;return se.prototype=dt,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",d],["$D",f]].forEach(function(A){dt[A[1]]=function(E){return this.$g(E,A[0],A[1])}}),se.extend=function(A,E){return A.$i||(A(E,vt,se),A.$i=!0),se},se.locale=_e,se.isDayjs=ye,se.unix=function(A){return se(1e3*A)},se.en=H[P],se.Ls=H,se.p={},se})});var Ge=p(Fr=>{"use strict";var Db=Fr&&Fr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.findYearClosestToRef=Fr.findMostLikelyADYear=void 0;var Rb=Db(te());function Sb(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}Fr.findMostLikelyADYear=Sb;function Mb(r,e,t){let n=Rb.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}Fr.findYearClosestToRef=Mb});var He=p($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.parseTimeUnits=$.TIME_UNITS_PATTERN=$.parseYear=$.YEAR_PATTERN=$.parseOrdinalNumberPattern=$.ORDINAL_NUMBER_PATTERN=$.parseNumberPattern=$.NUMBER_PATTERN=$.TIME_UNIT_DICTIONARY=$.ORDINAL_WORD_DICTIONARY=$.INTEGER_WORD_DICTIONARY=$.MONTH_DICTIONARY=$.FULL_MONTH_NAME_DICTIONARY=$.WEEKDAY_DICTIONARY=void 0;var pa=oe(),kb=Ge();$.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};$.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};$.MONTH_DICTIONARY=Object.assign(Object.assign({},$.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});$.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};$.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};$.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};$.NUMBER_PATTERN=`(?:${pa.matchAnyPattern($.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function ah(r){let e=r.toLowerCase();return $.INTEGER_WORD_DICTIONARY[e]!==void 0?$.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}$.parseNumberPattern=ah;$.ORDINAL_NUMBER_PATTERN=`(?:${pa.matchAnyPattern($.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function Ab(r){let e=r.toLowerCase();return $.ORDINAL_WORD_DICTIONARY[e]!==void 0?$.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}$.parseOrdinalNumberPattern=Ab;$.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function Pb(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return kb.findMostLikelyADYear(e)}$.parseYear=Pb;var oh=`(${$.NUMBER_PATTERN})\\s{0,3}(${pa.matchAnyPattern($.TIME_UNIT_DICTIONARY)})`,sh=new RegExp(oh,"i");$.TIME_UNITS_PATTERN=pa.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",oh);function xb(r){let e={},t=r,n=sh.exec(t);for(;n;)Cb(e,n),t=t.substring(n[0].length).trim(),n=sh.exec(t);return e}$.parseTimeUnits=xb;function Cb(r,e){let t=ah(e[1]),n=$.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var uh=p((tu,ru)=>{(function(r,e){typeof tu=="object"&&typeof ru!="undefined"?ru.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(tu,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var d=this.quarter()-1;return c?this.month(3*d).startOf(r).startOf("day"):this.month(3*d+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var Mt=p(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.implySimilarTime=er.assignSimilarTime=er.assignSimilarDate=er.assignTheNextDay=void 0;var lh=Ne();function Nb(r,e){e=e.add(1,"day"),ch(r,e),dh(r,e)}er.assignTheNextDay=Nb;function ch(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}er.assignSimilarDate=ch;function Ib(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",lh.Meridiem.AM):r.assign("meridiem",lh.Meridiem.PM)}er.assignSimilarTime=Ib;function dh(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}er.implySimilarTime=dh});var fh=p(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.toTimezoneOffset=rn.TIMEZONE_ABBR_MAP=void 0;rn.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function Fb(r){var e;return r==null?null:typeof r=="number"?r:(e=rn.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}rn.toTimezoneOffset=Fb});var Ee=p(tr=>{"use strict";var ph=tr&&tr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(tr,"__esModule",{value:!0});tr.ParsingResult=tr.ParsingComponents=tr.ReferenceWithTimezone=void 0;var Ub=ph(uh()),ha=ph(te()),nu=Mt(),Lb=fh();ha.default.extend(Ub.default);var iu=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=Lb.toTimezoneOffset(e.timezone))}};tr.ReferenceWithTimezone=iu;var nn=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=ha.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new nn(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return ha.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=ha.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new nn(e);return t.hour||t.minute||t.second?(nu.assignSimilarTime(i,n),nu.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(nu.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};tr.ParsingComponents=nn;var Ni=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new nn(e),this.end=s}clone(){let e=new Ni(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};tr.ParsingResult=Ni});var R=p(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.AbstractParserWithWordBoundaryChecking=void 0;var su=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};ma.AbstractParserWithWordBoundaryChecking=su});var hh=p(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});var ou=He(),qb=Ee(),Wb=R(),Yb=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${ou.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),jb=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${ou.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),au=class extends Wb.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?jb:Yb}innerExtract(e,t){let n=ou.parseTimeUnits(t[1]);return qb.ParsingComponents.createRelativeFromReference(e.reference,n)}};uu.default=au});var bh=p(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});var $b=Ge(),_h=He(),Th=He(),ya=He(),Bb=oe(),Gb=R(),Hb=new RegExp(`(?:on\\s{0,3})?(${ya.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${ya.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${Bb.matchAnyPattern(_h.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${Th.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),mh=1,yh=2,zb=3,gh=4,lu=class extends Gb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Hb}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=_h.MONTH_DICTIONARY[t[zb].toLowerCase()],s=ya.parseOrdinalNumberPattern(t[mh]);if(s>31)return t.index=t.index+t[mh].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[gh]){let a=Th.parseYear(t[gh]);n.start.assign("year",a)}else{let a=$b.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[yh]){let a=ya.parseOrdinalNumberPattern(t[yh]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};cu.default=lu});var Dh=p(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});var Kb=Ge(),wh=He(),ga=He(),Oh=He(),Vb=oe(),Xb=R(),Zb=new RegExp(`(${Vb.matchAnyPattern(wh.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${ga.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${ga.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${Oh.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),Qb=1,Jb=2,vh=3,Eh=4,du=class extends Xb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Zb}innerExtract(e,t){let n=wh.MONTH_DICTIONARY[t[Qb].toLowerCase()],i=ga.parseOrdinalNumberPattern(t[Jb]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[Eh]){let u=Oh.parseYear(t[Eh]);s.assign("year",u)}else{let u=Kb.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[vh])return s;let a=ga.parseOrdinalNumberPattern(t[vh]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};fu.default=du});var Mh=p(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});var pu=He(),ev=Ge(),tv=oe(),Sh=He(),rv=R(),nv=new RegExp(`((?:in)\\s*)?(${tv.matchAnyPattern(pu.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Sh.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),iv=1,sv=2,Rh=3,hu=class extends rv.AbstractParserWithWordBoundaryChecking{innerPattern(){return nv}innerExtract(e,t){let n=t[sv].toLowerCase();if(t[0].length<=3&&!pu.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[iv]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=pu.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Rh]){let a=Sh.parseYear(t[Rh]);i.start.assign("year",a)}else{let a=ev.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};mu.default=hu});var Ph=p(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});var Ah=He(),av=oe(),ov=R(),uv=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${av.matchAnyPattern(Ah.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),lv=1,cv=2,kh=3,dv=4,yu=class extends ov.AbstractParserWithWordBoundaryChecking{innerPattern(){return uv}innerExtract(e,t){let n=t[kh]?parseInt(t[kh]):Ah.MONTH_DICTIONARY[t[cv].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[lv]);return{day:parseInt(t[dv]),month:n,year:i}}};gu.default=yu});var xh=p(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});var fv=R(),pv=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),hv=1,mv=2,_u=class extends fv.AbstractParserWithWordBoundaryChecking{innerPattern(){return pv}innerExtract(e,t){let n=parseInt(t[mv]),i=parseInt(t[hv]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Tu.default=_u});var sn=p(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.AbstractTimeExpressionParser=void 0;var et=Ne();function yv(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function gv(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var Ch=2,In=3,_a=4,Ta=5,Ii=6,bu=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[Ch]);if(o>100){if(this.strictMode||t[In]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[In]!=null){if(t[In].length==1&&!t[Ii])return null;s=parseInt(t[In])}if(s>=60)return null;if(o>12&&(a=et.Meridiem.PM),t[Ii]!=null){if(o>12)return null;let u=t[Ii][0].toLowerCase();u=="a"&&(a=et.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=et.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",et.Meridiem.AM):i.imply("meridiem",et.Meridiem.PM),t[Ta]!=null){let u=parseInt(t[Ta].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[_a]!=null){let u=parseInt(t[_a]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[Ta]!=null){let u=parseInt(t[Ta].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[_a]!=null){let u=parseInt(t[_a]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[Ch]),a=0,o=-1;if(t[In]!=null?a=parseInt(t[In]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=et.Meridiem.PM),t[Ii]!=null){if(s>12)return null;let u=t[Ii][0].toLowerCase();u=="a"&&(o=et.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=et.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==et.Meridiem.AM?(n.start.imply("meridiem",et.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",et.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",et.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",et.Meridiem.PM)):s>12?i.imply("meridiem",et.Meridiem.PM):s<=12&&i.imply("meridiem",et.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=yv(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=gv(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};ba.AbstractTimeExpressionParser=bu});var Nh=p(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});var va=Ne(),_v=sn(),vu=class extends _v.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",va.Meridiem.PM)):i<6&&n.assign("meridiem",va.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",va.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",va.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Eu.default=vu});var kt=p(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.addImpliedTimeUnits=Fn.reverseTimeUnits=void 0;function Tv(r){let e={};for(let t in r)e[t]=-r[t];return e}Fn.reverseTimeUnits=Tv;function bv(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}Fn.addImpliedTimeUnits=bv});var Ih=p(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});var Ou=He(),vv=Ee(),Ev=R(),wv=kt(),Ov=new RegExp(`(${Ou.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),Dv=new RegExp(`(${Ou.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),wu=class extends Ev.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Dv:Ov}innerExtract(e,t){let n=Ou.parseTimeUnits(t[1]),i=wv.reverseTimeUnits(n);return vv.ParsingComponents.createRelativeFromReference(e.reference,i)}};Du.default=wu});var Fh=p(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});var Su=He(),Rv=Ee(),Sv=R(),Mv=new RegExp(`(${Su.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),kv=new RegExp("("+Su.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),Av=1,Ru=class extends Sv.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?kv:Mv}innerExtract(e,t){let n=Su.parseTimeUnits(t[Av]);return Rv.ParsingComponents.createRelativeFromReference(e.reference,n)}};Mu.default=Ru});var Ln=p(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.MergingRefiner=Un.Filter=void 0;var ku=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};Un.Filter=ku;var Au=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};Un.MergingRefiner=Au});var rr=p(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});var Pv=Ln(),Pu=class extends Pv.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};xu.default=Pu});var Uh=p(Fi=>{"use strict";var xv=Fi&&Fi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fi,"__esModule",{value:!0});var Cv=xv(rr()),Cu=class extends Cv.default{patternBetween(){return/^\s*(to|-)\s*$/i}};Fi.default=Cu});var Lh=p(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.mergeDateTimeComponent=qn.mergeDateTimeResult=void 0;var Nv=Ne();function Iv(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=Nu(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=Nu(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}qn.mergeDateTimeResult=Iv;function Nu(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==Nv.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}qn.mergeDateTimeComponent=Nu});var dr=p(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});var Fv=Ln(),qh=Lh(),Iu=class extends Fv.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?qh.mergeDateTimeResult(t,n):qh.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};Fu.default=Iu});var Wh=p(Ui=>{"use strict";var Uv=Ui&&Ui.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ui,"__esModule",{value:!0});var Lv=Uv(dr()),Uu=class extends Lv.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};Ui.default=Uu});var Yh=p(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});var qv=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),Wv={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},Lu=class{constructor(e){this.timezone=Object.assign(Object.assign({},Wv),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=qv.exec(u);if(!l)return;let c=l[1].toUpperCase(),d=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(d===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${d} for: ${s.start}`)});let f=s.start.get("timezoneOffset");f!==null&&d!=f&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",d),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",d))}),t}};qu.default=Lu});var Ea=p(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});var Yv=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),jv=1,$v=2,Bv=3,Wu=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=Yv.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[$v]),o=parseInt(s[Bv]||"0"),u=a*60+o;u>14*60||(s[jv]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};Yu.default=Wu});var jh=p($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});var ju=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};$u.default=ju});var $h=p(Li=>{"use strict";var Gv=Li&&Li.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Li,"__esModule",{value:!0});var Hv=Gv(te()),Bu=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=Hv.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};Li.default=Bu});var Bh=p(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});var zv=Ln(),Gu=class extends zv.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};Hu.default=Gu});var Vu=p(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});var Kv=R(),Vv=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),Xv=1,Zv=2,Qv=3,Gh=4,Jv=5,Hh=6,zh=7,Kh=8,Vh=9,zu=class extends Kv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Vv}innerExtract(e,t){let n={};if(n.year=parseInt(t[Xv]),n.month=parseInt(t[Zv]),n.day=parseInt(t[Qv]),t[Gh]!=null)if(n.hour=parseInt(t[Gh]),n.minute=parseInt(t[Jv]),t[Hh]!=null&&(n.second=parseInt(t[Hh])),t[zh]!=null&&(n.millisecond=parseInt(t[zh])),t[Kh]==null)n.timezoneOffset=0;else{let i=parseInt(t[Kh]),s=0;t[Vh]!=null&&(s=parseInt(t[Vh]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};Ku.default=zu});var Xh=p(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});var eE=Ln(),Xu=class extends eE.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};Zu.default=Xu});var fr=p(Wn=>{"use strict";var an=Wn&&Wn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.includeCommonConfiguration=void 0;var tE=an(Yh()),rE=an(Ea()),Zh=an(jh()),nE=an($h()),iE=an(Bh()),sE=an(Vu()),aE=an(Xh());function oE(r,e=!1){return r.parsers.unshift(new sE.default),r.refiners.unshift(new aE.default),r.refiners.unshift(new tE.default),r.refiners.unshift(new rE.default),r.refiners.unshift(new Zh.default),r.refiners.push(new Zh.default),r.refiners.push(new nE.default),r.refiners.push(new iE.default(e)),r}Wn.includeCommonConfiguration=oE});var hr=p(ae=>{"use strict";var uE=ae&&ae.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ae,"__esModule",{value:!0});ae.noon=ae.morning=ae.midnight=ae.yesterdayEvening=ae.evening=ae.lastNight=ae.tonight=ae.theDayAfter=ae.tomorrow=ae.theDayBefore=ae.yesterday=ae.today=ae.now=void 0;var nr=Ee(),Yn=uE(te()),pr=Mt(),qi=Ne();function lE(r){let e=Yn.default(r.instant),t=new nr.ParsingComponents(r,{});return pr.assignSimilarDate(t,e),pr.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}ae.now=lE;function cE(r){let e=Yn.default(r.instant),t=new nr.ParsingComponents(r,{});return pr.assignSimilarDate(t,e),pr.implySimilarTime(t,e),t}ae.today=cE;function dE(r){return Qh(r,1)}ae.yesterday=dE;function Qh(r,e){return Qu(r,-e)}ae.theDayBefore=Qh;function fE(r){return Qu(r,1)}ae.tomorrow=fE;function Qu(r,e){let t=Yn.default(r.instant),n=new nr.ParsingComponents(r,{});return t=t.add(e,"day"),pr.assignSimilarDate(n,t),pr.implySimilarTime(n,t),n}ae.theDayAfter=Qu;function pE(r,e=22){let t=Yn.default(r.instant),n=new nr.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",qi.Meridiem.PM),pr.assignSimilarDate(n,t),n}ae.tonight=pE;function hE(r,e=0){let t=Yn.default(r.instant),n=new nr.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),pr.assignSimilarDate(n,t),n.imply("hour",e),n}ae.lastNight=hE;function mE(r,e=20){let t=new nr.ParsingComponents(r,{});return t.imply("meridiem",qi.Meridiem.PM),t.imply("hour",e),t}ae.evening=mE;function yE(r,e=20){let t=Yn.default(r.instant),n=new nr.ParsingComponents(r,{});return t=t.add(-1,"day"),pr.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",qi.Meridiem.PM),n}ae.yesterdayEvening=yE;function gE(r){let e=new nr.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}ae.midnight=gE;function _E(r,e=6){let t=new nr.ParsingComponents(r,{});return t.imply("meridiem",qi.Meridiem.AM),t.imply("hour",e),t}ae.morning=_E;function TE(r){let e=new nr.ParsingComponents(r,{});return e.imply("meridiem",qi.Meridiem.AM),e.imply("hour",12),e}ae.noon=TE});var Jh=p(jt=>{"use strict";var bE=jt&&jt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),vE=jt&&jt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),EE=jt&&jt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&bE(e,r,t);return vE(e,r),e},wE=jt&&jt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(jt,"__esModule",{value:!0});var OE=wE(te()),DE=R(),RE=Mt(),Wi=EE(hr()),SE=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,Ju=class extends DE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return SE}innerExtract(e,t){let n=OE.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return Wi.now(e.reference);case"today":return Wi.today(e.reference);case"yesterday":return Wi.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return Wi.tomorrow(e.reference);case"tonight":return Wi.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),RE.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};jt.default=Ju});var em=p(Yi=>{"use strict";var ME=Yi&&Yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yi,"__esModule",{value:!0});var wa=Ne(),kE=R(),AE=ME(te()),PE=Mt(),xE=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,el=class extends kE.AbstractParserWithWordBoundaryChecking{innerPattern(){return xE}innerExtract(e,t){let n=AE.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",wa.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",wa.Meridiem.PM),i.imply("hour",20);break;case"midnight":PE.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",wa.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",wa.Meridiem.AM),i.imply("hour",12);break}return i}};Yi.default=el});var on=p(Ur=>{"use strict";var CE=Ur&&Ur.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.toDayJSClosestWeekday=Ur.toDayJSWeekday=void 0;var tm=CE(te());function NE(r,e,t){if(!t)return rm(r,e);let n=tm.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}Ur.toDayJSWeekday=NE;function rm(r,e){let t=tm.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}Ur.toDayJSClosestWeekday=rm});var im=p(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});var nm=He(),IE=oe(),FE=R(),UE=on(),LE=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${IE.matchAnyPattern(nm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),qE=1,WE=2,YE=3,tl=class extends FE.AbstractParserWithWordBoundaryChecking{innerPattern(){return LE}innerExtract(e,t){let n=t[WE].toLowerCase(),i=nm.WEEKDAY_DICTIONARY[n],s=t[qE],a=t[YE],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=UE.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};rl.default=tl});var om=p(ji=>{"use strict";var jE=ji&&ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ji,"__esModule",{value:!0});var am=He(),sm=Ee(),$E=jE(te()),BE=R(),GE=oe(),HE=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${GE.matchAnyPattern(am.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),zE=1,KE=2,nl=class extends BE.AbstractParserWithWordBoundaryChecking{innerPattern(){return HE}innerExtract(e,t){let n=t[zE].toLowerCase(),i=t[KE].toLowerCase(),s=am.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,sm.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,sm.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=$E.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};ji.default=nl});var $t=p(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.ParsingContext=Bn.Chrono=void 0;var jn=Ee(),VE=il(),$n=class{constructor(e){e=e||VE.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new $n({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new Oa(e,t,n),s=[];return this.parsers.forEach(a=>{let o=$n.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof jn.ParsingResult?c=l:l instanceof jn.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};Bn.Chrono=$n;var Oa=class{constructor(e,t,n){this.text=e,this.reference=new jn.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof jn.ParsingComponents?e:new jn.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new jn.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};Bn.ParsingContext=Oa});var un=p(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});var um=Ge(),XE=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),Da=1,lm=5,cm=2,dm=3,sl=4,al=class{constructor(e){this.groupNumberMonth=e?dm:cm,this.groupNumberDay=e?cm:dm}pattern(){return XE}extract(e,t){if(t[Da]=="/"||t[lm]=="/"){t.index+=t[0].length;return}let n=t.index+t[Da].length,i=t[0].substr(t[Da].length,t[0].length-t[Da].length-t[lm].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[sl]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[sl]){let u=parseInt(t[sl]),l=um.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=um.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};ol.default=al});var pm=p(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});var fm=He(),ZE=Ee(),QE=R(),JE=kt(),e1=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${fm.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),ul=class extends QE.AbstractParserWithWordBoundaryChecking{innerPattern(){return e1}innerExtract(e,t){let n=t[1].toLowerCase(),i=fm.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=JE.reverseTimeUnits(i);break}return ZE.ParsingComponents.createRelativeFromReference(e.reference,i)}};ll.default=ul});var mm=p(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});var t1=Ln(),cl=Ee(),r1=He(),n1=kt();function hm(r){return r.text.match(/\s+(before|from)$/i)!=null}function i1(r){return r.text.match(/\s+(after|since)$/i)!=null}var dl=class extends t1.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!hm(t)&&!i1(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=r1.parseTimeUnits(t.text);hm(t)&&(i=n1.reverseTimeUnits(i));let s=cl.ParsingComponents.createRelativeFromReference(new cl.ReferenceWithTimezone(n.start.date()),i);return new cl.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};fl.default=dl});var il=p(Me=>{"use strict";var Ue=Me&&Me.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Me,"__esModule",{value:!0});Me.createConfiguration=Me.createCasualConfiguration=Me.parseDate=Me.parse=Me.GB=Me.strict=Me.casual=void 0;var s1=Ue(hh()),a1=Ue(bh()),o1=Ue(Dh()),u1=Ue(Mh()),l1=Ue(Ph()),c1=Ue(xh()),d1=Ue(Nh()),f1=Ue(Ih()),p1=Ue(Fh()),h1=Ue(Uh()),m1=Ue(Wh()),y1=fr(),g1=Ue(Jh()),_1=Ue(em()),T1=Ue(im()),b1=Ue(om()),pl=$t(),v1=Ue(un()),E1=Ue(pm()),w1=Ue(mm());Me.casual=new pl.Chrono(ym(!1));Me.strict=new pl.Chrono(Ra(!0,!1));Me.GB=new pl.Chrono(Ra(!1,!0));function O1(r,e,t){return Me.casual.parse(r,e,t)}Me.parse=O1;function D1(r,e,t){return Me.casual.parseDate(r,e,t)}Me.parseDate=D1;function ym(r=!1){let e=Ra(!1,r);return e.parsers.unshift(new g1.default),e.parsers.unshift(new _1.default),e.parsers.unshift(new u1.default),e.parsers.unshift(new b1.default),e.parsers.unshift(new E1.default),e}Me.createCasualConfiguration=ym;function Ra(r=!0,e=!1){return y1.includeCommonConfiguration({parsers:[new v1.default(e),new s1.default,new a1.default,new o1.default,new T1.default,new l1.default,new c1.default,new d1.default(r),new f1.default(r),new p1.default(r)],refiners:[new w1.default,new m1.default,new h1.default]},r)}Me.createConfiguration=Ra});var gm=p(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});var R1=sn(),hl=class extends R1.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};ml.default=hl});var $i=p(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.parseTimeUnits=le.TIME_UNITS_PATTERN=le.parseYear=le.YEAR_PATTERN=le.parseNumberPattern=le.NUMBER_PATTERN=le.TIME_UNIT_DICTIONARY=le.INTEGER_WORD_DICTIONARY=le.MONTH_DICTIONARY=le.WEEKDAY_DICTIONARY=void 0;var yl=oe(),S1=Ge();le.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};le.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};le.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};le.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};le.NUMBER_PATTERN=`(?:${yl.matchAnyPattern(le.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function Tm(r){let e=r.toLowerCase();return le.INTEGER_WORD_DICTIONARY[e]!==void 0?le.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}le.parseNumberPattern=Tm;le.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function M1(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return S1.findMostLikelyADYear(e)}le.parseYear=M1;var bm=`(${le.NUMBER_PATTERN})\\s{0,5}(${yl.matchAnyPattern(le.TIME_UNIT_DICTIONARY)})\\s{0,5}`,_m=new RegExp(bm,"i");le.TIME_UNITS_PATTERN=yl.repeatedTimeunitPattern("",bm);function k1(r){let e={},t=r,n=_m.exec(t);for(;n;)A1(e,n),t=t.substring(n[0].length),n=_m.exec(t);return e}le.parseTimeUnits=k1;function A1(r,e){let t=Tm(e[1]),n=le.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Em=p(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});var vm=$i(),P1=oe(),x1=R(),C1=on(),N1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${P1.matchAnyPattern(vm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),I1=1,F1=3,U1=2,gl=class extends x1.AbstractParserWithWordBoundaryChecking{innerPattern(){return N1}innerExtract(e,t){let n=t[U1].toLowerCase(),i=vm.WEEKDAY_DICTIONARY[n],s=t[I1],a=t[F1],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=C1.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};_l.default=gl});var Rm=p(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});var Lr=Ne(),L1=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),q1=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),W1=2,wm=3,Om=4,Dm=5,Gn=class{pattern(e){return L1}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=Gn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=q1.exec(i);return s&&(n.end=Gn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[W1]),t[wm]!=null&&(i=parseInt(t[wm])),i>=60||n>24)return null;if(n>=12&&(s=Lr.Meridiem.PM),t[Dm]!=null){if(n>12)return null;let a=t[Dm].toLowerCase();a.match(/morgen|vormittag/)&&(s=Lr.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=Lr.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=Lr.Meridiem.AM,n=0):n<6?s=Lr.Meridiem.AM:(s=Lr.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Lr.Meridiem.AM):e.imply("meridiem",Lr.Meridiem.PM),t[Om]!=null){let a=parseInt(t[Om]);if(a>=60)return null;e.assign("second",a)}return e}};Tl.default=Gn});var Sm=p(Bi=>{"use strict";var Y1=Bi&&Bi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bi,"__esModule",{value:!0});var j1=Y1(rr()),bl=class extends j1.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};Bi.default=bl});var Mm=p(Gi=>{"use strict";var $1=Gi&&Gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gi,"__esModule",{value:!0});var B1=$1(dr()),vl=class extends B1.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};Gi.default=vl});var El=p(zi=>{"use strict";var G1=zi&&zi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zi,"__esModule",{value:!0});var H1=G1(te()),ln=Ne(),z1=R(),K1=Mt(),V1=kt(),Hi=class extends z1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=H1.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return K1.implySimilarTime(s,n),Hi.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",ln.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",ln.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",ln.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",ln.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",ln.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",ln.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=V1.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",ln.Meridiem.AM);break}return e}};zi.default=Hi});var Pm=p(Bt=>{"use strict";var X1=Bt&&Bt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Z1=Bt&&Bt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Q1=Bt&&Bt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&X1(e,r,t);return Z1(e,r),e},Am=Bt&&Bt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bt,"__esModule",{value:!0});var J1=Am(te()),ew=R(),cn=Mt(),tw=Am(El()),km=Q1(hr()),rw=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),nw=1,iw=2,wl=class extends ew.AbstractParserWithWordBoundaryChecking{innerPattern(e){return rw}innerExtract(e,t){let n=J1.default(e.refDate),i=(t[nw]||"").toLowerCase(),s=(t[iw]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=km.now(e.reference);break;case"heute":a=km.today(e.reference);break;case"morgen":cn.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),cn.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),cn.assignSimilarDate(a,n),cn.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),cn.assignSimilarDate(a,n),cn.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),cn.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=tw.default.extractTimeComponents(a,s)),a}};Bt.default=wl});var Um=p(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});var sw=Ge(),Im=$i(),Fm=$i(),aw=oe(),ow=R(),uw=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${aw.matchAnyPattern(Im.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Fm.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),xm=1,Cm=2,lw=3,Nm=4,Ol=class extends ow.AbstractParserWithWordBoundaryChecking{innerPattern(){return uw}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Im.MONTH_DICTIONARY[t[lw].toLowerCase()],s=parseInt(t[xm]);if(s>31)return t.index=t.index+t[xm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Nm]){let a=Fm.parseYear(t[Nm]);n.start.assign("year",a)}else{let a=sw.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Cm]){let a=parseInt(t[Cm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Dl.default=Ol});var Lm=p(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});var Sa=$i(),cw=Ee(),dw=R(),fw=kt(),pw=oe(),Rl=class extends dw.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${Sa.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${pw.matchAnyPattern(Sa.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?Sa.parseNumberPattern(t[2]):1,i=Sa.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=fw.reverseTimeUnits(s)),cw.ParsingComponents.createRelativeFromReference(e.reference,s)}};Sl.default=Rl});var Ym=p(Le=>{"use strict";var Gt=Le&&Le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Le,"__esModule",{value:!0});Le.createConfiguration=Le.createCasualConfiguration=Le.parseDate=Le.parse=Le.strict=Le.casual=void 0;var hw=fr(),qm=$t(),mw=Gt(un()),yw=Gt(Vu()),gw=Gt(gm()),_w=Gt(Em()),Tw=Gt(Rm()),bw=Gt(Sm()),vw=Gt(Mm()),Ew=Gt(Pm()),ww=Gt(El()),Ow=Gt(Um()),Dw=Gt(Lm());Le.casual=new qm.Chrono(Wm());Le.strict=new qm.Chrono(Ml(!0));function Rw(r,e,t){return Le.casual.parse(r,e,t)}Le.parse=Rw;function Sw(r,e,t){return Le.casual.parseDate(r,e,t)}Le.parseDate=Sw;function Wm(r=!0){let e=Ml(!1,r);return e.parsers.unshift(new ww.default),e.parsers.unshift(new Ew.default),e.parsers.unshift(new Dw.default),e}Le.createCasualConfiguration=Wm;function Ml(r=!0,e=!0){return hw.includeCommonConfiguration({parsers:[new yw.default,new mw.default(e),new gw.default,new Tw.default,new Ow.default,new _w.default],refiners:[new bw.default,new vw.default]},r)}Le.createConfiguration=Ml});var $m=p(Ht=>{"use strict";var Mw=Ht&&Ht.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),kw=Ht&&Ht.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Aw=Ht&&Ht.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Mw(e,r,t);return kw(e,r),e},Pw=Ht&&Ht.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ht,"__esModule",{value:!0});var xw=Pw(te()),Cw=Ne(),Nw=R(),jm=Mt(),Ma=Aw(hr()),kl=class extends Nw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=xw.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return Ma.now(e.reference);case"aujourd'hui":return Ma.today(e.reference);case"hier":return Ma.yesterday(e.reference);case"demain":return Ma.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(jm.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",Cw.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),jm.assignSimilarDate(s,n),s.imply("hour",0))}return s}};Ht.default=kl});var Bm=p(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});var Ki=Ne(),Iw=R(),Al=class extends Iw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",Ki.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",Ki.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",Ki.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",Ki.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",Ki.Meridiem.AM);break}return i}};Pl.default=Al});var Gm=p(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});var Fw=sn(),xl=class extends Fw.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Cl.default=xl});var Hm=p(Vi=>{"use strict";var Uw=Vi&&Vi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vi,"__esModule",{value:!0});var Lw=Uw(dr()),Nl=class extends Lw.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};Vi.default=Nl});var zm=p(Xi=>{"use strict";var qw=Xi&&Xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xi,"__esModule",{value:!0});var Ww=qw(rr()),Il=class extends Ww.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};Xi.default=Il});var qr=p(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.parseTimeUnits=re.TIME_UNITS_PATTERN=re.parseYear=re.YEAR_PATTERN=re.parseOrdinalNumberPattern=re.ORDINAL_NUMBER_PATTERN=re.parseNumberPattern=re.NUMBER_PATTERN=re.TIME_UNIT_DICTIONARY=re.INTEGER_WORD_DICTIONARY=re.MONTH_DICTIONARY=re.WEEKDAY_DICTIONARY=void 0;var Fl=oe();re.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};re.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};re.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};re.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};re.NUMBER_PATTERN=`(?:${Fl.matchAnyPattern(re.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function Vm(r){let e=r.toLowerCase();return re.INTEGER_WORD_DICTIONARY[e]!==void 0?re.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}re.parseNumberPattern=Vm;re.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function Yw(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}re.parseOrdinalNumberPattern=Yw;re.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function jw(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}re.parseYear=jw;var Xm=`(${re.NUMBER_PATTERN})\\s{0,5}(${Fl.matchAnyPattern(re.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Km=new RegExp(Xm,"i");re.TIME_UNITS_PATTERN=Fl.repeatedTimeunitPattern("",Xm);function $w(r){let e={},t=r,n=Km.exec(t);for(;n;)Bw(e,n),t=t.substring(n[0].length),n=Km.exec(t);return e}re.parseTimeUnits=$w;function Bw(r,e){let t=Vm(e[1]),n=re.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Qm=p(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});var Zm=qr(),Gw=oe(),Hw=R(),zw=on(),Kw=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${Gw.matchAnyPattern(Zm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),Vw=1,Xw=2,Ul=class extends Hw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Kw}innerExtract(e,t){let n=t[Vw].toLowerCase(),i=Zm.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[Xw];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=zw.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};Ll.default=Ul});var ry=p(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});var Zi=Ne(),Zw=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),Qw=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),Jw=2,Jm=3,ey=4,ty=5,Hn=class{pattern(e){return Zw}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=Hn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=Qw.exec(i);return s&&(n.end=Hn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[Jw]),t[Jm]!=null&&(i=parseInt(t[Jm])),i>=60||n>24)return null;if(n>=12&&(s=Zi.Meridiem.PM),t[ty]!=null){if(n>12)return null;let a=t[ty][0].toLowerCase();a=="a"&&(s=Zi.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=Zi.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Zi.Meridiem.AM):e.imply("meridiem",Zi.Meridiem.PM),t[ey]!=null){let a=parseInt(t[ey]);if(a>=60)return null;e.assign("second",a)}return e}};ql.default=Hn});var uy=p(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});var e0=Ge(),ay=qr(),oy=qr(),ka=qr(),t0=oe(),r0=R(),n0=new RegExp(`(?:on\\s*?)?(${ka.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${ka.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${t0.matchAnyPattern(ay.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${oy.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),ny=1,iy=2,i0=3,sy=4,Wl=class extends r0.AbstractParserWithWordBoundaryChecking{innerPattern(){return n0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=ay.MONTH_DICTIONARY[t[i0].toLowerCase()],s=ka.parseOrdinalNumberPattern(t[ny]);if(s>31)return t.index=t.index+t[ny].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[sy]){let a=oy.parseYear(t[sy]);n.start.assign("year",a)}else{let a=e0.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[iy]){let a=ka.parseOrdinalNumberPattern(t[iy]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Yl.default=Wl});var cy=p($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});var ly=qr(),s0=Ee(),a0=R(),o0=kt(),jl=class extends a0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${ly.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=ly.parseTimeUnits(t[1]),i=o0.reverseTimeUnits(n);return s0.ParsingComponents.createRelativeFromReference(e.reference,i)}};$l.default=jl});var fy=p(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});var dy=qr(),u0=Ee(),l0=R(),Bl=class extends l0.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${dy.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=dy.parseTimeUnits(t[1]);return u0.ParsingComponents.createRelativeFromReference(e.reference,n)}};Gl.default=Bl});var py=p(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});var Aa=qr(),c0=Ee(),d0=R(),f0=kt(),p0=oe(),Hl=class extends d0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${Aa.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${p0.matchAnyPattern(Aa.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?Aa.parseNumberPattern(t[1]):1,i=Aa.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=f0.reverseTimeUnits(s)),c0.ParsingComponents.createRelativeFromReference(e.reference,s)}};zl.default=Hl});var yy=p(qe=>{"use strict";var At=qe&&qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qe,"__esModule",{value:!0});qe.createConfiguration=qe.createCasualConfiguration=qe.parseDate=qe.parse=qe.strict=qe.casual=void 0;var h0=fr(),hy=$t(),m0=At($m()),y0=At(Bm()),g0=At(un()),_0=At(Gm()),T0=At(Hm()),b0=At(zm()),v0=At(Qm()),E0=At(ry()),w0=At(uy()),O0=At(cy()),D0=At(fy()),R0=At(py());qe.casual=new hy.Chrono(my());qe.strict=new hy.Chrono(Kl(!0));function S0(r,e,t){return qe.casual.parse(r,e,t)}qe.parse=S0;function M0(r,e,t){return qe.casual.parseDate(r,e,t)}qe.parseDate=M0;function my(r=!0){let e=Kl(!1,r);return e.parsers.unshift(new m0.default),e.parsers.unshift(new y0.default),e.parsers.unshift(new R0.default),e}qe.createCasualConfiguration=my;function Kl(r=!0,e=!0){return h0.includeCommonConfiguration({parsers:[new g0.default(e),new w0.default,new _0.default,new E0.default,new O0.default,new D0.default,new v0.default],refiners:[new T0.default,new b0.default]},r)}qe.createConfiguration=Kl});var gy=p(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.toHankaku=void 0;function k0(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,A0)}Pa.toHankaku=k0;function A0(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var Ty=p(Qi=>{"use strict";var P0=Qi&&Qi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qi,"__esModule",{value:!0});var Vl=gy(),x0=Ge(),C0=P0(te()),N0=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,_y=1,I0=2,Xl=3,F0=4,U0=5,L0=6,Zl=class{pattern(){return N0}extract(e,t){let n=parseInt(Vl.toHankaku(t[U0])),i=parseInt(Vl.toHankaku(t[L0])),s=e.createParsingComponents({day:i,month:n});if(t[_y]&&t[_y].match("\u540C|\u4ECA|\u672C")){let a=C0.default(e.refDate);s.assign("year",a.year())}if(t[I0]){let a=t[F0],o=a=="\u5143"?1:parseInt(Vl.toHankaku(a));t[Xl]=="\u4EE4\u548C"?o+=2018:t[Xl]=="\u5E73\u6210"?o+=1988:t[Xl]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=x0.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};Qi.default=Zl});var by=p(Ji=>{"use strict";var q0=Ji&&Ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ji,"__esModule",{value:!0});var W0=q0(rr()),Ql=class extends W0.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};Ji.default=Ql});var Ey=p(zt=>{"use strict";var Y0=zt&&zt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),j0=zt&&zt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),$0=zt&&zt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Y0(e,r,t);return j0(e,r),e},B0=zt&&zt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zt,"__esModule",{value:!0});var G0=B0(te()),vy=Ne(),Jl=$0(hr()),H0=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,ec=class{pattern(){return H0}extract(e,t){let n=t[0],i=G0.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return Jl.yesterday(e.reference);case"\u660E\u65E5":return Jl.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return Jl.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",vy.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",vy.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};zt.default=ec});var Dy=p(We=>{"use strict";var tc=We&&We.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(We,"__esModule",{value:!0});We.createConfiguration=We.createCasualConfiguration=We.parseDate=We.parse=We.strict=We.casual=void 0;var z0=tc(Ty()),K0=tc(by()),V0=tc(Ey()),wy=$t();We.casual=new wy.Chrono(Oy());We.strict=new wy.Chrono(rc());function X0(r,e,t){return We.casual.parse(r,e,t)}We.parse=X0;function Z0(r,e,t){return We.casual.parseDate(r,e,t)}We.parseDate=Z0;function Oy(){let r=rc();return r.parsers.unshift(new V0.default),r}We.createCasualConfiguration=Oy;function rc(){return{parsers:[new z0.default],refiners:[new K0.default]}}We.createConfiguration=rc});var xa=p(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.parseYear=ir.YEAR_PATTERN=ir.MONTH_DICTIONARY=ir.WEEKDAY_DICTIONARY=void 0;ir.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};ir.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};ir.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function Q0(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}ir.parseYear=Q0});var Sy=p(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});var Ry=xa(),J0=oe(),eO=R(),tO=on(),rO=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${J0.matchAnyPattern(Ry.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),nO=1,iO=2,sO=3,nc=class extends eO.AbstractParserWithWordBoundaryChecking{innerPattern(){return rO}innerExtract(e,t){let n=t[iO].toLowerCase(),i=Ry.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[nO],a=t[sO],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=tO.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};ic.default=nc});var My=p(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});var aO=sn(),sc=class extends aO.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};ac.default=sc});var ky=p(es=>{"use strict";var oO=es&&es.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(es,"__esModule",{value:!0});var uO=oO(dr()),oc=class extends uO.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};es.default=oc});var Ay=p(ts=>{"use strict";var lO=ts&&ts.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ts,"__esModule",{value:!0});var cO=lO(rr()),uc=class extends cO.default{patternBetween(){return/^\s*(?:-)\s*$/i}};ts.default=uc});var Fy=p(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});var dO=Ge(),Ny=xa(),Iy=xa(),fO=oe(),pO=R(),hO=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${fO.matchAnyPattern(Ny.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${Iy.YEAR_PATTERN}))?(?=\\W|$)`,"i"),Py=1,xy=2,mO=3,Cy=4,lc=class extends pO.AbstractParserWithWordBoundaryChecking{innerPattern(){return hO}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Ny.MONTH_DICTIONARY[t[mO].toLowerCase()],s=parseInt(t[Py]);if(s>31)return t.index=t.index+t[Py].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Cy]){let a=Iy.parseYear(t[Cy]);n.start.assign("year",a)}else{let a=dO.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[xy]){let a=parseInt(t[xy]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};cc.default=lc});var Uy=p(mr=>{"use strict";var yO=mr&&mr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),gO=mr&&mr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),_O=mr&&mr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&yO(e,r,t);return gO(e,r),e};Object.defineProperty(mr,"__esModule",{value:!0});var TO=R(),Ca=_O(hr()),dc=class extends TO.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return Ca.now(e.reference);case"hoje":return Ca.today(e.reference);case"amanha":case"amanh\xE3":return Ca.tomorrow(e.reference);case"ontem":return Ca.yesterday(e.reference)}return i}};mr.default=dc});var Ly=p(rs=>{"use strict";var bO=rs&&rs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rs,"__esModule",{value:!0});var Na=Ne(),vO=R(),EO=Mt(),wO=bO(te()),fc=class extends vO.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=wO.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",Na.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",Na.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",Na.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":EO.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",Na.Meridiem.AM),i.imply("hour",12);break}return i}};rs.default=fc});var Yy=p(Ye=>{"use strict";var Wr=Ye&&Ye.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.createConfiguration=Ye.createCasualConfiguration=Ye.parseDate=Ye.parse=Ye.strict=Ye.casual=void 0;var OO=fr(),qy=$t(),DO=Wr(un()),RO=Wr(Sy()),SO=Wr(My()),MO=Wr(ky()),kO=Wr(Ay()),AO=Wr(Fy()),PO=Wr(Uy()),xO=Wr(Ly());Ye.casual=new qy.Chrono(Wy());Ye.strict=new qy.Chrono(pc(!0));function CO(r,e,t){return Ye.casual.parse(r,e,t)}Ye.parse=CO;function NO(r,e,t){return Ye.casual.parseDate(r,e,t)}Ye.parseDate=NO;function Wy(r=!0){let e=pc(!1,r);return e.parsers.push(new PO.default),e.parsers.push(new xO.default),e}Ye.createCasualConfiguration=Wy;function pc(r=!0,e=!0){return OO.includeCommonConfiguration({parsers:[new DO.default(e),new RO.default,new SO.default,new AO.default],refiners:[new MO.default,new kO.default]},r)}Ye.createConfiguration=pc});var jy=p(ns=>{"use strict";var IO=ns&&ns.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ns,"__esModule",{value:!0});var FO=IO(rr()),hc=class extends FO.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};ns.default=hc});var $y=p(is=>{"use strict";var UO=is&&is.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(is,"__esModule",{value:!0});var LO=UO(dr()),mc=class extends LO.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};is.default=mc});var By=p(yr=>{"use strict";var qO=yr&&yr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),WO=yr&&yr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),YO=yr&&yr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&qO(e,r,t);return WO(e,r),e};Object.defineProperty(yr,"__esModule",{value:!0});var jO=R(),Ia=YO(hr()),yc=class extends jO.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return Ia.now(e.reference);case"vandaag":return Ia.today(e.reference);case"morgen":case"morgend":return Ia.tomorrow(e.reference);case"gisteren":return Ia.yesterday(e.reference)}return i}};yr.default=yc});var Gy=p(ss=>{"use strict";var $O=ss&&ss.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ss,"__esModule",{value:!0});var Fa=Ne(),BO=R(),GO=$O(te()),HO=Mt(),zO=1,KO=2,gc=class extends BO.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=GO.default(e.refDate),i=e.createParsingComponents();switch(t[zO]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[KO].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",Fa.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",Fa.Meridiem.PM),i.imply("hour",20);break;case"middernacht":HO.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",Fa.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",Fa.Meridiem.AM),i.imply("hour",12);break}return i}};ss.default=gc});var yt=p(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.parseTimeUnits=z.TIME_UNITS_PATTERN=z.parseYear=z.YEAR_PATTERN=z.parseOrdinalNumberPattern=z.ORDINAL_NUMBER_PATTERN=z.parseNumberPattern=z.NUMBER_PATTERN=z.TIME_UNIT_DICTIONARY=z.ORDINAL_WORD_DICTIONARY=z.INTEGER_WORD_DICTIONARY=z.MONTH_DICTIONARY=z.WEEKDAY_DICTIONARY=void 0;var Ua=oe(),VO=Ge();z.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};z.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};z.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};z.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};z.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};z.NUMBER_PATTERN=`(?:${Ua.matchAnyPattern(z.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function zy(r){let e=r.toLowerCase();return z.INTEGER_WORD_DICTIONARY[e]!==void 0?z.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}z.parseNumberPattern=zy;z.ORDINAL_NUMBER_PATTERN=`(?:${Ua.matchAnyPattern(z.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function XO(r){let e=r.toLowerCase();return z.ORDINAL_WORD_DICTIONARY[e]!==void 0?z.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}z.parseOrdinalNumberPattern=XO;z.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function ZO(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return VO.findMostLikelyADYear(e)}z.parseYear=ZO;var Ky=`(${z.NUMBER_PATTERN})\\s{0,5}(${Ua.matchAnyPattern(z.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Hy=new RegExp(Ky,"i");z.TIME_UNITS_PATTERN=Ua.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",Ky);function QO(r){let e={},t=r,n=Hy.exec(t);for(;n;)JO(e,n),t=t.substring(n[0].length),n=Hy.exec(t);return e}z.parseTimeUnits=QO;function JO(r,e){let t=zy(e[1]),n=z.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Xy=p(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});var Vy=yt(),eD=Ee(),tD=R(),_c=class extends tD.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+Vy.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=Vy.parseTimeUnits(t[1]);return eD.ParsingComponents.createRelativeFromReference(e.reference,n)}};Tc.default=_c});var Qy=p(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});var Zy=yt(),rD=oe(),nD=R(),iD=on(),sD=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${rD.matchAnyPattern(Zy.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),aD=1,oD=2,uD=3,bc=class extends nD.AbstractParserWithWordBoundaryChecking{innerPattern(){return sD}innerExtract(e,t){let n=t[oD].toLowerCase(),i=Zy.WEEKDAY_DICTIONARY[n],s=t[aD],a=t[uD],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=iD.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};vc.default=bc});var ig=p(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});var lD=Ge(),rg=yt(),La=yt(),ng=yt(),cD=oe(),dD=R(),fD=new RegExp(`(?:on\\s*?)?(${La.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${La.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+cD.matchAnyPattern(rg.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${ng.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),pD=3,Jy=1,eg=2,tg=4,Ec=class extends dD.AbstractParserWithWordBoundaryChecking{innerPattern(){return fD}innerExtract(e,t){let n=rg.MONTH_DICTIONARY[t[pD].toLowerCase()],i=La.parseOrdinalNumberPattern(t[Jy]);if(i>31)return t.index=t.index+t[Jy].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[tg]){let u=ng.parseYear(t[tg]);s.assign("year",u)}else{let u=lD.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[eg])return s;let a=La.parseOrdinalNumberPattern(t[eg]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};wc.default=Ec});var ug=p(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});var ag=yt(),hD=Ge(),mD=oe(),og=yt(),yD=R(),gD=new RegExp(`(${mD.matchAnyPattern(ag.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${og.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),_D=1,sg=2,Oc=class extends yD.AbstractParserWithWordBoundaryChecking{innerPattern(){return gD}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[_D],s=ag.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[sg]){let a=og.parseYear(t[sg]);n.assign("year",a)}else{let a=hD.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};Dc.default=Oc});var lg=p(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});var TD=R(),bD=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),vD=1,ED=2,Rc=class extends TD.AbstractParserWithWordBoundaryChecking{innerPattern(){return bD}innerExtract(e,t){let n=parseInt(t[ED]),i=parseInt(t[vD]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Sc.default=Rc});var cg=p(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});var wD=sn(),Mc=class extends wD.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};kc.default=Mc});var pg=p(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});var fg=yt(),OD=oe(),DD=R(),RD=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${OD.matchAnyPattern(fg.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),SD=1,MD=2,dg=3,kD=4,Ac=class extends DD.AbstractParserWithWordBoundaryChecking{innerPattern(){return RD}innerExtract(e,t){let n=t[dg]?parseInt(t[dg]):fg.MONTH_DICTIONARY[t[MD].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[SD]);return{day:parseInt(t[kD]),month:n,year:i}}};Pc.default=Ac});var hg=p(as=>{"use strict";var AD=as&&as.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(as,"__esModule",{value:!0});var PD=R(),qa=Ne(),xc=Mt(),xD=AD(te()),CD=1,ND=2,Cc=class extends PD.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[CD].toLowerCase(),i=t[ND].toLowerCase(),s=e.createParsingComponents(),a=xD.default(e.refDate);switch(n){case"gisteren":xc.assignSimilarDate(s,a.add(-1,"day"));break;case"van":xc.assignSimilarDate(s,a);break;case"morgen":xc.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",qa.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",qa.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",qa.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",qa.Meridiem.PM),s.imply("hour",20);break}return s}};as.default=Cc});var yg=p(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});var mg=yt(),ID=Ee(),FD=R(),UD=kt(),LD=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${mg.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Nc=class extends FD.AbstractParserWithWordBoundaryChecking{innerPattern(){return LD}innerExtract(e,t){let n=t[1].toLowerCase(),i=mg.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=UD.reverseTimeUnits(i);break}return ID.ParsingComponents.createRelativeFromReference(e.reference,i)}};Ic.default=Nc});var Tg=p(os=>{"use strict";var qD=os&&os.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(os,"__esModule",{value:!0});var _g=yt(),gg=Ee(),WD=qD(te()),YD=R(),jD=oe(),$D=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${jD.matchAnyPattern(_g.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),BD=1,GD=2,Fc=class extends YD.AbstractParserWithWordBoundaryChecking{innerPattern(){return $D}innerExtract(e,t){let n=t[BD].toLowerCase(),i=t[GD].toLowerCase(),s=_g.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,gg.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,gg.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=WD.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};os.default=Fc});var bg=p(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});var Lc=yt(),HD=Ee(),zD=R(),KD=kt(),VD=new RegExp("("+Lc.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),XD=new RegExp("("+Lc.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),Uc=class extends zD.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?XD:VD}innerExtract(e,t){let n=Lc.parseTimeUnits(t[1]),i=KD.reverseTimeUnits(n);return HD.ParsingComponents.createRelativeFromReference(e.reference,i)}};qc.default=Uc});var vg=p(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});var Yc=yt(),ZD=Ee(),QD=R(),JD=new RegExp("("+Yc.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),eR=new RegExp("("+Yc.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),tR=1,Wc=class extends QD.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?eR:JD}innerExtract(e,t){let n=Yc.parseTimeUnits(t[tR]);return ZD.ParsingComponents.createRelativeFromReference(e.reference,n)}};jc.default=Wc});var Dg=p(je=>{"use strict";var ze=je&&je.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(je,"__esModule",{value:!0});je.createConfiguration=je.createCasualConfiguration=je.parseDate=je.parse=je.strict=je.casual=void 0;var rR=fr(),Eg=$t(),nR=ze(jy()),iR=ze($y()),sR=ze(By()),aR=ze(Gy()),oR=ze(un()),uR=ze(Xy()),lR=ze(Qy()),cR=ze(ig()),wg=ze(ug()),dR=ze(lg()),fR=ze(cg()),pR=ze(pg()),hR=ze(hg()),mR=ze(yg()),yR=ze(Tg()),gR=ze(bg()),_R=ze(vg());je.casual=new Eg.Chrono(Og());je.strict=new Eg.Chrono($c(!0));function TR(r,e,t){return je.casual.parse(r,e,t)}je.parse=TR;function bR(r,e,t){return je.casual.parseDate(r,e,t)}je.parseDate=bR;function Og(r=!0){let e=$c(!1,r);return e.parsers.unshift(new sR.default),e.parsers.unshift(new aR.default),e.parsers.unshift(new hR.default),e.parsers.unshift(new wg.default),e.parsers.unshift(new yR.default),e.parsers.unshift(new mR.default),e}je.createCasualConfiguration=Og;function $c(r=!0,e=!0){return rR.includeCommonConfiguration({parsers:[new oR.default(e),new uR.default,new cR.default,new wg.default,new lR.default,new pR.default,new dR.default,new fR.default(r),new gR.default(r),new _R.default(r)],refiners:[new iR.default,new nR.default]},r)}je.createConfiguration=$c});var kg=p(us=>{"use strict";var vR=us&&us.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(us,"__esModule",{value:!0});var ER=vR(te()),wR=R(),OR=1,Rg=2,DR=3,Sg=4,Mg=5,RR=6,Bc=class extends wR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=ER.default(e.refDate),a=s;if(t[OR])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[Rg]){let o=t[Rg],u=t[DR];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[Sg]){let u=t[Sg][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[Mg]){let o=t[Mg];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[RR];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};us.default=Bc});var zn=p(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.zhStringToYear=ot.zhStringToNumber=ot.WEEKDAY_OFFSET=ot.NUMBER=void 0;ot.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};ot.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function SR(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?ot.NUMBER[n]:e*ot.NUMBER[n]:e+=ot.NUMBER[n]}return e}ot.zhStringToNumber=SR;function MR(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+ot.NUMBER[n]}return parseInt(e)}ot.zhStringToYear=MR});var Pg=p(ls=>{"use strict";var kR=ls&&ls.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ls,"__esModule",{value:!0});var AR=kR(te()),PR=R(),dn=zn(),Gc=1,Ag=2,Hc=3,zc=class extends PR.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(dn.NUMBER).join("")+"]{4}|["+Object.keys(dn.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(dn.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(dn.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=AR.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[Ag]);if(isNaN(s)&&(s=dn.zhStringToNumber(t[Ag])),i.start.assign("month",s),t[Hc]){let a=parseInt(t[Hc]);isNaN(a)&&(a=dn.zhStringToNumber(t[Hc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[Gc]){let a=parseInt(t[Gc]);isNaN(a)&&(a=dn.zhStringToYear(t[Gc])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};ls.default=zc});var Cg=p(cs=>{"use strict";var xR=cs&&cs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(cs,"__esModule",{value:!0});var CR=xR(te()),NR=R(),xg=zn(),IR=new RegExp("(\\d+|["+Object.keys(xg.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),Kc=1,FR=2,Vc=class extends NR.AbstractParserWithWordBoundaryChecking{innerPattern(){return IR}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[Kc]);if(isNaN(i)&&(i=xg.zhStringToNumber(t[Kc])),isNaN(i)){let u=t[Kc];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=CR.default(e.refDate),o=t[FR][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};cs.default=Vc});var Ig=p(ds=>{"use strict";var UR=ds&&ds.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ds,"__esModule",{value:!0});var LR=UR(te()),qR=R(),Ng=zn(),WR=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(Ng.WEEKDAY_OFFSET).join("|")+")"),Xc=class extends qR.AbstractParserWithWordBoundaryChecking{innerPattern(){return WR}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Ng.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=LR.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};ds.default=Xc});var Fg=p(fs=>{"use strict";var YR=fs&&fs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fs,"__esModule",{value:!0});var jR=YR(te()),$R=R(),xt=zn(),BR=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(xt.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(xt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(xt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),GR=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(xt.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(xt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(xt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),Wa=1,Ya=2,ja=3,$a=4,Ba=5,Ga=6,Pt=7,Kn=8,Ha=9,Zc=class extends $R.AbstractParserWithWordBoundaryChecking{innerPattern(){return BR}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=jR.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[Wa]){var a=t[Wa];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[$a]){var o=t[$a];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[Kn]){var d=parseInt(t[Kn]);if(isNaN(d)&&(d=xt.zhStringToNumber(t[Kn])),d>=60)return null;i.start.assign("second",d)}if(u=parseInt(t[Ga]),isNaN(u)&&(u=xt.zhStringToNumber(t[Ga])),t[Pt]?t[Pt]=="\u534A"?l=30:t[Pt]=="\u6B63"||t[Pt]=="\u6574"?l=0:(l=parseInt(t[Pt]),isNaN(l)&&(l=xt.zhStringToNumber(t[Pt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[Ha]){if(u>12)return null;var f=t[Ha][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12))}else if(t[Ya]){var h=t[Ya],y=h[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[ja]){var m=t[ja],g=m[0];g=="\u4E0A"||g=="\u671D"||g=="\u65E9"||g=="\u51CC"?(c=0,u==12&&(u=0)):(g=="\u4E0B"||g=="\u664F"||g=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[Ba]){var O=t[Ba],w=O[0];w=="\u4E0A"||w=="\u671D"||w=="\u65E9"||w=="\u51CC"?(c=0,u==12&&(u=0)):(w=="\u4E0B"||w=="\u664F"||w=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=GR.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let P=s.clone();if(i.end=e.createParsingComponents(),t[Wa]){var a=t[Wa];a=="\u660E"||a=="\u807D"?n.hour()>1&&P.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?P.add(-1,"day"):a=="\u524D"?P.add(-2,"day"):a=="\u5927\u524D"?P.add(-3,"day"):a=="\u5F8C"?P.add(2,"day"):a=="\u5927\u5F8C"&&P.add(3,"day"),i.end.assign("day",P.date()),i.end.assign("month",P.month()+1),i.end.assign("year",P.year())}else if(t[$a]){var o=t[$a];o=="\u660E"||o=="\u807D"?P.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?P.add(-1,"day"):o=="\u524D"?P.add(-2,"day"):o=="\u5927\u524D"?P.add(-3,"day"):o=="\u5F8C"?P.add(2,"day"):o=="\u5927\u5F8C"&&P.add(3,"day"),i.end.assign("day",P.date()),i.end.assign("month",P.month()+1),i.end.assign("year",P.year())}else i.end.imply("day",P.date()),i.end.imply("month",P.month()+1),i.end.imply("year",P.year());if(u=0,l=0,c=-1,t[Kn]){var d=parseInt(t[Kn]);if(isNaN(d)&&(d=xt.zhStringToNumber(t[Kn])),d>=60)return null;i.end.assign("second",d)}if(u=parseInt(t[Ga]),isNaN(u)&&(u=xt.zhStringToNumber(t[Ga])),t[Pt]?t[Pt]=="\u534A"?l=30:t[Pt]=="\u6B63"||t[Pt]=="\u6574"?l=0:(l=parseInt(t[Pt]),isNaN(l)&&(l=xt.zhStringToNumber(t[Pt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[Ha]){if(u>12)return null;var f=t[Ha][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[Ya]){var h=t[Ya],y=h[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[ja]){var m=t[ja],g=m[0];g=="\u4E0A"||g=="\u671D"||g=="\u65E9"||g=="\u51CC"?(c=0,u==12&&(u=0)):(g=="\u4E0B"||g=="\u664F"||g=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[Ba]){var O=t[Ba],w=O[0];w=="\u4E0A"||w=="\u671D"||w=="\u65E9"||w=="\u51CC"?(c=0,u==12&&(u=0)):(w=="\u4E0B"||w=="\u664F"||w=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};fs.default=Zc});var Lg=p(ps=>{"use strict";var HR=ps&&ps.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ps,"__esModule",{value:!0});var zR=HR(te()),KR=R(),Ug=zn(),VR=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(Ug.WEEKDAY_OFFSET).join("|")+")"),Qc=class extends KR.AbstractParserWithWordBoundaryChecking{innerPattern(){return VR}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Ug.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=zR.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};ps.default=Qc});var qg=p(hs=>{"use strict";var XR=hs&&hs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hs,"__esModule",{value:!0});var ZR=XR(rr()),Jc=class extends ZR.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};hs.default=Jc});var Wg=p(ms=>{"use strict";var QR=ms&&ms.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ms,"__esModule",{value:!0});var JR=QR(dr()),ed=class extends JR.default{patternBetween(){return/^\s*$/i}};ms.default=ed});var Yg=p(ke=>{"use strict";var gr=ke&&ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ke,"__esModule",{value:!0});ke.createConfiguration=ke.createCasualConfiguration=ke.parseDate=ke.parse=ke.strict=ke.casual=ke.hant=void 0;var td=$t(),eS=gr(Ea()),tS=fr(),rS=gr(kg()),nS=gr(Pg()),iS=gr(Cg()),sS=gr(Ig()),aS=gr(Fg()),oS=gr(Lg()),uS=gr(qg()),lS=gr(Wg());ke.hant=new td.Chrono(rd());ke.casual=new td.Chrono(rd());ke.strict=new td.Chrono(nd());function cS(r,e,t){return ke.casual.parse(r,e,t)}ke.parse=cS;function dS(r,e,t){return ke.casual.parseDate(r,e,t)}ke.parseDate=dS;function rd(){let r=nd();return r.parsers.unshift(new rS.default),r}ke.createCasualConfiguration=rd;function nd(){let r=tS.includeCommonConfiguration({parsers:[new nS.default,new sS.default,new oS.default,new aS.default,new iS.default],refiners:[new uS.default,new lS.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof eS.default)),r}ke.createConfiguration=nd});var Gg=p(ys=>{"use strict";var fS=ys&&ys.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ys,"__esModule",{value:!0});var pS=fS(te()),hS=R(),mS=1,jg=2,yS=3,$g=4,Bg=5,gS=6,id=class extends hS.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=pS.default(e.refDate),a=s;if(t[mS])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[jg]){let o=t[jg],u=t[yS];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[$g]){let u=t[$g][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[Bg]){let o=t[Bg];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[gS];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};ys.default=id});var Vn=p(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.zhStringToYear=ut.zhStringToNumber=ut.WEEKDAY_OFFSET=ut.NUMBER=void 0;ut.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};ut.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function _S(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?ut.NUMBER[n]:e*ut.NUMBER[n]:e+=ut.NUMBER[n]}return e}ut.zhStringToNumber=_S;function TS(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+ut.NUMBER[n]}return parseInt(e)}ut.zhStringToYear=TS});var zg=p(gs=>{"use strict";var bS=gs&&gs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gs,"__esModule",{value:!0});var vS=bS(te()),ES=R(),fn=Vn(),sd=1,Hg=2,ad=3,od=class extends ES.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(fn.NUMBER).join("")+"]{4}|["+Object.keys(fn.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(fn.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(fn.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=vS.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[Hg]);if(isNaN(s)&&(s=fn.zhStringToNumber(t[Hg])),i.start.assign("month",s),t[ad]){let a=parseInt(t[ad]);isNaN(a)&&(a=fn.zhStringToNumber(t[ad])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[sd]){let a=parseInt(t[sd]);isNaN(a)&&(a=fn.zhStringToYear(t[sd])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};gs.default=od});var Vg=p(_s=>{"use strict";var wS=_s&&_s.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_s,"__esModule",{value:!0});var OS=wS(te()),DS=R(),Kg=Vn(),RS=new RegExp("(\\d+|["+Object.keys(Kg.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),ud=1,SS=2,ld=class extends DS.AbstractParserWithWordBoundaryChecking{innerPattern(){return RS}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[ud]);if(isNaN(i)&&(i=Kg.zhStringToNumber(t[ud])),isNaN(i)){let u=t[ud];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=OS.default(e.refDate),o=t[SS][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};_s.default=ld});var Zg=p(Ts=>{"use strict";var MS=Ts&&Ts.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ts,"__esModule",{value:!0});var kS=MS(te()),AS=R(),Xg=Vn(),PS=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(Xg.WEEKDAY_OFFSET).join("|")+")"),cd=class extends AS.AbstractParserWithWordBoundaryChecking{innerPattern(){return PS}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Xg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=kS.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Ts.default=cd});var Qg=p(bs=>{"use strict";var xS=bs&&bs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bs,"__esModule",{value:!0});var CS=xS(te()),NS=R(),Nt=Vn(),IS=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Nt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Nt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Nt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),FS=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Nt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Nt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Nt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),za=1,Ka=2,Va=3,Xa=4,Za=5,Qa=6,Ct=7,Xn=8,Ja=9,dd=class extends NS.AbstractParserWithWordBoundaryChecking{innerPattern(){return IS}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=CS.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[za]){let c=t[za];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[Xa]){let c=t[Xa];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[Xn]){let c=parseInt(t[Xn]);if(isNaN(c)&&(c=Nt.zhStringToNumber(t[Xn])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[Qa]),isNaN(a)&&(a=Nt.zhStringToNumber(t[Qa])),t[Ct]?t[Ct]=="\u534A"?o=30:t[Ct]=="\u6B63"||t[Ct]=="\u6574"?o=0:(o=parseInt(t[Ct]),isNaN(o)&&(o=Nt.zhStringToNumber(t[Ct]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[Ja]){if(a>12)return null;let c=t[Ja][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[Ka]){let d=t[Ka][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[Va]){let d=t[Va][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[Za]){let d=t[Za][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=FS.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[za]){let c=t[za];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[Xa]){let c=t[Xa];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[Xn]){let c=parseInt(t[Xn]);if(isNaN(c)&&(c=Nt.zhStringToNumber(t[Xn])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[Qa]),isNaN(a)&&(a=Nt.zhStringToNumber(t[Qa])),t[Ct]?t[Ct]=="\u534A"?o=30:t[Ct]=="\u6B63"||t[Ct]=="\u6574"?o=0:(o=parseInt(t[Ct]),isNaN(o)&&(o=Nt.zhStringToNumber(t[Ct]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[Ja]){if(a>12)return null;let c=t[Ja][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[Ka]){let d=t[Ka][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[Va]){let d=t[Va][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[Za]){let d=t[Za][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};bs.default=dd});var e_=p(vs=>{"use strict";var US=vs&&vs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vs,"__esModule",{value:!0});var LS=US(te()),qS=R(),Jg=Vn(),WS=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(Jg.WEEKDAY_OFFSET).join("|")+")"),fd=class extends qS.AbstractParserWithWordBoundaryChecking{innerPattern(){return WS}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Jg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=LS.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};vs.default=fd});var t_=p(Es=>{"use strict";var YS=Es&&Es.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Es,"__esModule",{value:!0});var jS=YS(rr()),pd=class extends jS.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};Es.default=pd});var r_=p(ws=>{"use strict";var $S=ws&&ws.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ws,"__esModule",{value:!0});var BS=$S(dr()),hd=class extends BS.default{patternBetween(){return/^\s*$/i}};ws.default=hd});var n_=p(Ae=>{"use strict";var _r=Ae&&Ae.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.createConfiguration=Ae.createCasualConfiguration=Ae.parseDate=Ae.parse=Ae.strict=Ae.casual=Ae.hans=void 0;var md=$t(),GS=_r(Ea()),HS=fr(),zS=_r(Gg()),KS=_r(zg()),VS=_r(Vg()),XS=_r(Zg()),ZS=_r(Qg()),QS=_r(e_()),JS=_r(t_()),eM=_r(r_());Ae.hans=new md.Chrono(yd());Ae.casual=new md.Chrono(yd());Ae.strict=new md.Chrono(gd());function tM(r,e,t){return Ae.casual.parse(r,e,t)}Ae.parse=tM;function rM(r,e,t){return Ae.casual.parseDate(r,e,t)}Ae.parseDate=rM;function yd(){let r=gd();return r.parsers.unshift(new zS.default),r}Ae.createCasualConfiguration=yd;function gd(){let r=HS.includeCommonConfiguration({parsers:[new KS.default,new XS.default,new QS.default,new ZS.default,new VS.default],refiners:[new JS.default,new eM.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof GS.default)),r}Ae.createConfiguration=gd});var s_=p(gt=>{"use strict";var i_=gt&&gt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),nM=gt&&gt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),iM=gt&&gt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&i_(e,r,t)},sM=gt&&gt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&i_(e,r,t);return nM(e,r),e};Object.defineProperty(gt,"__esModule",{value:!0});gt.hans=void 0;iM(Yg(),gt);gt.hans=sM(n_())});var lt=p(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.parseTimeUnits=Y.TIME_UNITS_PATTERN=Y.parseYear=Y.YEAR_PATTERN=Y.parseOrdinalNumberPattern=Y.ORDINAL_NUMBER_PATTERN=Y.parseNumberPattern=Y.NUMBER_PATTERN=Y.TIME_UNIT_DICTIONARY=Y.ORDINAL_WORD_DICTIONARY=Y.INTEGER_WORD_DICTIONARY=Y.MONTH_DICTIONARY=Y.FULL_MONTH_NAME_DICTIONARY=Y.WEEKDAY_DICTIONARY=Y.REGEX_PARTS=void 0;var eo=oe(),aM=Ge();Y.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};Y.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};Y.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};Y.MONTH_DICTIONARY=Object.assign(Object.assign({},Y.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});Y.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};Y.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};Y.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};Y.NUMBER_PATTERN=`(?:${eo.matchAnyPattern(Y.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function o_(r){let e=r.toLowerCase();return Y.INTEGER_WORD_DICTIONARY[e]!==void 0?Y.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}Y.parseNumberPattern=o_;Y.ORDINAL_NUMBER_PATTERN=`(?:${eo.matchAnyPattern(Y.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function oM(r){let e=r.toLowerCase();return Y.ORDINAL_WORD_DICTIONARY[e]!==void 0?Y.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}Y.parseOrdinalNumberPattern=oM;var _d="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";Y.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${_d}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${_d}|[5-9][0-9]${_d})`;function uM(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return aM.findMostLikelyADYear(e)}Y.parseYear=uM;var u_=`(${Y.NUMBER_PATTERN})\\s{0,3}(${eo.matchAnyPattern(Y.TIME_UNIT_DICTIONARY)})`,a_=new RegExp(u_,"i");Y.TIME_UNITS_PATTERN=eo.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",u_);function lM(r){let e={},t=r,n=a_.exec(t);for(;n;)cM(e,n),t=t.substring(n[0].length).trim(),n=a_.exec(t);return e}Y.parseTimeUnits=lM;function cM(r,e){let t=o_(e[1]),n=Y.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var c_=p(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});var Os=lt(),dM=Ee(),fM=R(),l_=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${Os.TIME_UNITS_PATTERN})${Os.REGEX_PARTS.rightBoundary}`,pM=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${l_}`,Os.REGEX_PARTS.flags),hM=new RegExp(l_,"i"),Td=class extends fM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Os.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?hM:pM}innerExtract(e,t){let n=Os.parseTimeUnits(t[1]);return dM.ParsingComponents.createRelativeFromReference(e.reference,n)}};bd.default=Td});var m_=p(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});var mM=Ge(),Ds=lt(),h_=lt(),to=lt(),yM=oe(),gM=R(),_M=new RegExp(`(?:\u0441)?\\s*(${to.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${to.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${yM.matchAnyPattern(Ds.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${h_.YEAR_PATTERN}(?![^\\s]\\d)))?${Ds.REGEX_PARTS.rightBoundary}`,Ds.REGEX_PARTS.flags),d_=1,f_=2,TM=3,p_=4,vd=class extends gM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ds.REGEX_PARTS.leftBoundary}innerPattern(){return _M}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Ds.MONTH_DICTIONARY[t[TM].toLowerCase()],s=to.parseOrdinalNumberPattern(t[d_]);if(s>31)return t.index=t.index+t[d_].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[p_]){let a=h_.parseYear(t[p_]);n.start.assign("year",a)}else{let a=mM.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[f_]){let a=to.parseOrdinalNumberPattern(t[f_]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Ed.default=vd});var __=p(Od=>{"use strict";Object.defineProperty(Od,"__esModule",{value:!0});var Rs=lt(),bM=Ge(),vM=oe(),g_=lt(),EM=R(),wM=new RegExp(`((?:\u0432)\\s*)?(${vM.matchAnyPattern(Rs.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${g_.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,Rs.REGEX_PARTS.flags),OM=2,y_=3,wd=class extends EM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Rs.REGEX_PARTS.leftBoundary}innerPattern(){return wM}innerExtract(e,t){let n=t[OM].toLowerCase();if(t[0].length<=3&&!Rs.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=Rs.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[y_]){let a=g_.parseYear(t[y_]);i.start.assign("year",a)}else{let a=bM.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Od.default=wd});var b_=p(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});var ro=Ne(),DM=sn(),T_=lt(),Dd=class extends DM.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return T_.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${T_.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",ro.Meridiem.PM)):i<6&&n.assign("meridiem",ro.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",ro.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",ro.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Rd.default=Dd});var v_=p(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});var no=lt(),RM=Ee(),SM=R(),MM=kt(),kM=new RegExp(`(${no.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,no.REGEX_PARTS.flags),Sd=class extends SM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return no.REGEX_PARTS.leftBoundary}innerPattern(){return kM}innerExtract(e,t){let n=no.parseTimeUnits(t[1]),i=MM.reverseTimeUnits(n);return RM.ParsingComponents.createRelativeFromReference(e.reference,i)}};Md.default=Sd});var E_=p(Ss=>{"use strict";var AM=Ss&&Ss.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ss,"__esModule",{value:!0});var PM=AM(rr()),kd=class extends PM.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};Ss.default=kd});var w_=p(Ms=>{"use strict";var xM=Ms&&Ms.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ms,"__esModule",{value:!0});var CM=xM(dr()),Ad=class extends CM.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};Ms.default=Ad});var O_=p(Tr=>{"use strict";var NM=Tr&&Tr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),IM=Tr&&Tr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),FM=Tr&&Tr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&NM(e,r,t);return IM(e,r),e};Object.defineProperty(Tr,"__esModule",{value:!0});var UM=R(),ks=FM(hr()),Pd=lt(),LM=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${Pd.REGEX_PARTS.rightBoundary}`,Pd.REGEX_PARTS.flags),xd=class extends UM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Pd.REGEX_PARTS.leftBoundary}innerPattern(e){return LM}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return ks.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return ks.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return ks.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return ks.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return ks.theDayBefore(e.reference,2)}return i}};Tr.default=xd});var D_=p(Kt=>{"use strict";var qM=Kt&&Kt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),WM=Kt&&Kt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),YM=Kt&&Kt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&qM(e,r,t);return WM(e,r),e},jM=Kt&&Kt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Kt,"__esModule",{value:!0});var $M=R(),pn=YM(hr()),BM=Mt(),GM=jM(te()),Cd=lt(),HM=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${Cd.REGEX_PARTS.rightBoundary}`,Cd.REGEX_PARTS.flags),Nd=class extends $M.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Cd.REGEX_PARTS.leftBoundary}innerPattern(){return HM}innerExtract(e,t){let n=GM.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return pn.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return pn.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return pn.morning(e.reference);if(i.match(/в\s*полдень/))return pn.noon(e.reference);if(i.match(/прошлой\s*ночью/))return pn.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return pn.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),BM.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?pn.midnight(e.reference):s}};Kt.default=Nd});var R_=p(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});var As=lt(),zM=oe(),KM=R(),VM=on(),XM=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${zM.matchAnyPattern(As.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${As.REGEX_PARTS.rightBoundary}`,As.REGEX_PARTS.flags),ZM=1,QM=2,JM=3,Id=class extends KM.AbstractParserWithWordBoundaryChecking{innerPattern(){return XM}patternLeftBoundary(){return As.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[QM].toLowerCase(),i=As.WEEKDAY_DICTIONARY[n],s=t[ZM],a=t[JM],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=VM.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Fd.default=Id});var M_=p(xs=>{"use strict";var ek=xs&&xs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xs,"__esModule",{value:!0});var Ps=lt(),S_=Ee(),tk=ek(te()),rk=R(),nk=oe(),ik=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${nk.matchAnyPattern(Ps.TIME_UNIT_DICTIONARY)})(?=\\s*)${Ps.REGEX_PARTS.rightBoundary}`,Ps.REGEX_PARTS.flags),sk=1,ak=2,Ud=class extends rk.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ps.REGEX_PARTS.leftBoundary}innerPattern(){return ik}innerExtract(e,t){let n=t[sk].toLowerCase(),i=t[ak].toLowerCase(),s=Ps.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,S_.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,S_.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=tk.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};xs.default=Ud});var k_=p(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});var Cs=lt(),ok=Ee(),uk=R(),lk=kt(),ck=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${Cs.TIME_UNITS_PATTERN})${Cs.REGEX_PARTS.rightBoundary}`,Cs.REGEX_PARTS.flags),Ld=class extends uk.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Cs.REGEX_PARTS.leftBoundary}innerPattern(){return ck}innerExtract(e,t){let n=t[1].toLowerCase(),i=Cs.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=lk.reverseTimeUnits(i);break}return ok.ParsingComponents.createRelativeFromReference(e.reference,i)}};qd.default=Ld});var x_=p($e=>{"use strict";var _t=$e&&$e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($e,"__esModule",{value:!0});$e.createConfiguration=$e.createCasualConfiguration=$e.parseDate=$e.parse=$e.strict=$e.casual=void 0;var dk=_t(c_()),fk=_t(m_()),pk=_t(__()),hk=_t(b_()),mk=_t(v_()),yk=_t(E_()),gk=_t(w_()),_k=fr(),Tk=_t(O_()),bk=_t(D_()),vk=_t(R_()),Ek=_t(M_()),A_=$t(),wk=_t(un()),Ok=_t(k_());$e.casual=new A_.Chrono(P_());$e.strict=new A_.Chrono(Wd(!0));function Dk(r,e,t){return $e.casual.parse(r,e,t)}$e.parse=Dk;function Rk(r,e,t){return $e.casual.parseDate(r,e,t)}$e.parseDate=Rk;function P_(){let r=Wd(!1);return r.parsers.unshift(new Tk.default),r.parsers.unshift(new bk.default),r.parsers.unshift(new pk.default),r.parsers.unshift(new Ek.default),r.parsers.unshift(new Ok.default),r}$e.createCasualConfiguration=P_;function Wd(r=!0){return _k.includeCommonConfiguration({parsers:[new wk.default(!0),new dk.default,new fk.default,new vk.default,new hk.default(r),new mk.default],refiners:[new gk.default,new yk.default]},r)}$e.createConfiguration=Wd});var Ne=p(B=>{"use strict";var Sk=B&&B.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Mk=B&&B.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Yr=B&&B.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Sk(e,r,t);return Mk(e,r),e};Object.defineProperty(B,"__esModule",{value:!0});B.parseDate=B.parse=B.casual=B.strict=B.ru=B.zh=B.nl=B.pt=B.ja=B.fr=B.de=B.Meridiem=B.Chrono=B.en=void 0;var Yd=Yr(il());B.en=Yd;var kk=$t();Object.defineProperty(B,"Chrono",{enumerable:!0,get:function(){return kk.Chrono}});var Ak;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(Ak=B.Meridiem||(B.Meridiem={}));var Pk=Yr(Ym());B.de=Pk;var xk=Yr(yy());B.fr=xk;var Ck=Yr(Dy());B.ja=Ck;var Nk=Yr(Yy());B.pt=Nk;var Ik=Yr(Dg());B.nl=Ik;var Fk=Yr(s_());B.zh=Fk;var Uk=Yr(x_());B.ru=Uk;B.strict=Yd.strict;B.casual=Yd.casual;function Lk(r,e,t){return B.casual.parse(r,e,t)}B.parse=Lk;function qk(r,e,t){return B.casual.parseDate(r,e,t)}B.parseDate=qk});var sr=p(Br=>{"use strict";Br.__esModule=!0;var zk;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})(zk=Br.Operators||(Br.Operators={}));var Kk;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})(Kk=Br.StructuralCharacters||(Br.StructuralCharacters={}));var Vk;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(Vk=Br.Tokens||(Br.Tokens={}))});var ef=p(po=>{"use strict";po.__esModule=!0;var we=sr();po.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};po.VALID_TOKENS={identifierOnly:[{name:we.Tokens.IDENTIFIER},{name:we.Tokens.STRUCTURAL_CHARACTER,value:we.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:we.Tokens.IDENTIFIER},{name:we.Tokens.STRUCTURAL_CHARACTER,value:we.StructuralCharacters.OPEN_PARENTHESIS},{name:we.Tokens.OPERATOR,value:we.Operators.NOT}],binaryOperator:[{name:we.Tokens.OPERATOR,value:we.Operators.AND},{name:we.Tokens.OPERATOR,value:we.Operators.OR},{name:we.Tokens.OPERATOR,value:we.Operators.XOR}],binaryOperatorOrClose:[{name:we.Tokens.OPERATOR,value:we.Operators.AND},{name:we.Tokens.OPERATOR,value:we.Operators.OR},{name:we.Tokens.OPERATOR,value:we.Operators.XOR},{name:we.Tokens.STRUCTURAL_CHARACTER,value:we.StructuralCharacters.CLOSE_PARENTHESIS}]}});var tf=p(Or=>{"use strict";Or.__esModule=!0;var oi=sr();Or.STRUCTURAL_CHARACTERS={"(":oi.StructuralCharacters.OPEN_PARENTHESIS,")":oi.StructuralCharacters.CLOSE_PARENTHESIS};Or.OPERATORS={AND:oi.Operators.AND,OR:oi.Operators.OR,XOR:oi.Operators.XOR,NOT:oi.Operators.NOT};Or.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));Or.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);Or.COMMENT_DELIMITER=String.fromCodePoint(35);Or.EOL=String.fromCodePoint(10);Or.ESCAPE_CHARACTER=String.fromCodePoint(92)});var z_=p(Dr=>{"use strict";var rf=Dr&&Dr.__assign||function(){return rf=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},rf.apply(this,arguments)};Dr.__esModule=!0;var H_=sr(),_n=tf();Dr.createResult=function(r,e,t){return{token:rf({name:r},e!==null?{value:e}:{}),remainingString:t}};Dr.getComment=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===_n.EOL){e=t;break}}return Dr.createResult(H_.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};Dr.getQuotedIdentifier=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===_n.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+_n.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===_n.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!_n.SEPARATORS.has(s)&&!_n.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: "+s+" Expected ) character or separator");break}}if(n===null)throw new Error("Unexpected end of expression: expected "+_n.QUOTED_IDENTIFIER_DELIMITER+" character");return Dr.createResult(H_.Tokens.IDENTIFIER,t,r.slice(n+1))}});var K_=p(nf=>{"use strict";nf.__esModule=!0;var ui=sr(),Tt=tf(),li=z_();nf.lex=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!Tt.SEPARATORS.has(s)){var a=Tt.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===ui.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!Tt.SEPARATORS.has(o)&&o!==ui.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: "+o+". A closing parenthesis should be followed by another closing parenthesis or whitespace");return li.createResult(ui.Tokens.STRUCTURAL_CHARACTER,Tt.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===Tt.QUOTED_IDENTIFIER_DELIMITER)return li.getQuotedIdentifier(r.slice(i+1));if(s===Tt.COMMENT_DELIMITER)return li.getComment(r.slice(i+1));e=i}}else if(Tt.SEPARATORS.has(s)||Tt.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===Tt.QUOTED_IDENTIFIER_DELIMITER||s===Tt.COMMENT_DELIMITER)throw new Error("Unexpected character: "+s)}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(Tt.OPERATORS[u]){if(n&&!Tt.SEPARATORS.has(n))throw new Error("Unexpected character: "+n+". Operators should be separated using whitespace");return li.createResult(ui.Tokens.OPERATOR,Tt.OPERATORS[u],l)}else return li.createResult(ui.Tokens.IDENTIFIER,u,l)}return li.createResult(ui.Tokens.EOF,null,"")}});var V_=p(Rr=>{"use strict";var Xk=Rr&&Rr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Rr.__esModule=!0;var Zk=K_(),ci=sr(),ho=ef();Rr.newTokenGenerator=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=Zk.lex(e),s=i.token,a=i.remainingString;if(e=a,s.name!==ci.Tokens.COMMENT)return Rr.validateToken(s,t,n),s}}};Rr.getValue=function(r,e){var t=r(ho.VALID_TOKENS.identifierOrNot),n=t.value===ci.Operators.NOT;n&&(t=r(ho.VALID_TOKENS.identifierOnly));var i=t.name===ci.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?Xk(i,[{name:ci.Tokens.OPERATOR,value:ci.Operators.NOT}]):i};Rr.previousOperatorTakesPrecedent=function(r,e){return ho.OPERATOR_PRECEDENCE[r]<=ho.OPERATOR_PRECEDENCE[e]};Rr.validateToken=function(r,e,t){if(t===void 0&&(t=!1),r.name===ci.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")}});var af=p(Us=>{"use strict";var di=Us&&Us.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Us.__esModule=!0;var X_=sr(),Z_=ef(),mo=V_();Us.parse=function(r){if(typeof r!="string")throw new Error("Expected string but received "+typeof r);var e=mo.newTokenGenerator(r);return sf(e)};var sf=function(r,e){e===void 0&&(e=!1);for(var t=di(mo.getValue(r,sf)),n=[];;){var i=e?Z_.VALID_TOKENS.binaryOperatorOrClose:Z_.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===X_.Tokens.EOF||s.name===X_.Tokens.STRUCTURAL_CHARACTER)return di(t,di(n).reverse());for(;n.length;){var a=n[n.length-1]||null;if(a&&mo.previousOperatorTakesPrecedent(a.value,s.value))t=di(t,[a]),n=n.slice(0,-1);else break}n=di(n,[s]),t=di(t,mo.getValue(r,sf))}}});var of=p(Sr=>{"use strict";Sr.__esModule=!0;var Q_=sr();Sr.andUtil=function(r,e){return r&&e};Sr.orUtil=function(r,e){return r||e};Sr.xorUtil=function(r,e){return r!==e};Sr.notUtil=function(r){return!r};Sr.isIdentifier=function(r){var e=r.name,t=r.value;return e===Q_.Tokens.IDENTIFIER&&typeof t=="string"};Sr.isOperator=function(r){var e=r.name,t=r.value;return e===Q_.Tokens.OPERATOR&&typeof t=="string"};Sr.throwInvalidExpression=function(r){throw new TypeError("Invalid postfix expression: "+r)}});var J_=p(cf=>{"use strict";var Ls;cf.__esModule=!0;var uf=sr(),lf=of();cf.OPERATOR_MAP=(Ls={},Ls[uf.Operators.AND]=lf.andUtil,Ls[uf.Operators.OR]=lf.orUtil,Ls[uf.Operators.XOR]=lf.xorUtil,Ls)});var tT=p(bn=>{"use strict";var df=bn&&bn.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};bn.__esModule=!0;var Qk=af(),eT=sr(),Jk=J_(),Tn=of();bn.getEvaluator=function(r){var e=Qk.parse(r);return function(t){return bn.evaluate(e,t)}};bn.evaluate=function(r,e){if(!Array.isArray(r))throw new Error(r+" should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator");var t=r.reduce(function(n,i,s){if(!(i&&(Tn.isIdentifier(i)||Tn.isOperator(i))))throw new Error("Invalid token: "+i+". Found in parsed expression at index "+s);if(i.name===eT.Tokens.IDENTIFIER)return df(n,[Boolean(e[i.value])]);var a=n[n.length-2],o=n[n.length-1];if(i.value===eT.Operators.NOT)return o===void 0&&Tn.throwInvalidExpression("missing identifier"),df(n.slice(0,-1),[Tn.notUtil(o)]);(o===void 0||a===void 0)&&Tn.throwInvalidExpression("missing identifier");var u=Jk.OPERATOR_MAP[i.value];return u||Tn.throwInvalidExpression("unknown operator"),df(n.slice(0,-2),[u(a,o)])},[]);return t.length!==1&&Tn.throwInvalidExpression("too many identifiers after evaluation"),t[0]}});var nT=p(qs=>{"use strict";qs.__esModule=!0;var rT=tT();qs.getEvaluator=rT.getEvaluator;qs.evaluate=rT.evaluate;var eA=af();qs.parse=eA.parse});var cA={};DT(cA,{default:()=>xo});module.exports=RT(cA);var gT=require("obsidian");var Cn=require("obsidian");var fA=new Error("timeout while waiting for mutex to become available"),pA=new Error("mutex already locked"),ST=new Error("request for lock canceled"),If=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},Io=class{constructor(e,t=ST){if(this._maxConcurrency=e,this._cancelError=t,this._queue=[],this._waiters=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}acquire(){let e=this.isLocked(),t=new Promise((n,i)=>this._queue.push({resolve:n,reject:i}));return e||this._dispatch(),t}runExclusive(e){return If(this,void 0,void 0,function*(){let[t,n]=yield this.acquire();try{return yield e(t)}finally{n()}})}waitForUnlock(){return If(this,void 0,void 0,function*(){return this.isLocked()?new Promise(t=>this._waiters.push({resolve:t})):Promise.resolve()})}isLocked(){return this._value<=0}release(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){let e=this._currentReleaser;this._currentReleaser=void 0,e()}}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatch(){let e=this._queue.shift();if(!e)return;let t=!1;this._currentReleaser=()=>{t||(t=!0,this._value++,this._resolveWaiters(),this._dispatch())},e.resolve([this._value--,this._currentReleaser])}_resolveWaiters(){this._waiters.forEach(e=>e.resolve()),this._waiters=[]}},MT=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},Zs=class{constructor(e){this._semaphore=new Io(1,e)}acquire(){return MT(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var Ei=class{constructor(){this.hideTaskCount=!1;this.hideBacklinks=!1;this.hidePriority=!1;this.hideStartDate=!1;this.hideScheduledDate=!1;this.hideDoneDate=!1;this.hideDueDate=!1;this.hideRecurrenceRule=!1;this.hideEditButton=!1;this.hideUrgency=!0;this.shortMode=!1;this.explainQuery=!1}},Mn=class{constructor(e,t){this.defaultLayout=["description","priority","recurrenceRule","startDate","scheduledDate","dueDate","doneDate","blockLink"];e?this.options=e:this.options=new Ei,t?this.layoutComponents=t:this.layoutComponents=this.defaultLayout,this.layoutComponents=this.applyOptions(this.options)}applyOptions(e){let t=(i,s,a)=>s?i.filter(o=>o!=a):i,n=this.layoutComponents;return n=t(n,e.hidePriority,"priority"),n=t(n,e.hideRecurrenceRule,"recurrenceRule"),n=t(n,e.hideStartDate,"startDate"),n=t(n,e.hideScheduledDate,"scheduledDate"),n=t(n,e.hideDueDate,"dueDate"),n=t(n,e.hideDoneDate,"doneDate"),n}};var Qs=["MO","TU","WE","TH","FR","SA","SU"],Se=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(Qs.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=Qs[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var pe=function(r){return r!=null},pt=function(r){return typeof r=="number"},Fo=function(r){return typeof r=="string"&&Qs.includes(r)},Be=Array.isArray,Ot=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var K=function(r,e){var t=0,n=[];if(Be(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},Ff=function(r){return Be(r)?r:[r]};function zr(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=K(t,e/t.length)),t.slice(0,e)+String(n))}var Uf=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},Ke=function(r,e){var t=r%e;return t*e<0?t+e:t},Js=function(r,e){return{div:Math.floor(r/e),mod:Ke(r,e)}},ht=function(r){return!pe(r)||r.length===0},Oe=function(r){return!ht(r)},X=function(r,e){return Oe(r)&&r.indexOf(e)!==-1};var Pr;(function(r){r.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],r.ONE_DAY=1e3*60*60*24,r.MAXYEAR=9999,r.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),r.PY_WEEKDAYS=[6,0,1,2,3,4,5],r.getYearDay=function(e){var t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((t.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/r.ONE_DAY)+1},r.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},r.isDate=function(e){return e instanceof Date},r.isValidDate=function(e){return r.isDate(e)&&!isNaN(e.getTime())},r.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},r.daysBetween=function(e,t){var n=e.getTime()-r.tzOffset(e),i=t.getTime()-r.tzOffset(t),s=n-i;return Math.round(s/r.ONE_DAY)},r.toOrdinal=function(e){return r.daysBetween(e,r.ORDINAL_BASE)},r.fromOrdinal=function(e){return new Date(r.ORDINAL_BASE.getTime()+e*r.ONE_DAY)},r.getMonthDays=function(e){var t=e.getUTCMonth();return t===1&&r.isLeapYear(e.getUTCFullYear())?29:r.MONTH_DAYS[t]},r.getWeekday=function(e){return r.PY_WEEKDAYS[e.getUTCDay()]},r.monthRange=function(e,t){var n=new Date(Date.UTC(e,t,1));return[r.getWeekday(n),r.getMonthDays(n)]},r.combine=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},r.clone=function(e){var t=new Date(e.getTime());return t},r.cloneDates=function(e){for(var t=[],n=0;n<e.length;n++)t.push(r.clone(e[n]));return t},r.sort=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},r.timeToUntilString=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[zr(n.getUTCFullYear().toString(),4,"0"),zr(n.getUTCMonth()+1,2,"0"),zr(n.getUTCDate(),2,"0"),"T",zr(n.getUTCHours(),2,"0"),zr(n.getUTCMinutes(),2,"0"),zr(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},r.untilStringToDate=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(Pr||(Pr={}));var I=Pr;var kT=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),or=kT;var ap=Xs(sp(),1),{__extends:An,__assign:Je,__rest:wA,__decorate:OA,__param:DA,__metadata:RA,__awaiter:SA,__generator:MA,__exportStar:kA,__createBinding:AA,__values:PA,__read:xA,__spread:CA,__spreadArrays:NA,__spreadArray:T,__await:IA,__asyncGenerator:FA,__asyncDelegator:UA,__asyncValues:LA,__makeTemplateObject:qA,__importStar:WA,__importDefault:YA,__classPrivateFieldGet:jA,__classPrivateFieldSet:$A,__classPrivateFieldIn:BA}=ap.default;var AT=function(r){An(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(or),Lo=AT;var PT={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Kr=PT;var op=function(r,e){return r.indexOf(e)!==-1},xT=function(r){return r.toString()},CT=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},NT=function(){function r(e,t,n,i){if(t===void 0&&(t=xT),n===void 0&&(n=Kr),i===void 0&&(i=CT),this.text=[],this.language=n||Kr,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,d){return c-d}),a.sort(function(c,d){return d-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(pe(this.origOptions.byweekday)){var o=Be(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,d){return c.weekday-d.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(op(["dtstart","wkst","freq"],n))return!0;if(!op(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[k.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=pt(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),Be(e)||(e=[e]);var a=function(u,l,c){for(var d="",f=0;f<u.length;f++)f!==0&&(f===u.length-1?d+=" "+c+" ":d+=l+" "),d+=u[f];return d};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),Qt=NT;var IT=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function wi(r,e){e===void 0&&(e=Kr);var t={},n=new IT(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var f=n.acceptNumber();if(f&&(t.interval=parseInt(f[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=k.DAILY,n.nextSymbol()&&(a(),d());break;case"weekday(s)":t.freq=k.WEEKLY,t.byweekday=[k.MO,k.TU,k.WE,k.TH,k.FR],n.nextSymbol(),d();break;case"week(s)":t.freq=k.WEEKLY,n.nextSymbol()&&(s(),d());break;case"hour(s)":t.freq=k.HOURLY,n.nextSymbol()&&(s(),d());break;case"minute(s)":t.freq=k.MINUTELY,n.nextSymbol()&&(s(),d());break;case"month(s)":t.freq=k.MONTHLY,n.nextSymbol()&&(s(),d());break;case"year(s)":t.freq=k.YEARLY,n.nextSymbol()&&(s(),d());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=k.WEEKLY;var h=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[k[h]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=u();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(k[y]),n.nextSymbol()}c(),d();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=k.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=o();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(m),n.nextSymbol()}s(),d();break;default:throw new Error("Unknown symbol")}}function s(){var f=n.accept("on"),h=n.accept("the");if(!!(f||h))do{var y=l(),m=u(),g=o();if(y)m?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(k[m].nth(y))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(y),n.accept("day(s)"));else if(m)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(k[m]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[k.MO,k.TU,k.WE,k.TH,k.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var O=n.acceptNumber();if(!O)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(O[0],10)];n.accept("comma");){if(O=n.acceptNumber(),!O)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(O[0],10))}}else if(g)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(g);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var f=n.accept("at");if(!!f)do{var h=n.acceptNumber();if(!h)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(h[0],10)];n.accept("comma");){if(h=n.acceptNumber(),!h)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(h[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var f=parseInt(n.value[1],10);if(f<-366||f>366)throw new Error("Nth out of range: "+f);return n.nextSymbol(),n.accept("last")?-f:f;default:return!1}}function c(){n.accept("on"),n.accept("the");var f=l();if(!!f)for(t.bymonthday=[f],n.nextSymbol();n.accept("comma");){if(f=l(),!f)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(f),n.nextSymbol()}}function d(){if(n.symbol==="until"){var f=Date.parse(n.text);if(!f)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(f)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var G;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(G||(G={}));function Oi(r){return r<G.HOURLY}var up=function(r,e){return e===void 0&&(e=Kr),new k(wi(r,e)||void 0)},Pn=["count","until","interval","byweekday","bymonthday","bymonth"];Qt.IMPLEMENTED=[];Qt.IMPLEMENTED[G.HOURLY]=Pn;Qt.IMPLEMENTED[G.MINUTELY]=Pn;Qt.IMPLEMENTED[G.DAILY]=["byhour"].concat(Pn);Qt.IMPLEMENTED[G.WEEKLY]=Pn;Qt.IMPLEMENTED[G.MONTHLY]=Pn;Qt.IMPLEMENTED[G.YEARLY]=["byweekno","byyearday"].concat(Pn);var lp=function(r,e,t,n){return new Qt(r,e,t,n).toString()},cp=Qt.isFullyConvertible;var xn=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var dp=function(r){An(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return Pr.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=Ke(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=Js(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),ht(i)||X(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=Js(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(ht(i)||X(i,this.hour))&&(ht(s)||X(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=Js(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(ht(i)||X(i,this.hour))&&(ht(s)||X(s,this.minute))&&(ht(a)||X(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=Pr.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>Pr.MAXYEAR))return;t=Pr.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case G.YEARLY:return this.addYears(s);case G.MONTHLY:return this.addMonths(s);case G.WEEKLY:return this.addWeekly(s,a);case G.DAILY:return this.addDaily(s);case G.HOURLY:return this.addHours(s,n,o);case G.MINUTELY:return this.addMinutes(s,n,o,u);case G.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(xn);function qo(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];X(hp,s)||e.push(s),I.isDate(r[s])&&!I.isValidDate(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return Je({},r)}function fp(r){var e=Je(Je({},Di),qo(r));if(pe(e.byeaster)&&(e.freq=k.YEARLY),!(pe(e.freq)&&k.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),pe(e.wkst)?pt(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=k.MO.weekday,pe(e.bysetpos)){pt(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||Oe(e.byweekno)||Oe(e.byyearday)||Boolean(e.bymonthday)||Oe(e.bymonthday)||pe(e.byweekday)||pe(e.byeaster)))switch(e.freq){case k.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case k.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case k.WEEKLY:e.byweekday=[I.getWeekday(e.dtstart)];break}if(pe(e.bymonth)&&!Be(e.bymonth)&&(e.bymonth=[e.bymonth]),pe(e.byyearday)&&!Be(e.byyearday)&&pt(e.byyearday)&&(e.byyearday=[e.byyearday]),!pe(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(Be(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(pe(e.byweekno)&&!Be(e.byweekno)&&(e.byweekno=[e.byweekno]),!pe(e.byweekday))e.bynweekday=null;else if(pt(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(Fo(e.byweekday))e.byweekday=[Se.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof Se)!e.byweekday.n||e.freq>k.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(pt(u)){a.push(u);continue}else if(Fo(u)){a.push(Se.fromStr(u).weekday);continue}!u.n||e.freq>k.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=Oe(a)?a:null,e.bynweekday=Oe(o)?o:null}return pe(e.byhour)?pt(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<k.HOURLY?[e.dtstart.getUTCHours()]:null,pe(e.byminute)?pt(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<k.MINUTELY?[e.dtstart.getUTCMinutes()]:null,pe(e.bysecond)?pt(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<k.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function pp(r){var e=r.dtstart.getTime()%1e3;if(!Oi(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new xn(n,i,s,e))})})}),t}function Si(r){var e=r.split(`
`).map(FT).filter(function(t){return t!==null});return Je(Je({},e[0]),e[1])}function Ri(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=I.untilStringToDate(i),e}function FT(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return mp(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return mp(r);case"DTSTART":return Ri(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function mp(r){var e=r.replace(/^RRULE:/i,""),t=Ri(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=G[o.toUpperCase()];break;case"WKST":t.wkst=Dt[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=UT(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=LT(o);break;case"DTSTART":case"TZID":var c=Ri(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=I.untilStringToDate(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function UT(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(yp)}return yp(r)}function yp(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function LT(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return Dt[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=Dt[s].weekday;return new Se(a,i)})}var Vr=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=I.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:t})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid)!==null&&e!==void 0?e:"UTC"})),s=i.getTime()-n.getTime();return new Date(this.date.getTime()-s)},r}();function Mi(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(Di),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!X(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!pe(o)||Be(o)&&!o.length)){switch(a){case"FREQ":u=k.FREQUENCIES[r.freq];break;case"WKST":pt(o)?u=new Se(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=Ff(o).map(function(h){return h instanceof Se?h:Be(h)?new Se(h[0],h[1]):new Se(h)}).toString();break;case"DTSTART":t=qT(o,r.tzid);break;case"UNTIL":u=I.timeToUntilString(o,!r.tzid);break;default:if(Be(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var d=e.map(function(h){var y=h[0],m=h[1];return"".concat(y,"=").concat(m.toString())}).join(";"),f="";return d!==""&&(f="RRULE:".concat(d)),[t,f].filter(function(h){return!!h}).join(`
`)}function qT(r,e){return r?"DTSTART"+new Vr(new Date(r),e).toString():""}function WT(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var gp=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?I.clone(t):I.cloneDates(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var d=0;d<i.length;d++){var f=i[d];if(!WT(t[f],c[f]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if(Be(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new or(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return Be(n)?I.cloneDates(n):n instanceof Date?I.clone(n):n},r}();var _p=T(T(T(T(T(T(T(T(T(T(T(T(T([],K(1,31),!0),K(2,28),!0),K(3,31),!0),K(4,30),!0),K(5,31),!0),K(6,30),!0),K(7,31),!0),K(8,31),!0),K(9,30),!0),K(10,31),!0),K(11,30),!0),K(12,31),!0),K(1,7),!0),Tp=T(T(T(T(T(T(T(T(T(T(T(T(T([],K(1,31),!0),K(2,29),!0),K(3,31),!0),K(4,30),!0),K(5,31),!0),K(6,30),!0),K(7,31),!0),K(8,31),!0),K(9,30),!0),K(10,31),!0),K(11,30),!0),K(12,31),!0),K(1,7),!0),YT=Ot(1,29),jT=Ot(1,30),xr=Ot(1,31),Ve=Ot(1,32),bp=T(T(T(T(T(T(T(T(T(T(T(T(T([],Ve,!0),jT,!0),Ve,!0),xr,!0),Ve,!0),xr,!0),Ve,!0),Ve,!0),xr,!0),Ve,!0),xr,!0),Ve,!0),Ve.slice(0,7),!0),vp=T(T(T(T(T(T(T(T(T(T(T(T(T([],Ve,!0),YT,!0),Ve,!0),xr,!0),Ve,!0),xr,!0),Ve,!0),Ve,!0),xr,!0),Ve,!0),xr,!0),Ve,!0),Ve.slice(0,7),!0),$T=Ot(-28,0),BT=Ot(-29,0),Cr=Ot(-30,0),Xe=Ot(-31,0),Ep=T(T(T(T(T(T(T(T(T(T(T(T(T([],Xe,!0),BT,!0),Xe,!0),Cr,!0),Xe,!0),Cr,!0),Xe,!0),Xe,!0),Cr,!0),Xe,!0),Cr,!0),Xe,!0),Xe.slice(0,7),!0),wp=T(T(T(T(T(T(T(T(T(T(T(T(T([],Xe,!0),$T,!0),Xe,!0),Cr,!0),Xe,!0),Cr,!0),Xe,!0),Xe,!0),Cr,!0),Xe,!0),Cr,!0),Xe,!0),Xe.slice(0,7),!0),Op=[0,31,60,91,121,152,182,213,244,274,305,335,366],Dp=[0,31,59,90,120,151,181,212,243,273,304,334,365],Wo=function(){for(var r=[],e=0;e<55;e++)r=r.concat(Ot(7));return r}();function Rp(r,e){var t=new Date(Date.UTC(r,0,1)),n=I.isLeapYear(r)?366:365,i=I.isLeapYear(r+1)?366:365,s=I.toOrdinal(t),a=I.getWeekday(t),o=Je(Je({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},GT(r)),{wnomask:null});if(ht(e.byweekno))return o;o.wnomask=K(0,n+7);var u,l,c=u=Ke(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+Ke(a-e.wkst,7)):l=n-c;for(var d=Math.floor(l/7),f=Ke(l,7),h=Math.floor(d+f/4),y=0;y<e.byweekno.length;y++){var m=e.byweekno[y];if(m<0&&(m+=h+1),m>0&&m<=h){var g=void 0;m>1?(g=c+(m-1)*7,c!==u&&(g-=7-u)):g=c;for(var O=0;O<7&&(o.wnomask[g]=1,g++,o.wdaymask[g]!==e.wkst);O++);}}if(X(e.byweekno,1)){var g=c+h*7;if(c!==u&&(g-=7-u),g<n)for(var y=0;y<7&&(o.wnomask[g]=1,g+=1,o.wdaymask[g]!==e.wkst);y++);}if(c){var w=void 0;if(X(e.byweekno,-1))w=-1;else{var P=I.getWeekday(new Date(Date.UTC(r-1,0,1))),H=Ke(7-P.valueOf()+e.wkst,7),ye=I.isLeapYear(r-1)?366:365,_e=void 0;H>=4?(H=0,_e=ye+Ke(P-e.wkst,7)):_e=n-c,w=Math.floor(52+Ke(_e,7)/4)}if(X(e.byweekno,w))for(var g=0;g<c;g++)o.wnomask[g]=1}return o}function GT(r){var e=I.isLeapYear(r)?366:365,t=new Date(Date.UTC(r,0,1)),n=I.getWeekday(t);return e===365?{mmask:_p,mdaymask:vp,nmdaymask:wp,wdaymask:Wo.slice(n),mrange:Dp}:{mmask:Tp,mdaymask:bp,nmdaymask:Ep,wdaymask:Wo.slice(n),mrange:Op}}function Sp(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===k.YEARLY)if(ht(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===k.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(ht(o))return a;a.nwdaymask=K(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],d=l[1]-1,f=0;f<s.bynweekday.length;f++){var h=void 0,y=s.bynweekday[f],m=y[0],g=y[1];g<0?(h=d+(g+1)*7,h-=Ke(i[h]-m,7)):(h=c+(g-1)*7,h+=Ke(7-i[h]+m,7)),c<=h&&h<=d&&(a.nwdaymask[h]=1)}return a}function Mp(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),d=i%4,f=Math.floor(32+2*a+2*c-l-d)%7,h=Math.floor((t+11*l+22*f)/451),y=Math.floor((l+f-7*h+114)/31),m=(l+f-7*h+114)%31+1,g=Date.UTC(r,y-1,m+e),O=Date.UTC(r,0,1);return[Math.ceil((g-O)/(1e3*60*60*24))]}var HT=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=Rp(e,n)),Oe(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=Sp(e,t,s,a,o,n)}pe(n.byeaster)&&(this.eastermask=Mp(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[Ot(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=K(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=K(null,this.yearlen+7),s=I.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=K(null,this.yearlen),s=I.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),I.sort(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new xn(e,t,a,i)});return I.sort(s),s},r.prototype.stimeset=function(e,t,n,i){return[new xn(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case G.YEARLY:return this.ydayset.bind(this);case G.MONTHLY:return this.mdayset.bind(this);case G.WEEKLY:return this.wdayset.bind(this);case G.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case G.HOURLY:return this.htimeset.bind(this);case G.MINUTELY:return this.mtimeset.bind(this);case G.SECONDLY:return this.stimeset.bind(this)}},r}(),kp=HT;function Ap(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=Ke(c,e.length)):(u=Math.floor((c-1)/e.length),l=Ke(c-1,e.length));for(var d=[],f=t;f<n;f++){var h=s[f];!pe(h)||d.push(h)}var y=void 0;u<0?y=d.slice(u)[0]:y=d[u];var m=e[l],g=I.fromOrdinal(i.yearordinal+y),O=I.combine(g,m);X(a,O)||a.push(O)}return I.sort(a),a}function na(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return ur(r);var u=dp.fromDate(t),l=new kp(e);l.rebuild(u.year,u.month);for(var c=VT(l,u,e);;){var d=l.getdayset(n)(u.year,u.month,u.day),f=d[0],h=d[1],y=d[2],m=KT(f,h,y,l,e);if(Oe(a))for(var g=Ap(a,c,h,y,l,f),O=0;O<g.length;O++){var w=g[O];if(s&&w>s)return ur(r);if(w>=t){var P=Pp(w,e);if(!r.accept(P)||o&&(--o,!o))return ur(r)}}else for(var O=h;O<y;O++){var H=f[O];if(!!pe(H))for(var ye=I.fromOrdinal(l.yearordinal+H),_e=0;_e<c.length;_e++){var se=c[_e],w=I.combine(ye,se);if(s&&w>s)return ur(r);if(w>=t){var P=Pp(w,e);if(!r.accept(P)||o&&(--o,!o))return ur(r)}}}if(e.interval===0||(u.add(e,m),u.year>I.MAXYEAR))return ur(r);Oi(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function zT(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return Oe(n)&&!X(n,r.mmask[e])||Oe(i)&&!r.wnomask[e]||Oe(s)&&!X(s,r.wdaymask[e])||Oe(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!X(r.eastermask,e)||(Oe(o)||Oe(u))&&!X(o,r.mdaymask[e])&&!X(u,r.nmdaymask[e])||Oe(l)&&(e<r.yearlen&&!X(l,e+1)&&!X(l,-r.yearlen+e)||e>=r.yearlen&&!X(l,e+1-r.yearlen)&&!X(l,-r.nextyearlen+e-r.yearlen))}function Pp(r,e){return new Vr(r,e.tzid).rezonedDate()}function ur(r){return r.getValue()}function KT(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=zT(n,o,i),s&&(r[o]=null)}return s}function VT(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return Oi(n)?pp(t):n>=k.HOURLY&&Oe(i)&&!X(i,e.hour)||n>=k.MINUTELY&&Oe(s)&&!X(s,e.minute)||n>=k.SECONDLY&&Oe(a)&&!X(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var Dt={MO:new Se(0),TU:new Se(1),WE:new Se(2),TH:new Se(3),FR:new Se(4),SA:new Se(5),SU:new Se(6)},Di={freq:G.YEARLY,dtstart:null,interval:1,wkst:Dt.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},hp=Object.keys(Di),k=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new gp,this.origOptions=qo(e);var n=fp(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return wi(e,t)},r.fromText=function(e,t){return up(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return na(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new Lo("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new or("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!I.isValidDate(e)||!I.isValidDate(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new Lo("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new or("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!I.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new or("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!I.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new or("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return Mi(this.origOptions)},r.prototype.toText=function(e,t,n){return lp(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return cp(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=G.YEARLY,r.MONTHLY=G.MONTHLY,r.WEEKLY=G.WEEKLY,r.DAILY=G.DAILY,r.HOURLY=G.HOURLY,r.MINUTELY=G.MINUTELY,r.SECONDLY=G.SECONDLY,r.MO=Dt.MO,r.TU=Dt.TU,r.WE=Dt.WE,r.TH=Dt.TH,r.FR=Dt.FR,r.SA=Dt.SA,r.SU=Dt.SU,r.parseString=Si,r.optionsToString=Mi,r}();function xp(r,e,t,n,i,s){var a={},o=r.accept;function u(f,h){t.forEach(function(y){y.between(f,h,!0).forEach(function(m){a[Number(m)]=!0})})}i.forEach(function(f){var h=new Vr(f,s).rezonedDate();a[Number(h)]=!0}),r.accept=function(f){var h=Number(f);return isNaN(h)?o.call(this,f):!a[h]&&(u(new Date(h-1),new Date(h+1)),!a[h])?(a[h]=!0,o.call(this,f)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(f){var h=Number(f);return a[h]?!0:(a[h]=!0,o.call(this,f))});for(var l=0;l<n.length;l++){var c=new Vr(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(f){na(r,f.options)});var d=r._result;switch(I.sort(d),r.method){case"all":case"between":return d;case"before":return d.length&&d[d.length-1]||null;case"after":default:return d.length&&d[0]||null}}var Cp={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function XT(r,e){var t=[],n=[],i=[],s=[],a=Ri(r),o=a.dtstart,u=a.tzid,l=tb(r,e.unfold);return l.forEach(function(c){var d;if(!!c){var f=eb(c),h=f.name,y=f.parms,m=f.value;switch(h.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: ".concat(y.join(",")));t.push(Si(c));break;case"RDATE":var g=(d=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&d!==void 0?d:[],O=g[1];O&&!u&&(u=O),n=n.concat(Np(m,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: ".concat(y.join(",")));i.push(Si(m));break;case"EXDATE":s=s.concat(Np(m,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+h)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function ZT(r,e){var t=XT(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new jo(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(f){c.rrule(new k(Yo(f,o,u),l))}),i.forEach(function(f){c.rdate(f)}),s.forEach(function(f){c.exrule(new k(Yo(f,o,u),l))}),a.forEach(function(f){c.exdate(f)}),e.compatible&&e.dtstart&&c.rdate(o),c}var d=n[0]||{};return new k(Yo(d,d.dtstart||e.dtstart||o,d.tzid||e.tzid||u),l)}function ia(r,e){return e===void 0&&(e={}),ZT(r,QT(e))}function Yo(r,e,t){return Je(Je({},r),{dtstart:e,tzid:t})}function QT(r){var e=[],t=Object.keys(r),n=Object.keys(Cp);if(t.forEach(function(i){X(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return Je(Je({},Cp),r)}function JT(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=Uf(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function eb(r){var e=JT(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function tb(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function rb(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function Np(r,e){return rb(e),r.split(",").map(function(t){return I.untilStringToDate(t)})}function Ip(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var jo=function(r){An(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=Ip.apply(n,["dtstart"]),n.tzid=Ip.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return xp(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){Fp(t,this._rrule)},e.prototype.exrule=function(t){Fp(t,this._exrule)},e.prototype.rdate=function(t){Up(t,this._rdate)},e.prototype.exdate=function(t){Up(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return ia(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return ia(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(Mi({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(Lp("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(Lp("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(k);function Fp(r,e){if(!(r instanceof k))throw new TypeError(String(r)+" is not RRule instance");X(e.map(String),String(r))||e.push(r)}function Up(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");X(e.map(Number),Number(r))||(e.push(r),I.sort(e))}function Lp(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return I.timeToUntilString(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}function It(r,e){return r!==null&&e===null?-1:r===null&&e!==null?1:r!==null&&e!==null?r.isValid()&&!e.isValid()?-1:!r.isValid()&&e.isValid()||r.isAfter(e)?1:r.isBefore(e)?-1:0:0}var Ie=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=k.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new k(u);return new Ie({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(){var t;let e;if(this.baseOnToday){let n=window.moment(),i=new k(wt(Re({},this.rrule.origOptions),{dtstart:n.startOf("day").utc(!0).toDate()}));e=this.nextAfter(n.endOf("day"),i)}else{let n=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day");e=this.nextAfter(n,this.rrule)}if(e!==null){let n=null,i=null,s=null;if(this.referenceDate){if(this.startDate){let a=window.moment.duration(this.startDate.diff(this.referenceDate));n=window.moment(e),n.add(Math.round(a.asDays()),"days")}if(this.scheduledDate){let a=window.moment.duration(this.scheduledDate.diff(this.referenceDate));i=window.moment(e),i.add(Math.round(a.asDays()),"days")}if(this.dueDate){let a=window.moment.duration(this.dueDate.diff(this.referenceDate));s=window.moment(e),s.add(Math.round(a.asDays()),"days")}}return{startDate:n,scheduledDate:i,dueDate:s}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||It(this.startDate,e.startDate)!==0||It(this.scheduledDate,e.scheduledDate)!==0||It(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}nextAfter(e,t){e.utc(!0);let n=window.moment(t.after(e.toDate())),i=this.toText(),s=i.match(/every( \d+)? month(s)?(.*)?/);s!==null&&(i.includes(" on ")||(n=Ie.nextAfterMonths(e,n,t,s[1])));let a=i.match(/every( \d+)? year(s)?(.*)?/);return a!==null&&(n=Ie.nextAfterYears(e,n,t,a[1])),Ie.addTimezone(n).toDate()}static nextAfterMonths(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));Ie.isSkippingTooManyMonths(e,t,s);)t=Ie.fromOneDayEarlier(e,n);return t}static isSkippingTooManyMonths(e,t,n){let i=t.month()-e.month();return i+=(t.year()-e.year())*12,i>n}static nextAfterYears(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));Ie.isSkippingTooManyYears(e,t,s);)t=Ie.fromOneDayEarlier(e,n);return t}static isSkippingTooManyYears(e,t,n){return t.year()-e.year()>n}static fromOneDayEarlier(e,t){e.subtract(1,"days").endOf("day");let n=t.origOptions;return n.dtstart=e.startOf("day").toDate(),t=new k(n),window.moment(t.after(e.toDate()))}static addTimezone(e){return window.moment.utc(e).local(!0).startOf("day")}};var Rt=(a=>(a.TODO="TODO",a.DONE="DONE",a.IN_PROGRESS="IN_PROGRESS",a.CANCELLED="CANCELLED",a.NON_TASK="NON_TASK",a.EMPTY="EMPTY",a))(Rt||{}),Fe=class{constructor(e,t,n,i,s="TODO"){this.symbol=e,this.name=t,this.nextStatusSymbol=n,this.availableAsCommand=i,this.type=s}};var nt=class{get symbol(){return this.configuration.symbol}get name(){return this.configuration.name}get nextStatusSymbol(){return this.configuration.nextStatusSymbol}get availableAsCommand(){return this.configuration.availableAsCommand}get type(){return this.configuration.type}constructor(e){this.configuration=e}static makeDone(){return new nt(new Fe("x","Done"," ",!0,"DONE"))}static makeEmpty(){return new nt(new Fe("","EMPTY","",!0,"EMPTY"))}static makeTodo(){return new nt(new Fe(" ","Todo","x",!0,"TODO"))}static makeCancelled(){return new nt(new Fe("-","Cancelled"," ",!0,"CANCELLED"))}static makeInProgress(){return new nt(new Fe("/","In Progress","x",!0,"IN_PROGRESS"))}static getTypeForUnknownSymbol(e){switch(e){case"x":case"X":return"DONE";case"/":return"IN_PROGRESS";case"-":return"CANCELLED";case"":return"EMPTY";case" ":default:return"TODO"}}static getTypeFromStatusTypeString(e){return Rt[e]||"TODO"}static createUnknownStatus(e){return new nt(new Fe(e,"Unknown","x",!1,"TODO"))}static createFromImportedValue(e){let t=e[0],n=nt.getTypeFromStatusTypeString(e[3]);return new nt(new Fe(t,e[1],e[2],!1,n))}isCompleted(){return this.type==="DONE"}previewText(){let e="";return nt.tasksPluginCanCreateCommandsForStatuses()&&this.availableAsCommand&&(e=" Available as a command."),`- [${this.symbol}] => [${this.nextStatusSymbol}], name: '${this.name}', type: '${this.configuration.type}'.${e}`}static tasksPluginCanCreateCommandsForStatuses(){return!1}},W=nt;W.DONE=nt.makeDone(),W.EMPTY=nt.makeEmpty(),W.TODO=nt.makeTodo();var xe=class{constructor(){this.coreStatuses=[W.makeTodo().configuration,W.makeDone().configuration],this.customStatuses=[W.makeInProgress().configuration,W.makeCancelled().configuration]}static addStatus(e,t){e.push(t)}static replaceStatus(e,t,n){let i=this.findStatusIndex(t,e);return i<=-1?!1:(e.splice(i,1,n),!0)}static findStatusIndex(e,t){let n=new W(e);return t.findIndex(i=>new W(i).previewText()==n.previewText())}static deleteStatus(e,t){let n=this.findStatusIndex(t,e);return n<=-1?!1:(e.splice(n,1),!0)}static deleteAllCustomStatuses(e){e.customStatuses.splice(0)}static resetAllCustomStatuses(e){xe.deleteAllCustomStatuses(e),new xe().customStatuses.forEach(n=>{xe.addStatus(e.customStatuses,n)})}static bulkAddStatusCollection(e,t){let n=[];return t.forEach(i=>{e.customStatuses.find(a=>a.symbol==i[0]&&a.name==i[1]&&a.nextStatusSymbol==i[2])?n.push(`The status ${i[1]} (${i[0]}) is already added.`):xe.addStatus(e.customStatuses,W.createFromImportedValue(i))}),n}static applyToStatusRegistry(e,t){t.clearStatuses(),e.coreStatuses.forEach(n=>{t.add(n)}),e.customStatuses.forEach(n=>{t.add(n)})}};var qp=[{index:9999,internalName:"INTERNAL_TESTING_ENABLED_BY_DEFAULT",displayName:"Test Item. Used to validate the Feature Framework.",description:"Description",enabledByDefault:!0,stable:!1}];var Jt=class{constructor(e,t,n,i,s,a){this.internalName=e;this.index=t;this.description=n;this.displayName=i;this.enabledByDefault=s;this.stable=a}static get values(){let e=[];return qp.forEach(t=>{e=[...e,new Jt(t.internalName,t.index,t.description,t.displayName,t.enabledByDefault,t.stable)]}),e}static get settingsFlags(){let e={};return Jt.values.forEach(t=>{e[t.internalName]=t.enabledByDefault}),e}static fromString(e){for(let t of Jt.values)if(e===t.internalName)return t;throw new RangeError(`Illegal argument passed to fromString(): ${e} does not correspond to any available Feature ${this.prototype.constructor.name}`)}};var ib={globalFilter:"",removeGlobalFilter:!1,setDoneDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6,provideAccessKeys:!0,useFilenameAsScheduledDate:!1,filenameAsDateFolders:[],statusSettings:new xe,features:Jt.settingsFlags,generalSettings:{},headingOpened:{}},Nr=Re({},ib),U=()=>{for(let r in Jt.settingsFlags)Nr.features[r]===void 0&&(Nr.features[r]=Jt.settingsFlags[r]);return Nr.statusSettings.customStatuses.forEach((r,e,t)=>{var i,s;let n=W.getTypeFromStatusTypeString(r.type);t[e]=new Fe((i=r.symbol)!=null?i:" ",r.name,(s=r.nextStatusSymbol)!=null?s:"x",r.availableAsCommand,n)}),Re({},Nr)},it=r=>(Nr=Re(Re({},Nr),r),U());var Xr=(r,e)=>(Nr.generalSettings[r]=e,U()),Wp=r=>{var e;return(e=Nr.features[r])!=null?e:!1};var de=class{constructor(){this._registeredStatuses=[];this.addDefaultStatusTypes()}get registeredStatuses(){return this._registeredStatuses.filter(({symbol:e})=>e!==W.EMPTY.symbol)}static getInstance(){return de.instance||(de.instance=new de),de.instance}add(e){this.hasSymbol(e.symbol)||(e instanceof W?this._registeredStatuses.push(e):this._registeredStatuses.push(new W(e)))}bySymbol(e){return this.hasSymbol(e)?this.getSymbol(e):W.EMPTY}bySymbolOrCreate(e){return this.hasSymbol(e)?this.getSymbol(e):W.createUnknownStatus(e)}byName(e){return this._registeredStatuses.filter(({name:t})=>t===e).length>0?this._registeredStatuses.filter(({name:t})=>t===e)[0]:W.EMPTY}resetToDefaultStatuses(){this.clearStatuses(),this.addDefaultStatusTypes()}clearStatuses(){this._registeredStatuses=[]}getNextStatus(e){if(e.nextStatusSymbol!==""){let t=this.bySymbol(e.nextStatusSymbol);if(t!==null)return t}return W.EMPTY}getNextStatusOrCreate(e){let t=this.getNextStatus(e);return t.type!=="EMPTY"?t:W.createUnknownStatus(e.nextStatusSymbol)}findUnknownStatuses(e){let t=e.filter(s=>!this.hasSymbol(s.symbol)),n=new de,i=[];return t.forEach(s=>{if(n.hasSymbol(s.symbol))return;let a=de.copyStatusWithNewName(s,`Unknown (${s.symbol})`);i.push(a),n.add(a)}),i}static copyStatusWithNewName(e,t){let n=new Fe(e.symbol,t,e.nextStatusSymbol,e.availableAsCommand,e.type);return new W(n)}getSymbol(e){return this._registeredStatuses.filter(({symbol:t})=>t===e)[0]}hasSymbol(e){return this._registeredStatuses.find(t=>t.symbol===e)!==void 0}addDefaultStatusTypes(){[W.makeTodo(),W.makeInProgress(),W.makeDone(),W.makeCancelled()].forEach(t=>{this.add(t)})}};var cr=class{static calculate(e){let t=0;if(e.dueDate!==null){let n=Math.round(window.moment().diff(e.dueDate)/cr.milliSecondsPerDay),i;n>=7?i=1:n>=-14?i=(n+14)*.8/21+.2:i=.2,t+=i*cr.dueCoefficient}switch(e.scheduledDate!==null&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*cr.scheduledCoefficient),e.startDate!==null&&window.moment().isBefore(e.startDate)&&(t+=1*cr.startedCoefficient),e.priority){case"1":t+=1*cr.priorityCoefficient;break;case"2":t+=.65*cr.priorityCoefficient;break;case"3":t+=.325*cr.priorityCoefficient;break}return t}},lr=cr;lr.dueCoefficient=12,lr.scheduledCoefficient=5,lr.startedCoefficient=-3,lr.priorityCoefficient=6,lr.milliSecondsPerDay=1e3*60*60*24;var Bp=require("obsidian");var Yp=require("obsidian");var $o,Bo,jp=({metadataCache:r,vault:e})=>{$o=r,Bo=e},sa=t=>N(void 0,[t],function*({originalTask:r,newTasks:e}){if(Bo===void 0||$o===void 0){console.error("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]),$p({originalTask:r,newTasks:e,vault:Bo,metadataCache:$o,previousTries:0})}),$p=s=>N(void 0,[s],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i}){let a=()=>{if(i>10){console.error("Tasks: Too many retries. File update not possible ...");return}let g=Math.min(Math.pow(10,i),100);setTimeout(()=>{$p({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i+1})},g)},o=t.getAbstractFileByPath(r.path);if(!(o instanceof Yp.TFile))return console.warn(`Tasks: No file found for task ${r.description}. Retrying ...`),a();if(o.extension!=="md"){console.error("Tasks: Only supporting files with the .md file extension.");return}let u=n.getFileCache(o);if(u==null||u===null)return console.warn(`Tasks: No file cache found for file ${o.path}. Retrying ...`),a();let l=u.listItems;if(l===void 0||l.length===0)return console.warn(`Tasks: No list items found in file cache of ${o.path}. Retrying ...`),a();let d=(yield t.read(o)).split(`
`),{globalFilter:f}=U(),h,y=0;for(let g of l){if(g.position.start.line<r.sectionStart||g.task===void 0)continue;if(d[g.position.start.line].includes(f)){if(y===r.sectionIndex){h=g;break}y++}}if(h===void 0){console.error("Tasks: could not find task to toggle in the file.");return}let m=[...d.slice(0,h.position.start.line),...e.map(g=>g.toFileLineString()),...d.slice(h.position.start.line+1)];yield t.modify(o,m.join(`
`))});function sb(r,e,t){return N(this,null,function*(){yield Bp.MarkdownRenderer.renderMarkdown(r,e,t,null)})}function Gp(r,e,t=null){return N(this,null,function*(){var a;t||(t=sb);let n=document.createElement("li");e.parentUlElement.appendChild(n),n.classList.add("task-list-item","plugin-tasks-list-item");let i=document.createElement("span");n.appendChild(i),i.classList.add("tasks-list-text"),yield ab(r,e,i,t);let s=document.createElement("input");return n.appendChild(s),s.classList.add("task-list-item-checkbox"),s.type="checkbox",r.status.symbol!==" "&&(s.checked=!0,n.classList.add("is-checked")),s.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),s.disabled=!0;let u=r.toggle();sa({originalTask:r,newTasks:u})}),n.prepend(s),n.setAttribute("data-task",r.status.symbol.trim()),n.setAttribute("data-line",e.listIndex.toString()),s.setAttribute("data-line",e.listIndex.toString()),(a=e.layoutOptions)!=null&&a.shortMode&&ub({task:r,element:i,isFilenameUnique:e.isFilenameUnique}),n})}function ab(r,e,t,n){return N(this,null,function*(){let i="",s=new Mn(e.layoutOptions);for(let a of s.layoutComponents){let o=r.componentToString(s,a);o&&(a==="description"&&(o=lb(o)),i+=o)}yield ob(t,i,"description",r,n)})}function ob(r,e,t,n,i){return N(this,null,function*(){if(t==="description"){yield i(e,r,n.path);let s=r.querySelector("blockquote"),a=s!=null?s:r,o=a.querySelector("p");if(o!==null){for(;o.firstChild;)a.insertBefore(o.firstChild,o);o.remove()}r.querySelectorAll("p").forEach(u=>{u.hasChildNodes()||u.remove()}),r.querySelectorAll(".footnotes").forEach(u=>{u.remove()})}else r.innerHTML=e})}function ub({task:r,element:e,isFilenameUnique:t}){e.addEventListener("mouseenter",()=>{let n=e.createDiv();n.addClasses(["tooltip","mod-right"]),r.recurrence&&n.createDiv().setText(`${Ft} ${r.recurrence.toText()}`),r.startDate&&n.createDiv().setText(aa({signifier:Ut,date:r.startDate})),r.scheduledDate&&n.createDiv().setText(aa({signifier:Lt,date:r.scheduledDate})),r.dueDate&&n.createDiv().setText(aa({signifier:qt,date:r.dueDate})),r.doneDate&&n.createDiv().setText(aa({signifier:oa,date:r.doneDate}));let i=r.getLinkText({isFilenameUnique:t});i&&n.createDiv().setText(`\u{1F517} ${i}`),e.addEventListener("mouseleave",()=>{n.remove()})})}function aa({signifier:r,date:e}){return`${r} ${e.format(S.dateFormat)} (${e.from(window.moment().startOf("day"))})`}function lb(r){let{globalFilter:e,removeGlobalFilter:t}=U();return t?r.replace(e,"").trim():r}var st=class{static fromPath(e){let{useFilenameAsScheduledDate:t,filenameAsDateFolders:n}=U();return!t||!this.matchesAnyFolder(n,e)?null:this.extractDateFromPath(e)}static matchesAnyFolder(e,t){return e.length===0?!0:e.some(n=>t.startsWith(n+"/"))}static extractDateFromPath(e){let t=Math.max(0,e.lastIndexOf("/")+1),n=e.lastIndexOf("."),i=e.substring(t,n),s=/(\d{4})-(\d{2})-(\d{2})/.exec(i);if(s||(s=/(\d{4})(\d{2})(\d{2})/.exec(i)),s){let a=window.moment([parseInt(s[1]),parseInt(s[2])-1,parseInt(s[3])]);if(a.isValid())return a}return null}static canApplyFallback({startDate:e,scheduledDate:t,dueDate:n}){return e===null&&n===null&&t===null}static updateTaskPath(e,t,n){let i=e.scheduledDate,s=e.scheduledDateIsInferred;return n===null?s&&(s=!1,i=null):s?i=n:this.canApplyFallback(e)&&(i=n,s=!0),new me(wt(Re({},e),{path:t,scheduledDate:i,scheduledDateIsInferred:s}))}static removeInferredStatusIfNeeded(e,t){let n=e.scheduledDateIsInferred?e.scheduledDate:null;return t.map(i=>(n!==null&&!n.isSame(i.scheduledDate,"day")&&(i=new me(wt(Re({},i),{scheduledDateIsInferred:!1}))),i))}};function ua(r){return r.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}var Ce={High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",None:""},Ft="\u{1F501}",Ut="\u{1F6EB}",Lt="\u23F3",qt="\u{1F4C5}",oa="\u2705",mt=class{},S=mt;S.dateFormat="YYYY-MM-DD",S.indentationRegex=/^([\s\t>]*)/,S.listMarkerRegex=/([-*]|[0-9]+\.)/,S.checkboxRegex=/\[(.)\]/u,S.afterCheckboxRegex=/ *(.*)/u,S.taskRegex=new RegExp(mt.indentationRegex.source+mt.listMarkerRegex.source+" +"+mt.checkboxRegex.source+mt.afterCheckboxRegex.source,"u"),S.nonTaskRegex=new RegExp(mt.indentationRegex.source+mt.listMarkerRegex.source+"? *("+mt.checkboxRegex.source+")?"+mt.afterCheckboxRegex.source,"u"),S.listItemRegex=new RegExp(mt.indentationRegex.source+mt.listMarkerRegex.source),S.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,S.priorityRegex=/([⏫🔼🔽])$/u,S.startDateRegex=/🛫 *(\d{4}-\d{2}-\d{2})$/u,S.scheduledDateRegex=/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,S.dueDateRegex=/[📅📆🗓] *(\d{4}-\d{2}-\d{2})$/u,S.doneDateRegex=/✅ *(\d{4}-\d{2}-\d{2})$/u,S.recurrenceRegex=/🔁 ?([a-zA-Z0-9, !]+)$/iu,S.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]*/g,S.hashTagsFromEnd=new RegExp(mt.hashTags.source+"$");var me=class{constructor({status:e,description:t,path:n,indentation:i,listMarker:s,sectionStart:a,sectionIndex:o,precedingHeader:u,priority:l,startDate:c,scheduledDate:d,dueDate:f,doneDate:h,recurrence:y,blockLink:m,tags:g,originalMarkdown:O,scheduledDateIsInferred:w}){this._urgency=null;this.status=e,this.description=t,this.path=n,this.indentation=i,this.listMarker=s,this.sectionStart=a,this.sectionIndex=o,this.precedingHeader=u,this.tags=g,this.priority=l,this.startDate=c,this.scheduledDate=d,this.dueDate=f,this.doneDate=h,this.recurrence=y,this.blockLink=m,this.originalMarkdown=O,this.scheduledDateIsInferred=w}static fromLine({line:e,path:t,sectionStart:n,sectionIndex:i,precedingHeader:s,fallbackDate:a}){let o=e.match(S.taskRegex);if(o===null)return null;let u=o[4].trim(),{globalFilter:l}=U();if(!u.includes(l))return null;let c=u,d=o[1],f=o[2],h=o[3],y=de.getInstance().bySymbolOrCreate(h),m=c.match(S.blockLinkRegex),g=m!==null?m[0]:"";g!==""&&(c=c.replace(S.blockLinkRegex,"").trim());let O,w="3",P=null,H=null,ye=!1,_e=null,se=null,j="",vt=null,dt=[],A="",E=20,b=0;do{O=!1;let v=c.match(S.priorityRegex);if(v!==null){switch(v[1]){case Ce.Low:w="4";break;case Ce.Medium:w="2";break;case Ce.High:w="1";break}c=c.replace(S.priorityRegex,"").trim(),O=!0}let q=c.match(S.doneDateRegex);q!==null&&(se=window.moment(q[1],S.dateFormat),c=c.replace(S.doneDateRegex,"").trim(),O=!0);let F=c.match(S.dueDateRegex);F!==null&&(_e=window.moment(F[1],S.dateFormat),c=c.replace(S.dueDateRegex,"").trim(),O=!0);let V=c.match(S.scheduledDateRegex);V!==null&&(H=window.moment(V[1],S.dateFormat),c=c.replace(S.scheduledDateRegex,"").trim(),O=!0);let ue=c.match(S.startDateRegex);ue!==null&&(P=window.moment(ue[1],S.dateFormat),c=c.replace(S.startDateRegex,"").trim(),O=!0);let Z=c.match(S.recurrenceRegex);Z!==null&&(j=Z[1].trim(),c=c.replace(S.recurrenceRegex,"").trim(),O=!0);let ge=c.match(S.hashTagsFromEnd);if(ge!=null){c=c.replace(S.hashTagsFromEnd,"").trim(),O=!0;let x=ge[0].trim();A=A.length>0?[x,A].join(" "):x}b++}while(O&&b<=E);j.length>0&&(vt=Ie.fromText({recurrenceRuleText:j,startDate:P,scheduledDate:H,dueDate:_e})),st.canApplyFallback({startDate:P,scheduledDate:H,dueDate:_e})&&a!==null&&(H=a,ye=!0),A.length>0&&(c+=" "+A);let C=c.match(S.hashTags);return C!==null&&(dt=C.filter(v=>v!==l).map(v=>v.trim())),new me({status:y,description:c,path:t,indentation:d,listMarker:f,sectionStart:n,sectionIndex:i,precedingHeader:s,priority:w,startDate:P,scheduledDate:H,dueDate:_e,doneDate:se,recurrence:vt,blockLink:g,tags:dt,originalMarkdown:e,scheduledDateIsInferred:ye})}toLi(e){return N(this,null,function*(){return Gp(this,e)})}toString(e){let t=new Mn(e),n="";for(let i of t.layoutComponents)n+=this.componentToString(t,i);return n}componentToString(e,t){var n;switch(t){case"description":return this.description;case"priority":{let i="";return this.priority==="1"?i=" "+Ce.High:this.priority==="2"?i=" "+Ce.Medium:this.priority==="4"&&(i=" "+Ce.Low),i}case"startDate":return this.startDate?e.options.shortMode?" "+Ut:` ${Ut} ${this.startDate.format(S.dateFormat)}`:"";case"scheduledDate":return!this.scheduledDate||this.scheduledDateIsInferred?"":e.options.shortMode?" "+Lt:` ${Lt} ${this.scheduledDate.format(S.dateFormat)}`;case"doneDate":return this.doneDate?e.options.shortMode?" "+oa:` ${oa} ${this.doneDate.format(S.dateFormat)}`:"";case"dueDate":return this.dueDate?e.options.shortMode?" "+qt:` ${qt} ${this.dueDate.format(S.dateFormat)}`:"";case"recurrenceRule":return this.recurrence?e.options.shortMode?" "+Ft:` ${Ft} ${this.recurrence.toText()}`:"";case"blockLink":return(n=this.blockLink)!=null?n:"";default:throw new Error(`Don't know how to render task component of type '${t}'`)}}toFileLineString(){return`${this.indentation}${this.listMarker} [${this.status.symbol}] ${this.toString()}`}toggle(){let e=de.getInstance().getNextStatusOrCreate(this.status),t=null,n=null;if(e.isCompleted()){let{setDoneDate:a}=U();a&&(t=window.moment()),this.recurrence!==null&&(n=this.recurrence.next())}let i=new me(wt(Re({},this),{status:e,doneDate:t})),s=[];if(n!==null){let a=de.getInstance().getNextStatusOrCreate(e),o=new me(wt(Re(Re({},this),n),{status:a,blockLink:""}));s.push(o)}return s.push(i),s}get urgency(){return this._urgency===null&&(this._urgency=lr.calculate(this)),this._urgency}get filename(){let e=this.path.match(/([^/]+)\.md$/);return e!==null?e[1]:null}getLinkText({isFilenameUnique:e}){let t;return e?t=this.filename:t="/"+this.path,t===null?null:(this.precedingHeader!==null&&this.precedingHeader!==t&&(t=t+" > "+this.precedingHeader),t)}static tasksListsIdentical(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.identicalTo(t[i]))}identicalTo(e){let t=["status","description","path","indentation","listMarker","sectionStart","sectionIndex","precedingHeader","priority","blockLink","scheduledDateIsInferred"];for(let s of t)if(this[s]!==e[s])return!1;if(this.tags.length!==e.tags.length||!this.tags.every(function(s,a){return s===e.tags[a]}))return!1;t=["startDate","scheduledDate","dueDate","doneDate"];for(let s of t){let a=this[s],o=e[s];if(It(a,o)!==0)return!1}let n=this.recurrence,i=e.recurrence;return n===null&&i!==null||n!==null&&i===null?!1:!(n&&i&&!n.identicalTo(i))}getDescriptionWithoutGlobalFilter(){let{globalFilter:e}=U(),t=this.description;if(e.length===0)return t;let n=RegExp("(^|\\s)"+ua(e)+"($|\\s)","ug");return this.description.search(n)>-1&&(t=t.replace(n,"$1$2").replace("  "," ").trim()),t}};var ki=class{constructor(e){this.fetch=e;this._value=void 0}get value(){return this._value===void 0&&(this._value=this.fetch()),this._value}};var Zr=class{constructor({metadataCache:e,vault:t,events:n}){this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new Zs,this.state="Cold",this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){let e=this.metadataCache.on("resolved",()=>N(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){let{useFilenameAsScheduledDate:e}=U(),t=this.vault.on("create",s=>{s instanceof Cn.TFile&&this.tasksMutex.runExclusive(()=>{this.indexFile(s)})});this.vaultEventReferences.push(t);let n=this.vault.on("delete",s=>{s instanceof Cn.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(a=>a.path!==s.path),this.notifySubscribers()})});this.vaultEventReferences.push(n);let i=this.vault.on("rename",(s,a)=>{s instanceof Cn.TFile&&this.tasksMutex.runExclusive(()=>{let o=new ki(()=>st.fromPath(s.path));this.tasks=this.tasks.map(u=>u.path===a?e?st.updateTaskPath(u,s.path,o.value):new me(wt(Re({},u),{path:s.path})):u),this.notifySubscribers()})});this.vaultEventReferences.push(i)}subscribeToEvents(){let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.tasksMutex.runExclusive(()=>N(this,null,function*(){this.state="Initializing",yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.notifySubscribers()}))}indexFile(e){return N(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=this.getTasksFromFileContent(a,i,t,e)}me.tasksListsIdentical(n,s)||(this.getState()=="Warm"&&console.debug(`At least one task, its line number or its heading has changed in ${e.path}: triggering a refresh of all active Tasks blocks in Live Preview and Reading mode views.`),this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.notifySubscribers())})}getTasksFromFileContent(e,t,n,i){let s=[],a=e.split(`
`),o=a.length,u=new ki(()=>st.fromPath(i.path)),l=null,c=0;for(let d of t)if(d.task!==void 0){let f=d.position.start.line;if(f>=o)return console.log(`${i.path} Obsidian gave us a line number ${f} past the end of the file. ${o}.`),s;if((l===null||l.position.end.line<f)&&(l=Zr.getSection(f,n.sections),c=0),l===null)continue;let h=a[f];if(h===void 0){console.log(`${i.path}: line ${f} - ignoring 'undefined' line.`);continue}let y;try{y=me.fromLine({line:h,path:i.path,sectionStart:l.position.start.line,sectionIndex:c,precedingHeader:Zr.getPrecedingHeader(f,n.headings),fallbackDate:u.value})}catch(m){this.reportTaskParsingErrorToUser(m,i,d,h);continue}y!==null&&(c++,s.push(y))}return s}reportTaskParsingErrorToUser(e,t,n,i){let s=`There was an error reading one of the tasks in this vault.
The following task has been ignored, to prevent Tasks queries getting stuck with 'Loading Tasks ...'
Error: ${e}
File: ${t.path}
Line number: ${n.position.start.line}
Task line: ${i}

Please create a bug report for this message at
https://github.com/obsidian-tasks-group/obsidian-tasks/issues/new/choose
to help us find and fix the underlying issue.

Include:
- either a screenshot of the error popup, or copy the text from the console, if on a desktop machine.
- the output from running the Obsidian command 'Show debug info'

The error popup will only be shown when Tasks is starting up, but if the error persists,
it will be shown in the console every time this file is edited during the Obsidian
session.
`;console.error(s),e instanceof Error&&console.error(e.stack),this.state==="Initializing"&&new Cn.Notice(s,1e4)}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var Hd=require("obsidian");var L_=require("obsidian");function Jr(){}function Ko(r){return r()}function zp(){return Object.create(null)}function en(r){r.forEach(Ko)}function Vp(r){return typeof r=="function"}function Xp(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function Zp(r){return Object.keys(r).length===0}var Qp=!1;function cb(){Qp=!0}function db(){Qp=!1}function _(r,e){r.appendChild(e)}function Nn(r,e,t){r.insertBefore(e,t||null)}function tn(r){r.parentNode.removeChild(r)}function Vo(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function L(r){return document.createElement(r)}function fb(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function at(r){return document.createTextNode(r)}function J(){return at(" ")}function St(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function Jp(r){return function(e){return e.preventDefault(),r.call(this,e)}}function D(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function pb(r){return Array.from(r.childNodes)}function Xo(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function Wt(r,e){r.value=e==null?"":e}function Zo(r,e){for(let t=0;t<r.options.length;t+=1){let n=r.options[t];if(n.__value===e){n.selected=!0;return}}r.selectedIndex=-1}function eh(r){let e=r.querySelector(":checked")||r.options[0];return e&&e.__value}function Yt(r,e,t){r.classList[t?"add":"remove"](e)}var Qr=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=fb(t.nodeName):this.e=L(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)Nn(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(tn)}};var xi;function Pi(r){xi=r}function hb(){if(!xi)throw new Error("Function called outside component initialization");return xi}function Qo(r){hb().$$.on_mount.push(r)}var Ai=[];var da=[],ca=[],Kp=[],mb=Promise.resolve(),zo=!1;function yb(){zo||(zo=!0,mb.then(th))}function Ci(r){ca.push(r)}var Ho=new Set,la=0;function th(){let r=xi;do{for(;la<Ai.length;){let e=Ai[la];la++,Pi(e),gb(e.$$)}for(Pi(null),Ai.length=0,la=0;da.length;)da.pop()();for(let e=0;e<ca.length;e+=1){let t=ca[e];Ho.has(t)||(Ho.add(t),t())}ca.length=0}while(Ai.length);for(;Kp.length;)Kp.pop()();zo=!1,Ho.clear(),Pi(r)}function gb(r){if(r.fragment!==null){r.update(),en(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(Ci)}}var _b=new Set;function Tb(r,e){r&&r.i&&(_b.delete(r),r.i(e))}var tN=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function bb(r,e,t,n){let{fragment:i,on_mount:s,on_destroy:a,after_update:o}=r.$$;i&&i.m(e,t),n||Ci(()=>{let u=s.map(Ko).filter(Vp);a?a.push(...u):en(u),r.$$.on_mount=[]}),o.forEach(Ci)}function rh(r,e){let t=r.$$;t.fragment!==null&&(en(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function vb(r,e){r.$$.dirty[0]===-1&&(Ai.push(r),yb(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function nh(r,e,t,n,i,s,a,o=[-1]){let u=xi;Pi(r);let l=r.$$={fragment:null,ctx:null,props:s,update:Jr,not_equal:i,bound:zp(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:zp(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(d,f,...h)=>{let y=h.length?h[0]:f;return l.ctx&&i(l.ctx[d],l.ctx[d]=y)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](y),c&&vb(r,d)),f}):[],l.update(),c=!0,en(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){cb();let d=pb(e.target);l.fragment&&l.fragment.l(d),d.forEach(tn)}else l.fragment&&l.fragment.c();e.intro&&Tb(r.$$.fragment),bb(r,e.target,e.anchor,e.customElement),db(),th()}Pi(u)}var Eb;typeof HTMLElement=="function"&&(Eb=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(Ko).filter(Vp);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){en(this.$$.on_disconnect)}$destroy(){rh(this,1),this.$destroy=Jr}$on(r,e){let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!Zp(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var fa=class{$destroy(){rh(this,1),this.$destroy=Jr}$on(e,t){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Zp(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var $d=Xs(Ne());var Wk={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function Zn(r){for(let[e,t]of Object.entries(Wk))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}function C_(r,e,t){let n=r.slice();return n[35]=e[t],n}function N_(r,e,t){let n=r.slice();return n[38]=e[t].value,n[39]=e[t].label,n[40]=e[t].symbol,n}function Yk(r){let e,t=r[40]+"",n;return{c(){e=L("span"),n=at(t)},m(i,s){Nn(i,e,s),_(e,n)},p:Jr,d(i){i&&tn(e)}}}function I_(r){let e,t,n,i,s,a,o,u,l=r[39]+"",c,d,f=r[40]&&r[40].charCodeAt(0)>=256,h,y,m,g,O=f&&Yk(r);return{c(){e=L("span"),t=L("input"),a=J(),o=L("label"),u=L("span"),c=at(l),d=J(),O&&O.c(),y=J(),D(t,"type","radio"),D(t,"id",n="priority-"+r[38]),t.__value=i=r[38],t.value=t.__value,D(t,"accesskey",s=r[13](r[39].charAt(0).toLowerCase())),r[24][0].push(t),D(u,"class","accesskey-first"),D(o,"for",h="priority-"+r[38])},m(w,P){Nn(w,e,P),_(e,t),t.checked=t.__value===r[1].priority,_(e,a),_(e,o),_(o,u),_(u,c),_(o,d),O&&O.m(o,null),_(e,y),m||(g=St(t,"change",r[23]),m=!0)},p(w,P){P[0]&8192&&s!==(s=w[13](w[39].charAt(0).toLowerCase()))&&D(t,"accesskey",s),P[0]&3&&(t.checked=t.__value===w[1].priority),f&&O.p(w,P)},d(w){w&&tn(e),r[24][0].splice(r[24][0].indexOf(t),1),O&&O.d(),m=!1,g()}}}function F_(r){let e,t=r[35].name+"",n,i,s=r[35].symbol+"",a,o,u;return{c(){e=L("option"),n=at(t),i=at(" ["),a=at(s),o=at("]"),e.__value=u=r[35],e.value=e.__value},m(l,c){Nn(l,e,c),_(e,n),_(e,i),_(e,a),_(e,o)},p(l,c){c[0]&1&&t!==(t=l[35].name+"")&&Xo(n,t),c[0]&1&&s!==(s=l[35].symbol+"")&&Xo(a,s),c[0]&1&&u!==(u=l[35])&&(e.__value=u,e.value=e.__value)},d(l){l&&tn(e)}}}function jk(r){let e,t,n,i,s,a,o,u,l,c,d,f,h,y,m,g,O,w,P,H,ye,_e,se,j,vt,dt,A,E,b,C,v,q,F,V,ue,Z,ge,x,ie,Te,ve,Et,De,Pe,kr,ar,mf,ft,Ys,yf,mi,gf,_f,js,Tf,yi,$s,bf,Xt,Bs,vf,wn,Gs,Ef,Zt,wf,On,gi,Hs,Of,Ar,zs,Df,_i,Co,Rf,Ks,Sf,Dn,Hr,Mf,Vs,kf,Ti,No,Af,Rn=r[14],tt=[];for(let M=0;M<Rn.length;M+=1)tt[M]=I_(N_(r,Rn,M));let Sn=r[0],rt=[];for(let M=0;M<Sn.length;M+=1)rt[M]=F_(C_(r,Sn,M));return{c(){e=L("div"),t=L("form"),n=L("div"),i=L("label"),i.innerHTML='Descrip<span class="accesskey">t</span>ion',s=J(),a=L("input"),u=J(),l=L("div"),c=L("label"),d=at("Priority"),h=J();for(let M=0;M<tt.length;M+=1)tt[M].c();y=J(),m=L("div"),g=L("label"),g.textContent="Recurs",O=J(),w=L("input"),H=J(),ye=L("code"),_e=at(Ft),se=J(),j=new Qr(!1),vt=J(),dt=L("label"),dt.textContent="Due",A=J(),E=L("input"),C=J(),v=L("code"),q=at(qt),F=J(),V=new Qr(!1),ue=J(),Z=L("label"),Z.textContent="Scheduled",ge=J(),x=L("input"),Te=J(),ve=L("code"),Et=at(Lt),De=J(),Pe=new Qr(!1),kr=J(),ar=L("label"),ar.innerHTML='St<span class="accesskey">a</span>rt',mf=J(),ft=L("input"),yf=J(),mi=L("code"),gf=at(Ut),_f=J(),js=new Qr(!1),Tf=J(),yi=L("div"),$s=L("label"),$s.innerHTML=`Only
                    <span class="accesskey-first">future</span> dates:`,bf=J(),Xt=L("input"),vf=J(),wn=L("div"),Gs=L("label"),Gs.textContent="Status",Ef=J(),Zt=L("select");for(let M=0;M<rt.length;M+=1)rt[M].c();wf=J(),On=L("div"),gi=L("div"),Hs=L("label"),Hs.textContent="Completed:",Of=J(),Ar=L("input"),Df=J(),_i=L("div"),Co=L("span"),Co.textContent="Done on:",Rf=J(),Ks=L("code"),Sf=J(),Dn=L("div"),Hr=L("button"),Mf=at("Apply"),kf=J(),Ti=L("button"),Ti.textContent="Cancel",D(i,"for","description"),D(a,"id","description"),D(a,"type","text"),D(a,"class","tasks-modal-description"),D(a,"placeholder","Take out the trash"),D(a,"accesskey",o=r[13]("t")),D(n,"class","tasks-modal-section"),D(c,"for",f="priority-"+r[1].priority),D(l,"class","tasks-modal-section tasks-modal-priorities"),D(g,"for","recurrence"),D(g,"class","accesskey-first"),D(w,"id","recurrence"),D(w,"type","text"),D(w,"placeholder","Try 'every 2 weeks on Thursday'."),D(w,"accesskey",P=r[13]("r")),Yt(w,"tasks-modal-error",!r[11]),j.a=null,D(dt,"for","due"),D(dt,"class","accesskey-first"),D(E,"id","due"),D(E,"type","text"),D(E,"placeholder",jd),D(E,"accesskey",b=r[13]("d")),Yt(E,"tasks-modal-error",!r[9]),V.a=null,D(Z,"for","scheduled"),D(Z,"class","accesskey-first"),D(x,"id","scheduled"),D(x,"type","text"),D(x,"placeholder",jd),D(x,"accesskey",ie=r[13]("s")),Yt(x,"tasks-modal-error",!r[8]),Pe.a=null,D(ar,"for","start"),D(ft,"id","start"),D(ft,"type","text"),D(ft,"placeholder",jd),D(ft,"accesskey",Ys=r[13]("a")),Yt(ft,"tasks-modal-error",!r[7]),js.a=null,D($s,"for","forwardOnly"),D(Xt,"id","forwardOnly"),D(Xt,"type","checkbox"),D(Xt,"class","task-list-item-checkbox tasks-modal-checkbox"),D(Xt,"accesskey",Bs=r[13]("f")),D(m,"class","tasks-modal-section tasks-modal-dates"),D(Gs,"for","status"),D(Zt,"id","status-type"),D(Zt,"class","dropdown"),r[1].status===void 0&&Ci(()=>r[30].call(Zt)),D(wn,"class","tasks-modal-section"),D(Hs,"for","status"),D(Ar,"id","status"),D(Ar,"type","checkbox"),D(Ar,"class","task-list-item-checkbox tasks-modal-checkbox"),Ar.checked=zs=r[1].status.isCompleted(),Ar.disabled=!0,D(On,"class","tasks-modal-section tasks-modal-status"),Hr.disabled=Vs=!(r[9]&&r[11]&&r[8]&&r[7]),D(Hr,"type","submit"),D(Hr,"class","mod-cta"),D(Ti,"type","button"),D(Dn,"class","tasks-modal-section tasks-modal-buttons"),Yt(t,"with-accesskeys",r[5]),D(e,"class","tasks-modal")},m(M,ee){Nn(M,e,ee),_(e,t),_(t,n),_(n,i),_(n,s),_(n,a),Wt(a,r[1].description),r[22](a),_(t,u),_(t,l),_(l,c),_(c,d),_(l,h);for(let Q=0;Q<tt.length;Q+=1)tt[Q].m(l,null);_(t,y),_(t,m),_(m,g),_(m,O),_(m,w),Wt(w,r[1].recurrenceRule),_(m,H),_(m,ye),_(ye,_e),_(ye,se),j.m(r[10],ye),_(m,vt),_(m,dt),_(m,A),_(m,E),Wt(E,r[1].dueDate),_(m,C),_(m,v),_(v,q),_(v,F),V.m(r[4],v),_(m,ue),_(m,Z),_(m,ge),_(m,x),Wt(x,r[1].scheduledDate),_(m,Te),_(m,ve),_(ve,Et),_(ve,De),Pe.m(r[3],ve),_(m,kr),_(m,ar),_(m,mf),_(m,ft),Wt(ft,r[1].startDate),_(m,yf),_(m,mi),_(mi,gf),_(mi,_f),js.m(r[2],mi),_(m,Tf),_(m,yi),_(yi,$s),_(yi,bf),_(yi,Xt),Xt.checked=r[1].forwardOnly,_(t,vf),_(t,wn),_(wn,Gs),_(wn,Ef),_(wn,Zt);for(let Q=0;Q<rt.length;Q+=1)rt[Q].m(Zt,null);Zo(Zt,r[1].status),_(t,wf),_(t,On),_(On,gi),_(gi,Hs),_(gi,Of),_(gi,Ar),_(On,Df),_(On,_i),_(_i,Co),_(_i,Rf),_(_i,Ks),Ks.innerHTML=r[12],_(t,Sf),_(t,Dn),_(Dn,Hr),_(Hr,Mf),_(Dn,kf),_(Dn,Ti),No||(Af=[St(a,"input",r[21]),St(l,"keyup",r[15]),St(w,"input",r[25]),St(E,"input",r[26]),St(x,"input",r[27]),St(ft,"input",r[28]),St(Xt,"change",r[29]),St(Zt,"change",r[30]),St(Ti,"click",r[16]),St(t,"submit",Jp(r[17]))],No=!0)},p(M,ee){if(ee[0]&8192&&o!==(o=M[13]("t"))&&D(a,"accesskey",o),ee[0]&3&&a.value!==M[1].description&&Wt(a,M[1].description),ee[0]&3&&f!==(f="priority-"+M[1].priority)&&D(c,"for",f),ee[0]&24578){Rn=M[14];let Q;for(Q=0;Q<Rn.length;Q+=1){let bi=N_(M,Rn,Q);tt[Q]?tt[Q].p(bi,ee):(tt[Q]=I_(bi),tt[Q].c(),tt[Q].m(l,null))}for(;Q<tt.length;Q+=1)tt[Q].d(1);tt.length=Rn.length}if(ee[0]&8192&&P!==(P=M[13]("r"))&&D(w,"accesskey",P),ee[0]&3&&w.value!==M[1].recurrenceRule&&Wt(w,M[1].recurrenceRule),ee[0]&2048&&Yt(w,"tasks-modal-error",!M[11]),ee[0]&1024&&j.p(M[10]),ee[0]&8192&&b!==(b=M[13]("d"))&&D(E,"accesskey",b),ee[0]&3&&E.value!==M[1].dueDate&&Wt(E,M[1].dueDate),ee[0]&512&&Yt(E,"tasks-modal-error",!M[9]),ee[0]&16&&V.p(M[4]),ee[0]&8192&&ie!==(ie=M[13]("s"))&&D(x,"accesskey",ie),ee[0]&3&&x.value!==M[1].scheduledDate&&Wt(x,M[1].scheduledDate),ee[0]&256&&Yt(x,"tasks-modal-error",!M[8]),ee[0]&8&&Pe.p(M[3]),ee[0]&8192&&Ys!==(Ys=M[13]("a"))&&D(ft,"accesskey",Ys),ee[0]&3&&ft.value!==M[1].startDate&&Wt(ft,M[1].startDate),ee[0]&128&&Yt(ft,"tasks-modal-error",!M[7]),ee[0]&4&&js.p(M[2]),ee[0]&8192&&Bs!==(Bs=M[13]("f"))&&D(Xt,"accesskey",Bs),ee[0]&3&&(Xt.checked=M[1].forwardOnly),ee[0]&1){Sn=M[0];let Q;for(Q=0;Q<Sn.length;Q+=1){let bi=C_(M,Sn,Q);rt[Q]?rt[Q].p(bi,ee):(rt[Q]=F_(bi),rt[Q].c(),rt[Q].m(Zt,null))}for(;Q<rt.length;Q+=1)rt[Q].d(1);rt.length=Sn.length}ee[0]&3&&Zo(Zt,M[1].status),ee[0]&3&&zs!==(zs=M[1].status.isCompleted())&&(Ar.checked=zs),ee[0]&4096&&(Ks.innerHTML=M[12]),ee[0]&2944&&Vs!==(Vs=!(M[9]&&M[11]&&M[8]&&M[7]))&&(Hr.disabled=Vs),ee[0]&32&&Yt(t,"with-accesskeys",M[5])},i:Jr,o:Jr,d(M){M&&tn(e),r[22](null),Vo(tt,M),Vo(rt,M),No=!1,en(Af)}}}var jd="Try 'Monday' or 'tomorrow', or [td|tm|yd|tw|nw|we] then space.";function $k(r,e,t){let n;var i;let{task:s}=e,{onSubmit:a}=e,{statusOptions:o}=e,u,l={description:"",status:W.TODO,priority:"none",recurrenceRule:"",startDate:"",scheduledDate:"",dueDate:"",doneDate:"",forwardOnly:!0},c="",d=!0,f="",h=!0,y="",m=!0,g="",O=!0,w="",P=!1,H=!0,ye=[{value:"low",label:"Low",symbol:Ce.Low},{value:"none",label:"Normal",symbol:Ce.None},{value:"medium",label:"Medium",symbol:Ce.Medium},{value:"high",label:"High",symbol:Ce.High}];function _e(x,ie,Te=void 0){if(!ie)return`<i>no ${x} date</i>`;let ve=$d.parseDate(ie,Te,{forwardDate:Te!=null});return ve!==null?window.moment(ve).format("YYYY-MM-DD"):`<i>invalid ${x} date</i>`}function se(x,ie){return _e(x,ie,l.forwardOnly?new Date:void 0)}function j(x){let ie=null,Te=$d.parseDate(x,new Date,{forwardDate:l.forwardOnly});return Te!==null&&(ie=window.moment(Te)),ie}Qo(()=>{let{globalFilter:x,provideAccessKeys:ie}=U();t(5,H=ie);let Te=s.getDescriptionWithoutGlobalFilter();(Te!=s.description||Te.indexOf(x)==-1)&&(P=!0);let ve="none";s.priority==="4"?ve="low":s.priority==="2"?ve="medium":s.priority==="1"&&(ve="high"),t(1,l={description:Te,status:s.status,priority:ve,recurrenceRule:s.recurrence?s.recurrence.toText():"",startDate:s.startDate?s.startDate.format("YYYY-MM-DD"):"",scheduledDate:s.scheduledDate?s.scheduledDate.format("YYYY-MM-DD"):"",dueDate:s.dueDate?s.dueDate.format("YYYY-MM-DD"):"",doneDate:s.doneDate?s.doneDate.format("YYYY-MM-DD"):"",forwardOnly:!0}),setTimeout(()=>{u.focus()},10)});let vt=x=>{if(x.key&&!x.altKey&&!x.ctrlKey){let ie=ye.find(Te=>Te.label.charAt(0).toLowerCase()==x.key);ie&&t(1,l.priority=ie.value,l)}},dt=()=>{a([])},A=()=>{let{globalFilter:x}=U(),ie=l.description.trim();P&&(ie=x+" "+ie);let Te=j(l.startDate),ve=j(l.scheduledDate),Et=j(l.dueDate),De=null;l.recurrenceRule&&(De=Ie.fromText({recurrenceRuleText:l.recurrenceRule,startDate:Te,scheduledDate:ve,dueDate:Et}));let Pe;switch(l.priority){case"low":Pe="4";break;case"medium":Pe="2";break;case"high":Pe="1";break;default:Pe="3"}let kr=new me(Object.assign(Object.assign({},s),{description:ie,status:l.status,priority:Pe,recurrence:De,startDate:Te,scheduledDate:ve,dueDate:Et,doneDate:window.moment(l.doneDate,"YYYY-MM-DD").isValid()?window.moment(l.doneDate,"YYYY-MM-DD"):null}));a([kr])},E=[[]];function b(){l.description=this.value,t(1,l),t(2,c),t(3,f),t(4,y),t(0,o)}function C(x){da[x?"unshift":"push"](()=>{u=x,t(6,u)})}function v(){l.priority=this.__value,t(1,l),t(2,c),t(3,f),t(4,y),t(0,o)}function q(){l.recurrenceRule=this.value,t(1,l),t(2,c),t(3,f),t(4,y),t(0,o)}function F(){l.dueDate=this.value,t(1,l),t(2,c),t(3,f),t(4,y),t(0,o)}function V(){l.scheduledDate=this.value,t(1,l),t(2,c),t(3,f),t(4,y),t(0,o)}function ue(){l.startDate=this.value,t(1,l),t(2,c),t(3,f),t(4,y),t(0,o)}function Z(){l.forwardOnly=this.checked,t(1,l),t(2,c),t(3,f),t(4,y),t(0,o)}function ge(){l.status=eh(this),t(1,l),t(2,c),t(3,f),t(4,y),t(0,o)}return r.$$set=x=>{"task"in x&&t(18,s=x.task),"onSubmit"in x&&t(19,a=x.onSubmit),"statusOptions"in x&&t(0,o=x.statusOptions)},r.$$.update=()=>{if(r.$$.dirty[0]&32){e:t(13,n=x=>H?x:null)}if(r.$$.dirty[0]&6){e:t(1,l.startDate=Zn(l.startDate),l),t(2,c=se("start",l.startDate)),t(7,d=!c.includes("invalid"))}if(r.$$.dirty[0]&10){e:t(1,l.scheduledDate=Zn(l.scheduledDate),l),t(3,f=se("scheduled",l.scheduledDate)),t(8,h=!f.includes("invalid"))}if(r.$$.dirty[0]&18){e:t(1,l.dueDate=Zn(l.dueDate),l),t(4,y=se("due",l.dueDate)),t(9,m=!y.includes("invalid"))}if(r.$$.dirty[0]&1048578){e:if(t(11,O=!0),!l.recurrenceRule)t(10,g="<i>not recurring</>");else{let x=t(20,i=Ie.fromText({recurrenceRuleText:l.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))===null||i===void 0?void 0:i.toText();x?t(10,g=x):(t(10,g="<i>invalid recurrence rule</i>"),t(11,O=!1))}}if(r.$$.dirty[0]&2){e:t(12,w=_e("done",l.doneDate))}},[o,l,c,f,y,H,u,d,h,m,g,O,w,n,ye,vt,dt,A,s,a,i,b,C,v,E,q,F,V,ue,Z,ge]}var Bd=class extends fa{constructor(e){super(),nh(this,e,$k,jk,Xp,{task:18,onSubmit:19,statusOptions:0},null,[-1,-1])}},U_=Bd;var Qn=class extends L_.Modal{constructor({app:t,task:n,onSubmit:i}){super(t);this.task=n,this.onSubmit=s=>{s.length&&i(s),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task");let{contentEl:t}=this,n=this.getKnownStatusesAndCurrentTaskStatusIfNotKnown();new U_({target:t,props:{task:this.task,statusOptions:n,onSubmit:this.onSubmit}})}getKnownStatusesAndCurrentTaskStatusIfNotKnown(){let t=de.getInstance().registeredStatuses;return de.getInstance().bySymbol(this.task.status.symbol)===W.EMPTY&&t.push(this.task.status),t}onClose(){let{contentEl:t}=this;t.empty()}};var q_=({line:r,path:e})=>{var f,h;let t=st.fromPath(e),n=me.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:t});if(n!==null)return n;let i=r.match(S.nonTaskRegex);if(i===null)return console.error("Tasks: Cannot create task on line:",r),new me({status:W.TODO,description:"",path:e,indentation:"",listMarker:"-",priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,blockLink:"",tags:[],originalMarkdown:"",scheduledDateIsInferred:!1});let s=i[1],a=(f=i[2])!=null?f:"-",o=(h=i[4])!=null?h:" ",u=de.getInstance().bySymbolOrCreate(o),l=i[5],c=r.match(S.blockLinkRegex),d=c!==null?c[0]:"";return d!==""&&(l=l.replace(S.blockLinkRegex,"")),new me({status:u,description:l,path:e,indentation:s,listMarker:a,blockLink:d,priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,tags:[],originalMarkdown:"",scheduledDateIsInferred:!1})};var W_=(r,e,t,n)=>{var d;if(r)return t instanceof Hd.MarkdownView;if(!(t instanceof Hd.MarkdownView))return;let i=(d=t.file)==null?void 0:d.path;if(i===void 0)return;let a=e.getCursor().line,o=e.getLine(a),u=q_({line:o,path:i}),l=f=>{let h=st.removeInferredStatusIfNeeded(u,f).map(y=>y.toFileLineString()).join(`
`);e.setLine(a,h)};new Qn({app:n,task:u,onSubmit:l}).open()};var zd=require("obsidian");var Y_=(r,e,t)=>{var u;if(r)return t instanceof zd.MarkdownView;if(!(t instanceof zd.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=Bk(a,n);e.setLine(s,o),e.setCursor({line:i.line,ch:Hk(i.ch,a,o)})},Bk=(r,e)=>{let t=r,n=me.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:null});if(n!==null)t=Gk(n);else{let i=r.match(S.taskRegex);if(i!==null){let s=i[3],o=de.getInstance().bySymbol(s).nextStatusSymbol;t=r.replace(S.taskRegex,`$1- [${o}] $4`)}else S.listItemRegex.test(r)?t=r.replace(S.listItemRegex,"$1$2 [ ]"):t=r.replace(S.indentationRegex,"$1- ")}return t},Gk=r=>r.toggle().map(t=>t.toFileLineString()).join(`
`),Hk=(r,e,t)=>{let n=t.length;if(n<=e.length)return r>=t.length?n:r;let i=13;if(t.match(S.doneDateRegex)&&n-e.length>=i&&(n-=i),n>=2*e.length&&t.search(`.+
.+`)!==-1)return r+n-e.length;let s=t.search(/[-*]/);return r<s?r:r+n-e.length};var io=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>W_(t,n,i,this.app)}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:Y_})}};var so=class{constructor({obsidianEvents:e}){this.obsidianEvents=e}onCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.obsidianEvents.offref(e)}};var ao=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return N(this,null,function*(){var c;let{globalFilter:n}=U(),i=e.findAll(".task-list-item").filter(d=>{var y;let f=(y=d.textContent)==null?void 0:y.split(`
`);if(f===void 0)return!1;let h=null;for(let m=0;m<f.length;m=m+1)if(f[m]!==""){h=f[m];break}return h===null?!1:h.includes(n)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let d=a.lineStart;d<=a.lineEnd;d++){let f=o[d];if(f===void 0)continue;let h=me.fromLine({line:f,path:s,sectionStart:a.lineStart,sectionIndex:u,precedingHeader:null,fallbackDate:null});h!==null&&(l.push(h),u++)}for(let d=0;d<i.length;d++){let f=l[d],h=i[d];if(f===void 0||h===void 0)continue;let y=(c=h.getAttr("data-line"))!=null?c:"0",m=Number.parseInt(y,10),g=yield f.toLi({parentUlElement:e,listIndex:m}),O=h.childNodes;for(let H=0;H<O.length;H=H+1){let ye=O[H];ye.nodeName.toLowerCase()==="div"?g.prepend(ye):ye.nodeName.toLowerCase()==="ul"&&g.append(ye)}let w=h.querySelectorAll("[data-footnote-id]"),P=g.querySelectorAll("[data-footnote-id]");if(w.length===P.length)for(let H=0;H<w.length;H++)P[H].replaceWith(w[H]);h.replaceWith(g)}})}};var j_=require("@codemirror/view"),$_=require("obsidian");var B_=()=>j_.ViewPlugin.fromClass(Kd),Kd=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let f=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(f),new $_.Notice(f,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=me.fromLine({line:a.text,path:"",sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:null});if(console.debug(`Live Preview Extension: toggle called. Position: ${s} Line: ${a.text}`),o===null)return!1;e.preventDefault();let l=o.toggle().map(f=>f.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let d=t.checked;return setTimeout(()=>{t.checked=d},1),!0}};var Ao=require("obsidian");var br=class{constructor(e,t,n){this.property=e,this.comparator=br.maybeReverse(n,t)}static maybeReverse(e,t){return e?br.makeReversedComparator(t):t}static makeReversedComparator(e){return(t,n)=>e(t,n)*-1}};var Jn=class{constructor(e,t){this.property=e,this.grouper=t}};var ce=class{canCreateFilterForLine(e){return ce.lineMatchesFilter(this.filterRegExp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}fieldNameSingular(){return this.fieldName()}fieldNameSingularEscaped(){return ua(this.fieldNameSingular())}supportsSorting(){return!1}parseSortLine(e){return!this.supportsSorting()||!this.canCreateSorterForLine(e)?null:this.createSorterFromLine(e)}canCreateSorterForLine(e){return this.supportsSorting()?ce.lineMatchesFilter(this.sorterRegExp(),e):!1}createSorterFromLine(e){if(!this.supportsSorting())return null;let t=ce.getMatch(this.sorterRegExp(),e);if(t===null)return null;let n=!!t[1];return this.createSorter(n)}sorterRegExp(){if(!this.supportsSorting())throw Error(`sorterRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^sort by ${this.fieldNameSingularEscaped()}( reverse)?`)}comparator(){throw Error(`comparator() unimplemented for ${this.fieldNameSingular()}`)}createSorter(e){return new br(this.fieldNameSingular(),this.comparator(),e)}createNormalSorter(){return this.createSorter(!1)}createReverseSorter(){return this.createSorter(!0)}supportsGrouping(){return!1}grouper(){throw Error(`grouper() unimplemented for ${this.fieldNameSingular()}`)}createGrouper(){return new Jn(this.fieldNameSingular(),this.grouper())}};var be=class{constructor(e,t=[],n=""){this.description=e,this.symbol=n,this.children=t}static booleanAnd(e){return this.combineOrCreateExplanation("All of",e,"AND")}static booleanOr(e){return this.combineOrCreateExplanation("At least one of",e,"OR")}static booleanNot(e){return new be("None of",e,"NOT")}static booleanXor(e){return new be("Exactly one of",e,"XOR")}asString(e=""){if(this.children.length==0)return e+this.description;let t=e+`${this.symbol}`;this.children.length>1&&(t+=` (${this.description})`),t+=":";let n=e+"  ";for(let i=0;i<this.children.length;i++)t+=`
${this.children[i].asString(n)}`;return t}static combineOrCreateExplanation(e,t,n){if(t.length===2){let i=t[0],s=t[1];if(i.symbol===n&&s.symbol==="")return i.children.push(s),i}return new be(e,t,n)}};var Ze=class{constructor(e,t,n){this.instruction=e,this.explanation=n,this.filterFunction=t}explainFilterIndented(e){let t=this.explanation;return t.asString()===this.instruction?`${e}${this.instruction}
`:`${e}${this.instruction} =>
${t.asString("  ")}
`}},fe=class{constructor(e){this.instruction=e}get filter(){return this._filter}set filter(e){this._filter=e}get filterFunction(){if(this._filter)return this._filter.filterFunction}static fromFilter(e){let t=new fe(e.instruction);return t.filter=e,t}static fromError(e,t){let n=new fe(e);return n.error=t,n}};var oo=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e==this._instruction}createFilterOrErrorMessage(e){let t=new fe(e);return e===this._instruction?(t.filter=new Ze(e,this._filter,new be(e)),t):(t.error=`do not understand filter: ${e}`,t)}};var jr=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new oo(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let n of this._filters){let i=n.createFilterOrErrorMessage(e);if(i.error===void 0)return i}let t=new fe(e);return t.error=`do not understand filter: ${e}`,t}};var $r=class extends ce{constructor(){super(...arguments);this._filters=new jr}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegExp(){return null}};var vr=class extends $r{constructor(){super(),this._filters.add("done",e=>e.status.type==="DONE"||e.status.type==="CANCELLED"||e.status.type==="NON_TASK"),this._filters.add("not done",e=>e.status.type==="TODO"||e.status.type==="IN_PROGRESS")}fieldName(){return"status"}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=vr.oldStatusName(e),i=vr.oldStatusName(t);return n<i?1:n>i?-1:0}}static oldStatusName(e){return e.status.symbol===" "?"Todo":"Done"}};var G_=Xs(Ne()),Er=class{static parseDate(e,t=!1){return window.moment(G_.parseDate(e,void 0,{forwardDate:t})).startOf("day")}};var ct=class extends ce{constructor(){super();this.filterInstructions=new jr,this.filterInstructions.add(`has ${this.fieldName()} date`,t=>this.date(t)!==null),this.filterInstructions.add(`no ${this.fieldName()} date`,t=>this.date(t)===null),this.filterInstructions.add(`${this.fieldName()} date is invalid`,t=>{let n=this.date(t);return n!==null&&!n.isValid()})}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);if(n.filter!==void 0)return n;let i=new fe(t),s=ce.getMatch(this.filterRegExp(),t),a;if(s!==null){let o=Er.parseDate(s[2]);if(!o.isValid())i.error="do not understand "+this.fieldName()+" date";else{let u;s[1]==="before"?(a=c=>{let d=this.date(c);return d?d.isBefore(o):this.filterResultIfFieldMissing()},u=" "+s[1]):s[1]==="after"?(a=c=>{let d=this.date(c);return d?d.isAfter(o):this.filterResultIfFieldMissing()},u=" "+s[1]):(a=c=>{let d=this.date(c);return d?d.isSame(o):this.filterResultIfFieldMissing()},u=" on");let l=ct.getExplanationString(this.fieldName(),u,this.filterResultIfFieldMissing(),o);i.filter=new Ze(t,a,new be(l))}}else i.error="do not understand query filter ("+this.fieldName()+" date)";return i}static getExplanationString(t,n,i,s){let a=s.format("YYYY-MM-DD (dddd Do MMMM YYYY)"),o=`${t} date is${n} ${a}`;return i&&(o+=` OR no ${t} date`),o}supportsSorting(){return!0}comparator(){return(t,n)=>It(this.date(t),this.date(n))}};var Vd=class extends ct{filterRegExp(){return Vd.dueRegexp}fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}},hn=Vd;hn.dueRegexp=/^due (before|after|on)? ?(.*)/;var Xd=class extends ce{createFilterOrErrorMessage(e){let t=new fe(e),n=ce.getMatch(this.filterRegExp(),e);if(n!==null){let i=n[5],s=null;switch(i){case"low":s="4";break;case"none":s="3";break;case"medium":s="2";break;case"high":s="1";break}if(s===null)return t.error="do not understand priority",t;let a=e,o;switch(n[3]){case"above":o=u=>u.priority.localeCompare(s)<0;break;case"below":o=u=>u.priority.localeCompare(s)>0;break;case"not":o=u=>u.priority!==s;break;default:o=u=>u.priority===s,a=`${this.fieldName()} is ${i}`}t.filter=new Ze(e,o,new be(a))}else t.error="do not understand query filter (priority)";return t}fieldName(){return"priority"}filterRegExp(){return Xd.priorityRegexp}supportsSorting(){return!0}comparator(){return(e,t)=>e.priority.localeCompare(t.priority)}},mn=Xd;mn.priorityRegexp=/^priority(\s+is)?(\s+(above|below|not))?(\s+(low|none|medium|high))$/;var ei=class{matchesAnyOf(e){return e.some(t=>this.matches(t))}};var ti=class extends ei{constructor(t){super();this.stringToFind=t}matches(t){return ti.stringIncludesCaseInsensitive(t,this.stringToFind)}static stringIncludesCaseInsensitive(t,n){return t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}};var ri=class extends ei{constructor(t){super();this.regex=t}static validateAndConstruct(t){let n=/\/((?![*+?])(?:[^\r\n[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*])+)\/((?:g(?:im?|mi?)?|i(?:gm?|mg?)?|m(?:gi?|ig?)?)?)/,i=t.match(n);if(i!==null){let s=new RegExp(i[1],i[2]);return new ri(s)}else return null}matches(t){return t.match(this.regex)!==null}};var Qe=class extends ce{createFilterOrErrorMessage(e){let t=ce.getMatch(this.filterRegExp(),e);if(t===null)return fe.fromError(e,`do not understand query filter (${this.fieldName()})`);let[n,i,s]=t,a=null;if(i.includes("include"))a=new ti(s);else if(i.includes("regex")&&(a=ri.validateAndConstruct(s),a===null))return fe.fromError(e,`cannot parse regex (${this.fieldName()}); check your leading and trailing slashes for your query`);if(a===null)return fe.fromError(e,`do not understand query filter (${this.fieldName()})`);let o=i.match(/not/)!==null,u=new Ze(e,this.getFilter(a,o),new be(e));return fe.fromFilter(u)}fieldPattern(){return this.fieldNameSingularEscaped()}filterOperatorPattern(){return"includes|does not include|regex matches|regex does not match"}filterRegExp(){return new RegExp(`^(?:${this.fieldPattern()}) (${this.filterOperatorPattern()}) (.*)`)}getFilter(e,t){return n=>{let i=e.matches(this.value(n));return t?!i:i}}comparator(){return(e,t)=>this.value(e).localeCompare(this.value(t),void 0,{numeric:!0})}grouper(){return e=>[this.value(e)]}};var ni=class extends Qe{fieldName(){return"path"}value(e){return e.path}supportsSorting(){return!0}};var ii=class extends ce{canCreateFilterForLine(e){return!1}createFilterOrErrorMessage(e){return fe.fromError(e,"Filtering by urgency is not yet supported")}fieldName(){return"urgency"}filterRegExp(){throw Error(`filterRegExp() unimplemented for ${this.fieldName()}`)}supportsSorting(){return!0}comparator(){return(e,t)=>t.urgency-e.urgency}};var si=class{static by(e,t){let n=[new ii().comparator(),new vr().comparator(),new hn().comparator(),new mn().comparator(),new ni().comparator()],i=[];for(let s of e)i.push(s.comparator);return t.sort(si.makeCompositeComparator([...i,...n]))}static makeCompositeComparator(e){return(t,n)=>{for(let i of e){let s=i(t,n);if(s!==0)return s}return 0}}};var yn=class extends Qe{fieldName(){return"description"}value(e){let t=U().globalFilter;return e.description.replace(t,"").trim()}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=yn.cleanDescription(e.description),i=yn.cleanDescription(t.description);return n.localeCompare(i,void 0,{numeric:!0})}}static cleanDescription(e){let t=U().globalFilter;e=e.replace(t,"").trim();let n=/^\[\[?([^\]]*)]]?/,i=e.match(n);if(i!==null){let s=i[1];e=s.substring(s.indexOf("|")+1)+e.replace(n,"")}return e=this.replaceFormatting(e,/^\*\*([^*]+)\*\*/),e=this.replaceFormatting(e,/^\*([^*]+)\*/),e=this.replaceFormatting(e,/^==([^=]+)==/),e=this.replaceFormatting(e,/^__([^_]+)__/),e=this.replaceFormatting(e,/^_([^_]+)_/),e}static replaceFormatting(e,t){let n=e.match(t);return n!==null&&(e=n[1]+e.replace(t,"")),e}};var Zd=class extends ct{filterRegExp(){return Zd.doneRegexp}fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}},Ns=Zd;Ns.doneRegexp=/^done (before|after|on)? ?(.*)/;var uo=class extends $r{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};var lo=class extends Qe{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}supportsSorting(){return!0}};var Qd=class extends ct{filterRegExp(){return Qd.scheduledRegexp}fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}},Is=Qd;Is.scheduledRegexp=/^scheduled (before|after|on)? ?(.*)/;var Jd=class extends ct{filterRegExp(){return Jd.startRegexp}fieldName(){return"start"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}},Fs=Jd;Fs.startRegexp=/^starts (before|after|on)? ?(.*)/;var ai=class extends ce{constructor(){super();this.filterInstructions=new jr,this.filterInstructions.add(ai.instructionForFieldPresence,t=>this.dates(t).some(n=>n!==null)),this.filterInstructions.add(ai.instructionForFieldAbsence,t=>!this.dates(t).some(n=>n!==null))}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);if(n.filter!==void 0)return n;let i=new fe(t),s=ce.getMatch(this.filterRegExp(),t);if(s!==null){let a=Er.parseDate(s[2]);if(!a.isValid())i.error="do not understand happens date";else{let o,u;s[1]==="before"?(o=c=>this.dates(c).some(d=>d&&d.isBefore(a)),u=" "+s[1]):s[1]==="after"?(o=c=>this.dates(c).some(d=>d&&d.isAfter(a)),u=" "+s[1]):(o=c=>this.dates(c).some(d=>d&&d.isSame(a)),u=" on");let l=ct.getExplanationString("due, start or scheduled",u,!1,a);i.filter=new Ze(t,o,new be(l))}}else i.error="do not understand query filter (happens date)";return i}earliestDate(t){return new ai().dates(t).sort(It)[0]}filterRegExp(){return ai.happensRegexp}dates(t){return Array.of(t.startDate,t.scheduledDate,t.dueDate)}fieldName(){return"happens"}supportsSorting(){return!0}comparator(){return(t,n)=>It(this.earliestDate(t),this.earliestDate(n))}},wr=ai;wr.happensRegexp=/^happens (before|after|on)? ?(.*)/,wr.instructionForFieldPresence="has happens date",wr.instructionForFieldAbsence="no happens date";var co=class extends $r{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}};var fo=class extends Qe{fieldNamePlural(){return this.fieldNameSingular()+"s"}fieldName(){return`${this.fieldNameSingular()}/${this.fieldNamePlural()}`}fieldPattern(){return`${this.fieldNameSingular()}|${this.fieldNamePlural()}`}filterOperatorPattern(){return`${super.filterOperatorPattern()}|include|do not include`}value(e){return this.values(e).join(", ")}getFilter(e,t){return n=>{let i=e.matchesAnyOf(this.values(n));return t?!i:i}}};var gn=class extends fo{fieldNameSingular(){return"tag"}values(e){return e.tags}supportsSorting(){return!0}createSorterFromLine(e){let t=e.match(this.sorterRegExp());if(t===null)return null;let n=!!t[1],i=isNaN(+t[2])?1:+t[2],s=gn.makeCompareByTagComparator(i);return new br(this.fieldNameSingular(),s,n)}sorterRegExp(){return/^sort by tag( reverse)?[\s]*(\d+)?/}comparator(){return gn.makeCompareByTagComparator(1)}static makeCompareByTagComparator(e){return(t,n)=>{if(t.tags.length===0&&n.tags.length===0)return 0;if(t.tags.length===0)return 1;if(n.tags.length===0)return-1;let i=e-1;if(t.tags.length<e&&n.tags.length>=e)return 1;if(n.tags.length<e&&t.tags.length>=e)return-1;if(t.tags.length<e&&n.tags.length<e)return 0;let s=t.tags[i],a=n.tags[i];return s.localeCompare(a,void 0,{numeric:!0})}}};var iT=Xs(nT());var yo=class extends ce{constructor(){super(...arguments);this.basicBooleanRegexp=/(.*(AND|OR|XOR|NOT)\s*[("].*|\(.+\))/g;this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={}}filterRegExp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){let n=new fe(t);if(t.length===0)return n.error="empty line",n;let i=this.preprocessExpression(t);try{let s=(0,iT.parse)(i);for(let u of s)if(u.name==="IDENTIFIER"&&u.value){let l=u.value.trim();if(!(l in this.subFields)){let c=go(l);if(c===null)return n.error=`couldn't parse sub-expression '${l}'`,n;if(c.error)return n.error=`couldn't parse sub-expression '${l}': ${c.error}`,n;c.filter&&(this.subFields[l]=c.filter)}}else if(u.name==="OPERATOR"){if(u.value==null)return n.error="empty operator in boolean query",n;if(!this.supportedOperators.includes(u.value))return n.error=`unknown boolean operator '${u.value}'`,n}let a=u=>this.filterTaskWithParsedQuery(u,s),o=this.constructExplanation(s);return n.filter=new Ze(t,a,o),n}catch(s){let a=s instanceof Error?s.message:"unknown error type";return n.error=`malformed boolean query -- ${a} (check the documentation for guidelines)`,n}return n}preprocessExpression(t){return t.replace(/\(([^()]+)\)/g,'("$1")')}filterTaskWithParsedQuery(t,n){let i=o=>o==="true",s=o=>o?"true":"false",a=[];for(let o of n)if(o.name==="IDENTIFIER"){if(o.value==null)throw Error("null token value");let l=this.subFields[o.value.trim()].filterFunction(t);a.push(s(l))}else if(o.name==="OPERATOR")if(o.value==="NOT"){let u=i(a.pop());a.push(s(!u))}else if(o.value==="OR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u||l))}else if(o.value==="AND"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&l))}else if(o.value==="XOR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&!l||!u&&l))}else throw Error("Unsupported operator: "+o.value);else throw Error("Unsupported token type: "+o);return i(a[0])}constructExplanation(t){let n=[];for(let i of t)if(i.name==="IDENTIFIER"){if(i.value==null)throw Error("null token value");let s=this.subFields[i.value.trim()];n.push(s.explanation)}else if(i.name==="OPERATOR")if(i.value==="NOT"){let s=n.pop();n.push(be.booleanNot([s]))}else if(i.value==="OR"){let s=n.pop(),a=n.pop();n.push(be.booleanOr([a,s]))}else if(i.value==="AND"){let s=n.pop(),a=n.pop();n.push(be.booleanAnd([a,s]))}else if(i.value==="XOR"){let s=n.pop(),a=n.pop();n.push(be.booleanXor([a,s]))}else throw Error("Unsupported operator: "+i.value);else throw Error("Unsupported token type: "+i);return n[0]}};var _o=class extends Qe{fieldName(){return"filename"}value(e){let t=e.filename;return t===null?"":t+".md"}supportsSorting(){return!0}};var To=class extends Qe{constructor(){super()}fieldName(){return"status.name"}value(e){return e.status.name}supportsSorting(){return!0}supportsGrouping(){return!0}};var Gr=class extends ce{canCreateFilterForLine(e){let t=new RegExp(`^(?:${this.fieldNameSingularEscaped()})`);return ce.lineMatchesFilter(t,e)}createFilterOrErrorMessage(e){let t=ce.getMatch(this.filterRegExp(),e);if(t===null)return this.helpMessage(e);let[n,i,s]=t,a=Rt[s.toUpperCase()];if(!a)return this.helpMessage(e);let o;switch(i){case"is":o=u=>u.status.type===a;break;case"is not":o=u=>u.status.type!==a;break;default:return this.helpMessage(e)}return fe.fromFilter(new Ze(e,o,new be(e)))}filterRegExp(){return new RegExp(`^(?:${this.fieldNameSingularEscaped()}) (is|is not) ([^ ]+)$`)}helpMessage(e){let t=Object.values(Rt).filter(i=>i!=="EMPTY").join(" "),n=`Invalid ${this.fieldNameSingular()} instruction: '${e}'.
    Allowed options: 'is' and 'is not' (without quotes).
    Allowed values:  ${t}
                     Note: values are case-insensitive,
                           so 'in_progress' works too, for example.
    Example:         ${this.fieldNameSingular()} is not NON_TASK`;return fe.fromError(e,n)}fieldName(){return"status.type"}value(e){return e.status.type}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=Gr.groupName(e),i=Gr.groupName(t);return n.localeCompare(i,void 0,{numeric:!0})}}supportsGrouping(){return!0}grouper(){return e=>[Gr.groupName(e)]}static groupName(e){let t;switch(e.status.type){case"IN_PROGRESS":t="1";break;case"TODO":t="2";break;case"DONE":t="3";break;case"CANCELLED":t="4";break;case"NON_TASK":t="5";break;case"EMPTY":t="6";break}return t+" "+e.status.type}};var bo=class extends Qe{fieldName(){return"recurrence"}value(e){return e.recurrence!==null?e.recurrence.toText():""}};var ff=[()=>new To,()=>new Gr,()=>new vr,()=>new co,()=>new mn,()=>new wr,()=>new Fs,()=>new Is,()=>new hn,()=>new Ns,()=>new ni,()=>new yn,()=>new gn,()=>new lo,()=>new uo,()=>new yo,()=>new _o,()=>new ii,()=>new bo];function go(r){for(let e of ff){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}function sT(r){let e=/^sort by /;if(r.match(e)===null)return null;for(let t of ff){let i=t().parseSortLine(r);if(i)return i}return null}function aT(r){let e=/^group by /;if(r.match(e)===null)return null;for(let t of ff){let n=t(),i=n.fieldNameSingular();if(r===`group by ${i}`&&n.supportsGrouping())return n.createGrouper()}return null}var vo=class{constructor(e,t){this.nestingLevel=e,this.name=t}};var Eo=class{constructor(e){this.lastHeadingAtLevel=new Array;let n=e.keys().next().value.length;for(let i=0;i<n;i++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new vo(n,i));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var wo=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var Oo=class extends Map{},Do=class extends wo{},Ro=class{constructor(e,t){this.groups=new Oo;let n=this.buildGroupingTree(e,t);this.groups=n.generateAllPaths(),this.groups=this.getSortedGroups()}buildGroupingTree(e,t){let n=new Do(t),i=[n];for(let s of e){let a=[];for(let o of i)for(let u of o.values){let l=Mr.getGroupNamesForTask(s,u);for(let c of l){let d=o.children.get(c);d===void 0&&(d=new Do([]),o.children.set(c,d),a.push(d)),d.values.push(u)}}i=a}return n}getSortedGroups(){return new Oo([...this.groups.entries()].sort())}};var So=class{constructor(e,t,n){this.groups=e,this.groupHeadings=t,this.tasks=n}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} ${t.name}
`;return e+=this.tasksAsStringOfLines(),e}};var Mo=class{constructor(e,t){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length;let n=new Ro(e,t);this.addTasks(n)}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTasks(e){let t=new Eo(e.groups);for(let[n,i]of e.groups){let s=t.getHeadingsForTaskGroup(n),a=new So(n,s,i);this.add(a)}}add(e){this._groups.push(e)}};var ne=class{static fromGroupingProperty(e){return new Jn(e,ne.grouperForProperty(e))}static by(e,t){return new Mo(e,t)}static getGroupNamesForTask(e,t){return e.grouper(t)}static grouperForProperty(e){return ne.groupers[e]}static escapeMarkdownCharacters(e){return e.replace(/\\/g,"\\\\").replace(/_/g,"\\_")}static groupByPriority(e){let t="ERROR";switch(e.priority){case"1":t="High";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break}return[`Priority ${e.priority}: ${t}`]}static groupByRecurrence(e){return e.recurrence!==null?[e.recurrence.toText()]:["None"]}static groupByRecurring(e){return e.recurrence!==null?["Recurring"]:["Not Recurring"]}static groupByStartDate(e){return[ne.stringFromDate(e.startDate,"start")]}static groupByScheduledDate(e){return[ne.stringFromDate(e.scheduledDate,"scheduled")]}static groupByDueDate(e){return[ne.stringFromDate(e.dueDate,"due")]}static groupByDoneDate(e){return[ne.stringFromDate(e.doneDate,"done")]}static groupByHappensDate(e){let t=new wr().earliestDate(e);return[ne.stringFromDate(t,"happens")]}static stringFromDate(e,t){return e===null?"No "+t+" date":e.format(ne.groupDateFormat)}static groupByPath(e){return[ne.escapeMarkdownCharacters(e.path.replace(".md",""))]}static groupByFolder(e){let t=e.path,n=e.filename+".md",i=t.substring(0,t.lastIndexOf(n));return i===""?["/"]:[ne.escapeMarkdownCharacters(i)]}static groupByFileName(e){let t=e.filename;return t===null?["Unknown Location"]:["[["+ne.escapeMarkdownCharacters(t)+"]]"]}static groupByRoot(e){let t=e.path.replace(/\\/g,"/"),n=t.indexOf("/");return n==-1?["/"]:[ne.escapeMarkdownCharacters(t.substring(0,n+1))]}static groupByBacklink(e){if(e.getLinkText({isFilenameUnique:!0})===null)return["Unknown Location"];let n="Unknown Location";if(e.filename!==null&&(n=ne.escapeMarkdownCharacters(e.filename)),e.precedingHeader===null||e.precedingHeader.length===0)return[n];let i=ne.groupByHeading(e)[0];return n===i?[n]:[`${n} > ${i}`]}static groupByStatus(e){return e.status.symbol===" "?["Todo"]:["Done"]}static groupByHeading(e){return e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}static groupByTags(e){return e.tags.length==0?["(No tags)"]:e.tags}},Mr=ne;Mr.groupDateFormat="YYYY-MM-DD dddd",Mr.groupers={backlink:ne.groupByBacklink,done:ne.groupByDoneDate,due:ne.groupByDueDate,filename:ne.groupByFileName,folder:ne.groupByFolder,happens:ne.groupByHappensDate,heading:ne.groupByHeading,path:ne.groupByPath,priority:ne.groupByPriority,recurrence:ne.groupByRecurrence,recurring:ne.groupByRecurring,root:ne.groupByRoot,scheduled:ne.groupByScheduledDate,start:ne.groupByStartDate,status:ne.groupByStatus,tags:ne.groupByTags};var fi=class{constructor({source:e}){this._limit=void 0;this._layoutOptions=new Ei;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this.groupByRegexp=/^group by (backlink|done|due|filename|folder|happens|heading|path|priority|recurrence|recurring|root|scheduled|start|status|tags)/;this.hideOptionsRegexp=/^(hide|show) (task count|backlink|priority|start date|scheduled date|done date|due date|recurrence rule|edit button|urgency)/;this.shortModeRegexp=/^short/;this.explainQueryRegexp=/^explain/;this.limitRegexp=/^limit (to )?(\d+)( tasks?)?/;this.commentRegexp=/^#.*/;this.source=e,e.split(`
`).map(t=>t.trim()).forEach(t=>{switch(!0){case t==="":break;case this.shortModeRegexp.test(t):this._layoutOptions.shortMode=!0;break;case this.explainQueryRegexp.test(t):this._layoutOptions.explainQuery=!0;break;case this.limitRegexp.test(t):this.parseLimit({line:t});break;case this.parseSortBy({line:t}):break;case this.parseGroupBy2({line:t}):break;case this.groupByRegexp.test(t):this.parseGroupBy({line:t});break;case this.hideOptionsRegexp.test(t):this.parseHideOptions({line:t});break;case this.commentRegexp.test(t):break;case this.parseFilter(t):break;default:this._error=`do not understand query: ${t}`}})}explainQuery(){return`Explanation of this Tasks code block query:

`+this.explainQueryWithoutIntroduction()}explainQueryWithoutIntroduction(){let e="",{globalFilter:t}=U();t.length!==0&&(e+=`Only tasks containing the global filter '${t}'.

`);let n=this.filters.length;if(n===0)e+="No filters supplied. All tasks will match the query.";else for(let i=0;i<n;i++)i>0&&(e+=`
`),e+=this.filters[i].explainFilterIndented("");return this._limit!==void 0&&(e+=`

At most ${this._limit} task`,this._limit!==1&&(e+="s"),e+=`.
`),e}get limit(){return this._limit}get layoutOptions(){return this._layoutOptions}get filters(){return this._filters}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}applyQueryToTasks(e){this.filters.forEach(n=>{e=e.filter(n.filterFunction)});let t=si.by(this.sorting,e).slice(0,this.limit);return Mr.by(this.grouping,t)}parseHideOptions({line:e}){let t=e.match(this.hideOptionsRegexp);if(t!==null){let n=t[1]==="hide";switch(t[2]){case"task count":this._layoutOptions.hideTaskCount=n;break;case"backlink":this._layoutOptions.hideBacklinks=n;break;case"priority":this._layoutOptions.hidePriority=n;break;case"start date":this._layoutOptions.hideStartDate=n;break;case"scheduled date":this._layoutOptions.hideScheduledDate=n;break;case"due date":this._layoutOptions.hideDueDate=n;break;case"done date":this._layoutOptions.hideDoneDate=n;break;case"recurrence rule":this._layoutOptions.hideRecurrenceRule=n;break;case"edit button":this._layoutOptions.hideEditButton=n;break;case"urgency":this._layoutOptions.hideUrgency=n;break;default:this._error="do not understand hide/show option"}}}parseFilter(e){let t=go(e);return t!=null?(t.filter?this._filters.push(t.filter):this._error=t.error,!0):!1}parseLimit({line:e}){let t=e.match(this.limitRegexp);t!==null?this._limit=Number.parseInt(t[2],10):this._error="do not understand query limit"}parseSortBy({line:e}){let t=sT(e);return t?(this._sorting.push(t),!0):!1}parseGroupBy({line:e}){let t=e.match(this.groupByRegexp);t!==null?this._grouping.push(Mr.fromGroupingProperty(t[1])):this._error="do not understand query grouping"}parseGroupBy2({line:e}){let t=aT(e);return t?(this._grouping.push(t),!0):!1}};var ko=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return N(this,null,function*(){n.addChild(new pf({app:this.app,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},pf=class extends Ao.MarkdownRenderChild{constructor({app:t,events:n,container:i,source:s,filePath:a}){super(i);switch(this.app=t,this.events=n,this.source=s,this.filePath=a,this.containerEl.className){case"block-language-tasks":this.query=new fi({source:s}),this.queryType="tasks";break;default:this.query=new fi({source:s}),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=new fi({source:this.source}),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return N(this,arguments,function*({tasks:t,state:n}){var a;let s=this.containerEl.createEl("div");if(n==="Warm"&&this.query.error===void 0){console.debug(`Render ${this.queryType} called for a block in active file "${this.filePath}", to select from ${t.length} tasks: plugin state: ${n}`),this.query.layoutOptions.explainQuery&&this.createExplanation(s);let o=this.query.applyQueryToTasks(t);for(let l of o.groups){this.addGroupHeadings(s,l.groupHeadings);let{taskList:c}=yield this.createTasksList({tasks:l.tasks,content:s});s.appendChild(c)}let u=o.totalTasksCount();console.debug(`${u} of ${t.length} tasks displayed in a block in "${this.filePath}"`),this.addTaskCount(s,u)}else this.query.error!==void 0?s.createDiv().innerHTML=`<pre>Tasks query: ${this.query.error.replace(/\n/g,"<br>")}</pre>`:s.setText("Loading Tasks ...");(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}createExplanation(t){let n=this.query.explainQuery(),i=t.createEl("pre");i.addClasses(["plugin-tasks-query-explanation"]),i.setText(n),t.appendChild(i)}createTasksList(i){return N(this,arguments,function*({tasks:t,content:n}){let s=t.length,a=n.createEl("ul");a.addClasses(["contains-task-list","plugin-tasks-query-result"]);for(let o=0;o<s;o++){let u=t[o],l=this.isFilenameUnique({task:u}),c=yield u.toLi({parentUlElement:a,listIndex:o,layoutOptions:this.query.layoutOptions,isFilenameUnique:l});c.querySelectorAll("[data-footnote-id]").forEach(h=>h.remove());let f=this.query.layoutOptions.shortMode;this.query.layoutOptions.hideUrgency||this.addUrgency(c,u),this.query.layoutOptions.hideBacklinks||this.addBacklinks(c,u,f,l),this.query.layoutOptions.hideEditButton||this.addEditButton(c,u),a.appendChild(c)}return{taskList:a,tasksCount:s}})}addEditButton(t,n){t.createEl("a",{cls:"tasks-edit"}).onClickEvent(s=>{s.preventDefault();let a=u=>{sa({originalTask:n,newTasks:st.removeInferredStatusIfNeeded(n,u)})};new Qn({app:this.app,task:n,onSubmit:a}).open()})}addUrgency(t,n){let i=new Intl.NumberFormat().format(n.urgency);t.createSpan({text:i,cls:"tasks-urgency"})}addGroupHeadings(t,n){for(let i of n)this.addGroupHeading(t,i)}addGroupHeading(t,n){return N(this,null,function*(){let i;n.nestingLevel===0?i=t.createEl("h4",{cls:"tasks-group-heading"}):n.nestingLevel===1?i=t.createEl("h5",{cls:"tasks-group-heading"}):i=t.createEl("h6",{cls:"tasks-group-heading"}),yield Ao.MarkdownRenderer.renderMarkdown(n.name,i,this.filePath,this)})}addBacklinks(t,n,i,s){var l;let a=t.createSpan({cls:"tasks-backlink"});i||a.append(" (");let o=a.createEl("a");if(o.href=n.path,o.setAttribute("data-href",n.path),o.rel="noopener",o.target="_blank",o.addClass("internal-link"),i&&o.addClass("internal-link-short-mode"),n.precedingHeader!==null){let c=n.precedingHeader.replace(/#/g,"");o.href=o.href+"#"+c,o.setAttribute("data-href",o.getAttribute("data-href")+"#"+c)}let u;i?u=" \u{1F517}":u=(l=n.getLinkText({isFilenameUnique:s}))!=null?l:"",o.setText(u),i||a.append(")")}addTaskCount(t,n){this.query.layoutOptions.hideTaskCount||t.createDiv({text:`${n} task${n!==1?"s":""}`,cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}};var he=require("obsidian");function oT(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],[">","Rescheduled","x","TODO"],["<","Scheduled","x","TODO"],["!","Important","x","TODO"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],["?","Question","x","TODO"],["*","Star","x","TODO"],["n","Note","x","TODO"],["l","Location","x","TODO"],["i","Information","x","TODO"],["I","Idea","x","TODO"],["S","Amount","x","TODO"],["p","Pro","x","TODO"],["c","Con","x","TODO"],["b","Bookmark","x","TODO"],['"',"Quote","x","TODO"],["0","Speech bubble 0","0","NON_TASK"],["1","Speech bubble 1","1","NON_TASK"],["2","Speech bubble 2","2","NON_TASK"],["3","Speech bubble 3","3","NON_TASK"],["4","Speech bubble 4","4","NON_TASK"],["5","Speech bubble 5","5","NON_TASK"],["6","Speech bubble 6","6","NON_TASK"],["7","Speech bubble 7","7","NON_TASK"],["8","Speech bubble 8","8","NON_TASK"],["9","Speech bubble 9","9","NON_TASK"]]}function uT(){return[[" ","incomplete","x","TODO"],["x","complete / done"," ","DONE"],["-","cancelled"," ","CANCELLED"],[">","deferred","x","TODO"],["/","in progress, or half-done","x","IN_PROGRESS"],["!","Important","x","TODO"],["?","question","x","TODO"],["R","review","x","TODO"],["+","Inbox / task that should be processed later","x","TODO"],["b","bookmark","x","TODO"],["B","brainstorm","x","TODO"],["D","deferred or scheduled","x","TODO"],["I","Info","x","TODO"],["i","idea","x","TODO"],["N","note","x","TODO"],["Q","quote","x","TODO"],["W","win / success / reward","x","TODO"],["P","pro","x","TODO"],["C","con","x","TODO"]]}function lT(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],[">","Deferred","x","TODO"],["!","Important","x","TODO"],["?","Question","x","TODO"],["r","Review","x","TODO"]]}function cT(){return[[" ","Unchecked","x","TODO"],["x","Regular"," ","DONE"],["X","Checked"," ","DONE"],["-","Dropped"," ","CANCELLED"],[">","Forward","x","TODO"],["D","Date","x","TODO"],["?","Question","x","TODO"],["/","Half Done","x","IN_PROGRESS"],["+","Add","x","TODO"],["R","Research","x","TODO"],["!","Important","x","TODO"],["i","Idea","x","TODO"],["B","Brainstorm","x","TODO"],["P","Pro","x","TODO"],["C","Con","x","TODO"],["Q","Quote","x","TODO"],["N","Note","x","TODO"],["b","Bookmark","x","TODO"],["I","Information","x","TODO"],["p","Paraphrase","x","TODO"],["L","Location","x","TODO"],["E","Example","x","TODO"],["A","Answer","x","TODO"],["r","Reward","x","TODO"],["c","Choice","x","TODO"],["d","Doing","x","IN_PROGRESS"],["T","Time","x","TODO"],["@","Character / Person","x","TODO"],["t","Talk","x","TODO"],["O","Outline / Plot","x","TODO"],["~","Conflict","x","TODO"],["W","World","x","TODO"],["f","Clue / Find","x","TODO"],["F","Foreshadow","x","TODO"],["H","Favorite / Health","x","TODO"],["&","Symbolism","x","TODO"],["s","Secret","x","TODO"]]}function dT(){return[[" ","to-do","x","TODO"],["/","incomplete","x","IN_PROGRESS"],["x","done"," ","DONE"],["-","canceled"," ","CANCELLED"],[">","forwarded","x","TODO"],["<","scheduling","x","TODO"],["?","question","x","TODO"],["!","important","x","TODO"],["*","star","x","TODO"],['"',"quote","x","TODO"],["l","location","x","TODO"],["b","bookmark","x","TODO"],["i","information","x","TODO"],["S","savings","x","TODO"],["I","idea","x","TODO"],["p","pros","x","TODO"],["c","cons","x","TODO"],["f","fire","x","TODO"],["k","key","x","TODO"],["w","win","x","TODO"],["u","up","x","TODO"],["d","down","x","TODO"]]}function fT(){return[[" ","to-do","x","TODO"],["/","incomplete","x","IN_PROGRESS"],["x","done"," ","DONE"],["-","canceled"," ","CANCELLED"],[">","forwarded","x","TODO"],["<","scheduling","x","TODO"],["?","question","x","TODO"],["!","important","x","TODO"],["*","star","x","TODO"],['"',"quote","x","TODO"],["l","location","x","TODO"],["b","bookmark","x","TODO"],["i","information","x","TODO"],["S","savings","x","TODO"],["I","idea","x","TODO"],["p","pros","x","TODO"],["c","cons","x","TODO"],["f","fire","x","TODO"],["k","key","x","TODO"],["w","win","x","TODO"],["u","up","x","TODO"],["d","down","x","TODO"]]}var pT=[{text:"Core Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:"<p>These are the core statuses that Tasks supports natively, with no need for custom CSS styling or theming.</p><p>You can add edit and add your own custom statuses in the section below.</p>"},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertTaskCoreStatusSettings",featureFlag:"",notice:null}]},{text:"Custom Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:`<p>You should first <b>select and install a CSS Snippet or Theme</b> to style custom checkboxes.</p><p>Then, use the buttons below to set up your custom statuses, to match your chosen CSS checkboxes.</p><p><b>Note</b> Any statuses with the same symbol as any earlier statuses will be ignored. You can confirm the actually loaded statuses by running the 'Create or edit task' command and looking at the Status drop-down.</p><p></p><p>See the <a href="https://obsidian-tasks-group.github.io/obsidian-tasks/getting-started/statuses/">documentation</a> to get started!</p>`},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertCustomTaskStatusSettings",featureFlag:"",notice:null}]}];var Vt=require("obsidian");var vn=class{validate(e){let t=[];return t.push(...this.validateSymbol(e)),t.push(...this.validateName(e)),t.push(...this.validateNextSymbol(e)),t}validateStatusCollectionEntry(e){let[t,n,i,s]=e,a=[];if(a.push(...this.validateType(s)),t===i&&s!=="NON_TASK"&&a.push(`Status symbol '${t}' toggles to itself`),a.length>0)return a;let o=W.createFromImportedValue(e).configuration;return a.push(...this.validateSymbolTypeConventions(o)),a.push(...this.validate(o)),a}validateSymbol(e){return vn.validateOneSymbol(e.symbol,"Task Status Symbol")}validateNextSymbol(e){return vn.validateOneSymbol(e.nextStatusSymbol,"Task Next Status Symbol")}validateName(e){let t=[];return e.name.length===0&&t.push("Task Status Name cannot be empty."),t}validateType(e){let t=Rt[e],n=[];return t||n.push(`Status Type "${e}" is not a valid type`),t=="EMPTY"&&n.push('Status Type "EMPTY" is not permitted in user data'),n}validateSymbolTypeConventions(e){let t=[],n=e.symbol,i=new de,s=n==="X"?"x":n,a=i.bySymbol(s);return a.type!=="EMPTY"&&(e.nextStatusSymbol!==a.nextStatusSymbol&&t.push(`Next Status Symbol for symbol '${n}': '${e.nextStatusSymbol}' is inconsistent with convention '${a.nextStatusSymbol}'`),e.type!==a.type&&t.push(`Status Type for symbol '${n}': '${e.type}' is inconsistent with convention '${a.type}'`)),t}static validateOneSymbol(e,t){let n=[];return e.length===0&&n.push(`${t} cannot be empty.`),e.length>1&&n.push(`${t} ("${e}") must be a single character.`),n}};var En=new vn,bt=class extends Vt.Modal{constructor(t,n,i){super(t.app);this.plugin=t;this.saved=!1;this.error=!1;this.statusSymbol=n.symbol,this.statusName=n.name,this.statusNextSymbol=n.nextStatusSymbol,this.statusAvailableAsCommand=n.availableAsCommand,this.type=n.type,this.isCoreStatus=i}statusConfiguration(){return new Fe(this.statusSymbol,this.statusName,this.statusNextSymbol,this.statusAvailableAsCommand,this.type)}display(){return N(this,null,function*(){let{contentEl:t}=this;t.empty();let n=t.createDiv(),i;new Vt.Setting(n).setName("Task Status Symbol").setDesc("This is the character between the square braces. (It can only be edited for Custom statuses, and not Core statuses.)").addText(l=>{i=l,l.setValue(this.statusSymbol).onChange(c=>{this.statusSymbol=c,bt.setValid(l,En.validateSymbol(this.statusConfiguration()))})}).setDisabled(this.isCoreStatus).then(l=>{bt.setValid(i,En.validateSymbol(this.statusConfiguration()))});let s;new Vt.Setting(n).setName("Task Status Name").setDesc("This is the friendly name of the task status.").addText(l=>{s=l,l.setValue(this.statusName).onChange(c=>{this.statusName=c,bt.setValid(l,En.validateName(this.statusConfiguration()))})}).then(l=>{bt.setValid(s,En.validateName(this.statusConfiguration()))});let a;new Vt.Setting(n).setName("Task Next Status Symbol").setDesc("When clicked on this is the symbol that should be used next.").addText(l=>{a=l,l.setValue(this.statusNextSymbol).onChange(c=>{this.statusNextSymbol=c,bt.setValid(l,En.validateNextSymbol(this.statusConfiguration()))})}).then(l=>{bt.setValid(a,En.validateNextSymbol(this.statusConfiguration()))}),new Vt.Setting(n).setName("Task Status Type").setDesc("Control how the status behaves for searching and toggling.").addDropdown(l=>{["TODO","IN_PROGRESS","DONE","CANCELLED","NON_TASK"].forEach(d=>{l.addOption(d,d)}),l.setValue(this.type).onChange(d=>{this.type=W.getTypeFromStatusTypeString(d)})}),W.tasksPluginCanCreateCommandsForStatuses()&&new Vt.Setting(n).setName("Available as command").setDesc("If enabled this status will be available as a command so you can assign a hotkey and toggle the status using it.").addToggle(l=>{l.setValue(this.statusAvailableAsCommand).onChange(c=>N(this,null,function*(){this.statusAvailableAsCommand=c}))});let o=t.createDiv(),u=new Vt.Setting(o);u.addButton(l=>(l.setTooltip("Save").setIcon("checkmark").onClick(()=>N(this,null,function*(){let c=En.validate(this.statusConfiguration());if(c.length>0){let d=c.join(`
`)+`

Fix errors before saving.`;new Vt.Notice(d);return}this.saved=!0,this.close()})),l)),u.addExtraButton(l=>(l.setIcon("cross").setTooltip("Cancel").onClick(()=>{this.saved=!1,this.close()}),l))})}onOpen(){this.display()}static setValidationError(t){t.inputEl.addClass("tasks-settings-is-invalid")}static removeValidationError(t){t.inputEl.removeClass("tasks-settings-is-invalid")}static setValid(t,n){n.length===0?bt.removeValidationError(t):bt.setValidationError(t)}};var pi=class extends he.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.customFunctions={insertTaskCoreStatusSettings:this.insertTaskCoreStatusSettings.bind(this),insertCustomTaskStatusSettings:this.insertCustomTaskStatusSettings.bind(this)};this.plugin=t}saveSettings(t){return N(this,null,function*(){yield this.plugin.saveSettings(),t&&this.display()})}display(){let{containerEl:t}=this;t.empty(),this.containerEl.addClass("tasks-settings"),t.createEl("h3",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),t.createEl("h4",{text:"Global filter Settings"}),new he.Setting(t).setName("Global task filter").setDesc(pi.createFragmentWithHTML('<p><b>Recommended: Leave empty if you want all checklist items in your vault to be tasks managed by this plugin.</b></p><p>Use a global filter if you want Tasks to only act on a subset of your "<code>- [ ]</code>" checklist items, so that a checklist item must include the specified string in its description in order to be considered a task.<p><p>For example, if you set the global filter to <code>#task</code>, the Tasks plugin will only handle checklist items tagged with <code>#task</code>.</br>Other checklist items will remain normal checklist items and not appear in queries or get a done date set.</p><p>See the <a href="https://obsidian-tasks-group.github.io/obsidian-tasks/getting-started/global-filter/">documentation</a>.</p>')).addText(i=>{let s=U();i.setPlaceholder("e.g. #task or TODO").setValue(s.globalFilter).onChange(a=>N(this,null,function*(){it({globalFilter:a}),yield this.plugin.saveSettings()}))}),new he.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(i=>{let s=U();i.setValue(s.removeGlobalFilter).onChange(a=>N(this,null,function*(){it({removeGlobalFilter:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Task Statuses"});let{headingOpened:n}=U();pT.forEach(i=>{this.addOneSettingsBlock(t,i,n)}),t.createEl("h4",{text:"Date Settings"}),new he.Setting(t).setName("Set done date on every completed task").setDesc("Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done").addToggle(i=>{let s=U();i.setValue(s.setDoneDate).onChange(a=>N(this,null,function*(){it({setDoneDate:a}),yield this.plugin.saveSettings()}))}),new he.Setting(t).setName("Use filename as Scheduled date for undated tasks").setDesc(pi.createFragmentWithHTML('Save time entering Scheduled (\u23F3) dates.</br>If this option is enabled, any undated tasks will be given a default Scheduled date extracted from their file name.</br>The date in the file name must be in one of <code>YYYY-MM-DD</code> or <code>YYYYMMDD</code> formats.</br>Undated tasks have none of Due (\u{1F4C5} ), Scheduled (\u23F3) and Start (\u{1F6EB}) dates.</br><p>See the <a href="https://obsidian-tasks-group.github.io/obsidian-tasks/getting-started/use-filename-as-default-date/">documentation</a>.</p>')).addToggle(i=>{let s=U();i.setValue(s.useFilenameAsScheduledDate).onChange(a=>N(this,null,function*(){it({useFilenameAsScheduledDate:a}),yield this.plugin.saveSettings()}))}),new he.Setting(t).setName("Folders with default Scheduled dates").setDesc("Leave empty if you want to use default Scheduled dates everywhere, or enter a comma-separated list of folders.").addText(i=>N(this,null,function*(){let s=U();yield this.plugin.saveSettings(),i.setValue(pi.renderFolderArray(s.filenameAsDateFolders)).onChange(a=>N(this,null,function*(){let o=pi.parseCommaSeparatedFolders(a);it({filenameAsDateFolders:o}),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Auto-suggest Settings"}),new he.Setting(t).setName("Auto-suggest task content").setDesc("Enabling this will open an intelligent suggest menu while typing inside a recognized task line.").addToggle(i=>{let s=U();i.setValue(s.autoSuggestInEditor).onChange(a=>N(this,null,function*(){it({autoSuggestInEditor:a}),yield this.plugin.saveSettings()}))}),new he.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(i=>{let s=U();i.setLimits(0,3,1).setValue(s.autoSuggestMinMatch).setDynamicTooltip().onChange(a=>N(this,null,function*(){it({autoSuggestMinMatch:a}),yield this.plugin.saveSettings()}))}),new he.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(i=>{let s=U();i.setLimits(3,12,1).setValue(s.autoSuggestMaxItems).setDynamicTooltip().onChange(a=>N(this,null,function*(){it({autoSuggestMaxItems:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Dialog Settings"}),new he.Setting(t).setName("Provide access keys in dialogs").setDesc("If the access keys (keyboard shortcuts) for various controls in dialog boxes conflict with system keyboard shortcuts or assistive technology functionality that is important for you, you may want to deactivate them here.").addToggle(i=>{let s=U();i.setValue(s.provideAccessKeys).onChange(a=>N(this,null,function*(){it({provideAccessKeys:a}),yield this.plugin.saveSettings()}))})}addOneSettingsBlock(t,n,i){let s=t.createEl("details",{cls:"tasks-nested-settings",attr:Re({},n.open||i[n.text]?{open:!0}:{})});s.empty(),s.ontoggle=()=>{i[n.text]=s.open,it({headingOpened:i}),this.plugin.saveSettings()};let a=s.createEl("summary");if(new he.Setting(a).setHeading().setName(n.text),a.createDiv("collapser").createDiv("handle"),n.notice!==null){let o=s.createEl("div",{cls:n.notice.class,text:n.notice.text});n.notice.html!==null&&o.insertAdjacentHTML("beforeend",n.notice.html)}n.settings.forEach(o=>{if(!(o.featureFlag!==""&&!Wp(o.featureFlag))&&(o.type==="checkbox"?new he.Setting(s).setName(o.name).setDesc(o.description).addToggle(u=>{let l=U();l.generalSettings[o.settingName]||Xr(o.settingName,o.initialValue),u.setValue(l.generalSettings[o.settingName]).onChange(c=>N(this,null,function*(){Xr(o.settingName,c),yield this.plugin.saveSettings()}))}):o.type==="text"?new he.Setting(s).setName(o.name).setDesc(o.description).addText(u=>{let l=U();l.generalSettings[o.settingName]||Xr(o.settingName,o.initialValue);let c=d=>N(this,null,function*(){Xr(o.settingName,d),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,he.debounce)(c,500,!0))}):o.type==="textarea"?new he.Setting(s).setName(o.name).setDesc(o.description).addTextArea(u=>{let l=U();l.generalSettings[o.settingName]||Xr(o.settingName,o.initialValue);let c=d=>N(this,null,function*(){Xr(o.settingName,d),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,he.debounce)(c,500,!0)),u.inputEl.rows=8,u.inputEl.cols=40}):o.type==="function"&&this.customFunctions[o.settingName](s,this),o.notice!==null)){let u=s.createEl("p",{cls:o.notice.class,text:o.notice.text});o.notice.html!==null&&u.insertAdjacentHTML("beforeend",o.notice.html)}})}static parseCommaSeparatedFolders(t){return t.split(",").map(n=>n.trim()).map(n=>n.replace(/^\/|\/$/g,"")).filter(n=>n!=="")}static renderFolderArray(t){return t.join(",")}insertTaskCoreStatusSettings(t,n){let{statusSettings:i}=U();i.coreStatuses.forEach(s=>{hT(t,s,i.coreStatuses,i,n,n.plugin,!0)})}insertCustomTaskStatusSettings(t,n){let{statusSettings:i}=U();i.customStatuses.forEach(l=>{hT(t,l,i.customStatuses,i,n,n.plugin,!1)}),t.createEl("div"),new he.Setting(t).addButton(l=>{l.setButtonText("Add New Task Status").setCta().onClick(()=>N(this,null,function*(){xe.addStatus(i.customStatuses,new Fe("","","",!1,"TODO")),yield hi(i,n)}))}).infoEl.remove();let a=[["AnuPpuccin Theme",oT()],["Ebullientworks Theme",lT()],["ITS Theme & SlRvb Checkboxes",cT()],["Minimal Theme",dT()],["Things Theme",fT()],["Aura Theme (Dark mode only)",uT()]];for(let[l,c]of a)new he.Setting(t).addButton(f=>{let h=`${l}: Add ${c.length} supported Statuses`;f.setButtonText(h).onClick(()=>N(this,null,function*(){yield iA(c,i,n)}))}).infoEl.remove();new he.Setting(t).addButton(l=>{l.setButtonText("Add All Unknown Status Types").setCta().onClick(()=>N(this,null,function*(){let d=this.plugin.getTasks().map(h=>h.status),f=de.getInstance().findUnknownStatuses(d);f.length!==0&&(f.forEach(h=>{xe.addStatus(i.customStatuses,h)}),yield hi(i,n))}))}).infoEl.remove(),new he.Setting(t).addButton(l=>{l.setButtonText("Reset Custom Status Types to Defaults").setWarning().onClick(()=>N(this,null,function*(){xe.resetAllCustomStatuses(i),yield hi(i,n)}))}).infoEl.remove()}},Ws=pi;Ws.createFragmentWithHTML=t=>createFragment(n=>n.createDiv().innerHTML=t);function hT(r,e,t,n,i,s,a){let o=r.createEl("pre");o.addClass("row-for-status"),o.textContent=new W(e).previewText();let u=new he.Setting(r);u.infoEl.replaceWith(o),a||u.addExtraButton(l=>{l.setIcon("cross").setTooltip("Delete").onClick(()=>N(this,null,function*(){xe.deleteStatus(t,e)&&(yield hi(n,i))}))}),u.addExtraButton(l=>{l.setIcon("pencil").setTooltip("Edit").onClick(()=>N(this,null,function*(){let c=new bt(s,e,a);c.onClose=()=>N(this,null,function*(){c.saved&&xe.replaceStatus(t,e,c.statusConfiguration())&&(yield hi(n,i))}),c.open()}))}),u.infoEl.remove()}function iA(r,e,t){return N(this,null,function*(){xe.bulkAddStatusCollection(e,r).forEach(i=>{new he.Notice(i)}),yield hi(e,t)})}function hi(r,e){return N(this,null,function*(){it({statusSettings:r}),xe.applyToStatusRegistry(r,de.getInstance()),yield e.saveSettings(!0)})}var yT=require("obsidian");var sA=`${Ut}${Lt}${qt}`;function mT(r,e,t){let n=[];n=n.concat(uA(r,e,t)),n=n.concat(lA(r,e,t));let i=oA(r,t),s=hf(r,/([a-zA-Z'_-]*)/g,e),a=!1;if(s&&s.length>0){let o=s[0];if(o.length>=Math.max(1,t.autoSuggestMinMatch)){let u=i.filter(l=>l.displayText.toLowerCase().includes(o.toLowerCase()));for(let l of u)n.push({suggestionType:"match",displayText:l.displayText,appendText:l.appendText,insertAt:s.index,insertSkip:o.length}),a=!0}}return!a&&t.autoSuggestMinMatch===0&&(n=n.concat(i)),n.length>0&&!n.some(o=>o.suggestionType==="match")&&n.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`}),n=n.slice(0,t.autoSuggestMaxItems),n}function aA(r){if(Object.values(Ce).some(e=>e.length>0&&r.includes(e)))return!0}function oA(r,e){let t=[];return r.includes(qt)||t.push({displayText:`${qt} due date`,appendText:`${qt} `}),r.includes(Ut)||t.push({displayText:`${Ut} start date`,appendText:`${Ut} `}),r.includes(Lt)||t.push({displayText:`${Lt} scheduled date`,appendText:`${Lt} `}),aA(r)||(t.push({displayText:`${Ce.High} high priority`,appendText:`${Ce.High} `}),t.push({displayText:`${Ce.Medium} medium priority`,appendText:`${Ce.Medium} `}),t.push({displayText:`${Ce.Low} low priority`,appendText:`${Ce.Low} `})),r.includes(Ft)||t.push({displayText:`${Ft} recurring (repeat)`,appendText:`${Ft} `}),t}function uA(r,e,t){let n=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],i=[],s=new RegExp(`([${sA}])\\s*([0-9a-zA-Z ]*)`,"ug"),a=hf(r,s,e);if(a&&a.length>=2){let o=a[1],u=a[2];if(u.length<t.autoSuggestMinMatch)return[];let l=u&&u.length>1?Er.parseDate(Zn(u),!0):null;l&&l.isValid()&&i.push({displayText:`${l.format(S.dateFormat)}`,appendText:`${o} ${l.format(S.dateFormat)} `,insertAt:a.index,insertSkip:a[0].length});let c=1,d=5,f=n.filter(h=>u&&u.length>=c&&h.toLowerCase().includes(u.toLowerCase())).slice(0,d);f.length===0&&(f=n.slice(0,d));for(let h of f){let m=`${Er.parseDate(h,!0).format(S.dateFormat)}`;i.push({suggestionType:"match",displayText:`${h} (${m})`,appendText:`${o} ${m} `,insertAt:a.index,insertSkip:a[0].length})}}return i}function lA(r,e,t){var o;let n=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],i=[],s=new RegExp(`(${Ft})\\s*([0-9a-zA-Z ]*)`,"ug"),a=hf(r,s,e);if(a&&a.length>=2){let u=a[1],l=a[2];if(l.length<t.autoSuggestMinMatch)return[];if(l.length>0){let h=(o=Ie.fromText({recurrenceRuleText:l,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:o.toText();if(h){let y=`${u} ${h} `;if(i.push({suggestionType:"match",displayText:`\u2705 ${h}`,appendText:y,insertAt:a.index,insertSkip:a[0].length}),a[0]==y)return[]}}let c=1,d=t.autoSuggestMaxItems/2,f=n.filter(h=>l&&l.length>=c&&h.toLowerCase().includes(l.toLowerCase())).slice(0,d);f.length===0&&l.trim().length===0&&(f=n.slice(0,d));for(let h of f)i.push({suggestionType:"match",displayText:`${h}`,appendText:`${u} ${h} `,insertAt:a.index,insertSkip:a[0].length})}return i}function hf(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<=t&&t<=i.index+i[0].length)return i;return[]}var Po=class extends yT.EditorSuggest{constructor(t,n){super(t);this.settings=n}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return s.contains(this.settings.globalFilter)&&s.match(S.taskRegex)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){let n=t.query,i=t.editor.getCursor(),s=mT(n,i.ch,this.settings),a=[];for(let o of s)a.push(wt(Re({},o),{context:t}));return a}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){var u,l,c;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let d=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(l=(u=i==null?void 0:i.cm)==null?void 0:u.contentDOM)==null||l.dispatchEvent(d);return}let s=t.context.editor.getCursor(),a={line:s.line,ch:(c=t.insertAt)!=null?c:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length})}};var xo=class extends gT.Plugin{onload(){return N(this,null,function*(){console.log('loading plugin "tasks"'),yield this.loadSettings(),this.addSettingTab(new Ws({plugin:this})),jp({metadataCache:this.app.metadataCache,vault:this.app.vault}),yield this.loadTaskStatuses();let t=new so({obsidianEvents:this.app.workspace});this.cache=new Zr({metadataCache:this.app.metadataCache,vault:this.app.vault,events:t}),this.inlineRenderer=new ao({plugin:this}),this.queryRenderer=new ko({plugin:this,events:t}),this.registerEditorExtension(B_()),this.registerEditorSuggest(new Po(this.app,U())),new io({plugin:this})})}loadTaskStatuses(){return N(this,null,function*(){let{statusSettings:t}=U();xe.applyToStatusRegistry(t,de.getInstance())})}onunload(){var t;console.log('unloading plugin "tasks"'),(t=this.cache)==null||t.unload()}loadSettings(){return N(this,null,function*(){let t=yield this.loadData();it(t),yield this.loadTaskStatuses()})}saveSettings(){return N(this,null,function*(){yield this.saveData(U())})}getTasks(){var t;return(t=this.cache)==null?void 0:t.getTasks()}};
