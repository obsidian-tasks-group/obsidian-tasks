/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

"use strict";var b_=Object.create;var Cn=Object.defineProperty,v_=Object.defineProperties,E_=Object.getOwnPropertyDescriptor,R_=Object.getOwnPropertyDescriptors,w_=Object.getOwnPropertyNames,zd=Object.getOwnPropertySymbols,D_=Object.getPrototypeOf,Vd=Object.prototype.hasOwnProperty,M_=Object.prototype.propertyIsEnumerable;var Kd=(r,e,t)=>e in r?Cn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,$e=(r,e)=>{for(var t in e||(e={}))Vd.call(e,t)&&Kd(r,t,e[t]);if(zd)for(var t of zd(e))M_.call(e,t)&&Kd(r,t,e[t]);return r},qt=(r,e)=>v_(r,R_(e));var h=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),P_=(r,e)=>{for(var t in e)Cn(r,t,{get:e[t],enumerable:!0})},Zd=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of w_(e))!Vd.call(r,i)&&i!==t&&Cn(r,i,{get:()=>e[i],enumerable:!(n=E_(e,i))||n.enumerable});return r};var os=(r,e,t)=>(t=r!=null?b_(D_(r)):{},Zd(e||!r||!r.__esModule?Cn(t,"default",{value:r,enumerable:!0}):t,r)),O_=r=>Zd(Cn({},"__esModule",{value:!0}),r);var ne=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var Mf=h((DA,hs)=>{var sf,af,of,uf,lf,cf,df,ff,pf,fs,eo,hf,mf,yf,Qr,gf,_f,Tf,bf,vf,Ef,Rf,wf,Df,ps;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof hs=="object"&&typeof hs.exports=="object"?r(t(e,t(hs.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,a){return n[s]=i?i(s,a):a}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])};sf=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},af=Object.assign||function(n){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},of=function(n,i){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)i.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(s[a[o]]=n[a[o]]);return s},uf=function(n,i,s,a){var o=arguments.length,u=o<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,s,a);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(u=(o<3?l(u):o>3?l(i,s,u):l(i,s))||u);return o>3&&u&&Object.defineProperty(i,s,u),u},lf=function(n,i){return function(s,a){i(s,a,n)}},cf=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},df=function(n,i,s,a){function o(u){return u instanceof s?u:new s(function(l){l(u)})}return new(s||(s=Promise))(function(u,l){function c(p){try{f(a.next(p))}catch(y){l(y)}}function d(p){try{f(a.throw(p))}catch(y){l(y)}}function f(p){p.done?u(p.value):o(p.value).then(c,d)}f((a=a.apply(n,i||[])).next())})},ff=function(n,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,o,u,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(p){return d([f,p])}}function d(f){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(u=f[0]&2?o.return:f[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,f[1])).done)return u;switch(o=0,u&&(f=[f[0]&2,u.value]),f[0]){case 0:case 1:u=f;break;case 4:return s.label++,{value:f[1],done:!1};case 5:s.label++,o=f[1],f=[0];continue;case 7:f=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(f[0]===6||f[0]===2)){s=0;continue}if(f[0]===3&&(!u||f[1]>u[0]&&f[1]<u[3])){s.label=f[1];break}if(f[0]===6&&s.label<u[1]){s.label=u[1],u=f;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(f);break}u[2]&&s.ops.pop(),s.trys.pop();continue}f=i.call(n,s)}catch(p){f=[6,p],o=0}finally{a=u=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},pf=function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&ps(i,n,s)},ps=Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]},fs=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],a=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},eo=function(n,i){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var a=s.call(n),o,u=[],l;try{for(;(i===void 0||i-- >0)&&!(o=a.next()).done;)u.push(o.value)}catch(c){l={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(l)throw l.error}}return u},hf=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(eo(arguments[i]));return n},mf=function(){for(var n=0,i=0,s=arguments.length;i<s;i++)n+=arguments[i].length;for(var a=Array(n),o=0,i=0;i<s;i++)for(var u=arguments[i],l=0,c=u.length;l<c;l++,o++)a[o]=u[l];return a},yf=function(n,i,s){if(s||arguments.length===2)for(var a=0,o=i.length,u;a<o;a++)(u||!(a in i))&&(u||(u=Array.prototype.slice.call(i,0,a)),u[a]=i[a]);return n.concat(u||Array.prototype.slice.call(i))},Qr=function(n){return this instanceof Qr?(this.v=n,this):new Qr(n)},gf=function(n,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(n,i||[]),o,u=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(m){a[m]&&(o[m]=function(g){return new Promise(function(k,x){u.push([m,g,k,x])>1||c(m,g)})})}function c(m,g){try{d(a[m](g))}catch(k){y(u[0][3],k)}}function d(m){m.value instanceof Qr?Promise.resolve(m.value.v).then(f,p):y(u[0][2],m)}function f(m){c("next",m)}function p(m){c("throw",m)}function y(m,g){m(g),u.shift(),u.length&&c(u[0][0],u[0][1])}},_f=function(n){var i,s;return i={},a("next"),a("throw",function(o){throw o}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(o,u){i[o]=n[o]?function(l){return(s=!s)?{value:Qr(n[o](l)),done:o==="return"}:u?u(l):l}:u}},Tf=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],s;return i?i.call(n):(n=typeof fs=="function"?fs(n):n[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(u){s[u]=n[u]&&function(l){return new Promise(function(c,d){l=n[u](l),o(c,d,l.done,l.value)})}}function o(u,l,c,d){Promise.resolve(d).then(function(f){u({value:f,done:c})},l)}},bf=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};vf=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&ps(i,n,s);return t(i,n),i},Ef=function(n){return n&&n.__esModule?n:{default:n}},Rf=function(n,i,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(n):a?a.value:i.get(n)},wf=function(n,i,s,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(n,s):o?o.value=s:i.set(n,s),s},Df=function(n,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?i===n:n.has(i)},r("__extends",sf),r("__assign",af),r("__rest",of),r("__decorate",uf),r("__param",lf),r("__metadata",cf),r("__awaiter",df),r("__generator",ff),r("__exportStar",pf),r("__createBinding",ps),r("__values",fs),r("__read",eo),r("__spread",hf),r("__spreadArrays",mf),r("__spreadArray",yf),r("__await",Qr),r("__asyncGenerator",gf),r("__asyncDelegator",_f),r("__asyncValues",Tf),r("__makeTemplateObject",bf),r("__importStar",vf),r("__importDefault",Ef),r("__classPrivateFieldGet",Rf),r("__classPrivateFieldSet",wf),r("__classPrivateFieldIn",Df)})});var Q=h(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.matchAnyPattern=yr.extractTerms=yr.repeatedTimeunitPattern=void 0;function bT(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}yr.repeatedTimeunitPattern=bT;function bp(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}yr.extractTerms=bp;function vT(r){return`(?:${bp(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}yr.matchAnyPattern=vT});var z=h((ho,mo)=>{(function(r,e){typeof ho=="object"&&typeof mo!="undefined"?mo.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(ho,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",d="year",f="date",p="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},k=function(P,v,_){var O=String(P);return!O||O.length>=v?P:""+Array(v+1-O.length).join(_)+P},x={s:k,z:function(P){var v=-P.utcOffset(),_=Math.abs(v),O=Math.floor(_/60),E=_%60;return(v<=0?"+":"-")+k(O,2,"0")+":"+k(E,2,"0")},m:function P(v,_){if(v.date()<_.date())return-P(_,v);var O=12*(_.year()-v.year())+(_.month()-v.month()),E=v.clone().add(O,l),S=_-E<0,A=v.clone().add(O+(S?-1:1),l);return+(-(O+(_-E)/(S?E-A:A-E))||0)},a:function(P){return P<0?Math.ceil(P)||0:Math.floor(P)},p:function(P){return{M:l,y:d,w:u,d:o,D:f,h:a,m:s,s:i,ms:n,Q:c}[P]||String(P||"").toLowerCase().replace(/s$/,"")},u:function(P){return P===void 0}},C="en",H={};H[C]=g;var re=function(P){return P instanceof ye},de=function(P,v,_){var O;if(!P)return C;if(typeof P=="string")H[P]&&(O=P),v&&(H[P]=v,O=P);else{var E=P.name;H[E]=P,O=E}return!_&&O&&(C=O),O||!_&&C},J=function(P,v){if(re(P))return P.clone();var _=typeof v=="object"?v:{};return _.date=P,_.args=arguments,new ye(_)},M=x;M.l=de,M.i=re,M.w=function(P,v){return J(P,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var ye=function(){function P(_){this.$L=de(_.locale,null,!0),this.parse(_)}var v=P.prototype;return v.parse=function(_){this.$d=function(O){var E=O.date,S=O.utc;if(E===null)return new Date(NaN);if(M.u(E))return new Date;if(E instanceof Date)return new Date(E);if(typeof E=="string"&&!/Z$/i.test(E)){var A=E.match(y);if(A){var q=A[2]-1||0,ee=(A[7]||"0").substring(0,3);return S?new Date(Date.UTC(A[1],q,A[3]||1,A[4]||0,A[5]||0,A[6]||0,ee)):new Date(A[1],q,A[3]||1,A[4]||0,A[5]||0,A[6]||0,ee)}}return new Date(E)}(_),this.$x=_.x||{},this.init()},v.init=function(){var _=this.$d;this.$y=_.getFullYear(),this.$M=_.getMonth(),this.$D=_.getDate(),this.$W=_.getDay(),this.$H=_.getHours(),this.$m=_.getMinutes(),this.$s=_.getSeconds(),this.$ms=_.getMilliseconds()},v.$utils=function(){return M},v.isValid=function(){return this.$d.toString()!==p},v.isSame=function(_,O){var E=J(_);return this.startOf(O)<=E&&E<=this.endOf(O)},v.isAfter=function(_,O){return J(_)<this.startOf(O)},v.isBefore=function(_,O){return this.endOf(O)<J(_)},v.$g=function(_,O,E){return M.u(_)?this[O]:this.set(E,_)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(_,O){var E=this,S=!!M.u(O)||O,A=M.p(_),q=function(pt,Ne){var Ce=M.w(E.$u?Date.UTC(E.$y,Ne,pt):new Date(E.$y,Ne,pt),E);return S?Ce:Ce.endOf(o)},ee=function(pt,Ne){return M.w(E.toDate()[pt].apply(E.toDate("s"),(S?[0,0,0,0]:[23,59,59,999]).slice(Ne)),E)},ue=this.$W,se=this.$M,ft=this.$D,Le="set"+(this.$u?"UTC":"");switch(A){case d:return S?q(1,0):q(31,11);case l:return S?q(1,se):q(0,se+1);case u:var or=this.$locale().weekStart||0,ur=(ue<or?ue+7:ue)-or;return q(S?ft-ur:ft+(6-ur),se);case o:case f:return ee(Le+"Hours",0);case a:return ee(Le+"Minutes",1);case s:return ee(Le+"Seconds",2);case i:return ee(Le+"Milliseconds",3);default:return this.clone()}},v.endOf=function(_){return this.startOf(_,!1)},v.$set=function(_,O){var E,S=M.p(_),A="set"+(this.$u?"UTC":""),q=(E={},E[o]=A+"Date",E[f]=A+"Date",E[l]=A+"Month",E[d]=A+"FullYear",E[a]=A+"Hours",E[s]=A+"Minutes",E[i]=A+"Seconds",E[n]=A+"Milliseconds",E)[S],ee=S===o?this.$D+(O-this.$W):O;if(S===l||S===d){var ue=this.clone().set(f,1);ue.$d[q](ee),ue.init(),this.$d=ue.set(f,Math.min(this.$D,ue.daysInMonth())).$d}else q&&this.$d[q](ee);return this.init(),this},v.set=function(_,O){return this.clone().$set(_,O)},v.get=function(_){return this[M.p(_)]()},v.add=function(_,O){var E,S=this;_=Number(_);var A=M.p(O),q=function(se){var ft=J(S);return M.w(ft.date(ft.date()+Math.round(se*_)),S)};if(A===l)return this.set(l,this.$M+_);if(A===d)return this.set(d,this.$y+_);if(A===o)return q(1);if(A===u)return q(7);var ee=(E={},E[s]=e,E[a]=t,E[i]=r,E)[A]||1,ue=this.$d.getTime()+_*ee;return M.w(ue,this)},v.subtract=function(_,O){return this.add(-1*_,O)},v.format=function(_){var O=this,E=this.$locale();if(!this.isValid())return E.invalidDate||p;var S=_||"YYYY-MM-DDTHH:mm:ssZ",A=M.z(this),q=this.$H,ee=this.$m,ue=this.$M,se=E.weekdays,ft=E.months,Le=function(Ne,Ce,lr,Pr){return Ne&&(Ne[Ce]||Ne(O,S))||lr[Ce].substr(0,Pr)},or=function(Ne){return M.s(q%12||12,Ne,"0")},ur=E.meridiem||function(Ne,Ce,lr){var Pr=Ne<12?"AM":"PM";return lr?Pr.toLowerCase():Pr},pt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:ue+1,MM:M.s(ue+1,2,"0"),MMM:Le(E.monthsShort,ue,ft,3),MMMM:Le(ft,ue),D:this.$D,DD:M.s(this.$D,2,"0"),d:String(this.$W),dd:Le(E.weekdaysMin,this.$W,se,2),ddd:Le(E.weekdaysShort,this.$W,se,3),dddd:se[this.$W],H:String(q),HH:M.s(q,2,"0"),h:or(1),hh:or(2),a:ur(q,ee,!0),A:ur(q,ee,!1),m:String(ee),mm:M.s(ee,2,"0"),s:String(this.$s),ss:M.s(this.$s,2,"0"),SSS:M.s(this.$ms,3,"0"),Z:A};return S.replace(m,function(Ne,Ce){return Ce||pt[Ne]||A.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(_,O,E){var S,A=M.p(O),q=J(_),ee=(q.utcOffset()-this.utcOffset())*e,ue=this-q,se=M.m(this,q);return se=(S={},S[d]=se/12,S[l]=se,S[c]=se/3,S[u]=(ue-ee)/6048e5,S[o]=(ue-ee)/864e5,S[a]=ue/t,S[s]=ue/e,S[i]=ue/r,S)[A]||ue,E?se:M.a(se)},v.daysInMonth=function(){return this.endOf(l).$D},v.$locale=function(){return H[this.$L]},v.locale=function(_,O){if(!_)return this.$L;var E=this.clone(),S=de(_,O,!0);return S&&(E.$L=S),E},v.clone=function(){return M.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},P}(),ce=ye.prototype;return J.prototype=ce,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",d],["$D",f]].forEach(function(P){ce[P[1]]=function(v){return this.$g(v,P[0],P[1])}}),J.extend=function(P,v){return P.$i||(P(v,ye,J),P.$i=!0),J},J.locale=de,J.isDayjs=re,J.unix=function(P){return J(1e3*P)},J.en=H[C],J.Ls=H,J.p={},J})});var Se=h(gr=>{"use strict";var ET=gr&&gr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gr,"__esModule",{value:!0});gr.findYearClosestToRef=gr.findMostLikelyADYear=void 0;var RT=ET(z());function wT(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}gr.findMostLikelyADYear=wT;function DT(r,e,t){let n=RT.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}gr.findYearClosestToRef=DT});var Ie=h(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.parseTimeUnits=F.TIME_UNITS_PATTERN=F.parseYear=F.YEAR_PATTERN=F.parseOrdinalNumberPattern=F.ORDINAL_NUMBER_PATTERN=F.parseNumberPattern=F.NUMBER_PATTERN=F.TIME_UNIT_DICTIONARY=F.ORDINAL_WORD_DICTIONARY=F.INTEGER_WORD_DICTIONARY=F.MONTH_DICTIONARY=F.FULL_MONTH_NAME_DICTIONARY=F.WEEKDAY_DICTIONARY=void 0;var Rs=Q(),MT=Se();F.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};F.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};F.MONTH_DICTIONARY=Object.assign(Object.assign({},F.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});F.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};F.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};F.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};F.NUMBER_PATTERN=`(?:${Rs.matchAnyPattern(F.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function Ep(r){let e=r.toLowerCase();return F.INTEGER_WORD_DICTIONARY[e]!==void 0?F.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}F.parseNumberPattern=Ep;F.ORDINAL_NUMBER_PATTERN=`(?:${Rs.matchAnyPattern(F.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function PT(r){let e=r.toLowerCase();return F.ORDINAL_WORD_DICTIONARY[e]!==void 0?F.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}F.parseOrdinalNumberPattern=PT;F.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function OT(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return MT.findMostLikelyADYear(e)}F.parseYear=OT;var Rp=`(${F.NUMBER_PATTERN})\\s{0,3}(${Rs.matchAnyPattern(F.TIME_UNIT_DICTIONARY)})`,vp=new RegExp(Rp,"i");F.TIME_UNITS_PATTERN=Rs.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",Rp);function AT(r){let e={},t=r,n=vp.exec(t);for(;n;)kT(e,n),t=t.substring(n[0].length).trim(),n=vp.exec(t);return e}F.parseTimeUnits=AT;function kT(r,e){let t=Ep(e[1]),n=F.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var wp=h((yo,go)=>{(function(r,e){typeof yo=="object"&&typeof go!="undefined"?go.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(yo,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var d=this.quarter()-1;return c?this.month(3*d).startOf(r).startOf("day"):this.month(3*d+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var it=h(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.implySimilarTime=At.assignSimilarTime=At.assignSimilarDate=At.assignTheNextDay=void 0;var Dp=Ee();function NT(r,e){e=e.add(1,"day"),Mp(r,e),Pp(r,e)}At.assignTheNextDay=NT;function Mp(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}At.assignSimilarDate=Mp;function CT(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",Dp.Meridiem.AM):r.assign("meridiem",Dp.Meridiem.PM)}At.assignSimilarTime=CT;function Pp(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}At.implySimilarTime=Pp});var Op=h(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.toTimezoneOffset=Sr.TIMEZONE_ABBR_MAP=void 0;Sr.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function xT(r){var e;return r==null?null:typeof r=="number"?r:(e=Sr.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}Sr.toTimezoneOffset=xT});var pe=h(kt=>{"use strict";var Ap=kt&&kt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(kt,"__esModule",{value:!0});kt.ParsingResult=kt.ParsingComponents=kt.ReferenceWithTimezone=void 0;var ST=Ap(wp()),ws=Ap(z()),_o=it(),IT=Op();ws.default.extend(ST.default);var To=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=IT.toTimezoneOffset(e.timezone))}};kt.ReferenceWithTimezone=To;var Ir=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=ws.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new Ir(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return ws.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=ws.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new Ir(e);return t.hour||t.minute||t.second?(_o.assignSimilarTime(i,n),_o.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(_o.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};kt.ParsingComponents=Ir;var Bn=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new Ir(e),this.end=s}clone(){let e=new Bn(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};kt.ParsingResult=Bn});var R=h(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.AbstractParserWithWordBoundaryChecking=void 0;var bo=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};Ds.AbstractParserWithWordBoundaryChecking=bo});var kp=h(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});var Eo=Ie(),UT=pe(),FT=R(),qT=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Eo.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),WT=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Eo.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),vo=class extends FT.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?WT:qT}innerExtract(e,t){let n=Eo.parseTimeUnits(t[1]);return UT.ParsingComponents.createRelativeFromReference(e.reference,n)}};Ro.default=vo});var Up=h(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});var LT=Se(),Sp=Ie(),Ip=Ie(),Ms=Ie(),YT=Q(),$T=R(),jT=new RegExp(`(?:on\\s{0,3})?(${Ms.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${Ms.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${YT.matchAnyPattern(Sp.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${Ip.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Np=1,Cp=2,BT=3,xp=4,wo=class extends $T.AbstractParserWithWordBoundaryChecking{innerPattern(){return jT}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Sp.MONTH_DICTIONARY[t[BT].toLowerCase()],s=Ms.parseOrdinalNumberPattern(t[Np]);if(s>31)return t.index=t.index+t[Np].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[xp]){let a=Ip.parseYear(t[xp]);n.start.assign("year",a)}else{let a=LT.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Cp]){let a=Ms.parseOrdinalNumberPattern(t[Cp]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Do.default=wo});var Yp=h(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});var GT=Se(),Wp=Ie(),Ps=Ie(),Lp=Ie(),HT=Q(),zT=R(),KT=new RegExp(`(${HT.matchAnyPattern(Wp.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${Ps.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${Ps.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${Lp.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),VT=1,ZT=2,Fp=3,qp=4,Mo=class extends zT.AbstractParserWithWordBoundaryChecking{innerPattern(){return KT}innerExtract(e,t){let n=Wp.MONTH_DICTIONARY[t[VT].toLowerCase()],i=Ps.parseOrdinalNumberPattern(t[ZT]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[qp]){let u=Lp.parseYear(t[qp]);s.assign("year",u)}else{let u=GT.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[Fp])return s;let a=Ps.parseOrdinalNumberPattern(t[Fp]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Po.default=Mo});var Bp=h(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});var Oo=Ie(),XT=Se(),QT=Q(),jp=Ie(),JT=R(),eb=new RegExp(`((?:in)\\s*)?(${QT.matchAnyPattern(Oo.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${jp.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),tb=1,rb=2,$p=3,Ao=class extends JT.AbstractParserWithWordBoundaryChecking{innerPattern(){return eb}innerExtract(e,t){let n=t[rb].toLowerCase();if(t[0].length<=3&&!Oo.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[tb]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=Oo.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[$p]){let a=jp.parseYear(t[$p]);i.start.assign("year",a)}else{let a=XT.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};ko.default=Ao});var zp=h(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});var Hp=Ie(),nb=Q(),ib=R(),sb=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${nb.matchAnyPattern(Hp.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),ab=1,ob=2,Gp=3,ub=4,No=class extends ib.AbstractParserWithWordBoundaryChecking{innerPattern(){return sb}innerExtract(e,t){let n=t[Gp]?parseInt(t[Gp]):Hp.MONTH_DICTIONARY[t[ob].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[ab]);return{day:parseInt(t[ub]),month:n,year:i}}};Co.default=No});var Kp=h(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});var lb=R(),cb=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),db=1,fb=2,xo=class extends lb.AbstractParserWithWordBoundaryChecking{innerPattern(){return cb}innerExtract(e,t){let n=parseInt(t[fb]),i=parseInt(t[db]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};So.default=xo});var Ur=h(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.AbstractTimeExpressionParser=void 0;var Be=Ee();function pb(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function hb(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var Vp=2,nn=3,Os=4,As=5,Gn=6,Io=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[Vp]);if(o>100){if(this.strictMode||t[nn]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[nn]!=null){if(t[nn].length==1&&!t[Gn])return null;s=parseInt(t[nn])}if(s>=60)return null;if(o>12&&(a=Be.Meridiem.PM),t[Gn]!=null){if(o>12)return null;let u=t[Gn][0].toLowerCase();u=="a"&&(a=Be.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=Be.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",Be.Meridiem.AM):i.imply("meridiem",Be.Meridiem.PM),t[As]!=null){let u=parseInt(t[As].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Os]!=null){let u=parseInt(t[Os]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[As]!=null){let u=parseInt(t[As].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Os]!=null){let u=parseInt(t[Os]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[Vp]),a=0,o=-1;if(t[nn]!=null?a=parseInt(t[nn]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=Be.Meridiem.PM),t[Gn]!=null){if(s>12)return null;let u=t[Gn][0].toLowerCase();u=="a"&&(o=Be.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=Be.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==Be.Meridiem.AM?(n.start.imply("meridiem",Be.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",Be.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",Be.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",Be.Meridiem.PM)):s>12?i.imply("meridiem",Be.Meridiem.PM):s<=12&&i.imply("meridiem",Be.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=pb(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=hb(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};ks.AbstractTimeExpressionParser=Io});var Zp=h(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});var Ns=Ee(),mb=Ur(),Uo=class extends mb.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",Ns.Meridiem.PM)):i<6&&n.assign("meridiem",Ns.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",Ns.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",Ns.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Fo.default=Uo});var st=h(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.addImpliedTimeUnits=sn.reverseTimeUnits=void 0;function yb(r){let e={};for(let t in r)e[t]=-r[t];return e}sn.reverseTimeUnits=yb;function gb(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}sn.addImpliedTimeUnits=gb});var Xp=h(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});var Wo=Ie(),_b=pe(),Tb=R(),bb=st(),vb=new RegExp(`(${Wo.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),Eb=new RegExp(`(${Wo.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),qo=class extends Tb.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Eb:vb}innerExtract(e,t){let n=Wo.parseTimeUnits(t[1]),i=bb.reverseTimeUnits(n);return _b.ParsingComponents.createRelativeFromReference(e.reference,i)}};Lo.default=qo});var Qp=h(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});var $o=Ie(),Rb=pe(),wb=R(),Db=new RegExp(`(${$o.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),Mb=new RegExp("("+$o.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),Pb=1,Yo=class extends wb.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Mb:Db}innerExtract(e,t){let n=$o.parseTimeUnits(t[Pb]);return Rb.ParsingComponents.createRelativeFromReference(e.reference,n)}};jo.default=Yo});var on=h(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.MergingRefiner=an.Filter=void 0;var Bo=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};an.Filter=Bo;var Go=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};an.MergingRefiner=Go});var Nt=h(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});var Ob=on(),Ho=class extends Ob.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};zo.default=Ho});var Jp=h(Hn=>{"use strict";var Ab=Hn&&Hn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Hn,"__esModule",{value:!0});var kb=Ab(Nt()),Ko=class extends kb.default{patternBetween(){return/^\s*(to|-)\s*$/i}};Hn.default=Ko});var eh=h(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.mergeDateTimeComponent=un.mergeDateTimeResult=void 0;var Nb=Ee();function Cb(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=Vo(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=Vo(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}un.mergeDateTimeResult=Cb;function Vo(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==Nb.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}un.mergeDateTimeComponent=Vo});var Gt=h(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});var xb=on(),th=eh(),Zo=class extends xb.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?th.mergeDateTimeResult(t,n):th.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};Xo.default=Zo});var rh=h(zn=>{"use strict";var Sb=zn&&zn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zn,"__esModule",{value:!0});var Ib=Sb(Gt()),Qo=class extends Ib.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};zn.default=Qo});var nh=h(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});var Ub=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),Fb={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},Jo=class{constructor(e){this.timezone=Object.assign(Object.assign({},Fb),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=Ub.exec(u);if(!l)return;let c=l[1].toUpperCase(),d=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(d===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${d} for: ${s.start}`)});let f=s.start.get("timezoneOffset");f!==null&&d!=f&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",d),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",d))}),t}};eu.default=Jo});var Cs=h(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});var qb=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),Wb=1,Lb=2,Yb=3,tu=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=qb.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[Lb]),o=parseInt(s[Yb]||"0"),u=a*60+o;u>14*60||(s[Wb]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};ru.default=tu});var ih=h(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});var nu=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};iu.default=nu});var sh=h(Kn=>{"use strict";var $b=Kn&&Kn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Kn,"__esModule",{value:!0});var jb=$b(z()),su=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=jb.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};Kn.default=su});var ah=h(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});var Bb=on(),au=class extends Bb.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};ou.default=au});var cu=h(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});var Gb=R(),Hb=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),zb=1,Kb=2,Vb=3,oh=4,Zb=5,uh=6,lh=7,ch=8,dh=9,uu=class extends Gb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Hb}innerExtract(e,t){let n={};if(n.year=parseInt(t[zb]),n.month=parseInt(t[Kb]),n.day=parseInt(t[Vb]),t[oh]!=null)if(n.hour=parseInt(t[oh]),n.minute=parseInt(t[Zb]),t[uh]!=null&&(n.second=parseInt(t[uh])),t[lh]!=null&&(n.millisecond=parseInt(t[lh])),t[ch]==null)n.timezoneOffset=0;else{let i=parseInt(t[ch]),s=0;t[dh]!=null&&(s=parseInt(t[dh]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};lu.default=uu});var fh=h(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});var Xb=on(),du=class extends Xb.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};fu.default=du});var Ht=h(ln=>{"use strict";var Fr=ln&&ln.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ln,"__esModule",{value:!0});ln.includeCommonConfiguration=void 0;var Qb=Fr(nh()),Jb=Fr(Cs()),ph=Fr(ih()),ev=Fr(sh()),tv=Fr(ah()),rv=Fr(cu()),nv=Fr(fh());function iv(r,e=!1){return r.parsers.unshift(new rv.default),r.refiners.unshift(new nv.default),r.refiners.unshift(new Qb.default),r.refiners.unshift(new Jb.default),r.refiners.unshift(new ph.default),r.refiners.push(new ph.default),r.refiners.push(new ev.default),r.refiners.push(new tv.default(e)),r}ln.includeCommonConfiguration=iv});var Kt=h(X=>{"use strict";var sv=X&&X.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(X,"__esModule",{value:!0});X.noon=X.morning=X.midnight=X.yesterdayEvening=X.evening=X.lastNight=X.tonight=X.theDayAfter=X.tomorrow=X.theDayBefore=X.yesterday=X.today=X.now=void 0;var Ct=pe(),cn=sv(z()),zt=it(),Vn=Ee();function av(r){let e=cn.default(r.instant),t=new Ct.ParsingComponents(r,{});return zt.assignSimilarDate(t,e),zt.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}X.now=av;function ov(r){let e=cn.default(r.instant),t=new Ct.ParsingComponents(r,{});return zt.assignSimilarDate(t,e),zt.implySimilarTime(t,e),t}X.today=ov;function uv(r){return hh(r,1)}X.yesterday=uv;function hh(r,e){return pu(r,-e)}X.theDayBefore=hh;function lv(r){return pu(r,1)}X.tomorrow=lv;function pu(r,e){let t=cn.default(r.instant),n=new Ct.ParsingComponents(r,{});return t=t.add(e,"day"),zt.assignSimilarDate(n,t),zt.implySimilarTime(n,t),n}X.theDayAfter=pu;function cv(r,e=22){let t=cn.default(r.instant),n=new Ct.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",Vn.Meridiem.PM),zt.assignSimilarDate(n,t),n}X.tonight=cv;function dv(r,e=0){let t=cn.default(r.instant),n=new Ct.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),zt.assignSimilarDate(n,t),n.imply("hour",e),n}X.lastNight=dv;function fv(r,e=20){let t=new Ct.ParsingComponents(r,{});return t.imply("meridiem",Vn.Meridiem.PM),t.imply("hour",e),t}X.evening=fv;function pv(r,e=20){let t=cn.default(r.instant),n=new Ct.ParsingComponents(r,{});return t=t.add(-1,"day"),zt.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",Vn.Meridiem.PM),n}X.yesterdayEvening=pv;function hv(r){let e=new Ct.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}X.midnight=hv;function mv(r,e=6){let t=new Ct.ParsingComponents(r,{});return t.imply("meridiem",Vn.Meridiem.AM),t.imply("hour",e),t}X.morning=mv;function yv(r){let e=new Ct.ParsingComponents(r,{});return e.imply("meridiem",Vn.Meridiem.AM),e.imply("hour",12),e}X.noon=yv});var mh=h(yt=>{"use strict";var gv=yt&&yt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),_v=yt&&yt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Tv=yt&&yt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&gv(e,r,t);return _v(e,r),e},bv=yt&&yt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yt,"__esModule",{value:!0});var vv=bv(z()),Ev=R(),Rv=it(),Zn=Tv(Kt()),wv=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,hu=class extends Ev.AbstractParserWithWordBoundaryChecking{innerPattern(e){return wv}innerExtract(e,t){let n=vv.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return Zn.now(e.reference);case"today":return Zn.today(e.reference);case"yesterday":return Zn.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return Zn.tomorrow(e.reference);case"tonight":return Zn.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),Rv.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};yt.default=hu});var yh=h(Xn=>{"use strict";var Dv=Xn&&Xn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xn,"__esModule",{value:!0});var xs=Ee(),Mv=R(),Pv=Dv(z()),Ov=it(),Av=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,mu=class extends Mv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Av}innerExtract(e,t){let n=Pv.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",xs.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",xs.Meridiem.PM),i.imply("hour",20);break;case"midnight":Ov.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",xs.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",xs.Meridiem.AM),i.imply("hour",12);break}return i}};Xn.default=mu});var qr=h(_r=>{"use strict";var kv=_r&&_r.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_r,"__esModule",{value:!0});_r.toDayJSClosestWeekday=_r.toDayJSWeekday=void 0;var gh=kv(z());function Nv(r,e,t){if(!t)return _h(r,e);let n=gh.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}_r.toDayJSWeekday=Nv;function _h(r,e){let t=gh.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}_r.toDayJSClosestWeekday=_h});var bh=h(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});var Th=Ie(),Cv=Q(),xv=R(),Sv=qr(),Iv=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${Cv.matchAnyPattern(Th.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),Uv=1,Fv=2,qv=3,yu=class extends xv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Iv}innerExtract(e,t){let n=t[Fv].toLowerCase(),i=Th.WEEKDAY_DICTIONARY[n],s=t[Uv],a=t[qv],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=Sv.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};gu.default=yu});var Rh=h(Qn=>{"use strict";var Wv=Qn&&Qn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qn,"__esModule",{value:!0});var Eh=Ie(),vh=pe(),Lv=Wv(z()),Yv=R(),$v=Q(),jv=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${$v.matchAnyPattern(Eh.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),Bv=1,Gv=2,_u=class extends Yv.AbstractParserWithWordBoundaryChecking{innerPattern(){return jv}innerExtract(e,t){let n=t[Bv].toLowerCase(),i=t[Gv].toLowerCase(),s=Eh.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,vh.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,vh.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=Lv.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Qn.default=_u});var gt=h(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.ParsingContext=pn.Chrono=void 0;var dn=pe(),Hv=Tu(),fn=class{constructor(e){e=e||Hv.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new fn({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new Ss(e,t,n),s=[];return this.parsers.forEach(a=>{let o=fn.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof dn.ParsingResult?c=l:l instanceof dn.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};pn.Chrono=fn;var Ss=class{constructor(e,t,n){this.text=e,this.reference=new dn.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof dn.ParsingComponents?e:new dn.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new dn.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};pn.ParsingContext=Ss});var Wr=h(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});var wh=Se(),zv=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),Is=1,Dh=5,Mh=2,Ph=3,bu=4,vu=class{constructor(e){this.groupNumberMonth=e?Ph:Mh,this.groupNumberDay=e?Mh:Ph}pattern(){return zv}extract(e,t){if(t[Is]=="/"||t[Dh]=="/"){t.index+=t[0].length;return}let n=t.index+t[Is].length,i=t[0].substr(t[Is].length,t[0].length-t[Is].length-t[Dh].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[bu]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[bu]){let u=parseInt(t[bu]),l=wh.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=wh.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};Eu.default=vu});var Ah=h(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});var Oh=Ie(),Kv=pe(),Vv=R(),Zv=st(),Xv=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Oh.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Ru=class extends Vv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Xv}innerExtract(e,t){let n=t[1].toLowerCase(),i=Oh.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=Zv.reverseTimeUnits(i);break}return Kv.ParsingComponents.createRelativeFromReference(e.reference,i)}};wu.default=Ru});var Nh=h(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});var Qv=on(),Du=pe(),Jv=Ie(),e1=st();function kh(r){return r.text.match(/\s+(before|from)$/i)!=null}function t1(r){return r.text.match(/\s+(after|since)$/i)!=null}var Mu=class extends Qv.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!kh(t)&&!t1(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=Jv.parseTimeUnits(t.text);kh(t)&&(i=e1.reverseTimeUnits(i));let s=Du.ParsingComponents.createRelativeFromReference(new Du.ReferenceWithTimezone(n.start.date()),i);return new Du.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};Pu.default=Mu});var Tu=h(_e=>{"use strict";var we=_e&&_e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_e,"__esModule",{value:!0});_e.createConfiguration=_e.createCasualConfiguration=_e.parseDate=_e.parse=_e.GB=_e.strict=_e.casual=void 0;var r1=we(kp()),n1=we(Up()),i1=we(Yp()),s1=we(Bp()),a1=we(zp()),o1=we(Kp()),u1=we(Zp()),l1=we(Xp()),c1=we(Qp()),d1=we(Jp()),f1=we(rh()),p1=Ht(),h1=we(mh()),m1=we(yh()),y1=we(bh()),g1=we(Rh()),Ou=gt(),_1=we(Wr()),T1=we(Ah()),b1=we(Nh());_e.casual=new Ou.Chrono(Ch(!1));_e.strict=new Ou.Chrono(Us(!0,!1));_e.GB=new Ou.Chrono(Us(!1,!0));function v1(r,e,t){return _e.casual.parse(r,e,t)}_e.parse=v1;function E1(r,e,t){return _e.casual.parseDate(r,e,t)}_e.parseDate=E1;function Ch(r=!1){let e=Us(!1,r);return e.parsers.unshift(new h1.default),e.parsers.unshift(new m1.default),e.parsers.unshift(new s1.default),e.parsers.unshift(new g1.default),e.parsers.unshift(new T1.default),e}_e.createCasualConfiguration=Ch;function Us(r=!0,e=!1){return p1.includeCommonConfiguration({parsers:[new _1.default(e),new r1.default,new n1.default,new i1.default,new y1.default,new a1.default,new o1.default,new u1.default(r),new l1.default(r),new c1.default(r)],refiners:[new b1.default,new f1.default,new d1.default]},r)}_e.createConfiguration=Us});var xh=h(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});var R1=Ur(),Au=class extends R1.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};ku.default=Au});var Jn=h(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.parseTimeUnits=te.TIME_UNITS_PATTERN=te.parseYear=te.YEAR_PATTERN=te.parseNumberPattern=te.NUMBER_PATTERN=te.TIME_UNIT_DICTIONARY=te.INTEGER_WORD_DICTIONARY=te.MONTH_DICTIONARY=te.WEEKDAY_DICTIONARY=void 0;var Nu=Q(),w1=Se();te.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};te.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};te.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};te.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};te.NUMBER_PATTERN=`(?:${Nu.matchAnyPattern(te.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function Ih(r){let e=r.toLowerCase();return te.INTEGER_WORD_DICTIONARY[e]!==void 0?te.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}te.parseNumberPattern=Ih;te.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function D1(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return w1.findMostLikelyADYear(e)}te.parseYear=D1;var Uh=`(${te.NUMBER_PATTERN})\\s{0,5}(${Nu.matchAnyPattern(te.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Sh=new RegExp(Uh,"i");te.TIME_UNITS_PATTERN=Nu.repeatedTimeunitPattern("",Uh);function M1(r){let e={},t=r,n=Sh.exec(t);for(;n;)P1(e,n),t=t.substring(n[0].length),n=Sh.exec(t);return e}te.parseTimeUnits=M1;function P1(r,e){let t=Ih(e[1]),n=te.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var qh=h(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});var Fh=Jn(),O1=Q(),A1=R(),k1=qr(),N1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${O1.matchAnyPattern(Fh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),C1=1,x1=3,S1=2,Cu=class extends A1.AbstractParserWithWordBoundaryChecking{innerPattern(){return N1}innerExtract(e,t){let n=t[S1].toLowerCase(),i=Fh.WEEKDAY_DICTIONARY[n],s=t[C1],a=t[x1],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=k1.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};xu.default=Cu});var $h=h(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});var Tr=Ee(),I1=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),U1=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),F1=2,Wh=3,Lh=4,Yh=5,hn=class{pattern(e){return I1}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=hn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=U1.exec(i);return s&&(n.end=hn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[F1]),t[Wh]!=null&&(i=parseInt(t[Wh])),i>=60||n>24)return null;if(n>=12&&(s=Tr.Meridiem.PM),t[Yh]!=null){if(n>12)return null;let a=t[Yh].toLowerCase();a.match(/morgen|vormittag/)&&(s=Tr.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=Tr.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=Tr.Meridiem.AM,n=0):n<6?s=Tr.Meridiem.AM:(s=Tr.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Tr.Meridiem.AM):e.imply("meridiem",Tr.Meridiem.PM),t[Lh]!=null){let a=parseInt(t[Lh]);if(a>=60)return null;e.assign("second",a)}return e}};Su.default=hn});var jh=h(ei=>{"use strict";var q1=ei&&ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ei,"__esModule",{value:!0});var W1=q1(Nt()),Iu=class extends W1.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};ei.default=Iu});var Bh=h(ti=>{"use strict";var L1=ti&&ti.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ti,"__esModule",{value:!0});var Y1=L1(Gt()),Uu=class extends Y1.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};ti.default=Uu});var Fu=h(ni=>{"use strict";var $1=ni&&ni.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ni,"__esModule",{value:!0});var j1=$1(z()),Lr=Ee(),B1=R(),G1=it(),H1=st(),ri=class extends B1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=j1.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return G1.implySimilarTime(s,n),ri.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Lr.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Lr.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Lr.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Lr.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Lr.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Lr.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=H1.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Lr.Meridiem.AM);break}return e}};ni.default=ri});var zh=h(_t=>{"use strict";var z1=_t&&_t.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),K1=_t&&_t.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),V1=_t&&_t.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&z1(e,r,t);return K1(e,r),e},Hh=_t&&_t.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_t,"__esModule",{value:!0});var Z1=Hh(z()),X1=R(),Yr=it(),Q1=Hh(Fu()),Gh=V1(Kt()),J1=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),eE=1,tE=2,qu=class extends X1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return J1}innerExtract(e,t){let n=Z1.default(e.refDate),i=(t[eE]||"").toLowerCase(),s=(t[tE]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=Gh.now(e.reference);break;case"heute":a=Gh.today(e.reference);break;case"morgen":Yr.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),Yr.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),Yr.assignSimilarDate(a,n),Yr.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),Yr.assignSimilarDate(a,n),Yr.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),Yr.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=Q1.default.extractTimeComponents(a,s)),a}};_t.default=qu});var Jh=h(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});var rE=Se(),Xh=Jn(),Qh=Jn(),nE=Q(),iE=R(),sE=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${nE.matchAnyPattern(Xh.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Qh.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Kh=1,Vh=2,aE=3,Zh=4,Wu=class extends iE.AbstractParserWithWordBoundaryChecking{innerPattern(){return sE}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Xh.MONTH_DICTIONARY[t[aE].toLowerCase()],s=parseInt(t[Kh]);if(s>31)return t.index=t.index+t[Kh].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Zh]){let a=Qh.parseYear(t[Zh]);n.start.assign("year",a)}else{let a=rE.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Vh]){let a=parseInt(t[Vh]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Lu.default=Wu});var em=h($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});var Fs=Jn(),oE=pe(),uE=R(),lE=st(),cE=Q(),Yu=class extends uE.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${Fs.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${cE.matchAnyPattern(Fs.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?Fs.parseNumberPattern(t[2]):1,i=Fs.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=lE.reverseTimeUnits(s)),oE.ParsingComponents.createRelativeFromReference(e.reference,s)}};$u.default=Yu});var nm=h(De=>{"use strict";var Tt=De&&De.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(De,"__esModule",{value:!0});De.createConfiguration=De.createCasualConfiguration=De.parseDate=De.parse=De.strict=De.casual=void 0;var dE=Ht(),tm=gt(),fE=Tt(Wr()),pE=Tt(cu()),hE=Tt(xh()),mE=Tt(qh()),yE=Tt($h()),gE=Tt(jh()),_E=Tt(Bh()),TE=Tt(zh()),bE=Tt(Fu()),vE=Tt(Jh()),EE=Tt(em());De.casual=new tm.Chrono(rm());De.strict=new tm.Chrono(ju(!0));function RE(r,e,t){return De.casual.parse(r,e,t)}De.parse=RE;function wE(r,e,t){return De.casual.parseDate(r,e,t)}De.parseDate=wE;function rm(r=!0){let e=ju(!1,r);return e.parsers.unshift(new bE.default),e.parsers.unshift(new TE.default),e.parsers.unshift(new EE.default),e}De.createCasualConfiguration=rm;function ju(r=!0,e=!0){return dE.includeCommonConfiguration({parsers:[new pE.default,new fE.default(e),new hE.default,new yE.default,new vE.default,new mE.default],refiners:[new gE.default,new _E.default]},r)}De.createConfiguration=ju});var sm=h(bt=>{"use strict";var DE=bt&&bt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),ME=bt&&bt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),PE=bt&&bt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&DE(e,r,t);return ME(e,r),e},OE=bt&&bt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bt,"__esModule",{value:!0});var AE=OE(z()),kE=Ee(),NE=R(),im=it(),qs=PE(Kt()),Bu=class extends NE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=AE.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return qs.now(e.reference);case"aujourd'hui":return qs.today(e.reference);case"hier":return qs.yesterday(e.reference);case"demain":return qs.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(im.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",kE.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),im.assignSimilarDate(s,n),s.imply("hour",0))}return s}};bt.default=Bu});var am=h(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});var ii=Ee(),CE=R(),Gu=class extends CE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",ii.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",ii.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",ii.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",ii.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",ii.Meridiem.AM);break}return i}};Hu.default=Gu});var om=h(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});var xE=Ur(),zu=class extends xE.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Ku.default=zu});var um=h(si=>{"use strict";var SE=si&&si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(si,"__esModule",{value:!0});var IE=SE(Gt()),Vu=class extends IE.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};si.default=Vu});var lm=h(ai=>{"use strict";var UE=ai&&ai.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ai,"__esModule",{value:!0});var FE=UE(Nt()),Zu=class extends FE.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};ai.default=Zu});var br=h(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.parseTimeUnits=K.TIME_UNITS_PATTERN=K.parseYear=K.YEAR_PATTERN=K.parseOrdinalNumberPattern=K.ORDINAL_NUMBER_PATTERN=K.parseNumberPattern=K.NUMBER_PATTERN=K.TIME_UNIT_DICTIONARY=K.INTEGER_WORD_DICTIONARY=K.MONTH_DICTIONARY=K.WEEKDAY_DICTIONARY=void 0;var Xu=Q();K.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};K.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};K.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};K.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};K.NUMBER_PATTERN=`(?:${Xu.matchAnyPattern(K.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function dm(r){let e=r.toLowerCase();return K.INTEGER_WORD_DICTIONARY[e]!==void 0?K.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}K.parseNumberPattern=dm;K.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function qE(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}K.parseOrdinalNumberPattern=qE;K.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function WE(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}K.parseYear=WE;var fm=`(${K.NUMBER_PATTERN})\\s{0,5}(${Xu.matchAnyPattern(K.TIME_UNIT_DICTIONARY)})\\s{0,5}`,cm=new RegExp(fm,"i");K.TIME_UNITS_PATTERN=Xu.repeatedTimeunitPattern("",fm);function LE(r){let e={},t=r,n=cm.exec(t);for(;n;)YE(e,n),t=t.substring(n[0].length),n=cm.exec(t);return e}K.parseTimeUnits=LE;function YE(r,e){let t=dm(e[1]),n=K.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var hm=h(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});var pm=br(),$E=Q(),jE=R(),BE=qr(),GE=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${$E.matchAnyPattern(pm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),HE=1,zE=2,Qu=class extends jE.AbstractParserWithWordBoundaryChecking{innerPattern(){return GE}innerExtract(e,t){let n=t[HE].toLowerCase(),i=pm.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[zE];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=BE.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};Ju.default=Qu});var _m=h(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});var oi=Ee(),KE=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),VE=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),ZE=2,mm=3,ym=4,gm=5,mn=class{pattern(e){return KE}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=mn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=VE.exec(i);return s&&(n.end=mn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[ZE]),t[mm]!=null&&(i=parseInt(t[mm])),i>=60||n>24)return null;if(n>=12&&(s=oi.Meridiem.PM),t[gm]!=null){if(n>12)return null;let a=t[gm][0].toLowerCase();a=="a"&&(s=oi.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=oi.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",oi.Meridiem.AM):e.imply("meridiem",oi.Meridiem.PM),t[ym]!=null){let a=parseInt(t[ym]);if(a>=60)return null;e.assign("second",a)}return e}};el.default=mn});var wm=h(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});var XE=Se(),Em=br(),Rm=br(),Ws=br(),QE=Q(),JE=R(),e0=new RegExp(`(?:on\\s*?)?(${Ws.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${Ws.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${QE.matchAnyPattern(Em.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Rm.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Tm=1,bm=2,t0=3,vm=4,tl=class extends JE.AbstractParserWithWordBoundaryChecking{innerPattern(){return e0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Em.MONTH_DICTIONARY[t[t0].toLowerCase()],s=Ws.parseOrdinalNumberPattern(t[Tm]);if(s>31)return t.index=t.index+t[Tm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[vm]){let a=Rm.parseYear(t[vm]);n.start.assign("year",a)}else{let a=XE.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[bm]){let a=Ws.parseOrdinalNumberPattern(t[bm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};rl.default=tl});var Mm=h(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});var Dm=br(),r0=pe(),n0=R(),i0=st(),nl=class extends n0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${Dm.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=Dm.parseTimeUnits(t[1]),i=i0.reverseTimeUnits(n);return r0.ParsingComponents.createRelativeFromReference(e.reference,i)}};il.default=nl});var Om=h(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});var Pm=br(),s0=pe(),a0=R(),sl=class extends a0.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${Pm.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=Pm.parseTimeUnits(t[1]);return s0.ParsingComponents.createRelativeFromReference(e.reference,n)}};al.default=sl});var Am=h(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});var Ls=br(),o0=pe(),u0=R(),l0=st(),c0=Q(),ol=class extends u0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${Ls.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${c0.matchAnyPattern(Ls.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?Ls.parseNumberPattern(t[1]):1,i=Ls.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=l0.reverseTimeUnits(s)),o0.ParsingComponents.createRelativeFromReference(e.reference,s)}};ul.default=ol});var Cm=h(Me=>{"use strict";var at=Me&&Me.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Me,"__esModule",{value:!0});Me.createConfiguration=Me.createCasualConfiguration=Me.parseDate=Me.parse=Me.strict=Me.casual=void 0;var d0=Ht(),km=gt(),f0=at(sm()),p0=at(am()),h0=at(Wr()),m0=at(om()),y0=at(um()),g0=at(lm()),_0=at(hm()),T0=at(_m()),b0=at(wm()),v0=at(Mm()),E0=at(Om()),R0=at(Am());Me.casual=new km.Chrono(Nm());Me.strict=new km.Chrono(ll(!0));function w0(r,e,t){return Me.casual.parse(r,e,t)}Me.parse=w0;function D0(r,e,t){return Me.casual.parseDate(r,e,t)}Me.parseDate=D0;function Nm(r=!0){let e=ll(!1,r);return e.parsers.unshift(new f0.default),e.parsers.unshift(new p0.default),e.parsers.unshift(new R0.default),e}Me.createCasualConfiguration=Nm;function ll(r=!0,e=!0){return d0.includeCommonConfiguration({parsers:[new h0.default(e),new b0.default,new m0.default,new T0.default,new v0.default,new E0.default,new _0.default],refiners:[new y0.default,new g0.default]},r)}Me.createConfiguration=ll});var xm=h(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.toHankaku=void 0;function M0(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,P0)}Ys.toHankaku=M0;function P0(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var Im=h(ui=>{"use strict";var O0=ui&&ui.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ui,"__esModule",{value:!0});var cl=xm(),A0=Se(),k0=O0(z()),N0=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,Sm=1,C0=2,dl=3,x0=4,S0=5,I0=6,fl=class{pattern(){return N0}extract(e,t){let n=parseInt(cl.toHankaku(t[S0])),i=parseInt(cl.toHankaku(t[I0])),s=e.createParsingComponents({day:i,month:n});if(t[Sm]&&t[Sm].match("\u540C|\u4ECA|\u672C")){let a=k0.default(e.refDate);s.assign("year",a.year())}if(t[C0]){let a=t[x0],o=a=="\u5143"?1:parseInt(cl.toHankaku(a));t[dl]=="\u4EE4\u548C"?o+=2018:t[dl]=="\u5E73\u6210"?o+=1988:t[dl]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=A0.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};ui.default=fl});var Um=h(li=>{"use strict";var U0=li&&li.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(li,"__esModule",{value:!0});var F0=U0(Nt()),pl=class extends F0.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};li.default=pl});var qm=h(vt=>{"use strict";var q0=vt&&vt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),W0=vt&&vt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),L0=vt&&vt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&q0(e,r,t);return W0(e,r),e},Y0=vt&&vt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vt,"__esModule",{value:!0});var $0=Y0(z()),Fm=Ee(),hl=L0(Kt()),j0=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,ml=class{pattern(){return j0}extract(e,t){let n=t[0],i=$0.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return hl.yesterday(e.reference);case"\u660E\u65E5":return hl.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return hl.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",Fm.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",Fm.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};vt.default=ml});var Ym=h(Pe=>{"use strict";var yl=Pe&&Pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.createConfiguration=Pe.createCasualConfiguration=Pe.parseDate=Pe.parse=Pe.strict=Pe.casual=void 0;var B0=yl(Im()),G0=yl(Um()),H0=yl(qm()),Wm=gt();Pe.casual=new Wm.Chrono(Lm());Pe.strict=new Wm.Chrono(gl());function z0(r,e,t){return Pe.casual.parse(r,e,t)}Pe.parse=z0;function K0(r,e,t){return Pe.casual.parseDate(r,e,t)}Pe.parseDate=K0;function Lm(){let r=gl();return r.parsers.unshift(new H0.default),r}Pe.createCasualConfiguration=Lm;function gl(){return{parsers:[new B0.default],refiners:[new G0.default]}}Pe.createConfiguration=gl});var $s=h(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.parseYear=xt.YEAR_PATTERN=xt.MONTH_DICTIONARY=xt.WEEKDAY_DICTIONARY=void 0;xt.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};xt.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};xt.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function V0(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}xt.parseYear=V0});var jm=h(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});var $m=$s(),Z0=Q(),X0=R(),Q0=qr(),J0=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${Z0.matchAnyPattern($m.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),eR=1,tR=2,rR=3,_l=class extends X0.AbstractParserWithWordBoundaryChecking{innerPattern(){return J0}innerExtract(e,t){let n=t[tR].toLowerCase(),i=$m.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[eR],a=t[rR],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=Q0.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Tl.default=_l});var Bm=h(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});var nR=Ur(),bl=class extends nR.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};vl.default=bl});var Gm=h(ci=>{"use strict";var iR=ci&&ci.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ci,"__esModule",{value:!0});var sR=iR(Gt()),El=class extends sR.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};ci.default=El});var Hm=h(di=>{"use strict";var aR=di&&di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(di,"__esModule",{value:!0});var oR=aR(Nt()),Rl=class extends oR.default{patternBetween(){return/^\s*(?:-)\s*$/i}};di.default=Rl});var Qm=h(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});var uR=Se(),Zm=$s(),Xm=$s(),lR=Q(),cR=R(),dR=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${lR.matchAnyPattern(Zm.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${Xm.YEAR_PATTERN}))?(?=\\W|$)`,"i"),zm=1,Km=2,fR=3,Vm=4,wl=class extends cR.AbstractParserWithWordBoundaryChecking{innerPattern(){return dR}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Zm.MONTH_DICTIONARY[t[fR].toLowerCase()],s=parseInt(t[zm]);if(s>31)return t.index=t.index+t[zm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Vm]){let a=Xm.parseYear(t[Vm]);n.start.assign("year",a)}else{let a=uR.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Km]){let a=parseInt(t[Km]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Dl.default=wl});var Jm=h(Vt=>{"use strict";var pR=Vt&&Vt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),hR=Vt&&Vt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),mR=Vt&&Vt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&pR(e,r,t);return hR(e,r),e};Object.defineProperty(Vt,"__esModule",{value:!0});var yR=R(),js=mR(Kt()),Ml=class extends yR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return js.now(e.reference);case"hoje":return js.today(e.reference);case"amanha":case"amanh\xE3":return js.tomorrow(e.reference);case"ontem":return js.yesterday(e.reference)}return i}};Vt.default=Ml});var ey=h(fi=>{"use strict";var gR=fi&&fi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fi,"__esModule",{value:!0});var Bs=Ee(),_R=R(),TR=it(),bR=gR(z()),Pl=class extends _R.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=bR.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",Bs.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",Bs.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",Bs.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":TR.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",Bs.Meridiem.AM),i.imply("hour",12);break}return i}};fi.default=Pl});var ny=h(Oe=>{"use strict";var vr=Oe&&Oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.createConfiguration=Oe.createCasualConfiguration=Oe.parseDate=Oe.parse=Oe.strict=Oe.casual=void 0;var vR=Ht(),ty=gt(),ER=vr(Wr()),RR=vr(jm()),wR=vr(Bm()),DR=vr(Gm()),MR=vr(Hm()),PR=vr(Qm()),OR=vr(Jm()),AR=vr(ey());Oe.casual=new ty.Chrono(ry());Oe.strict=new ty.Chrono(Ol(!0));function kR(r,e,t){return Oe.casual.parse(r,e,t)}Oe.parse=kR;function NR(r,e,t){return Oe.casual.parseDate(r,e,t)}Oe.parseDate=NR;function ry(r=!0){let e=Ol(!1,r);return e.parsers.push(new OR.default),e.parsers.push(new AR.default),e}Oe.createCasualConfiguration=ry;function Ol(r=!0,e=!0){return vR.includeCommonConfiguration({parsers:[new ER.default(e),new RR.default,new wR.default,new PR.default],refiners:[new DR.default,new MR.default]},r)}Oe.createConfiguration=Ol});var iy=h(pi=>{"use strict";var CR=pi&&pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pi,"__esModule",{value:!0});var xR=CR(Nt()),Al=class extends xR.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};pi.default=Al});var sy=h(hi=>{"use strict";var SR=hi&&hi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hi,"__esModule",{value:!0});var IR=SR(Gt()),kl=class extends IR.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};hi.default=kl});var ay=h(Zt=>{"use strict";var UR=Zt&&Zt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),FR=Zt&&Zt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),qR=Zt&&Zt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&UR(e,r,t);return FR(e,r),e};Object.defineProperty(Zt,"__esModule",{value:!0});var WR=R(),Gs=qR(Kt()),Nl=class extends WR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return Gs.now(e.reference);case"vandaag":return Gs.today(e.reference);case"morgen":case"morgend":return Gs.tomorrow(e.reference);case"gisteren":return Gs.yesterday(e.reference)}return i}};Zt.default=Nl});var oy=h(mi=>{"use strict";var LR=mi&&mi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mi,"__esModule",{value:!0});var Hs=Ee(),YR=R(),$R=LR(z()),jR=it(),BR=1,GR=2,Cl=class extends YR.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=$R.default(e.refDate),i=e.createParsingComponents();switch(t[BR]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[GR].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",Hs.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",Hs.Meridiem.PM),i.imply("hour",20);break;case"middernacht":jR.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",Hs.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",Hs.Meridiem.AM),i.imply("hour",12);break}return i}};mi.default=Cl});var Qe=h($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.parseTimeUnits=$.TIME_UNITS_PATTERN=$.parseYear=$.YEAR_PATTERN=$.parseOrdinalNumberPattern=$.ORDINAL_NUMBER_PATTERN=$.parseNumberPattern=$.NUMBER_PATTERN=$.TIME_UNIT_DICTIONARY=$.ORDINAL_WORD_DICTIONARY=$.INTEGER_WORD_DICTIONARY=$.MONTH_DICTIONARY=$.WEEKDAY_DICTIONARY=void 0;var zs=Q(),HR=Se();$.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};$.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};$.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};$.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};$.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};$.NUMBER_PATTERN=`(?:${zs.matchAnyPattern($.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function ly(r){let e=r.toLowerCase();return $.INTEGER_WORD_DICTIONARY[e]!==void 0?$.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}$.parseNumberPattern=ly;$.ORDINAL_NUMBER_PATTERN=`(?:${zs.matchAnyPattern($.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function zR(r){let e=r.toLowerCase();return $.ORDINAL_WORD_DICTIONARY[e]!==void 0?$.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}$.parseOrdinalNumberPattern=zR;$.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function KR(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return HR.findMostLikelyADYear(e)}$.parseYear=KR;var cy=`(${$.NUMBER_PATTERN})\\s{0,5}(${zs.matchAnyPattern($.TIME_UNIT_DICTIONARY)})\\s{0,5}`,uy=new RegExp(cy,"i");$.TIME_UNITS_PATTERN=zs.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",cy);function VR(r){let e={},t=r,n=uy.exec(t);for(;n;)ZR(e,n),t=t.substring(n[0].length),n=uy.exec(t);return e}$.parseTimeUnits=VR;function ZR(r,e){let t=ly(e[1]),n=$.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var fy=h(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});var dy=Qe(),XR=pe(),QR=R(),xl=class extends QR.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+dy.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=dy.parseTimeUnits(t[1]);return XR.ParsingComponents.createRelativeFromReference(e.reference,n)}};Sl.default=xl});var hy=h(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});var py=Qe(),JR=Q(),ew=R(),tw=qr(),rw=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${JR.matchAnyPattern(py.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),nw=1,iw=2,sw=3,Il=class extends ew.AbstractParserWithWordBoundaryChecking{innerPattern(){return rw}innerExtract(e,t){let n=t[iw].toLowerCase(),i=py.WEEKDAY_DICTIONARY[n],s=t[nw],a=t[sw],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=tw.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Ul.default=Il});var by=h(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});var aw=Se(),_y=Qe(),Ks=Qe(),Ty=Qe(),ow=Q(),uw=R(),lw=new RegExp(`(?:on\\s*?)?(${Ks.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${Ks.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+ow.matchAnyPattern(_y.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${Ty.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),cw=3,my=1,yy=2,gy=4,Fl=class extends uw.AbstractParserWithWordBoundaryChecking{innerPattern(){return lw}innerExtract(e,t){let n=_y.MONTH_DICTIONARY[t[cw].toLowerCase()],i=Ks.parseOrdinalNumberPattern(t[my]);if(i>31)return t.index=t.index+t[my].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[gy]){let u=Ty.parseYear(t[gy]);s.assign("year",u)}else{let u=aw.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[yy])return s;let a=Ks.parseOrdinalNumberPattern(t[yy]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};ql.default=Fl});var wy=h(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});var Ey=Qe(),dw=Se(),fw=Q(),Ry=Qe(),pw=R(),hw=new RegExp(`(${fw.matchAnyPattern(Ey.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Ry.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),mw=1,vy=2,Wl=class extends pw.AbstractParserWithWordBoundaryChecking{innerPattern(){return hw}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[mw],s=Ey.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[vy]){let a=Ry.parseYear(t[vy]);n.assign("year",a)}else{let a=dw.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};Ll.default=Wl});var Dy=h($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});var yw=R(),gw=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),_w=1,Tw=2,Yl=class extends yw.AbstractParserWithWordBoundaryChecking{innerPattern(){return gw}innerExtract(e,t){let n=parseInt(t[Tw]),i=parseInt(t[_w]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};$l.default=Yl});var My=h(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});var bw=Ur(),jl=class extends bw.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Bl.default=jl});var Ay=h(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});var Oy=Qe(),vw=Q(),Ew=R(),Rw=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${vw.matchAnyPattern(Oy.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),ww=1,Dw=2,Py=3,Mw=4,Gl=class extends Ew.AbstractParserWithWordBoundaryChecking{innerPattern(){return Rw}innerExtract(e,t){let n=t[Py]?parseInt(t[Py]):Oy.MONTH_DICTIONARY[t[Dw].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[ww]);return{day:parseInt(t[Mw]),month:n,year:i}}};Hl.default=Gl});var ky=h(yi=>{"use strict";var Pw=yi&&yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yi,"__esModule",{value:!0});var Ow=R(),Vs=Ee(),zl=it(),Aw=Pw(z()),kw=1,Nw=2,Kl=class extends Ow.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[kw].toLowerCase(),i=t[Nw].toLowerCase(),s=e.createParsingComponents(),a=Aw.default(e.refDate);switch(n){case"gisteren":zl.assignSimilarDate(s,a.add(-1,"day"));break;case"van":zl.assignSimilarDate(s,a);break;case"morgen":zl.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",Vs.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",Vs.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",Vs.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",Vs.Meridiem.PM),s.imply("hour",20);break}return s}};yi.default=Kl});var Cy=h(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});var Ny=Qe(),Cw=pe(),xw=R(),Sw=st(),Iw=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${Ny.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Vl=class extends xw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Iw}innerExtract(e,t){let n=t[1].toLowerCase(),i=Ny.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=Sw.reverseTimeUnits(i);break}return Cw.ParsingComponents.createRelativeFromReference(e.reference,i)}};Zl.default=Vl});var Iy=h(gi=>{"use strict";var Uw=gi&&gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gi,"__esModule",{value:!0});var Sy=Qe(),xy=pe(),Fw=Uw(z()),qw=R(),Ww=Q(),Lw=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${Ww.matchAnyPattern(Sy.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),Yw=1,$w=2,Xl=class extends qw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Lw}innerExtract(e,t){let n=t[Yw].toLowerCase(),i=t[$w].toLowerCase(),s=Sy.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,xy.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,xy.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=Fw.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};gi.default=Xl});var Uy=h(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});var Jl=Qe(),jw=pe(),Bw=R(),Gw=st(),Hw=new RegExp("("+Jl.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),zw=new RegExp("("+Jl.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),Ql=class extends Bw.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?zw:Hw}innerExtract(e,t){let n=Jl.parseTimeUnits(t[1]),i=Gw.reverseTimeUnits(n);return jw.ParsingComponents.createRelativeFromReference(e.reference,i)}};ec.default=Ql});var Fy=h(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});var rc=Qe(),Kw=pe(),Vw=R(),Zw=new RegExp("("+rc.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),Xw=new RegExp("("+rc.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),Qw=1,tc=class extends Vw.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Xw:Zw}innerExtract(e,t){let n=rc.parseTimeUnits(t[Qw]);return Kw.ParsingComponents.createRelativeFromReference(e.reference,n)}};nc.default=tc});var Yy=h(Ae=>{"use strict";var Ue=Ae&&Ae.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.createConfiguration=Ae.createCasualConfiguration=Ae.parseDate=Ae.parse=Ae.strict=Ae.casual=void 0;var Jw=Ht(),qy=gt(),eD=Ue(iy()),tD=Ue(sy()),rD=Ue(ay()),nD=Ue(oy()),iD=Ue(Wr()),sD=Ue(fy()),aD=Ue(hy()),oD=Ue(by()),Wy=Ue(wy()),uD=Ue(Dy()),lD=Ue(My()),cD=Ue(Ay()),dD=Ue(ky()),fD=Ue(Cy()),pD=Ue(Iy()),hD=Ue(Uy()),mD=Ue(Fy());Ae.casual=new qy.Chrono(Ly());Ae.strict=new qy.Chrono(ic(!0));function yD(r,e,t){return Ae.casual.parse(r,e,t)}Ae.parse=yD;function gD(r,e,t){return Ae.casual.parseDate(r,e,t)}Ae.parseDate=gD;function Ly(r=!0){let e=ic(!1,r);return e.parsers.unshift(new rD.default),e.parsers.unshift(new nD.default),e.parsers.unshift(new dD.default),e.parsers.unshift(new Wy.default),e.parsers.unshift(new pD.default),e.parsers.unshift(new fD.default),e}Ae.createCasualConfiguration=Ly;function ic(r=!0,e=!0){return Jw.includeCommonConfiguration({parsers:[new iD.default(e),new sD.default,new oD.default,new Wy.default,new aD.default,new cD.default,new uD.default,new lD.default(r),new hD.default(r),new mD.default(r)],refiners:[new tD.default,new eD.default]},r)}Ae.createConfiguration=ic});var Gy=h(_i=>{"use strict";var _D=_i&&_i.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_i,"__esModule",{value:!0});var TD=_D(z()),bD=R(),vD=1,$y=2,ED=3,jy=4,By=5,RD=6,sc=class extends bD.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=TD.default(e.refDate),a=s;if(t[vD])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[$y]){let o=t[$y],u=t[ED];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[jy]){let u=t[jy][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[By]){let o=t[By];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[RD];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};_i.default=sc});var yn=h(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.zhStringToYear=He.zhStringToNumber=He.WEEKDAY_OFFSET=He.NUMBER=void 0;He.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};He.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function wD(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?He.NUMBER[n]:e*He.NUMBER[n]:e+=He.NUMBER[n]}return e}He.zhStringToNumber=wD;function DD(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+He.NUMBER[n]}return parseInt(e)}He.zhStringToYear=DD});var zy=h(Ti=>{"use strict";var MD=Ti&&Ti.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ti,"__esModule",{value:!0});var PD=MD(z()),OD=R(),$r=yn(),ac=1,Hy=2,oc=3,uc=class extends OD.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys($r.NUMBER).join("")+"]{4}|["+Object.keys($r.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys($r.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys($r.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=PD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[Hy]);if(isNaN(s)&&(s=$r.zhStringToNumber(t[Hy])),i.start.assign("month",s),t[oc]){let a=parseInt(t[oc]);isNaN(a)&&(a=$r.zhStringToNumber(t[oc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[ac]){let a=parseInt(t[ac]);isNaN(a)&&(a=$r.zhStringToYear(t[ac])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};Ti.default=uc});var Vy=h(bi=>{"use strict";var AD=bi&&bi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bi,"__esModule",{value:!0});var kD=AD(z()),ND=R(),Ky=yn(),CD=new RegExp("(\\d+|["+Object.keys(Ky.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),lc=1,xD=2,cc=class extends ND.AbstractParserWithWordBoundaryChecking{innerPattern(){return CD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[lc]);if(isNaN(i)&&(i=Ky.zhStringToNumber(t[lc])),isNaN(i)){let u=t[lc];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=kD.default(e.refDate),o=t[xD][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};bi.default=cc});var Xy=h(vi=>{"use strict";var SD=vi&&vi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vi,"__esModule",{value:!0});var ID=SD(z()),UD=R(),Zy=yn(),FD=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(Zy.WEEKDAY_OFFSET).join("|")+")"),dc=class extends UD.AbstractParserWithWordBoundaryChecking{innerPattern(){return FD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Zy.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=ID.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};vi.default=dc});var Qy=h(Ei=>{"use strict";var qD=Ei&&Ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ei,"__esModule",{value:!0});var WD=qD(z()),LD=R(),ut=yn(),YD=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(ut.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(ut.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(ut.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),$D=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(ut.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(ut.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(ut.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),Zs=1,Xs=2,Qs=3,Js=4,ea=5,ta=6,ot=7,gn=8,ra=9,fc=class extends LD.AbstractParserWithWordBoundaryChecking{innerPattern(){return YD}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=WD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[Zs]){var a=t[Zs];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[Js]){var o=t[Js];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[gn]){var d=parseInt(t[gn]);if(isNaN(d)&&(d=ut.zhStringToNumber(t[gn])),d>=60)return null;i.start.assign("second",d)}if(u=parseInt(t[ta]),isNaN(u)&&(u=ut.zhStringToNumber(t[ta])),t[ot]?t[ot]=="\u534A"?l=30:t[ot]=="\u6B63"||t[ot]=="\u6574"?l=0:(l=parseInt(t[ot]),isNaN(l)&&(l=ut.zhStringToNumber(t[ot]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[ra]){if(u>12)return null;var f=t[ra][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12))}else if(t[Xs]){var p=t[Xs],y=p[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[Qs]){var m=t[Qs],g=m[0];g=="\u4E0A"||g=="\u671D"||g=="\u65E9"||g=="\u51CC"?(c=0,u==12&&(u=0)):(g=="\u4E0B"||g=="\u664F"||g=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[ea]){var k=t[ea],x=k[0];x=="\u4E0A"||x=="\u671D"||x=="\u65E9"||x=="\u51CC"?(c=0,u==12&&(u=0)):(x=="\u4E0B"||x=="\u664F"||x=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=$D.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let C=s.clone();if(i.end=e.createParsingComponents(),t[Zs]){var a=t[Zs];a=="\u660E"||a=="\u807D"?n.hour()>1&&C.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?C.add(-1,"day"):a=="\u524D"?C.add(-2,"day"):a=="\u5927\u524D"?C.add(-3,"day"):a=="\u5F8C"?C.add(2,"day"):a=="\u5927\u5F8C"&&C.add(3,"day"),i.end.assign("day",C.date()),i.end.assign("month",C.month()+1),i.end.assign("year",C.year())}else if(t[Js]){var o=t[Js];o=="\u660E"||o=="\u807D"?C.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?C.add(-1,"day"):o=="\u524D"?C.add(-2,"day"):o=="\u5927\u524D"?C.add(-3,"day"):o=="\u5F8C"?C.add(2,"day"):o=="\u5927\u5F8C"&&C.add(3,"day"),i.end.assign("day",C.date()),i.end.assign("month",C.month()+1),i.end.assign("year",C.year())}else i.end.imply("day",C.date()),i.end.imply("month",C.month()+1),i.end.imply("year",C.year());if(u=0,l=0,c=-1,t[gn]){var d=parseInt(t[gn]);if(isNaN(d)&&(d=ut.zhStringToNumber(t[gn])),d>=60)return null;i.end.assign("second",d)}if(u=parseInt(t[ta]),isNaN(u)&&(u=ut.zhStringToNumber(t[ta])),t[ot]?t[ot]=="\u534A"?l=30:t[ot]=="\u6B63"||t[ot]=="\u6574"?l=0:(l=parseInt(t[ot]),isNaN(l)&&(l=ut.zhStringToNumber(t[ot]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[ra]){if(u>12)return null;var f=t[ra][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[Xs]){var p=t[Xs],y=p[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[Qs]){var m=t[Qs],g=m[0];g=="\u4E0A"||g=="\u671D"||g=="\u65E9"||g=="\u51CC"?(c=0,u==12&&(u=0)):(g=="\u4E0B"||g=="\u664F"||g=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[ea]){var k=t[ea],x=k[0];x=="\u4E0A"||x=="\u671D"||x=="\u65E9"||x=="\u51CC"?(c=0,u==12&&(u=0)):(x=="\u4E0B"||x=="\u664F"||x=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};Ei.default=fc});var eg=h(Ri=>{"use strict";var jD=Ri&&Ri.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ri,"__esModule",{value:!0});var BD=jD(z()),GD=R(),Jy=yn(),HD=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(Jy.WEEKDAY_OFFSET).join("|")+")"),pc=class extends GD.AbstractParserWithWordBoundaryChecking{innerPattern(){return HD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Jy.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=BD.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};Ri.default=pc});var tg=h(wi=>{"use strict";var zD=wi&&wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wi,"__esModule",{value:!0});var KD=zD(Nt()),hc=class extends KD.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};wi.default=hc});var rg=h(Di=>{"use strict";var VD=Di&&Di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Di,"__esModule",{value:!0});var ZD=VD(Gt()),mc=class extends ZD.default{patternBetween(){return/^\s*$/i}};Di.default=mc});var ng=h(Te=>{"use strict";var Xt=Te&&Te.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Te,"__esModule",{value:!0});Te.createConfiguration=Te.createCasualConfiguration=Te.parseDate=Te.parse=Te.strict=Te.casual=Te.hant=void 0;var yc=gt(),XD=Xt(Cs()),QD=Ht(),JD=Xt(Gy()),eM=Xt(zy()),tM=Xt(Vy()),rM=Xt(Xy()),nM=Xt(Qy()),iM=Xt(eg()),sM=Xt(tg()),aM=Xt(rg());Te.hant=new yc.Chrono(gc());Te.casual=new yc.Chrono(gc());Te.strict=new yc.Chrono(_c());function oM(r,e,t){return Te.casual.parse(r,e,t)}Te.parse=oM;function uM(r,e,t){return Te.casual.parseDate(r,e,t)}Te.parseDate=uM;function gc(){let r=_c();return r.parsers.unshift(new JD.default),r}Te.createCasualConfiguration=gc;function _c(){let r=QD.includeCommonConfiguration({parsers:[new eM.default,new rM.default,new iM.default,new nM.default,new tM.default],refiners:[new sM.default,new aM.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof XD.default)),r}Te.createConfiguration=_c});var og=h(Mi=>{"use strict";var lM=Mi&&Mi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mi,"__esModule",{value:!0});var cM=lM(z()),dM=R(),fM=1,ig=2,pM=3,sg=4,ag=5,hM=6,Tc=class extends dM.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=cM.default(e.refDate),a=s;if(t[fM])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[ig]){let o=t[ig],u=t[pM];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[sg]){let u=t[sg][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[ag]){let o=t[ag];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[hM];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Mi.default=Tc});var _n=h(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.zhStringToYear=ze.zhStringToNumber=ze.WEEKDAY_OFFSET=ze.NUMBER=void 0;ze.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};ze.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function mM(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?ze.NUMBER[n]:e*ze.NUMBER[n]:e+=ze.NUMBER[n]}return e}ze.zhStringToNumber=mM;function yM(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+ze.NUMBER[n]}return parseInt(e)}ze.zhStringToYear=yM});var lg=h(Pi=>{"use strict";var gM=Pi&&Pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pi,"__esModule",{value:!0});var _M=gM(z()),TM=R(),jr=_n(),bc=1,ug=2,vc=3,Ec=class extends TM.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(jr.NUMBER).join("")+"]{4}|["+Object.keys(jr.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(jr.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(jr.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=_M.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[ug]);if(isNaN(s)&&(s=jr.zhStringToNumber(t[ug])),i.start.assign("month",s),t[vc]){let a=parseInt(t[vc]);isNaN(a)&&(a=jr.zhStringToNumber(t[vc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[bc]){let a=parseInt(t[bc]);isNaN(a)&&(a=jr.zhStringToYear(t[bc])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};Pi.default=Ec});var dg=h(Oi=>{"use strict";var bM=Oi&&Oi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oi,"__esModule",{value:!0});var vM=bM(z()),EM=R(),cg=_n(),RM=new RegExp("(\\d+|["+Object.keys(cg.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),Rc=1,wM=2,wc=class extends EM.AbstractParserWithWordBoundaryChecking{innerPattern(){return RM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[Rc]);if(isNaN(i)&&(i=cg.zhStringToNumber(t[Rc])),isNaN(i)){let u=t[Rc];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=vM.default(e.refDate),o=t[wM][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Oi.default=wc});var pg=h(Ai=>{"use strict";var DM=Ai&&Ai.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ai,"__esModule",{value:!0});var MM=DM(z()),PM=R(),fg=_n(),OM=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(fg.WEEKDAY_OFFSET).join("|")+")"),Dc=class extends PM.AbstractParserWithWordBoundaryChecking{innerPattern(){return OM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=fg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=MM.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Ai.default=Dc});var hg=h(ki=>{"use strict";var AM=ki&&ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ki,"__esModule",{value:!0});var kM=AM(z()),NM=R(),ct=_n(),CM=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(ct.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(ct.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(ct.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),xM=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(ct.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(ct.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(ct.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),na=1,ia=2,sa=3,aa=4,oa=5,ua=6,lt=7,Tn=8,la=9,Mc=class extends NM.AbstractParserWithWordBoundaryChecking{innerPattern(){return CM}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=kM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[na]){let c=t[na];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[aa]){let c=t[aa];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[Tn]){let c=parseInt(t[Tn]);if(isNaN(c)&&(c=ct.zhStringToNumber(t[Tn])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[ua]),isNaN(a)&&(a=ct.zhStringToNumber(t[ua])),t[lt]?t[lt]=="\u534A"?o=30:t[lt]=="\u6B63"||t[lt]=="\u6574"?o=0:(o=parseInt(t[lt]),isNaN(o)&&(o=ct.zhStringToNumber(t[lt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[la]){if(a>12)return null;let c=t[la][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[ia]){let d=t[ia][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[sa]){let d=t[sa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[oa]){let d=t[oa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=xM.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[na]){let c=t[na];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[aa]){let c=t[aa];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[Tn]){let c=parseInt(t[Tn]);if(isNaN(c)&&(c=ct.zhStringToNumber(t[Tn])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[ua]),isNaN(a)&&(a=ct.zhStringToNumber(t[ua])),t[lt]?t[lt]=="\u534A"?o=30:t[lt]=="\u6B63"||t[lt]=="\u6574"?o=0:(o=parseInt(t[lt]),isNaN(o)&&(o=ct.zhStringToNumber(t[lt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[la]){if(a>12)return null;let c=t[la][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[ia]){let d=t[ia][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[sa]){let d=t[sa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[oa]){let d=t[oa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};ki.default=Mc});var yg=h(Ni=>{"use strict";var SM=Ni&&Ni.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ni,"__esModule",{value:!0});var IM=SM(z()),UM=R(),mg=_n(),FM=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(mg.WEEKDAY_OFFSET).join("|")+")"),Pc=class extends UM.AbstractParserWithWordBoundaryChecking{innerPattern(){return FM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=mg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=IM.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};Ni.default=Pc});var gg=h(Ci=>{"use strict";var qM=Ci&&Ci.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ci,"__esModule",{value:!0});var WM=qM(Nt()),Oc=class extends WM.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};Ci.default=Oc});var _g=h(xi=>{"use strict";var LM=xi&&xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xi,"__esModule",{value:!0});var YM=LM(Gt()),Ac=class extends YM.default{patternBetween(){return/^\s*$/i}};xi.default=Ac});var Tg=h(be=>{"use strict";var Qt=be&&be.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(be,"__esModule",{value:!0});be.createConfiguration=be.createCasualConfiguration=be.parseDate=be.parse=be.strict=be.casual=be.hans=void 0;var kc=gt(),$M=Qt(Cs()),jM=Ht(),BM=Qt(og()),GM=Qt(lg()),HM=Qt(dg()),zM=Qt(pg()),KM=Qt(hg()),VM=Qt(yg()),ZM=Qt(gg()),XM=Qt(_g());be.hans=new kc.Chrono(Nc());be.casual=new kc.Chrono(Nc());be.strict=new kc.Chrono(Cc());function QM(r,e,t){return be.casual.parse(r,e,t)}be.parse=QM;function JM(r,e,t){return be.casual.parseDate(r,e,t)}be.parseDate=JM;function Nc(){let r=Cc();return r.parsers.unshift(new BM.default),r}be.createCasualConfiguration=Nc;function Cc(){let r=jM.includeCommonConfiguration({parsers:[new GM.default,new zM.default,new VM.default,new KM.default,new HM.default],refiners:[new ZM.default,new XM.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof $M.default)),r}be.createConfiguration=Cc});var vg=h(Je=>{"use strict";var bg=Je&&Je.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),eP=Je&&Je.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),tP=Je&&Je.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&bg(e,r,t)},rP=Je&&Je.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&bg(e,r,t);return eP(e,r),e};Object.defineProperty(Je,"__esModule",{value:!0});Je.hans=void 0;tP(ng(),Je);Je.hans=rP(Tg())});var Ke=h(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.parseTimeUnits=U.TIME_UNITS_PATTERN=U.parseYear=U.YEAR_PATTERN=U.parseOrdinalNumberPattern=U.ORDINAL_NUMBER_PATTERN=U.parseNumberPattern=U.NUMBER_PATTERN=U.TIME_UNIT_DICTIONARY=U.ORDINAL_WORD_DICTIONARY=U.INTEGER_WORD_DICTIONARY=U.MONTH_DICTIONARY=U.FULL_MONTH_NAME_DICTIONARY=U.WEEKDAY_DICTIONARY=U.REGEX_PARTS=void 0;var ca=Q(),nP=Se();U.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};U.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};U.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};U.MONTH_DICTIONARY=Object.assign(Object.assign({},U.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});U.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};U.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};U.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};U.NUMBER_PATTERN=`(?:${ca.matchAnyPattern(U.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function Rg(r){let e=r.toLowerCase();return U.INTEGER_WORD_DICTIONARY[e]!==void 0?U.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}U.parseNumberPattern=Rg;U.ORDINAL_NUMBER_PATTERN=`(?:${ca.matchAnyPattern(U.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function iP(r){let e=r.toLowerCase();return U.ORDINAL_WORD_DICTIONARY[e]!==void 0?U.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}U.parseOrdinalNumberPattern=iP;var xc="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";U.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${xc}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${xc}|[5-9][0-9]${xc})`;function sP(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return nP.findMostLikelyADYear(e)}U.parseYear=sP;var wg=`(${U.NUMBER_PATTERN})\\s{0,3}(${ca.matchAnyPattern(U.TIME_UNIT_DICTIONARY)})`,Eg=new RegExp(wg,"i");U.TIME_UNITS_PATTERN=ca.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",wg);function aP(r){let e={},t=r,n=Eg.exec(t);for(;n;)oP(e,n),t=t.substring(n[0].length).trim(),n=Eg.exec(t);return e}U.parseTimeUnits=aP;function oP(r,e){let t=Rg(e[1]),n=U.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Mg=h(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});var Si=Ke(),uP=pe(),lP=R(),Dg=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${Si.TIME_UNITS_PATTERN})${Si.REGEX_PARTS.rightBoundary}`,cP=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${Dg}`,Si.REGEX_PARTS.flags),dP=new RegExp(Dg,"i"),Sc=class extends lP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Si.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?dP:cP}innerExtract(e,t){let n=Si.parseTimeUnits(t[1]);return uP.ParsingComponents.createRelativeFromReference(e.reference,n)}};Ic.default=Sc});var Ng=h(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});var fP=Se(),Ii=Ke(),kg=Ke(),da=Ke(),pP=Q(),hP=R(),mP=new RegExp(`(?:\u0441)?\\s*(${da.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${da.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${pP.matchAnyPattern(Ii.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${kg.YEAR_PATTERN}(?![^\\s]\\d)))?${Ii.REGEX_PARTS.rightBoundary}`,Ii.REGEX_PARTS.flags),Pg=1,Og=2,yP=3,Ag=4,Uc=class extends hP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ii.REGEX_PARTS.leftBoundary}innerPattern(){return mP}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Ii.MONTH_DICTIONARY[t[yP].toLowerCase()],s=da.parseOrdinalNumberPattern(t[Pg]);if(s>31)return t.index=t.index+t[Pg].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Ag]){let a=kg.parseYear(t[Ag]);n.start.assign("year",a)}else{let a=fP.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Og]){let a=da.parseOrdinalNumberPattern(t[Og]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Fc.default=Uc});var Sg=h(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});var Ui=Ke(),gP=Se(),_P=Q(),xg=Ke(),TP=R(),bP=new RegExp(`((?:\u0432)\\s*)?(${_P.matchAnyPattern(Ui.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${xg.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,Ui.REGEX_PARTS.flags),vP=2,Cg=3,qc=class extends TP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ui.REGEX_PARTS.leftBoundary}innerPattern(){return bP}innerExtract(e,t){let n=t[vP].toLowerCase();if(t[0].length<=3&&!Ui.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=Ui.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Cg]){let a=xg.parseYear(t[Cg]);i.start.assign("year",a)}else{let a=gP.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Wc.default=qc});var Ug=h(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});var fa=Ee(),EP=Ur(),Ig=Ke(),Lc=class extends EP.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return Ig.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${Ig.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",fa.Meridiem.PM)):i<6&&n.assign("meridiem",fa.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",fa.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",fa.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Yc.default=Lc});var Fg=h(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});var pa=Ke(),RP=pe(),wP=R(),DP=st(),MP=new RegExp(`(${pa.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,pa.REGEX_PARTS.flags),$c=class extends wP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return pa.REGEX_PARTS.leftBoundary}innerPattern(){return MP}innerExtract(e,t){let n=pa.parseTimeUnits(t[1]),i=DP.reverseTimeUnits(n);return RP.ParsingComponents.createRelativeFromReference(e.reference,i)}};jc.default=$c});var qg=h(Fi=>{"use strict";var PP=Fi&&Fi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fi,"__esModule",{value:!0});var OP=PP(Nt()),Bc=class extends OP.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};Fi.default=Bc});var Wg=h(qi=>{"use strict";var AP=qi&&qi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qi,"__esModule",{value:!0});var kP=AP(Gt()),Gc=class extends kP.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};qi.default=Gc});var Lg=h(Jt=>{"use strict";var NP=Jt&&Jt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),CP=Jt&&Jt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),xP=Jt&&Jt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&NP(e,r,t);return CP(e,r),e};Object.defineProperty(Jt,"__esModule",{value:!0});var SP=R(),Wi=xP(Kt()),Hc=Ke(),IP=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${Hc.REGEX_PARTS.rightBoundary}`,Hc.REGEX_PARTS.flags),zc=class extends SP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Hc.REGEX_PARTS.leftBoundary}innerPattern(e){return IP}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return Wi.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return Wi.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return Wi.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return Wi.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return Wi.theDayBefore(e.reference,2)}return i}};Jt.default=zc});var Yg=h(Et=>{"use strict";var UP=Et&&Et.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),FP=Et&&Et.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),qP=Et&&Et.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&UP(e,r,t);return FP(e,r),e},WP=Et&&Et.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Et,"__esModule",{value:!0});var LP=R(),Br=qP(Kt()),YP=it(),$P=WP(z()),Kc=Ke(),jP=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${Kc.REGEX_PARTS.rightBoundary}`,Kc.REGEX_PARTS.flags),Vc=class extends LP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Kc.REGEX_PARTS.leftBoundary}innerPattern(){return jP}innerExtract(e,t){let n=$P.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return Br.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return Br.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return Br.morning(e.reference);if(i.match(/в\s*полдень/))return Br.noon(e.reference);if(i.match(/прошлой\s*ночью/))return Br.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return Br.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),YP.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?Br.midnight(e.reference):s}};Et.default=Vc});var $g=h(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});var Li=Ke(),BP=Q(),GP=R(),HP=qr(),zP=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${BP.matchAnyPattern(Li.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${Li.REGEX_PARTS.rightBoundary}`,Li.REGEX_PARTS.flags),KP=1,VP=2,ZP=3,Zc=class extends GP.AbstractParserWithWordBoundaryChecking{innerPattern(){return zP}patternLeftBoundary(){return Li.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[VP].toLowerCase(),i=Li.WEEKDAY_DICTIONARY[n],s=t[KP],a=t[ZP],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=HP.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Xc.default=Zc});var Bg=h($i=>{"use strict";var XP=$i&&$i.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($i,"__esModule",{value:!0});var Yi=Ke(),jg=pe(),QP=XP(z()),JP=R(),eO=Q(),tO=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${eO.matchAnyPattern(Yi.TIME_UNIT_DICTIONARY)})(?=\\s*)${Yi.REGEX_PARTS.rightBoundary}`,Yi.REGEX_PARTS.flags),rO=1,nO=2,Qc=class extends JP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Yi.REGEX_PARTS.leftBoundary}innerPattern(){return tO}innerExtract(e,t){let n=t[rO].toLowerCase(),i=t[nO].toLowerCase(),s=Yi.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,jg.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,jg.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=QP.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};$i.default=Qc});var Gg=h(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});var ji=Ke(),iO=pe(),sO=R(),aO=st(),oO=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${ji.TIME_UNITS_PATTERN})${ji.REGEX_PARTS.rightBoundary}`,ji.REGEX_PARTS.flags),Jc=class extends sO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return ji.REGEX_PARTS.leftBoundary}innerPattern(){return oO}innerExtract(e,t){let n=t[1].toLowerCase(),i=ji.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=aO.reverseTimeUnits(i);break}return iO.ParsingComponents.createRelativeFromReference(e.reference,i)}};ed.default=Jc});var Kg=h(ke=>{"use strict";var et=ke&&ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ke,"__esModule",{value:!0});ke.createConfiguration=ke.createCasualConfiguration=ke.parseDate=ke.parse=ke.strict=ke.casual=void 0;var uO=et(Mg()),lO=et(Ng()),cO=et(Sg()),dO=et(Ug()),fO=et(Fg()),pO=et(qg()),hO=et(Wg()),mO=Ht(),yO=et(Lg()),gO=et(Yg()),_O=et($g()),TO=et(Bg()),Hg=gt(),bO=et(Wr()),vO=et(Gg());ke.casual=new Hg.Chrono(zg());ke.strict=new Hg.Chrono(td(!0));function EO(r,e,t){return ke.casual.parse(r,e,t)}ke.parse=EO;function RO(r,e,t){return ke.casual.parseDate(r,e,t)}ke.parseDate=RO;function zg(){let r=td(!1);return r.parsers.unshift(new yO.default),r.parsers.unshift(new gO.default),r.parsers.unshift(new cO.default),r.parsers.unshift(new TO.default),r.parsers.unshift(new vO.default),r}ke.createCasualConfiguration=zg;function td(r=!0){return mO.includeCommonConfiguration({parsers:[new bO.default(!0),new uO.default,new lO.default,new _O.default,new dO.default(r),new fO.default],refiners:[new hO.default,new pO.default]},r)}ke.createConfiguration=td});var Ee=h(W=>{"use strict";var wO=W&&W.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),DO=W&&W.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Er=W&&W.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&wO(e,r,t);return DO(e,r),e};Object.defineProperty(W,"__esModule",{value:!0});W.parseDate=W.parse=W.casual=W.strict=W.ru=W.zh=W.nl=W.pt=W.ja=W.fr=W.de=W.Meridiem=W.Chrono=W.en=void 0;var rd=Er(Tu());W.en=rd;var MO=gt();Object.defineProperty(W,"Chrono",{enumerable:!0,get:function(){return MO.Chrono}});var PO;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(PO=W.Meridiem||(W.Meridiem={}));var OO=Er(nm());W.de=OO;var AO=Er(Cm());W.fr=AO;var kO=Er(Ym());W.ja=kO;var NO=Er(ny());W.pt=NO;var CO=Er(Yy());W.nl=CO;var xO=Er(vg());W.zh=xO;var SO=Er(Kg());W.ru=SO;W.strict=rd.strict;W.casual=rd.casual;function IO(r,e,t){return W.casual.parse(r,e,t)}W.parse=IO;function UO(r,e,t){return W.casual.parseDate(r,e,t)}W.parseDate=UO});var It=h(Dr=>{"use strict";Dr.__esModule=!0;var BO;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})(BO=Dr.Operators||(Dr.Operators={}));var GO;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})(GO=Dr.StructuralCharacters||(Dr.StructuralCharacters={}));var HO;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(HO=Dr.Tokens||(Dr.Tokens={}))});var hd=h(Pa=>{"use strict";Pa.__esModule=!0;var he=It();Pa.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};Pa.VALID_TOKENS={identifierOnly:[{name:he.Tokens.IDENTIFIER},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:he.Tokens.IDENTIFIER},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.OPEN_PARENTHESIS},{name:he.Tokens.OPERATOR,value:he.Operators.NOT}],binaryOperator:[{name:he.Tokens.OPERATOR,value:he.Operators.AND},{name:he.Tokens.OPERATOR,value:he.Operators.OR},{name:he.Tokens.OPERATOR,value:he.Operators.XOR}],binaryOperatorOrClose:[{name:he.Tokens.OPERATOR,value:he.Operators.AND},{name:he.Tokens.OPERATOR,value:he.Operators.OR},{name:he.Tokens.OPERATOR,value:he.Operators.XOR},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.CLOSE_PARENTHESIS}]}});var md=h(rr=>{"use strict";rr.__esModule=!0;var wn=It();rr.STRUCTURAL_CHARACTERS={"(":wn.StructuralCharacters.OPEN_PARENTHESIS,")":wn.StructuralCharacters.CLOSE_PARENTHESIS};rr.OPERATORS={AND:wn.Operators.AND,OR:wn.Operators.OR,XOR:wn.Operators.XOR,NOT:wn.Operators.NOT};rr.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));rr.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);rr.COMMENT_DELIMITER=String.fromCodePoint(35);rr.EOL=String.fromCodePoint(10);rr.ESCAPE_CHARACTER=String.fromCodePoint(92)});var s_=h(nr=>{"use strict";var yd=nr&&nr.__assign||function(){return yd=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},yd.apply(this,arguments)};nr.__esModule=!0;var i_=It(),Hr=md();nr.createResult=function(r,e,t){return{token:yd({name:r},e!==null?{value:e}:{}),remainingString:t}};nr.getComment=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===Hr.EOL){e=t;break}}return nr.createResult(i_.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};nr.getQuotedIdentifier=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===Hr.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+Hr.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===Hr.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!Hr.SEPARATORS.has(s)&&!Hr.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: "+s+" Expected ) character or separator");break}}if(n===null)throw new Error("Unexpected end of expression: expected "+Hr.QUOTED_IDENTIFIER_DELIMITER+" character");return nr.createResult(i_.Tokens.IDENTIFIER,t,r.slice(n+1))}});var a_=h(gd=>{"use strict";gd.__esModule=!0;var Dn=It(),tt=md(),Mn=s_();gd.lex=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!tt.SEPARATORS.has(s)){var a=tt.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===Dn.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!tt.SEPARATORS.has(o)&&o!==Dn.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: "+o+". A closing parenthesis should be followed by another closing parenthesis or whitespace");return Mn.createResult(Dn.Tokens.STRUCTURAL_CHARACTER,tt.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===tt.QUOTED_IDENTIFIER_DELIMITER)return Mn.getQuotedIdentifier(r.slice(i+1));if(s===tt.COMMENT_DELIMITER)return Mn.getComment(r.slice(i+1));e=i}}else if(tt.SEPARATORS.has(s)||tt.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===tt.QUOTED_IDENTIFIER_DELIMITER||s===tt.COMMENT_DELIMITER)throw new Error("Unexpected character: "+s)}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(tt.OPERATORS[u]){if(n&&!tt.SEPARATORS.has(n))throw new Error("Unexpected character: "+n+". Operators should be separated using whitespace");return Mn.createResult(Dn.Tokens.OPERATOR,tt.OPERATORS[u],l)}else return Mn.createResult(Dn.Tokens.IDENTIFIER,u,l)}return Mn.createResult(Dn.Tokens.EOF,null,"")}});var o_=h(ir=>{"use strict";var zO=ir&&ir.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};ir.__esModule=!0;var KO=a_(),Pn=It(),Oa=hd();ir.newTokenGenerator=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=KO.lex(e),s=i.token,a=i.remainingString;if(e=a,s.name!==Pn.Tokens.COMMENT)return ir.validateToken(s,t,n),s}}};ir.getValue=function(r,e){var t=r(Oa.VALID_TOKENS.identifierOrNot),n=t.value===Pn.Operators.NOT;n&&(t=r(Oa.VALID_TOKENS.identifierOnly));var i=t.name===Pn.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?zO(i,[{name:Pn.Tokens.OPERATOR,value:Pn.Operators.NOT}]):i};ir.previousOperatorTakesPrecedent=function(r,e){return Oa.OPERATOR_PRECEDENCE[r]<=Oa.OPERATOR_PRECEDENCE[e]};ir.validateToken=function(r,e,t){if(t===void 0&&(t=!1),r.name===Pn.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")}});var Td=h(Zi=>{"use strict";var On=Zi&&Zi.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Zi.__esModule=!0;var u_=It(),l_=hd(),Aa=o_();Zi.parse=function(r){if(typeof r!="string")throw new Error("Expected string but received "+typeof r);var e=Aa.newTokenGenerator(r);return _d(e)};var _d=function(r,e){e===void 0&&(e=!1);for(var t=On(Aa.getValue(r,_d)),n=[];;){var i=e?l_.VALID_TOKENS.binaryOperatorOrClose:l_.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===u_.Tokens.EOF||s.name===u_.Tokens.STRUCTURAL_CHARACTER)return On(t,On(n).reverse());for(;n.length;){var a=n[n.length-1]||null;if(a&&Aa.previousOperatorTakesPrecedent(a.value,s.value))t=On(t,[a]),n=n.slice(0,-1);else break}n=On(n,[s]),t=On(t,Aa.getValue(r,_d))}}});var bd=h(sr=>{"use strict";sr.__esModule=!0;var c_=It();sr.andUtil=function(r,e){return r&&e};sr.orUtil=function(r,e){return r||e};sr.xorUtil=function(r,e){return r!==e};sr.notUtil=function(r){return!r};sr.isIdentifier=function(r){var e=r.name,t=r.value;return e===c_.Tokens.IDENTIFIER&&typeof t=="string"};sr.isOperator=function(r){var e=r.name,t=r.value;return e===c_.Tokens.OPERATOR&&typeof t=="string"};sr.throwInvalidExpression=function(r){throw new TypeError("Invalid postfix expression: "+r)}});var d_=h(Rd=>{"use strict";var Xi;Rd.__esModule=!0;var vd=It(),Ed=bd();Rd.OPERATOR_MAP=(Xi={},Xi[vd.Operators.AND]=Ed.andUtil,Xi[vd.Operators.OR]=Ed.orUtil,Xi[vd.Operators.XOR]=Ed.xorUtil,Xi)});var p_=h(Kr=>{"use strict";var wd=Kr&&Kr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Kr.__esModule=!0;var VO=Td(),f_=It(),ZO=d_(),zr=bd();Kr.getEvaluator=function(r){var e=VO.parse(r);return function(t){return Kr.evaluate(e,t)}};Kr.evaluate=function(r,e){if(!Array.isArray(r))throw new Error(r+" should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator");var t=r.reduce(function(n,i,s){if(!(i&&(zr.isIdentifier(i)||zr.isOperator(i))))throw new Error("Invalid token: "+i+". Found in parsed expression at index "+s);if(i.name===f_.Tokens.IDENTIFIER)return wd(n,[Boolean(e[i.value])]);var a=n[n.length-2],o=n[n.length-1];if(i.value===f_.Operators.NOT)return o===void 0&&zr.throwInvalidExpression("missing identifier"),wd(n.slice(0,-1),[zr.notUtil(o)]);(o===void 0||a===void 0)&&zr.throwInvalidExpression("missing identifier");var u=ZO.OPERATOR_MAP[i.value];return u||zr.throwInvalidExpression("unknown operator"),wd(n.slice(0,-2),[u(a,o)])},[]);return t.length!==1&&zr.throwInvalidExpression("too many identifiers after evaluation"),t[0]}});var m_=h(Qi=>{"use strict";Qi.__esModule=!0;var h_=p_();Qi.getEvaluator=h_.getEvaluator;Qi.evaluate=h_.evaluate;var XO=Td();Qi.parse=XO.parse});var iA={};P_(iA,{default:()=>Ga});module.exports=O_(iA);var T_=require("obsidian");var gs=require("obsidian");var aA=new Error("timeout while waiting for mutex to become available"),oA=new Error("mutex already locked"),A_=new Error("request for lock canceled"),Xd=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},Za=class{constructor(e,t=A_){if(this._maxConcurrency=e,this._cancelError=t,this._queue=[],this._waiters=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}acquire(){let e=this.isLocked(),t=new Promise((n,i)=>this._queue.push({resolve:n,reject:i}));return e||this._dispatch(),t}runExclusive(e){return Xd(this,void 0,void 0,function*(){let[t,n]=yield this.acquire();try{return yield e(t)}finally{n()}})}waitForUnlock(){return Xd(this,void 0,void 0,function*(){return this.isLocked()?new Promise(t=>this._waiters.push({resolve:t})):Promise.resolve()})}isLocked(){return this._value<=0}release(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){let e=this._currentReleaser;this._currentReleaser=void 0,e()}}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatch(){let e=this._queue.shift();if(!e)return;let t=!1;this._currentReleaser=()=>{t||(t=!0,this._value++,this._resolveWaiters(),this._dispatch())},e.resolve([this._value--,this._currentReleaser])}_resolveWaiters(){this._waiters.forEach(e=>e.resolve()),this._waiters=[]}},k_=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},us=class{constructor(e){this._semaphore=new Za(1,e)}acquire(){return k_(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var ap=require("obsidian");var Jd=require("obsidian");var Qd=[{index:9999,internalName:"INTERNAL_TESTING_ENABLED_BY_DEFAULT",displayName:"Test Item. Used to validate the Feature Framework.",description:"Description",enabledByDefault:!0,stable:!1}];var Rt=class{constructor(e,t,n,i,s,a){this.internalName=e;this.index=t;this.description=n;this.displayName=i;this.enabledByDefault=s;this.stable=a}static get values(){let e=[];return Qd.forEach(t=>{e=[...e,new Rt(t.internalName,t.index,t.description,t.displayName,t.enabledByDefault,t.stable)]}),e}static get settingsFlags(){let e={};return Rt.values.forEach(t=>{e[t.internalName]=t.enabledByDefault}),e}static fromString(e){for(let t of Rt.values)if(e===t.internalName)return t;throw new RangeError(`Illegal argument passed to fromString(): ${e} does not correspond to any available Feature ${this.prototype.constructor.name}`)}};var C_={globalFilter:"",removeGlobalFilter:!1,setDoneDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6,features:Rt.settingsFlags},xn=$e({},C_),ie=()=>{for(let r in Rt.settingsFlags)xn.features[r]===void 0&&(xn.features[r]=Rt.settingsFlags[r]);return $e({},xn)},Wt=r=>(xn=$e($e({},xn),r),ie());var Xa,Qa,ef=({metadataCache:r,vault:e})=>{Xa=r,Qa=e},ls=t=>ne(void 0,[t],function*({originalTask:r,newTasks:e}){if(Qa===void 0||Xa===void 0){console.error("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]),tf({originalTask:r,newTasks:e,vault:Qa,metadataCache:Xa,previousTries:0})}),tf=s=>ne(void 0,[s],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i}){let a=()=>{if(i>10){console.error("Tasks: Too many retries. File update not possible ...");return}let g=Math.min(Math.pow(10,i),100);setTimeout(()=>{tf({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i+1})},g)},o=t.getAbstractFileByPath(r.path);if(!(o instanceof Jd.TFile))return console.warn(`Tasks: No file found for task ${r.description}. Retrying ...`),a();if(o.extension!=="md"){console.error("Tasks: Only supporting files with the .md file extension.");return}let u=n.getFileCache(o);if(u==null||u===null)return console.warn(`Tasks: No file cache found for file ${o.path}. Retrying ...`),a();let l=u.listItems;if(l===void 0||l.length===0)return console.warn(`Tasks: No list items found in file cache of ${o.path}. Retrying ...`),a();let d=(yield t.read(o)).split(`
`),{globalFilter:f}=ie(),p,y=0;for(let g of l){if(g.position.start.line<r.sectionStart||g.task===void 0)continue;if(d[g.position.start.line].includes(f)){if(y===r.sectionIndex){p=g;break}y++}}if(p===void 0){console.error("Tasks: could not find task to toggle in the file.");return}let m=[...d.slice(0,p.position.start.line),...e.map(g=>g.toFileLineString()),...d.slice(p.position.start.line+1)];yield t.modify(o,m.join(`
`))});var Xr=class{constructor(){this.hideTaskCount=!1;this.hideBacklinks=!1;this.hidePriority=!1;this.hideStartDate=!1;this.hideScheduledDate=!1;this.hideDoneDate=!1;this.hideDueDate=!1;this.hideRecurrenceRule=!1;this.hideEditButton=!1;this.hideUrgency=!0;this.shortMode=!1}};var cs=["MO","TU","WE","TH","FR","SA","SU"],ge=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(cs.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=cs[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var ae=function(r){return r!=null},Ve=function(r){return typeof r=="number"},Ja=function(r){return typeof r=="string"&&cs.includes(r)},xe=Array.isArray,rt=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var j=function(r,e){var t=0,n=[];if(xe(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},rf=function(r){return xe(r)?r:[r]};function Ar(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=j(t,e/t.length)),t.slice(0,e)+String(n))}var nf=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},Fe=function(r,e){var t=r%e;return t*e<0?t+e:t},ds=function(r,e){return{div:Math.floor(r/e),mod:Fe(r,e)}},Ze=function(r){return!ae(r)||r.length===0},me=function(r){return!Ze(r)},B=function(r,e){return me(r)&&r.indexOf(e)!==-1};var dr;(function(r){r.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],r.ONE_DAY=1e3*60*60*24,r.MAXYEAR=9999,r.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),r.PY_WEEKDAYS=[6,0,1,2,3,4,5],r.getYearDay=function(e){var t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((t.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/r.ONE_DAY)+1},r.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},r.isDate=function(e){return e instanceof Date},r.isValidDate=function(e){return r.isDate(e)&&!isNaN(e.getTime())},r.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},r.daysBetween=function(e,t){var n=e.getTime()-r.tzOffset(e),i=t.getTime()-r.tzOffset(t),s=n-i;return Math.round(s/r.ONE_DAY)},r.toOrdinal=function(e){return r.daysBetween(e,r.ORDINAL_BASE)},r.fromOrdinal=function(e){return new Date(r.ORDINAL_BASE.getTime()+e*r.ONE_DAY)},r.getMonthDays=function(e){var t=e.getUTCMonth();return t===1&&r.isLeapYear(e.getUTCFullYear())?29:r.MONTH_DAYS[t]},r.getWeekday=function(e){return r.PY_WEEKDAYS[e.getUTCDay()]},r.monthRange=function(e,t){var n=new Date(Date.UTC(e,t,1));return[r.getWeekday(n),r.getMonthDays(n)]},r.combine=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},r.clone=function(e){var t=new Date(e.getTime());return t},r.cloneDates=function(e){for(var t=[],n=0;n<e.length;n++)t.push(r.clone(e[n]));return t},r.sort=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},r.timeToUntilString=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[Ar(n.getUTCFullYear().toString(),4,"0"),Ar(n.getUTCMonth()+1,2,"0"),Ar(n.getUTCDate(),2,"0"),"T",Ar(n.getUTCHours(),2,"0"),Ar(n.getUTCMinutes(),2,"0"),Ar(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},r.untilStringToDate=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(dr||(dr={}));var N=dr;var x_=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),Lt=x_;var Pf=os(Mf(),1),{__extends:Jr,__assign:je,__rest:MA,__decorate:PA,__param:OA,__metadata:AA,__awaiter:kA,__generator:NA,__exportStar:CA,__createBinding:xA,__values:SA,__read:IA,__spread:UA,__spreadArrays:FA,__spreadArray:T,__await:qA,__asyncGenerator:WA,__asyncDelegator:LA,__asyncValues:YA,__makeTemplateObject:$A,__importStar:jA,__importDefault:BA,__classPrivateFieldGet:GA,__classPrivateFieldSet:HA,__classPrivateFieldIn:zA}=Pf.default;var S_=function(r){Jr(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(Lt),to=S_;var I_={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},kr=I_;var Of=function(r,e){return r.indexOf(e)!==-1},U_=function(r){return r.toString()},F_=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},q_=function(){function r(e,t,n,i){if(t===void 0&&(t=U_),n===void 0&&(n=kr),i===void 0&&(i=F_),this.text=[],this.language=n||kr,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,d){return c-d}),a.sort(function(c,d){return d-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(ae(this.origOptions.byweekday)){var o=xe(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,d){return c.weekday-d.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(Of(["dtstart","wkst","freq"],n))return!0;if(!Of(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[D.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=Ve(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),xe(e)||(e=[e]);var a=function(u,l,c){for(var d="",f=0;f<u.length;f++)f!==0&&(f===u.length-1?d+=" "+c+" ":d+=l+" "),d+=u[f];return d};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),wt=q_;var W_=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function Sn(r,e){e===void 0&&(e=kr);var t={},n=new W_(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var f=n.acceptNumber();if(f&&(t.interval=parseInt(f[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=D.DAILY,n.nextSymbol()&&(a(),d());break;case"weekday(s)":t.freq=D.WEEKLY,t.byweekday=[D.MO,D.TU,D.WE,D.TH,D.FR],n.nextSymbol(),d();break;case"week(s)":t.freq=D.WEEKLY,n.nextSymbol()&&(s(),d());break;case"hour(s)":t.freq=D.HOURLY,n.nextSymbol()&&(s(),d());break;case"minute(s)":t.freq=D.MINUTELY,n.nextSymbol()&&(s(),d());break;case"month(s)":t.freq=D.MONTHLY,n.nextSymbol()&&(s(),d());break;case"year(s)":t.freq=D.YEARLY,n.nextSymbol()&&(s(),d());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=D.WEEKLY;var p=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[D[p]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=u();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(D[y]),n.nextSymbol()}c(),d();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=D.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=o();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(m),n.nextSymbol()}s(),d();break;default:throw new Error("Unknown symbol")}}function s(){var f=n.accept("on"),p=n.accept("the");if(!!(f||p))do{var y=l(),m=u(),g=o();if(y)m?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(D[m].nth(y))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(y),n.accept("day(s)"));else if(m)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(D[m]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[D.MO,D.TU,D.WE,D.TH,D.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var k=n.acceptNumber();if(!k)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(k[0],10)];n.accept("comma");){if(k=n.acceptNumber(),!k)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(k[0],10))}}else if(g)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(g);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var f=n.accept("at");if(!!f)do{var p=n.acceptNumber();if(!p)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(p[0],10)];n.accept("comma");){if(p=n.acceptNumber(),!p)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(p[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var f=parseInt(n.value[1],10);if(f<-366||f>366)throw new Error("Nth out of range: "+f);return n.nextSymbol(),n.accept("last")?-f:f;default:return!1}}function c(){n.accept("on"),n.accept("the");var f=l();if(!!f)for(t.bymonthday=[f],n.nextSymbol();n.accept("comma");){if(f=l(),!f)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(f),n.nextSymbol()}}function d(){if(n.symbol==="until"){var f=Date.parse(n.text);if(!f)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(f)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var L;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(L||(L={}));function In(r){return r<L.HOURLY}var Af=function(r,e){return e===void 0&&(e=kr),new D(Sn(r,e)||void 0)},en=["count","until","interval","byweekday","bymonthday","bymonth"];wt.IMPLEMENTED=[];wt.IMPLEMENTED[L.HOURLY]=en;wt.IMPLEMENTED[L.MINUTELY]=en;wt.IMPLEMENTED[L.DAILY]=["byhour"].concat(en);wt.IMPLEMENTED[L.WEEKLY]=en;wt.IMPLEMENTED[L.MONTHLY]=en;wt.IMPLEMENTED[L.YEARLY]=["byweekno","byyearday"].concat(en);var kf=function(r,e,t,n){return new wt(r,e,t,n).toString()},Nf=wt.isFullyConvertible;var tn=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var Cf=function(r){Jr(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return dr.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=Fe(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=ds(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),Ze(i)||B(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=ds(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(Ze(i)||B(i,this.hour))&&(Ze(s)||B(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=ds(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(Ze(i)||B(i,this.hour))&&(Ze(s)||B(s,this.minute))&&(Ze(a)||B(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=dr.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>dr.MAXYEAR))return;t=dr.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case L.YEARLY:return this.addYears(s);case L.MONTHLY:return this.addMonths(s);case L.WEEKLY:return this.addWeekly(s,a);case L.DAILY:return this.addDaily(s);case L.HOURLY:return this.addHours(s,n,o);case L.MINUTELY:return this.addMinutes(s,n,o,u);case L.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(tn);function ro(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];B(If,s)||e.push(s),N.isDate(r[s])&&!N.isValidDate(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return je({},r)}function xf(r){var e=je(je({},Un),ro(r));if(ae(e.byeaster)&&(e.freq=D.YEARLY),!(ae(e.freq)&&D.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),ae(e.wkst)?Ve(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=D.MO.weekday,ae(e.bysetpos)){Ve(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||me(e.byweekno)||me(e.byyearday)||Boolean(e.bymonthday)||me(e.bymonthday)||ae(e.byweekday)||ae(e.byeaster)))switch(e.freq){case D.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case D.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case D.WEEKLY:e.byweekday=[N.getWeekday(e.dtstart)];break}if(ae(e.bymonth)&&!xe(e.bymonth)&&(e.bymonth=[e.bymonth]),ae(e.byyearday)&&!xe(e.byyearday)&&Ve(e.byyearday)&&(e.byyearday=[e.byyearday]),!ae(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(xe(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(ae(e.byweekno)&&!xe(e.byweekno)&&(e.byweekno=[e.byweekno]),!ae(e.byweekday))e.bynweekday=null;else if(Ve(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(Ja(e.byweekday))e.byweekday=[ge.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof ge)!e.byweekday.n||e.freq>D.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(Ve(u)){a.push(u);continue}else if(Ja(u)){a.push(ge.fromStr(u).weekday);continue}!u.n||e.freq>D.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=me(a)?a:null,e.bynweekday=me(o)?o:null}return ae(e.byhour)?Ve(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<D.HOURLY?[e.dtstart.getUTCHours()]:null,ae(e.byminute)?Ve(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<D.MINUTELY?[e.dtstart.getUTCMinutes()]:null,ae(e.bysecond)?Ve(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<D.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function Sf(r){var e=r.dtstart.getTime()%1e3;if(!In(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new tn(n,i,s,e))})})}),t}function qn(r){var e=r.split(`
`).map(L_).filter(function(t){return t!==null});return je(je({},e[0]),e[1])}function Fn(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=N.untilStringToDate(i),e}function L_(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return Uf(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return Uf(r);case"DTSTART":return Fn(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function Uf(r){var e=r.replace(/^RRULE:/i,""),t=Fn(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=L[o.toUpperCase()];break;case"WKST":t.wkst=nt[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=Y_(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=$_(o);break;case"DTSTART":case"TZID":var c=Fn(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=N.untilStringToDate(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function Y_(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(Ff)}return Ff(r)}function Ff(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function $_(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return nt[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=nt[s].weekday;return new ge(a,i)})}var Nr=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=N.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:t})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid)!==null&&e!==void 0?e:"UTC"})),s=i.getTime()-n.getTime();return new Date(this.date.getTime()-s)},r}();function Wn(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(Un),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!B(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!ae(o)||xe(o)&&!o.length)){switch(a){case"FREQ":u=D.FREQUENCIES[r.freq];break;case"WKST":Ve(o)?u=new ge(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=rf(o).map(function(p){return p instanceof ge?p:xe(p)?new ge(p[0],p[1]):new ge(p)}).toString();break;case"DTSTART":t=j_(o,r.tzid);break;case"UNTIL":u=N.timeToUntilString(o,!r.tzid);break;default:if(xe(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var d=e.map(function(p){var y=p[0],m=p[1];return"".concat(y,"=").concat(m.toString())}).join(";"),f="";return d!==""&&(f="RRULE:".concat(d)),[t,f].filter(function(p){return!!p}).join(`
`)}function j_(r,e){return r?"DTSTART"+new Nr(new Date(r),e).toString():""}function B_(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var qf=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?N.clone(t):N.cloneDates(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var d=0;d<i.length;d++){var f=i[d];if(!B_(t[f],c[f]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if(xe(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new Lt(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return xe(n)?N.cloneDates(n):n instanceof Date?N.clone(n):n},r}();var Wf=T(T(T(T(T(T(T(T(T(T(T(T(T([],j(1,31),!0),j(2,28),!0),j(3,31),!0),j(4,30),!0),j(5,31),!0),j(6,30),!0),j(7,31),!0),j(8,31),!0),j(9,30),!0),j(10,31),!0),j(11,30),!0),j(12,31),!0),j(1,7),!0),Lf=T(T(T(T(T(T(T(T(T(T(T(T(T([],j(1,31),!0),j(2,29),!0),j(3,31),!0),j(4,30),!0),j(5,31),!0),j(6,30),!0),j(7,31),!0),j(8,31),!0),j(9,30),!0),j(10,31),!0),j(11,30),!0),j(12,31),!0),j(1,7),!0),G_=rt(1,29),H_=rt(1,30),fr=rt(1,31),qe=rt(1,32),Yf=T(T(T(T(T(T(T(T(T(T(T(T(T([],qe,!0),H_,!0),qe,!0),fr,!0),qe,!0),fr,!0),qe,!0),qe,!0),fr,!0),qe,!0),fr,!0),qe,!0),qe.slice(0,7),!0),$f=T(T(T(T(T(T(T(T(T(T(T(T(T([],qe,!0),G_,!0),qe,!0),fr,!0),qe,!0),fr,!0),qe,!0),qe,!0),fr,!0),qe,!0),fr,!0),qe,!0),qe.slice(0,7),!0),z_=rt(-28,0),K_=rt(-29,0),pr=rt(-30,0),We=rt(-31,0),jf=T(T(T(T(T(T(T(T(T(T(T(T(T([],We,!0),K_,!0),We,!0),pr,!0),We,!0),pr,!0),We,!0),We,!0),pr,!0),We,!0),pr,!0),We,!0),We.slice(0,7),!0),Bf=T(T(T(T(T(T(T(T(T(T(T(T(T([],We,!0),z_,!0),We,!0),pr,!0),We,!0),pr,!0),We,!0),We,!0),pr,!0),We,!0),pr,!0),We,!0),We.slice(0,7),!0),Gf=[0,31,60,91,121,152,182,213,244,274,305,335,366],Hf=[0,31,59,90,120,151,181,212,243,273,304,334,365],no=function(){for(var r=[],e=0;e<55;e++)r=r.concat(rt(7));return r}();function zf(r,e){var t=new Date(Date.UTC(r,0,1)),n=N.isLeapYear(r)?366:365,i=N.isLeapYear(r+1)?366:365,s=N.toOrdinal(t),a=N.getWeekday(t),o=je(je({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},V_(r)),{wnomask:null});if(Ze(e.byweekno))return o;o.wnomask=j(0,n+7);var u,l,c=u=Fe(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+Fe(a-e.wkst,7)):l=n-c;for(var d=Math.floor(l/7),f=Fe(l,7),p=Math.floor(d+f/4),y=0;y<e.byweekno.length;y++){var m=e.byweekno[y];if(m<0&&(m+=p+1),m>0&&m<=p){var g=void 0;m>1?(g=c+(m-1)*7,c!==u&&(g-=7-u)):g=c;for(var k=0;k<7&&(o.wnomask[g]=1,g++,o.wdaymask[g]!==e.wkst);k++);}}if(B(e.byweekno,1)){var g=c+p*7;if(c!==u&&(g-=7-u),g<n)for(var y=0;y<7&&(o.wnomask[g]=1,g+=1,o.wdaymask[g]!==e.wkst);y++);}if(c){var x=void 0;if(B(e.byweekno,-1))x=-1;else{var C=N.getWeekday(new Date(Date.UTC(r-1,0,1))),H=Fe(7-C.valueOf()+e.wkst,7),re=N.isLeapYear(r-1)?366:365,de=void 0;H>=4?(H=0,de=re+Fe(C-e.wkst,7)):de=n-c,x=Math.floor(52+Fe(de,7)/4)}if(B(e.byweekno,x))for(var g=0;g<c;g++)o.wnomask[g]=1}return o}function V_(r){var e=N.isLeapYear(r)?366:365,t=new Date(Date.UTC(r,0,1)),n=N.getWeekday(t);return e===365?{mmask:Wf,mdaymask:$f,nmdaymask:Bf,wdaymask:no.slice(n),mrange:Hf}:{mmask:Lf,mdaymask:Yf,nmdaymask:jf,wdaymask:no.slice(n),mrange:Gf}}function Kf(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===D.YEARLY)if(Ze(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===D.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(Ze(o))return a;a.nwdaymask=j(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],d=l[1]-1,f=0;f<s.bynweekday.length;f++){var p=void 0,y=s.bynweekday[f],m=y[0],g=y[1];g<0?(p=d+(g+1)*7,p-=Fe(i[p]-m,7)):(p=c+(g-1)*7,p+=Fe(7-i[p]+m,7)),c<=p&&p<=d&&(a.nwdaymask[p]=1)}return a}function Vf(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),d=i%4,f=Math.floor(32+2*a+2*c-l-d)%7,p=Math.floor((t+11*l+22*f)/451),y=Math.floor((l+f-7*p+114)/31),m=(l+f-7*p+114)%31+1,g=Date.UTC(r,y-1,m+e),k=Date.UTC(r,0,1);return[Math.ceil((g-k)/(1e3*60*60*24))]}var Z_=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=zf(e,n)),me(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=Kf(e,t,s,a,o,n)}ae(n.byeaster)&&(this.eastermask=Vf(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[rt(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=j(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=j(null,this.yearlen+7),s=N.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=j(null,this.yearlen),s=N.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),N.sort(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new tn(e,t,a,i)});return N.sort(s),s},r.prototype.stimeset=function(e,t,n,i){return[new tn(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case L.YEARLY:return this.ydayset.bind(this);case L.MONTHLY:return this.mdayset.bind(this);case L.WEEKLY:return this.wdayset.bind(this);case L.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case L.HOURLY:return this.htimeset.bind(this);case L.MINUTELY:return this.mtimeset.bind(this);case L.SECONDLY:return this.stimeset.bind(this)}},r}(),Zf=Z_;function Xf(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=Fe(c,e.length)):(u=Math.floor((c-1)/e.length),l=Fe(c-1,e.length));for(var d=[],f=t;f<n;f++){var p=s[f];!ae(p)||d.push(p)}var y=void 0;u<0?y=d.slice(u)[0]:y=d[u];var m=e[l],g=N.fromOrdinal(i.yearordinal+y),k=N.combine(g,m);B(a,k)||a.push(k)}return N.sort(a),a}function ms(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return Yt(r);var u=Cf.fromDate(t),l=new Zf(e);l.rebuild(u.year,u.month);for(var c=J_(l,u,e);;){var d=l.getdayset(n)(u.year,u.month,u.day),f=d[0],p=d[1],y=d[2],m=Q_(f,p,y,l,e);if(me(a))for(var g=Xf(a,c,p,y,l,f),k=0;k<g.length;k++){var x=g[k];if(s&&x>s)return Yt(r);if(x>=t){var C=Qf(x,e);if(!r.accept(C)||o&&(--o,!o))return Yt(r)}}else for(var k=p;k<y;k++){var H=f[k];if(!!ae(H))for(var re=N.fromOrdinal(l.yearordinal+H),de=0;de<c.length;de++){var J=c[de],x=N.combine(re,J);if(s&&x>s)return Yt(r);if(x>=t){var C=Qf(x,e);if(!r.accept(C)||o&&(--o,!o))return Yt(r)}}}if(e.interval===0||(u.add(e,m),u.year>N.MAXYEAR))return Yt(r);In(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function X_(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return me(n)&&!B(n,r.mmask[e])||me(i)&&!r.wnomask[e]||me(s)&&!B(s,r.wdaymask[e])||me(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!B(r.eastermask,e)||(me(o)||me(u))&&!B(o,r.mdaymask[e])&&!B(u,r.nmdaymask[e])||me(l)&&(e<r.yearlen&&!B(l,e+1)&&!B(l,-r.yearlen+e)||e>=r.yearlen&&!B(l,e+1-r.yearlen)&&!B(l,-r.nextyearlen+e-r.yearlen))}function Qf(r,e){return new Nr(r,e.tzid).rezonedDate()}function Yt(r){return r.getValue()}function Q_(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=X_(n,o,i),s&&(r[o]=null)}return s}function J_(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return In(n)?Sf(t):n>=D.HOURLY&&me(i)&&!B(i,e.hour)||n>=D.MINUTELY&&me(s)&&!B(s,e.minute)||n>=D.SECONDLY&&me(a)&&!B(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var nt={MO:new ge(0),TU:new ge(1),WE:new ge(2),TH:new ge(3),FR:new ge(4),SA:new ge(5),SU:new ge(6)},Un={freq:L.YEARLY,dtstart:null,interval:1,wkst:nt.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},If=Object.keys(Un),D=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new qf,this.origOptions=ro(e);var n=xf(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return Sn(e,t)},r.fromText=function(e,t){return Af(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return ms(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new to("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new Lt("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!N.isValidDate(e)||!N.isValidDate(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new to("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new Lt("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!N.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Lt("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!N.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Lt("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return Wn(this.origOptions)},r.prototype.toText=function(e,t,n){return kf(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return Nf(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=L.YEARLY,r.MONTHLY=L.MONTHLY,r.WEEKLY=L.WEEKLY,r.DAILY=L.DAILY,r.HOURLY=L.HOURLY,r.MINUTELY=L.MINUTELY,r.SECONDLY=L.SECONDLY,r.MO=nt.MO,r.TU=nt.TU,r.WE=nt.WE,r.TH=nt.TH,r.FR=nt.FR,r.SA=nt.SA,r.SU=nt.SU,r.parseString=qn,r.optionsToString=Wn,r}();function Jf(r,e,t,n,i,s){var a={},o=r.accept;function u(f,p){t.forEach(function(y){y.between(f,p,!0).forEach(function(m){a[Number(m)]=!0})})}i.forEach(function(f){var p=new Nr(f,s).rezonedDate();a[Number(p)]=!0}),r.accept=function(f){var p=Number(f);return isNaN(p)?o.call(this,f):!a[p]&&(u(new Date(p-1),new Date(p+1)),!a[p])?(a[p]=!0,o.call(this,f)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(f){var p=Number(f);return a[p]?!0:(a[p]=!0,o.call(this,f))});for(var l=0;l<n.length;l++){var c=new Nr(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(f){ms(r,f.options)});var d=r._result;switch(N.sort(d),r.method){case"all":case"between":return d;case"before":return d.length&&d[d.length-1]||null;case"after":default:return d.length&&d[0]||null}}var ep={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function eT(r,e){var t=[],n=[],i=[],s=[],a=Fn(r),o=a.dtstart,u=a.tzid,l=sT(r,e.unfold);return l.forEach(function(c){var d;if(!!c){var f=iT(c),p=f.name,y=f.parms,m=f.value;switch(p.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: ".concat(y.join(",")));t.push(qn(c));break;case"RDATE":var g=(d=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&d!==void 0?d:[],k=g[1];k&&!u&&(u=k),n=n.concat(tp(m,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: ".concat(y.join(",")));i.push(qn(m));break;case"EXDATE":s=s.concat(tp(m,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+p)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function tT(r,e){var t=eT(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new so(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(f){c.rrule(new D(io(f,o,u),l))}),i.forEach(function(f){c.rdate(f)}),s.forEach(function(f){c.exrule(new D(io(f,o,u),l))}),a.forEach(function(f){c.exdate(f)}),e.compatible&&e.dtstart&&c.rdate(o),c}var d=n[0]||{};return new D(io(d,d.dtstart||e.dtstart||o,d.tzid||e.tzid||u),l)}function ys(r,e){return e===void 0&&(e={}),tT(r,rT(e))}function io(r,e,t){return je(je({},r),{dtstart:e,tzid:t})}function rT(r){var e=[],t=Object.keys(r),n=Object.keys(ep);if(t.forEach(function(i){B(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return je(je({},ep),r)}function nT(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=nf(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function iT(r){var e=nT(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function sT(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function aT(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function tp(r,e){return aT(e),r.split(",").map(function(t){return N.untilStringToDate(t)})}function rp(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var so=function(r){Jr(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=rp.apply(n,["dtstart"]),n.tzid=rp.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return Jf(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){np(t,this._rrule)},e.prototype.exrule=function(t){np(t,this._exrule)},e.prototype.rdate=function(t){ip(t,this._rdate)},e.prototype.exdate=function(t){ip(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return ys(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return ys(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(Wn({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(sp("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(sp("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(D);function np(r,e){if(!(r instanceof D))throw new TypeError(String(r)+" is not RRule instance");B(e.map(String),String(r))||e.push(r)}function ip(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");B(e.map(Number),Number(r))||(e.push(r),N.sort(e))}function sp(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return N.timeToUntilString(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}var G=class{static by(e,t){let n=[G.compareByUrgency,G.compareByStatus,G.compareByDueDate,G.compareByPriority,G.compareByPath],i=[];for(let{property:s,reverse:a,propertyInstance:o}of e.sorting){let u=G.comparators[s];i.push(a?G.makeReversedComparator(u):u),s==="tag"&&(G.tagPropertyInstance=o)}return t.sort(G.makeCompositeComparator([...i,...n]))}static makeReversedComparator(e){return(t,n)=>e(t,n)*-1}static makeCompositeComparator(e){return(t,n)=>{for(let i of e){let s=i(t,n);if(s!==0)return s}return 0}}static compareByUrgency(e,t){return t.urgency-e.urgency}static compareByStatus(e,t){return e.status<t.status?1:e.status>t.status?-1:0}static compareByPriority(e,t){return e.priority.localeCompare(t.priority)}static compareByStartDate(e,t){return G.compareByDate(e.startDate,t.startDate)}static compareByScheduledDate(e,t){return G.compareByDate(e.scheduledDate,t.scheduledDate)}static compareByDueDate(e,t){return G.compareByDate(e.dueDate,t.dueDate)}static compareByDoneDate(e,t){return G.compareByDate(e.doneDate,t.doneDate)}static compareByTag(e,t){if(e.tags.length===0&&t.tags.length===0)return 0;if(e.tags.length===0)return 1;if(t.tags.length===0)return-1;let n=G.tagPropertyInstance-1;return e.tags.length<G.tagPropertyInstance&&t.tags.length>=G.tagPropertyInstance?1:t.tags.length<G.tagPropertyInstance&&e.tags.length>=G.tagPropertyInstance?-1:e.tags.length<G.tagPropertyInstance&&t.tags.length<G.tagPropertyInstance?0:e.tags[n]<t.tags[n]?-1:e.tags[n]>t.tags[n]?1:0}static compareByDate(e,t){return e!==null&&t===null?-1:e===null&&t!==null?1:e!==null&&t!==null?e.isAfter(t)?1:e.isBefore(t)?-1:0:0}static compareByPath(e,t){return e.path<t.path?-1:e.path>t.path?1:0}static compareByDescription(e,t){return G.cleanDescription(e.description).localeCompare(G.cleanDescription(t.description))}static cleanDescription(e){let t=ie().globalFilter;e=e.replace(t,"").trim();let n=/^\[\[?([^\]]*)\]/,i=e.match(n);if(i!==null){let l=i[1];e=l.substring(l.indexOf("|")+1)+e.replace(n,"")}let s=/^\*\*?([^*]*)\*/,a=e.match(s);a!==null&&(e=a[1]+e.replace(n,""));let o=/^==?([^=]*)==/,u=e.match(o);return u!==null&&(e=u[1]+e.replace(o,"")),e}},Ge=G;Ge.tagPropertyInstance=1,Ge.comparators={urgency:G.compareByUrgency,description:G.compareByDescription,priority:G.compareByPriority,start:G.compareByStartDate,scheduled:G.compareByScheduledDate,due:G.compareByDueDate,done:G.compareByDoneDate,path:G.compareByPath,status:G.compareByStatus,tag:G.compareByTag};var ht=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=D.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new D(u);return new ht({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(){var t;let e;if(this.baseOnToday){let n=window.moment();e=new D(qt($e({},this.rrule.origOptions),{dtstart:n.startOf("day").utc(!0).toDate()})).after(n.endOf("day").utc(!0).toDate())}else{let n=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day").utc(!0);e=this.rrule.after(n.toDate())}if(e!==null){let i=window.moment.utc(e).local(!0).startOf("day"),s=null,a=null,o=null;if(this.referenceDate){if(this.startDate){let u=window.moment.duration(this.startDate.diff(this.referenceDate));s=window.moment(i),s.add(Math.round(u.asDays()),"days")}if(this.scheduledDate){let u=window.moment.duration(this.scheduledDate.diff(this.referenceDate));a=window.moment(i),a.add(Math.round(u.asDays()),"days")}if(this.dueDate){let u=window.moment.duration(this.dueDate.diff(this.referenceDate));o=window.moment(i),o.add(Math.round(u.asDays()),"days")}}return{startDate:s,scheduledDate:a,dueDate:o}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||Ge.compareByDate(this.startDate,e.startDate)!==0||Ge.compareByDate(this.scheduledDate,e.scheduledDate)!==0||Ge.compareByDate(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}};var jt=class{static calculate(e){let t=0;if(e.dueDate!==null){let n=Math.round(window.moment().diff(e.dueDate)/jt.milliSecondsPerDay),i;n>=7?i=1:n>=-14?i=(n+14)*.8/21+.2:i=.2,t+=i*jt.dueCoefficient}switch(e.scheduledDate!==null&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*jt.scheduledCoefficient),e.startDate!==null&&window.moment().isBefore(e.startDate)&&(t+=1*jt.startedCoefficient),e.priority){case"1":t+=1*jt.priorityCoefficient;break;case"2":t+=.65*jt.priorityCoefficient;break;case"3":t+=.325*jt.priorityCoefficient;break}return t}},$t=jt;$t.dueCoefficient=12,$t.scheduledCoefficient=5,$t.startedCoefficient=-3,$t.priorityCoefficient=6,$t.milliSecondsPerDay=1e3*60*60*24;var Re={High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",None:""},Dt="\u{1F501}",Mt="\u{1F6EB}",Pt="\u23F3",Ot="\u{1F4C5}",ao="\u2705",Xe=class{},w=Xe;w.dateFormat="YYYY-MM-DD",w.indentationRegex=/^([\s\t>]*)/,w.listMarkerRegex=/[-*]/,w.checkboxRegex=/\[(.)\]/u,w.afterCheckboxRegex=/ *(.*)/u,w.taskRegex=new RegExp(Xe.indentationRegex.source+Xe.listMarkerRegex.source+" +"+Xe.checkboxRegex.source+Xe.afterCheckboxRegex.source,"u"),w.nonTaskRegex=new RegExp(Xe.indentationRegex.source+Xe.listMarkerRegex.source+"? *("+Xe.checkboxRegex.source+")?"+Xe.afterCheckboxRegex.source,"u"),w.listItemRegex=new RegExp(Xe.indentationRegex.source+"("+Xe.listMarkerRegex.source+")"),w.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,w.priorityRegex=/([⏫🔼🔽])$/u,w.startDateRegex=/🛫 *(\d{4}-\d{2}-\d{2})$/u,w.scheduledDateRegex=/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,w.dueDateRegex=/[📅📆🗓] *(\d{4}-\d{2}-\d{2})$/u,w.doneDateRegex=/✅ *(\d{4}-\d{2}-\d{2})$/u,w.recurrenceRegex=/🔁 ?([a-zA-Z0-9, !]+)$/iu,w.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]*/g,w.hashTagsFromEnd=new RegExp(Xe.hashTags.source+"$");var oe=class{constructor({status:e,description:t,path:n,indentation:i,sectionStart:s,sectionIndex:a,originalStatusCharacter:o,precedingHeader:u,priority:l,startDate:c,scheduledDate:d,dueDate:f,doneDate:p,recurrence:y,blockLink:m,tags:g}){this._urgency=null;this.status=e,this.description=t,this.path=n,this.indentation=i,this.sectionStart=s,this.sectionIndex=a,this.originalStatusCharacter=o,this.precedingHeader=u,this.tags=g,this.priority=l,this.startDate=c,this.scheduledDate=d,this.dueDate=f,this.doneDate=p,this.recurrence=y,this.blockLink=m}static fromLine({line:e,path:t,sectionStart:n,sectionIndex:i,precedingHeader:s}){let a=e.match(w.taskRegex);if(a===null)return null;let o=a[3].trim(),{globalFilter:u}=ie();if(!o.includes(u))return null;let l=o,c=a[1],d=a[2],f;switch(d){case" ":f="Todo";break;default:f="Done"}let p=l.match(w.blockLinkRegex),y=p!==null?p[0]:"";y!==""&&(l=l.replace(w.blockLinkRegex,"").trim());let m,g="3",k=null,x=null,C=null,H=null,re="",de=null,J=[],M="",ye=20,ce=0;do{m=!1;let v=l.match(w.priorityRegex);if(v!==null){switch(v[1]){case Re.Low:g="4";break;case Re.Medium:g="2";break;case Re.High:g="1";break}l=l.replace(w.priorityRegex,"").trim(),m=!0}let _=l.match(w.doneDateRegex);_!==null&&(H=window.moment(_[1],w.dateFormat),l=l.replace(w.doneDateRegex,"").trim(),m=!0);let O=l.match(w.dueDateRegex);O!==null&&(C=window.moment(O[1],w.dateFormat),l=l.replace(w.dueDateRegex,"").trim(),m=!0);let E=l.match(w.scheduledDateRegex);E!==null&&(x=window.moment(E[1],w.dateFormat),l=l.replace(w.scheduledDateRegex,"").trim(),m=!0);let S=l.match(w.startDateRegex);S!==null&&(k=window.moment(S[1],w.dateFormat),l=l.replace(w.startDateRegex,"").trim(),m=!0);let A=l.match(w.recurrenceRegex);A!==null&&(re=A[1].trim(),l=l.replace(w.recurrenceRegex,"").trim(),m=!0);let q=l.match(w.hashTagsFromEnd);if(q!=null){l=l.replace(w.hashTagsFromEnd,"").trim(),m=!0;let ee=q[0].trim();M=M.length>0?[ee,M].join(" "):ee}ce++}while(m&&ce<=ye);re.length>0&&(de=ht.fromText({recurrenceRuleText:re,startDate:k,scheduledDate:x,dueDate:C})),M.length>0&&(l+=" "+M);let P=l.match(w.hashTags);return P!==null&&(J=P.filter(v=>v!==u).map(v=>v.trim())),new oe({status:f,description:l,path:t,indentation:c,sectionStart:n,sectionIndex:i,originalStatusCharacter:d,precedingHeader:s,priority:g,startDate:k,scheduledDate:x,dueDate:C,doneDate:H,recurrence:de,blockLink:y,tags:J})}toLi(s){return ne(this,arguments,function*({parentUlElement:e,listIndex:t,layoutOptions:n,isFilenameUnique:i}){let a=e.createEl("li");a.addClasses(["task-list-item","plugin-tasks-list-item"]);let o=this.toString(n),{globalFilter:u,removeGlobalFilter:l}=ie();l&&(o=o.replace(u,"").trim());let c=a.createSpan();c.addClass("tasks-list-text"),yield ap.MarkdownRenderer.renderMarkdown(o,c,this.path,null);let d=c.querySelector("blockquote"),f=d!=null?d:c,p=f.querySelector("p");if(p!==null){for(;p.firstChild;)f.insertBefore(p.firstChild,p);p.remove()}c.findAll("p").forEach(m=>{m.hasChildNodes()||m.remove()}),c.findAll(".footnotes").forEach(m=>{m.remove()});let y=a.createEl("input");return y.addClass("task-list-item-checkbox"),y.type="checkbox",this.status!=="Todo"&&(y.checked=!0,a.addClass("is-checked")),y.onClickEvent(m=>{m.preventDefault(),m.stopPropagation(),y.disabled=!0;let g=this.toggle();ls({originalTask:this,newTasks:g})}),a.prepend(y),a.setAttr("data-task",this.originalStatusCharacter.trim()),a.setAttr("data-line",t),y.setAttr("data-line",t),n!=null&&n.shortMode&&this.addTooltip({element:c,isFilenameUnique:i}),a})}toString(e){var i;e=e!=null?e:new Xr;let t=this.description;if(!e.hidePriority){let s="";this.priority==="1"?s=" "+Re.High:this.priority==="2"?s=" "+Re.Medium:this.priority==="4"&&(s=" "+Re.Low),t+=s}return!e.hideRecurrenceRule&&this.recurrence&&(t+=e.shortMode?" "+Dt:` ${Dt} ${this.recurrence.toText()}`),!e.hideStartDate&&this.startDate&&(t+=e.shortMode?" "+Mt:` ${Mt} ${this.startDate.format(w.dateFormat)}`),!e.hideScheduledDate&&this.scheduledDate&&(t+=e.shortMode?" "+Pt:` ${Pt} ${this.scheduledDate.format(w.dateFormat)}`),!e.hideDueDate&&this.dueDate&&(t+=e.shortMode?" "+Ot:` ${Ot} ${this.dueDate.format(w.dateFormat)}`),!e.hideDoneDate&&this.doneDate&&(t+=e.shortMode?" "+ao:` ${ao} ${this.doneDate.format(w.dateFormat)}`),t+=(i=this.blockLink)!=null?i:"",t}toFileLineString(){return`${this.indentation}- [${this.originalStatusCharacter}] ${this.toString()}`}toggle(){let e=this.status==="Todo"?"Done":"Todo",t=null,n=null;if(e!=="Todo"){let{setDoneDate:a}=ie();a&&(t=window.moment()),this.recurrence!==null&&(n=this.recurrence.next())}let i=new oe(qt($e({},this),{status:e,doneDate:t,originalStatusCharacter:e==="Done"?"x":" "})),s=[];if(n!==null){let a=new oe(qt($e($e({},this),n),{blockLink:""}));s.push(a)}return s.push(i),s}get urgency(){return this._urgency===null&&(this._urgency=$t.calculate(this)),this._urgency}get filename(){let e=this.path.match(/([^/]+)\.md$/);return e!==null?e[1]:null}getLinkText({isFilenameUnique:e}){let t;return e?t=this.filename:t="/"+this.path,t===null?null:(this.precedingHeader!==null&&this.precedingHeader!==t&&(t=t+" > "+this.precedingHeader),t)}static tasksListsIdentical(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.identicalTo(t[i]))}identicalTo(e){let t=["status","description","path","indentation","sectionStart","sectionIndex","originalStatusCharacter","precedingHeader","priority","blockLink"];for(let s of t)if(this[s]!==e[s])return!1;if(this.tags.length!==e.tags.length||!this.tags.every(function(s,a){return s===e.tags[a]}))return!1;t=["startDate","scheduledDate","dueDate","doneDate"];for(let s of t){let a=this[s],o=e[s];if(Ge.compareByDate(a,o)!==0)return!1}let n=this.recurrence,i=e.recurrence;return n===null&&i!==null||n!==null&&i===null?!1:!(n&&i&&!n.identicalTo(i))}addTooltip({element:e,isFilenameUnique:t}){e.addEventListener("mouseenter",()=>{let n=e.createDiv();n.addClasses(["tooltip","mod-right"]),this.recurrence&&n.createDiv().setText(`${Dt} ${this.recurrence.toText()}`),this.startDate&&n.createDiv().setText(oe.toTooltipDate({signifier:Mt,date:this.startDate})),this.scheduledDate&&n.createDiv().setText(oe.toTooltipDate({signifier:Pt,date:this.scheduledDate})),this.dueDate&&n.createDiv().setText(oe.toTooltipDate({signifier:Ot,date:this.dueDate})),this.doneDate&&n.createDiv().setText(oe.toTooltipDate({signifier:ao,date:this.doneDate}));let i=this.getLinkText({isFilenameUnique:t});i&&n.createDiv().setText(`\u{1F517} ${i}`),e.addEventListener("mouseleave",()=>{n.remove()})})}static toTooltipDate({signifier:e,date:t}){return`${e} ${t.format(w.dateFormat)} (${t.from(window.moment().startOf("day"))})`}escapeRegExp(e){return e.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}getDescriptionWithoutGlobalFilter(){let{globalFilter:e}=ie(),t=this.description;if(e.length===0)return t;let n=RegExp("(^|\\s)"+this.escapeRegExp(e)+"($|\\s)","ug");return this.description.search(n)>-1&&(t=t.replace(n,"$1$2").replace("  "," ").trim()),t}};var hr=class{constructor({metadataCache:e,vault:t,events:n}){this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new us,this.state="Cold",this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){let e=this.metadataCache.on("resolved",()=>ne(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){let e=this.vault.on("create",i=>{i instanceof gs.TFile&&this.tasksMutex.runExclusive(()=>{this.indexFile(i)})});this.vaultEventReferences.push(e);let t=this.vault.on("delete",i=>{i instanceof gs.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(s=>s.path!==i.path),this.notifySubscribers()})});this.vaultEventReferences.push(t);let n=this.vault.on("rename",(i,s)=>{i instanceof gs.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.map(a=>a.path===s?new oe(qt($e({},a),{path:i.path})):a),this.notifySubscribers()})});this.vaultEventReferences.push(n)}subscribeToEvents(){let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.tasksMutex.runExclusive(()=>ne(this,null,function*(){this.state="Initializing",yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.notifySubscribers()}))}indexFile(e){return ne(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=hr.getTasksFromFileContent(a,i,t,e)}oe.tasksListsIdentical(n,s)||(this.getState()=="Warm"&&console.debug(`At least one task, its line number or its heading has changed in ${e.path}: triggering a refresh of all active Tasks blocks in Live Preview and Reading mode views.`),this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.notifySubscribers())})}static getTasksFromFileContent(e,t,n,i){let s=[],a=e.split(`
`),o=null,u=0;for(let l of t)if(l.task!==void 0){if((o===null||o.position.end.line<l.position.start.line)&&(o=hr.getSection(l.position.start.line,n.sections),u=0),o===null)continue;let c=a[l.position.start.line],d=oe.fromLine({line:c,path:i.path,sectionStart:o.position.start.line,sectionIndex:u,precedingHeader:hr.getPrecedingHeader(l.position.start.line,n.headings)});d!==null&&(u++,s.push(d))}return s}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var ad=require("obsidian");var Xg=require("obsidian");function rn(){}function lo(r){return r()}function up(){return Object.create(null)}function xr(r){r.forEach(lo)}function cp(r){return typeof r=="function"}function dp(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function fp(r){return Object.keys(r).length===0}var pp=!1;function oT(){pp=!0}function uT(){pp=!1}function b(r,e){r.appendChild(e)}function co(r,e,t){r.insertBefore(e,t||null)}function Es(r){r.parentNode.removeChild(r)}function I(r){return document.createElement(r)}function lT(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Bt(r){return document.createTextNode(r)}function Z(){return Bt(" ")}function mr(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function hp(r){return function(e){return e.preventDefault(),r.call(this,e)}}function Y(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function cT(r){return Array.from(r.childNodes)}function mp(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function mt(r,e){r.value=e==null?"":e}function fo(r,e){for(let t=0;t<r.options.length;t+=1){let n=r.options[t];if(n.__value===e){n.selected=!0;return}}r.selectedIndex=-1}function yp(r){let e=r.querySelector(":checked")||r.options[0];return e&&e.__value}var Cr=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=lT(t.nodeName):this.e=I(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)co(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Es)}};var $n;function Yn(r){$n=r}function dT(){if(!$n)throw new Error("Function called outside component initialization");return $n}function po(r){dT().$$.on_mount.push(r)}var Ln=[];var bs=[],Ts=[],lp=[],fT=Promise.resolve(),uo=!1;function pT(){uo||(uo=!0,fT.then(gp))}function jn(r){Ts.push(r)}var oo=new Set,_s=0;function gp(){let r=$n;do{for(;_s<Ln.length;){let e=Ln[_s];_s++,Yn(e),hT(e.$$)}for(Yn(null),Ln.length=0,_s=0;bs.length;)bs.pop()();for(let e=0;e<Ts.length;e+=1){let t=Ts[e];oo.has(t)||(oo.add(t),t())}Ts.length=0}while(Ln.length);for(;lp.length;)lp.pop()();uo=!1,oo.clear(),Yn(r)}function hT(r){if(r.fragment!==null){r.update(),xr(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(jn)}}var mT=new Set;function yT(r,e){r&&r.i&&(mT.delete(r),r.i(e))}var DC=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function gT(r,e,t,n){let{fragment:i,on_mount:s,on_destroy:a,after_update:o}=r.$$;i&&i.m(e,t),n||jn(()=>{let u=s.map(lo).filter(cp);a?a.push(...u):xr(u),r.$$.on_mount=[]}),o.forEach(jn)}function _p(r,e){let t=r.$$;t.fragment!==null&&(xr(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function _T(r,e){r.$$.dirty[0]===-1&&(Ln.push(r),pT(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function Tp(r,e,t,n,i,s,a,o=[-1]){let u=$n;Yn(r);let l=r.$$={fragment:null,ctx:null,props:s,update:rn,not_equal:i,bound:up(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:up(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(d,f,...p)=>{let y=p.length?p[0]:f;return l.ctx&&i(l.ctx[d],l.ctx[d]=y)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](y),c&&_T(r,d)),f}):[],l.update(),c=!0,xr(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){oT();let d=cT(e.target);l.fragment&&l.fragment.l(d),d.forEach(Es)}else l.fragment&&l.fragment.c();e.intro&&yT(r.$$.fragment),gT(r,e.target,e.anchor,e.customElement),uT(),gp()}Yn(u)}var TT;typeof HTMLElement=="function"&&(TT=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(lo).filter(cp);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){xr(this.$$.on_disconnect)}$destroy(){_p(this,1),this.$destroy=rn}$on(r,e){let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!fp(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var vs=class{$destroy(){_p(this,1),this.$destroy=rn}$on(e,t){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!fp(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var Bi=os(Ee());var FO={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function bn(r){for(let[e,t]of Object.entries(FO))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}function qO(r){let e,t,n,i,s,a,o,u,l,c,d,f,p,y,m,g,k,x,C,H,re,de,J,M,ye,ce,P,v,_,O,E,S,A,q,ee,ue,se,ft,Le,or,ur,pt,Ne,Ce,lr,Pr,Ut,Pd,kn,Od,Ad,Ji,kd,cr,es,Nd,Ft,Cd,Nn,xd,Sd,ts,Id,Ud,Fd,Vr,Zr,qd,Or,rs,Wd,Ha,ns=r[0].status+"",za,Ld,is,Yd,ss,$d,jd,Bd,Ka,Gd,as,Va,Hd;return{c(){e=I("div"),t=I("form"),n=I("div"),i=I("label"),i.textContent="Description",s=Z(),a=I("input"),o=Z(),u=I("hr"),l=Z(),c=I("div"),d=I("label"),d.textContent="Priority",f=Z(),p=I("select"),y=I("option"),y.textContent="None",m=I("option"),m.textContent=`${Re.High} High`,g=I("option"),g.textContent=`${Re.Medium} Medium`,k=I("option"),k.textContent=`${Re.Low} Low`,x=Z(),C=I("hr"),H=Z(),re=I("div"),de=I("label"),de.textContent="Recurrence",J=Z(),M=I("input"),ye=Z(),ce=I("code"),P=Bt(Dt),v=Z(),_=new Cr(!1),O=Z(),E=I("hr"),S=Z(),A=I("div"),q=I("div"),ee=I("label"),ee.textContent="Due",ue=Z(),se=I("input"),ft=Z(),Le=I("code"),or=Bt(Ot),ur=Z(),pt=new Cr(!1),Ne=Z(),Ce=I("div"),lr=I("label"),lr.textContent="Scheduled",Pr=Z(),Ut=I("input"),Pd=Z(),kn=I("code"),Od=Bt(Pt),Ad=Z(),Ji=new Cr(!1),kd=Z(),cr=I("div"),es=I("label"),es.textContent="Start",Nd=Z(),Ft=I("input"),Cd=Z(),Nn=I("code"),xd=Bt(Mt),Sd=Z(),ts=new Cr(!1),Id=Z(),Ud=I("hr"),Fd=Z(),Vr=I("div"),Zr=I("div"),qd=Bt(`Status:
                `),Or=I("input"),Wd=Z(),Ha=I("code"),za=Bt(ns),Ld=Z(),is=I("div"),Yd=Bt(`Done on:
                `),ss=I("code"),$d=Z(),jd=I("hr"),Bd=Z(),Ka=I("div"),Gd=Z(),as=I("div"),as.innerHTML='<button type="submit" class="mod-cta">Apply</button>',Y(i,"for","description"),Y(a,"id","description"),Y(a,"type","text"),Y(a,"class","tasks-modal-description"),Y(a,"placeholder","Take out the trash"),Y(n,"class","tasks-modal-section"),Y(d,"for","priority"),y.__value="none",y.value=y.__value,m.__value="high",m.value=m.__value,g.__value="medium",g.value=g.__value,k.__value="low",k.value=k.__value,Y(p,"id","priority"),Y(p,"class","dropdown"),r[0].priority===void 0&&jn(()=>r[14].call(p)),Y(c,"class","tasks-modal-section"),Y(de,"for","recurrence"),Y(M,"id","description"),Y(M,"type","text"),Y(M,"placeholder","Try 'every 2 weeks on Thursday'."),_.a=null,Y(re,"class","tasks-modal-section"),Y(ee,"for","due"),Y(se,"id","due"),Y(se,"type","text"),Y(se,"placeholder",nd),pt.a=null,Y(q,"class","tasks-modal-date"),Y(lr,"for","scheduled"),Y(Ut,"id","scheduled"),Y(Ut,"type","text"),Y(Ut,"placeholder",nd),Ji.a=null,Y(Ce,"class","tasks-modal-date"),Y(es,"for","start"),Y(Ft,"id","start"),Y(Ft,"type","text"),Y(Ft,"placeholder",nd),ts.a=null,Y(cr,"class","tasks-modal-date"),Y(A,"class","tasks-modal-section"),Y(Or,"type","checkbox"),Y(Or,"class","task-list-item-checkbox tasks-modal-checkbox"),Or.checked=rs=r[0].status==="Done",Or.disabled=!0,Y(Vr,"class","tasks-modal-section"),Y(Ka,"class","tasks-modal-section"),Y(as,"class","tasks-modal-section"),Y(e,"class","tasks-modal")},m(fe,Ye){co(fe,e,Ye),b(e,t),b(t,n),b(n,i),b(n,s),b(n,a),mt(a,r[0].description),r[13](a),b(t,o),b(t,u),b(t,l),b(t,c),b(c,d),b(c,f),b(c,p),b(p,y),b(p,m),b(p,g),b(p,k),fo(p,r[0].priority),b(t,x),b(t,C),b(t,H),b(t,re),b(re,de),b(re,J),b(re,M),mt(M,r[0].recurrenceRule),b(re,ye),b(re,ce),b(ce,P),b(ce,v),_.m(r[5],ce),b(t,O),b(t,E),b(t,S),b(t,A),b(A,q),b(q,ee),b(q,ue),b(q,se),mt(se,r[0].dueDate),b(q,ft),b(q,Le),b(Le,or),b(Le,ur),pt.m(r[4],Le),b(A,Ne),b(A,Ce),b(Ce,lr),b(Ce,Pr),b(Ce,Ut),mt(Ut,r[0].scheduledDate),b(Ce,Pd),b(Ce,kn),b(kn,Od),b(kn,Ad),Ji.m(r[3],kn),b(A,kd),b(A,cr),b(cr,es),b(cr,Nd),b(cr,Ft),mt(Ft,r[0].startDate),b(cr,Cd),b(cr,Nn),b(Nn,xd),b(Nn,Sd),ts.m(r[2],Nn),b(t,Id),b(t,Ud),b(t,Fd),b(t,Vr),b(Vr,Zr),b(Zr,qd),b(Zr,Or),b(Zr,Wd),b(Zr,Ha),b(Ha,za),b(Vr,Ld),b(Vr,is),b(is,Yd),b(is,ss),ss.innerHTML=r[6],b(t,$d),b(t,jd),b(t,Bd),b(t,Ka),b(t,Gd),b(t,as),Va||(Hd=[mr(a,"input",r[12]),mr(p,"change",r[14]),mr(M,"input",r[15]),mr(se,"input",r[16]),mr(Ut,"input",r[17]),mr(Ft,"input",r[18]),mr(t,"submit",hp(r[7]))],Va=!0)},p(fe,[Ye]){Ye&1&&a.value!==fe[0].description&&mt(a,fe[0].description),Ye&1&&fo(p,fe[0].priority),Ye&1&&M.value!==fe[0].recurrenceRule&&mt(M,fe[0].recurrenceRule),Ye&32&&_.p(fe[5]),Ye&1&&se.value!==fe[0].dueDate&&mt(se,fe[0].dueDate),Ye&16&&pt.p(fe[4]),Ye&1&&Ut.value!==fe[0].scheduledDate&&mt(Ut,fe[0].scheduledDate),Ye&8&&Ji.p(fe[3]),Ye&1&&Ft.value!==fe[0].startDate&&mt(Ft,fe[0].startDate),Ye&4&&ts.p(fe[2]),Ye&1&&rs!==(rs=fe[0].status==="Done")&&(Or.checked=rs),Ye&1&&ns!==(ns=fe[0].status+"")&&mp(za,ns),Ye&64&&(ss.innerHTML=fe[6])},i:rn,o:rn,d(fe){fe&&Es(e),r[13](null),Va=!1,xr(Hd)}}}var nd="Try 'Monday' or 'tomorrow', or [td|tm|yd|tw|nw|we] then space.";function WO(r,e,t){var n,i;let{task:s}=e,{onSubmit:a}=e,o,u={description:"",status:"Todo",priority:"none",recurrenceRule:"",startDate:"",scheduledDate:"",dueDate:"",doneDate:""},l="",c="",d="",f="",p="",y=!1;function m(M,ye,ce=void 0){if(!ye)return`<i>no ${M} date</i>`;let P=Bi.parseDate(ye,ce,{forwardDate:ce!=null});return P!==null?window.moment(P).format("YYYY-MM-DD"):`<i>invalid ${M} date</i>`}po(()=>{let{globalFilter:M}=ie(),ye=s.getDescriptionWithoutGlobalFilter();(ye!=s.description||ye.indexOf(M)==-1)&&(y=!0);let ce="none";s.priority==="4"?ce="low":s.priority==="2"?ce="medium":s.priority==="1"&&(ce="high"),t(0,u={description:ye,status:s.status,priority:ce,recurrenceRule:s.recurrence?s.recurrence.toText():"",startDate:s.startDate?s.startDate.format("YYYY-MM-DD"):"",scheduledDate:s.scheduledDate?s.scheduledDate.format("YYYY-MM-DD"):"",dueDate:s.dueDate?s.dueDate.format("YYYY-MM-DD"):"",doneDate:s.doneDate?s.doneDate.format("YYYY-MM-DD"):""}),setTimeout(()=>{o.focus()},10)});let g=()=>{let{globalFilter:M}=ie(),ye=u.description.trim();y&&(ye=M+" "+ye);let ce=null,P=Bi.parseDate(u.startDate,new Date,{forwardDate:!0});P!==null&&(ce=window.moment(P));let v=null,_=Bi.parseDate(u.scheduledDate,new Date,{forwardDate:!0});_!==null&&(v=window.moment(_));let O=null,E=Bi.parseDate(u.dueDate,new Date,{forwardDate:!0});E!==null&&(O=window.moment(E));let S=null;u.recurrenceRule&&(S=ht.fromText({recurrenceRuleText:u.recurrenceRule,startDate:ce,scheduledDate:v,dueDate:O}));let A;switch(u.priority){case"low":A="4";break;case"medium":A="2";break;case"high":A="1";break;default:A="3"}let q=new oe(Object.assign(Object.assign({},s),{description:ye,status:u.status,priority:A,recurrence:S,startDate:ce,scheduledDate:v,dueDate:O,doneDate:window.moment(u.doneDate,"YYYY-MM-DD").isValid()?window.moment(u.doneDate,"YYYY-MM-DD"):null}));a([q])};function k(){u.description=this.value,t(0,u)}function x(M){bs[M?"unshift":"push"](()=>{o=M,t(1,o)})}function C(){u.priority=yp(this),t(0,u)}function H(){u.recurrenceRule=this.value,t(0,u)}function re(){u.dueDate=this.value,t(0,u)}function de(){u.scheduledDate=this.value,t(0,u)}function J(){u.startDate=this.value,t(0,u)}return r.$$set=M=>{"task"in M&&t(8,s=M.task),"onSubmit"in M&&t(9,a=M.onSubmit)},r.$$.update=()=>{if(r.$$.dirty&1){e:t(0,u.startDate=bn(u.startDate),u),t(2,l=m("start",u.startDate,new Date))}if(r.$$.dirty&1){e:t(0,u.scheduledDate=bn(u.scheduledDate),u),t(3,c=m("scheduled",u.scheduledDate,new Date))}if(r.$$.dirty&1){e:t(0,u.dueDate=bn(u.dueDate),u),t(4,d=m("due",u.dueDate,new Date))}if(r.$$.dirty&3073){e:u.recurrenceRule?t(5,f=t(11,i=t(10,n=ht.fromText({recurrenceRuleText:u.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))===null||n===void 0?void 0:n.toText())!==null&&i!==void 0?i:"<i>invalid recurrence rule</i>"):t(5,f="<i>not recurring</>")}if(r.$$.dirty&1){e:t(6,p=m("done",u.doneDate))}},[u,o,l,c,d,f,p,g,s,a,n,i,k,x,C,H,re,de,J]}var id=class extends vs{constructor(e){super(),Tp(this,e,WO,qO,dp,{task:8,onSubmit:9})}},Zg=id;var vn=class extends Xg.Modal{constructor({app:t,task:n,onSubmit:i}){super(t);this.task=n,this.onSubmit=s=>{i(s),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task");let{contentEl:t}=this;new Zg({target:t,props:{task:this.task,onSubmit:this.onSubmit}})}onClose(){let{contentEl:t}=this;t.empty()}};var Qg=(r,e,t,n)=>{var d;if(r)return t instanceof ad.MarkdownView;if(!(t instanceof ad.MarkdownView))return;let i=(d=t.file)==null?void 0:d.path;if(i===void 0)return;let a=e.getCursor().line,o=e.getLine(a),u=LO({line:o,path:i}),l=f=>{let p=f.map(y=>y.toFileLineString()).join(`
`);e.setLine(a,p)};new vn({app:n,task:u,onSubmit:l}).open()},LO=({line:r,path:e})=>{var c;let t=oe.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null});if(t!==null)return t;let n=r.match(w.nonTaskRegex);if(n===null)return console.error("Tasks: Cannot create task on line:",r),new oe({status:"Todo",description:"",path:e,indentation:"",originalStatusCharacter:" ",priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,blockLink:"",tags:[]});let i=n[1],s=(c=n[3])!=null?c:" ",a=s===" "?"Todo":"Done",o=n[4],u=r.match(w.blockLinkRegex),l=u!==null?u[0]:"";return l!==""&&(o=o.replace(w.blockLinkRegex,"")),new oe({status:a,description:o,path:e,indentation:i,originalStatusCharacter:s,blockLink:l,priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,tags:[]})};var od=require("obsidian");var Jg=(r,e,t)=>{var u;if(r)return t instanceof od.MarkdownView;if(!(t instanceof od.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=YO(a,n);e.setLine(s,o),e.setCursor({line:i.line,ch:jO(i.ch,a,o)})},YO=(r,e)=>{let t=r,n=oe.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null});if(n!==null)t=$O(n);else{let i=r.match(w.taskRegex);if(i!==null){let a=i[2].toLowerCase()===" "?"x":" ";t=r.replace(w.taskRegex,`$1- [${a}] $3`)}else w.listItemRegex.test(r)?t=r.replace(w.listItemRegex,"$1$2 [ ]"):t=r.replace(w.indentationRegex,"$1- ")}return t},$O=r=>r.toggle().map(n=>n.toFileLineString()).join(`
`),jO=(r,e,t)=>{let n=t.length;if(n<=e.length)return r>=t.length?n:r;let i=13;if(t.match(w.doneDateRegex)&&n-e.length>=i&&(n-=i),n>=2*e.length&&t.search(`.+
.+`)!==-1)return r+n-e.length;let s=t.search(/[-*]/);return r<s?r:r+n-e.length};var ha=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>Qg(t,n,i,this.app)}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:Jg})}};var ma=class{constructor({obsidianEvents:e}){this.obsidianEvents=e}onCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.obsidianEvents.offref(e)}};var ya=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return ne(this,null,function*(){var c;let{globalFilter:n}=ie(),i=e.findAll(".task-list-item").filter(d=>{var y;let f=(y=d.textContent)==null?void 0:y.split(`
`);if(f===void 0)return!1;let p=null;for(let m=0;m<f.length;m=m+1)if(f[m]!==""){p=f[m];break}return p===null?!1:p.includes(n)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let d=a.lineStart;d<=a.lineEnd;d++){let f=o[d];if(f===void 0)continue;let p=oe.fromLine({line:f,path:s,sectionStart:a.lineStart,sectionIndex:u,precedingHeader:null});p!==null&&(l.push(p),u++)}for(let d=0;d<i.length;d++){let f=l[d],p=i[d];if(f===void 0||p===void 0)continue;let y=(c=p.getAttr("data-line"))!=null?c:"0",m=Number.parseInt(y,10),g=yield f.toLi({parentUlElement:e,listIndex:m}),k=p.childNodes;for(let H=0;H<k.length;H=H+1){let re=k[H];re.nodeName.toLowerCase()==="div"?g.prepend(re):re.nodeName.toLowerCase()==="ul"&&g.append(re)}let x=p.querySelectorAll("[data-footnote-id]"),C=g.querySelectorAll("[data-footnote-id]");if(x.length===C.length)for(let H=0;H<x.length;H++)C[H].replaceWith(x[H]);p.replaceWith(g)}})}};var e_=require("@codemirror/view"),t_=require("obsidian");var r_=()=>e_.ViewPlugin.fromClass(ud),ud=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let f=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(f),new t_.Notice(f,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=oe.fromLine({line:a.text,path:"",sectionStart:0,sectionIndex:0,precedingHeader:null});if(console.debug(`Live Preview Extension: toggle called. Position: ${s} Line: ${a.text}`),o===null)return!1;e.preventDefault();let l=o.toggle().map(f=>f.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let d=t.checked;return setTimeout(()=>{t.checked=d},1),!0}};var $a=require("obsidian");var En=class{matchesAnyOf(e){return e.some(t=>this.matches(t))}};var Gr=class extends En{constructor(t){super();this.stringToFind=t}matches(t){return Gr.stringIncludesCaseInsensitive(t,this.stringToFind)}static stringIncludesCaseInsensitive(t,n){return t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}};var Rn=class extends En{constructor(t){super();this.regex=t}static validateAndConstruct(t){let n=/\/((?![*+?])(?:[^\r\n[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*])+)\/((?:g(?:im?|mi?)?|i(?:gm?|mg?)?|m(?:gi?|ig?)?)?)/,i=t.match(n);if(i!==null){let s=new RegExp(i[1],i[2]);return new Rn(s)}else return null}matches(t){return t.match(this.regex)!==null}};var ve=class{canCreateFilterForLine(e){return ve.lineMatchesFilter(this.filterRegExp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}};var le=class{static fromFilter(e){let t=new le;return t.filter=e,t}static fromError(e){let t=new le;return t.error=e,t}};var dt=class extends ve{createFilterOrErrorMessage(e){let t=ve.getMatch(this.filterRegExp(),e);if(t===null)return le.fromError(`do not understand query filter (${this.fieldName()})`);let[n,i,s]=t,a=null;if(i.includes("include"))a=new Gr(s);else if(i.includes("regex")&&(a=Rn.validateAndConstruct(s),a===null))return le.fromError(`cannot parse regex (${this.fieldName()}); check your leading and trailing slashes for your query`);if(a===null)return le.fromError(`do not understand query filter (${this.fieldName()})`);let o=i.match(/not/)!==null;return le.fromFilter(this.getFilter(a,o))}static stringIncludesCaseInsensitive(e,t){return Gr.stringIncludesCaseInsensitive(e,t)}fieldPattern(){return this.fieldName()}filterOperatorPattern(){return"includes|does not include|regex matches|regex does not match"}filterRegExp(){return new RegExp(`^(?:${this.fieldPattern()}) (${this.filterOperatorPattern()}) (.*)`)}getFilter(e,t){return n=>{let i=e.matches(this.value(n));return t?!i:i}}};var ga=class extends dt{fieldName(){return"description"}value(e){let t=ie().globalFilter;return e.description.replace(t,"").trim()}};var n_=os(Ee()),er=class{static parseDate(e,t=!1){return window.moment(n_.parseDate(e,void 0,{forwardDate:t})).startOf("day")}};var St=class extends ve{constructor(){super(...arguments);this.instructionForFieldPresence=`has ${this.fieldName()} date`;this.instructionForFieldAbsence=`no ${this.fieldName()} date`}canCreateFilterForLine(t){return t===this.instructionForFieldPresence||t===this.instructionForFieldAbsence?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=new le;if(t===this.instructionForFieldPresence)return n.filter=s=>this.date(s)!==null,n;if(t===this.instructionForFieldAbsence)return n.filter=s=>this.date(s)===null,n;let i=ve.getMatch(this.filterRegExp(),t);if(i!==null){let s=er.parseDate(i[2]);s.isValid()?i[1]==="before"?n.filter=a=>{let o=this.date(a);return o?o.isBefore(s):this.filterResultIfFieldMissing()}:i[1]==="after"?n.filter=a=>{let o=this.date(a);return o?o.isAfter(s):this.filterResultIfFieldMissing()}:n.filter=a=>{let o=this.date(a);return o?o.isSame(s):this.filterResultIfFieldMissing()}:n.error="do not understand "+this.fieldName()+" date"}else n.error="do not understand query filter ("+this.fieldName()+" date)";return n}};var ld=class extends St{filterRegExp(){return ld.doneRegexp}fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}},Gi=ld;Gi.doneRegexp=/^done (before|after|on)? ?(.*)/;var cd=class extends St{filterRegExp(){return cd.dueRegexp}fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}},Hi=cd;Hi.dueRegexp=/^due (before|after|on)? ?(.*)/;var _a=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e==this._instruction}createFilterOrErrorMessage(e){let t=new le;return e===this._instruction?(t.filter=this._filter,t):(t.error=`do not understand filter: ${e}`,t)}};var Ta=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new _a(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let n of this._filters){let i=n.createFilterOrErrorMessage(e);if(i.error===void 0)return i}let t=new le;return t.error=`do not understand filter: ${e}`,t}};var Rr=class extends ve{constructor(){super(...arguments);this._filters=new Ta}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegExp(){return null}};var ba=class extends Rr{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};var va=class extends dt{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}};var Ea=class extends dt{fieldName(){return"path"}value(e){return e.path}};var dd=class extends ve{createFilterOrErrorMessage(e){let t=new le,n=ve.getMatch(this.filterRegExp(),e);if(n!==null){let i=n[3],s=null;switch(i){case"low":s="4";break;case"none":s="3";break;case"medium":s="2";break;case"high":s="1";break}if(s===null)return t.error="do not understand priority",t;let a;n[2]==="above"?a=o=>o.priority?o.priority.localeCompare(s)<0:!1:n[2]==="below"?a=o=>o.priority?o.priority.localeCompare(s)>0:!1:a=o=>o.priority?o.priority===s:!1,t.filter=a}else t.error="do not understand query filter (priority)";return t}fieldName(){return"priority"}filterRegExp(){return dd.priorityRegexp}},zi=dd;zi.priorityRegexp=/^priority (is )?(above|below)? ?(low|none|medium|high)/;var fd=class extends St{filterRegExp(){return fd.scheduledRegexp}fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}},Ki=fd;Ki.scheduledRegexp=/^scheduled (before|after|on)? ?(.*)/;var pd=class extends St{filterRegExp(){return pd.startRegexp}fieldName(){return"start"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}},Vi=pd;Vi.startRegexp=/^starts (before|after|on)? ?(.*)/;var wr=class extends ve{canCreateFilterForLine(e){return e===wr.instructionForFieldPresence||e===wr.instructionForFieldAbsence?!0:super.canCreateFilterForLine(e)}createFilterOrErrorMessage(e){let t=new le;if(e===wr.instructionForFieldPresence){let i=new le;return i.filter=s=>this.dates(s).some(a=>a!==null),i}if(e===wr.instructionForFieldAbsence){let i=new le;return i.filter=s=>!this.dates(s).some(a=>a!==null),i}let n=ve.getMatch(this.filterRegExp(),e);if(n!==null){let i=er.parseDate(n[2]);i.isValid()?n[1]==="before"?t.filter=s=>this.dates(s).some(a=>a&&a.isBefore(i)):n[1]==="after"?t.filter=s=>this.dates(s).some(a=>a&&a.isAfter(i)):t.filter=s=>this.dates(s).some(a=>a&&a.isSame(i)):t.error="do not understand happens date"}else t.error="do not understand query filter (happens date)";return t}earliestDate(e){return new wr().dates(e).sort(Ge.compareByDate)[0]}filterRegExp(){return wr.happensRegexp}dates(e){return Array.of(e.startDate,e.scheduledDate,e.dueDate)}fieldName(){return"happens"}},tr=wr;tr.happensRegexp=/^happens (before|after|on)? ?(.*)/,tr.instructionForFieldPresence="has happens date",tr.instructionForFieldAbsence="no happens date";var Ra=class extends Rr{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}};var wa=class extends Rr{constructor(){super(),this._filters.add("done",e=>e.status==="Done"),this._filters.add("not done",e=>e.status!=="Done")}fieldName(){return"status"}};var Da=class extends dt{fieldNamePlural(){return this.fieldNameSingular()+"s"}fieldName(){return`${this.fieldNameSingular()}/${this.fieldNamePlural()}`}fieldPattern(){return`${this.fieldNameSingular()}|${this.fieldNamePlural()}`}filterOperatorPattern(){return`${super.filterOperatorPattern()}|include|do not include`}value(e){return this.values(e).join(", ")}getFilter(e,t){return n=>{let i=e.matchesAnyOf(this.values(n));return t?!i:i}}};var Ma=class extends Da{fieldNameSingular(){return"tag"}values(e){return e.tags}};var y_=os(m_());var ka=class extends ve{constructor(){super(...arguments);this.basicBooleanRegexp=/(.*(AND|OR|XOR|NOT)\s*[("].*|\(.+\))/g;this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={}}filterRegExp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){let n=new le;if(t.length===0)return n.error="empty line",n;let i=this.preprocessExpression(t);try{let s=(0,y_.parse)(i);for(let a of s)if(a.name==="IDENTIFIER"&&a.value){let o=a.value.trim();if(!(o in this.subFields)){let u=Na(o);if(u===null)return n.error=`couldn't parse sub-expression '${o}'`,n;if(u.error)return n.error=`couldn't parse sub-expression '${o}': ${u.error}`,n;u.filter&&(this.subFields[o]=u.filter)}}else if(a.name==="OPERATOR"){if(a.value==null)return n.error="empty operator in boolean query",n;if(!this.supportedOperators.includes(a.value))return n.error=`unknown boolean operator '${a.value}'`,n}return n.filter=a=>this.filterTaskWithParsedQuery(a,s),n}catch(s){let a=s instanceof Error?s.message:"unknown error type";return n.error=`malformed boolean query -- ${a} (check the documentation for guidelines)`,n}return n}preprocessExpression(t){return t.replace(/\(([^()]+)\)/g,'("$1")')}filterTaskWithParsedQuery(t,n){let i=o=>o==="true",s=o=>o?"true":"false",a=[];for(let o of n)if(o.name==="IDENTIFIER"){if(o.value==null)throw Error("null token value");let u=this.subFields[o.value.trim()],l=u(t);a.push(s(l))}else if(o.name==="OPERATOR")if(o.value==="NOT"){let u=i(a.pop());a.push(s(!u))}else if(o.value==="OR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u||l))}else if(o.value==="AND"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&l))}else if(o.value==="XOR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&!l||!u&&l))}else throw Error("Unsupported operator: "+o.value);else throw Error("Unsupported token type: "+o);return i(a[0])}};var Ca=class extends dt{fieldName(){return"filename"}value(e){let t=e.filename;return t===null?"":t+".md"}};var QO=[()=>new wa,()=>new Ra,()=>new zi,()=>new tr,()=>new Vi,()=>new Ki,()=>new Hi,()=>new Gi,()=>new Ea,()=>new ga,()=>new Ma,()=>new va,()=>new ba,()=>new ka,()=>new Ca];function Na(r){for(let e of QO){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}var xa=class{constructor(e,t){this.nestingLevel=e,this.name=t}};var Sa=class{constructor(e){this.lastHeadingAtLevel=new Array;let n=e.keys().next().value.length;for(let i=0;i<n;i++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new xa(n,i));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var Ia=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var Ua=class extends Map{},Fa=class extends Ia{},qa=class{constructor(e,t){this.groups=new Ua;let n=this.buildGroupingTree(e,t);this.groups=n.generateAllPaths(),this.groups=this.getSortedGroups()}buildGroupingTree(e,t){let n=new Fa(t),i=[n];for(let s of e){let a=[];for(let o of i)for(let u of o.values){let l=Mr.getGroupNamesForTask(s.property,u);for(let c of l){let d=o.children.get(c);d===void 0&&(d=new Fa([]),o.children.set(c,d),a.push(d)),d.values.push(u)}}i=a}return n}getSortedGroups(){return new Ua([...this.groups.entries()].sort())}};var Wa=class{constructor(e,t,n){this.groups=e,this.groupHeadings=t,this.tasks=n}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} ${t.name}
`;return e+=this.tasksAsStringOfLines(),e}};var La=class{constructor(e,t){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length;let n=new qa(e,t);this.addTasks(n)}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTasks(e){let t=new Sa(e.groups);for(let[n,i]of e.groups){let s=t.getHeadingsForTaskGroup(n),a=new Wa(n,s,i);this.add(a)}}add(e){this._groups.push(e)}};var V=class{static by(e,t){return new La(e,t)}static getGroupNamesForTask(e,t){let n=V.groupers[e];return n(t)}static escapeMarkdownCharacters(e){return e.replace(/\\/g,"\\\\").replace(/_/g,"\\_")}static groupByPriority(e){let t="ERROR";switch(e.priority){case"1":t="High";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break}return[`Priority ${e.priority}: ${t}`]}static groupByRecurrence(e){return e.recurrence!==null?[e.recurrence.toText()]:["None"]}static groupByRecurring(e){return e.recurrence!==null?["Recurring"]:["Not Recurring"]}static groupByStartDate(e){return[V.stringFromDate(e.startDate,"start")]}static groupByScheduledDate(e){return[V.stringFromDate(e.scheduledDate,"scheduled")]}static groupByDueDate(e){return[V.stringFromDate(e.dueDate,"due")]}static groupByDoneDate(e){return[V.stringFromDate(e.doneDate,"done")]}static groupByHappensDate(e){let t=new tr().earliestDate(e);return[V.stringFromDate(t,"happens")]}static stringFromDate(e,t){return e===null?"No "+t+" date":e.format(V.groupDateFormat)}static groupByPath(e){return[V.escapeMarkdownCharacters(e.path.replace(".md",""))]}static groupByFolder(e){let t=e.path,n=e.filename+".md",i=t.substring(0,t.lastIndexOf(n));return i===""?["/"]:[V.escapeMarkdownCharacters(i)]}static groupByFileName(e){let t=e.filename;return t===null?["Unknown Location"]:[V.escapeMarkdownCharacters(t)]}static groupByRoot(e){let t=e.path.replace(/\\/g,"/"),n=t.indexOf("/");return n==-1?["/"]:[V.escapeMarkdownCharacters(t.substring(0,n+1))]}static groupByBacklink(e){if(e.getLinkText({isFilenameUnique:!0})===null)return["Unknown Location"];let n=V.groupByFileName(e)[0];if(e.precedingHeader===null||e.precedingHeader.length===0)return[n];let i=V.groupByHeading(e)[0];return n===i?[n]:[`${n} > ${i}`]}static groupByStatus(e){return[e.status]}static groupByHeading(e){return e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}static groupByTags(e){return e.tags.length==0?["(No tags)"]:e.tags}},Mr=V;Mr.groupDateFormat="YYYY-MM-DD dddd",Mr.groupers={backlink:V.groupByBacklink,done:V.groupByDoneDate,due:V.groupByDueDate,filename:V.groupByFileName,folder:V.groupByFolder,happens:V.groupByHappensDate,heading:V.groupByHeading,path:V.groupByPath,priority:V.groupByPriority,recurrence:V.groupByRecurrence,recurring:V.groupByRecurring,root:V.groupByRoot,scheduled:V.groupByScheduledDate,start:V.groupByStartDate,status:V.groupByStatus,tags:V.groupByTags};var An=class{constructor({source:e}){this._limit=void 0;this._layoutOptions=new Xr;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this.sortByRegexp=/^sort by (urgency|status|priority|start|scheduled|due|done|path|description|tag)( reverse)?[\s]*(\d+)?/;this.groupByRegexp=/^group by (backlink|done|due|filename|folder|happens|heading|path|priority|recurrence|recurring|root|scheduled|start|status|tags)/;this.hideOptionsRegexp=/^(hide|show) (task count|backlink|priority|start date|scheduled date|done date|due date|recurrence rule|edit button|urgency)/;this.shortModeRegexp=/^short/;this.limitRegexp=/^limit (to )?(\d+)( tasks?)?/;this.commentRegexp=/^#.*/;this.source=e,e.split(`
`).map(t=>t.trim()).forEach(t=>{switch(!0){case t==="":break;case this.shortModeRegexp.test(t):this._layoutOptions.shortMode=!0;break;case this.limitRegexp.test(t):this.parseLimit({line:t});break;case this.sortByRegexp.test(t):this.parseSortBy({line:t});break;case this.groupByRegexp.test(t):this.parseGroupBy({line:t});break;case this.hideOptionsRegexp.test(t):this.parseHideOptions({line:t});break;case this.commentRegexp.test(t):break;case this.parseFilter(t):break;default:this._error=`do not understand query: ${t}`}})}get limit(){return this._limit}get layoutOptions(){return this._layoutOptions}get filters(){return this._filters}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}applyQueryToTasks(e){this.filters.forEach(n=>{e=e.filter(n)});let t=Ge.by(this,e).slice(0,this.limit);return Mr.by(this.grouping,t)}parseHideOptions({line:e}){let t=e.match(this.hideOptionsRegexp);if(t!==null){let n=t[1]==="hide";switch(t[2]){case"task count":this._layoutOptions.hideTaskCount=n;break;case"backlink":this._layoutOptions.hideBacklinks=n;break;case"priority":this._layoutOptions.hidePriority=n;break;case"start date":this._layoutOptions.hideStartDate=n;break;case"scheduled date":this._layoutOptions.hideScheduledDate=n;break;case"due date":this._layoutOptions.hideDueDate=n;break;case"done date":this._layoutOptions.hideDoneDate=n;break;case"recurrence rule":this._layoutOptions.hideRecurrenceRule=n;break;case"edit button":this._layoutOptions.hideEditButton=n;break;case"urgency":this._layoutOptions.hideUrgency=n;break;default:this._error="do not understand hide/show option"}}}parseFilter(e){let t=Na(e);return t!=null?(t.filter?this._filters.push(t.filter):this._error=t.error,!0):!1}parseLimit({line:e}){let t=e.match(this.limitRegexp);t!==null?this._limit=Number.parseInt(t[2],10):this._error="do not understand query limit"}parseSortBy({line:e}){let t=e.match(this.sortByRegexp);t!==null?this._sorting.push({property:t[1],reverse:!!t[2],propertyInstance:isNaN(+t[3])?1:+t[3]}):this._error="do not understand query sorting"}parseGroupBy({line:e}){let t=e.match(this.groupByRegexp);t!==null?this._grouping.push({property:t[1]}):this._error="do not understand query grouping"}};var Ya=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return ne(this,null,function*(){n.addChild(new Dd({app:this.app,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},Dd=class extends $a.MarkdownRenderChild{constructor({app:t,events:n,container:i,source:s,filePath:a}){super(i);switch(this.app=t,this.events=n,this.source=s,this.filePath=a,this.containerEl.className){case"block-language-tasks":this.query=new An({source:s}),this.queryType="tasks";break;default:this.query=new An({source:s}),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=new An({source:this.source}),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return ne(this,arguments,function*({tasks:t,state:n}){var a;let s=this.containerEl.createEl("div");if(n==="Warm"&&this.query.error===void 0){console.debug(`Render ${this.queryType} called for a block in active file "${this.filePath}", to select from ${t.length} tasks: plugin state: ${n}`);let o=this.query.applyQueryToTasks(t);for(let l of o.groups){this.addGroupHeadings(s,l.groupHeadings);let{taskList:c}=yield this.createTasksList({tasks:l.tasks,content:s});s.appendChild(c)}let u=o.totalTasksCount();console.debug(`${u} of ${t.length} tasks displayed in a block in "${this.filePath}"`),this.addTaskCount(s,u)}else this.query.error!==void 0?s.setText(`Tasks query: ${this.query.error}`):s.setText("Loading Tasks ...");(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}createTasksList(i){return ne(this,arguments,function*({tasks:t,content:n}){let s=t.length,a=n.createEl("ul");a.addClasses(["contains-task-list","plugin-tasks-query-result"]);for(let o=0;o<s;o++){let u=t[o],l=this.isFilenameUnique({task:u}),c=yield u.toLi({parentUlElement:a,listIndex:o,layoutOptions:this.query.layoutOptions,isFilenameUnique:l});c.querySelectorAll("[data-footnote-id]").forEach(p=>p.remove());let f=this.query.layoutOptions.shortMode;this.query.layoutOptions.hideUrgency||this.addUrgency(c,u),this.query.layoutOptions.hideBacklinks||this.addBacklinks(c,u,f,l),this.query.layoutOptions.hideEditButton||this.addEditButton(c,u),a.appendChild(c)}return{taskList:a,tasksCount:s}})}addEditButton(t,n){t.createEl("a",{cls:"tasks-edit"}).onClickEvent(s=>{s.preventDefault();let a=u=>{ls({originalTask:n,newTasks:u})};new vn({app:this.app,task:n,onSubmit:a}).open()})}addUrgency(t,n){let i=new Intl.NumberFormat().format(n.urgency);t.createSpan({text:i,cls:"tasks-urgency"})}addGroupHeadings(t,n){for(let i of n)this.addGroupHeading(t,i)}addGroupHeading(t,n){return ne(this,null,function*(){let i;n.nestingLevel===0?i=t.createEl("h4",{cls:"tasks-group-heading"}):n.nestingLevel===1?i=t.createEl("h5",{cls:"tasks-group-heading"}):i=t.createEl("h6",{cls:"tasks-group-heading"}),yield $a.MarkdownRenderer.renderMarkdown(n.name,i,this.filePath,this)})}addBacklinks(t,n,i,s){var l;let a=t.createSpan({cls:"tasks-backlink"});i||a.append(" (");let o=a.createEl("a");if(o.href=n.path,o.setAttribute("data-href",n.path),o.rel="noopener",o.target="_blank",o.addClass("internal-link"),i&&o.addClass("internal-link-short-mode"),n.precedingHeader!==null){let c=n.precedingHeader.replace(/#/g,"");o.href=o.href+"#"+c,o.setAttribute("data-href",o.getAttribute("data-href")+"#"+c)}let u;i?u=" \u{1F517}":u=(l=n.getLinkText({isFilenameUnique:s}))!=null?l:"",o.setText(u),i||a.append(")")}addTaskCount(t,n){this.query.layoutOptions.hideTaskCount||t.createDiv({text:`${n} task${n!==1?"s":""}`,cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}};var ar=require("obsidian");var ja=class extends ar.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.plugin=t}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),new ar.Setting(t).setName("Global task filter").setDesc("The global filter will be applied to all checklist items.").addText(n=>{let i=ie();n.setPlaceholder("#task").setValue(i.globalFilter).onChange(s=>ne(this,null,function*(){Wt({globalFilter:s}),yield this.plugin.saveSettings()}))}),t.createEl("div",{cls:"setting-item-description",text:'The global filter will be applied to all checklist items to filter out "non-task" checklist items.\nA checklist item must include the specified string in its description in order to be considered a task.\nFor example, if you set the global filter to `#task`, the Tasks plugin will only handle checklist items tagged with `#task`.\nOther checklist items will remain normal checklist items and not appear in queries or get a done date set.\nLeave empty if you want all checklist items from your vault to be tasks managed by this plugin.'}),new ar.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(n=>{let i=ie();n.setValue(i.removeGlobalFilter).onChange(s=>ne(this,null,function*(){Wt({removeGlobalFilter:s}),yield this.plugin.saveSettings()}))}),new ar.Setting(t).setName("Set done date on every completed task").setDesc("Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done").addToggle(n=>{let i=ie();n.setValue(i.setDoneDate).onChange(s=>ne(this,null,function*(){Wt({setDoneDate:s}),yield this.plugin.saveSettings()}))}),new ar.Setting(t).setName("Auto-suggest task content").setDesc("Enabling this will open an intelligent suggest menu while typing inside a recognized task line.").addToggle(n=>{let i=ie();n.setValue(i.autoSuggestInEditor).onChange(s=>ne(this,null,function*(){Wt({autoSuggestInEditor:s}),yield this.plugin.saveSettings()}))}),new ar.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(n=>{let i=ie();n.setLimits(0,3,1).setValue(i.autoSuggestMinMatch).setDynamicTooltip().onChange(s=>ne(this,null,function*(){Wt({autoSuggestMinMatch:s}),yield this.plugin.saveSettings()}))}),new ar.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(n=>{let i=ie();n.setLimits(3,12,1).setValue(i.autoSuggestMaxItems).setDynamicTooltip().onChange(s=>ne(this,null,function*(){Wt({autoSuggestMaxItems:s}),yield this.plugin.saveSettings()}))})}};var __=require("obsidian");var JO=`${Mt}${Pt}${Ot}`;function g_(r,e,t){let n=[];n=n.concat(rA(r,e,t)),n=n.concat(nA(r,e,t));let i=tA(r,t),s=Md(r,/([a-zA-Z'_-]*)/g,e),a=!1;if(s&&s.length>0){let o=s[0];if(o.length>=Math.max(1,t.autoSuggestMinMatch)){let u=i.filter(l=>l.displayText.toLowerCase().includes(o.toLowerCase()));for(let l of u)n.push({suggestionType:"match",displayText:l.displayText,appendText:l.appendText,insertAt:s.index,insertSkip:o.length}),a=!0}}return!a&&t.autoSuggestMinMatch===0&&(n=n.concat(i)),n.length>0&&!n.some(o=>o.suggestionType==="match")&&n.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`}),n=n.slice(0,t.autoSuggestMaxItems),n}function eA(r){if(Object.values(Re).some(e=>e.length>0&&r.includes(e)))return!0}function tA(r,e){let t=[];return r.includes(Ot)||t.push({displayText:`${Ot} due date`,appendText:`${Ot} `}),r.includes(Mt)||t.push({displayText:`${Mt} start date`,appendText:`${Mt} `}),r.includes(Pt)||t.push({displayText:`${Pt} scheduled date`,appendText:`${Pt} `}),eA(r)||(t.push({displayText:`${Re.High} high priority`,appendText:`${Re.High} `}),t.push({displayText:`${Re.Medium} medium priority`,appendText:`${Re.Medium} `}),t.push({displayText:`${Re.Low} low priority`,appendText:`${Re.Low} `})),r.includes(Dt)||t.push({displayText:`${Dt} recurring (repeat)`,appendText:`${Dt} `}),t}function rA(r,e,t){let n=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],i=[],s=new RegExp(`([${JO}])\\s*([0-9a-zA-Z ]*)`,"ug"),a=Md(r,s,e);if(a&&a.length>=2){let o=a[1],u=a[2];if(u.length<t.autoSuggestMinMatch)return[];let l=u&&u.length>1?er.parseDate(bn(u),!0):null;l&&l.isValid()&&i.push({displayText:`${l.format(w.dateFormat)}`,appendText:`${o} ${l.format(w.dateFormat)} `,insertAt:a.index,insertSkip:a[0].length});let c=1,d=5,f=n.filter(p=>u&&u.length>=c&&p.toLowerCase().includes(u.toLowerCase())).slice(0,d);f.length===0&&(f=n.slice(0,d));for(let p of f){let m=`${er.parseDate(p,!0).format(w.dateFormat)}`;i.push({suggestionType:"match",displayText:`${p} (${m})`,appendText:`${o} ${m} `,insertAt:a.index,insertSkip:a[0].length})}}return i}function nA(r,e,t){var o;let n=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],i=[],s=new RegExp(`(${Dt})\\s*([0-9a-zA-Z ]*)`,"ug"),a=Md(r,s,e);if(a&&a.length>=2){let u=a[1],l=a[2];if(l.length<t.autoSuggestMinMatch)return[];if(l.length>0){let p=(o=ht.fromText({recurrenceRuleText:l,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:o.toText();if(p){let y=`${u} ${p} `;if(i.push({suggestionType:"match",displayText:`\u2705 ${p}`,appendText:y,insertAt:a.index,insertSkip:a[0].length}),a[0]==y)return[]}}let c=1,d=t.autoSuggestMaxItems/2,f=n.filter(p=>l&&l.length>=c&&p.toLowerCase().includes(l.toLowerCase())).slice(0,d);f.length===0&&l.trim().length===0&&(f=n.slice(0,d));for(let p of f)i.push({suggestionType:"match",displayText:`${p}`,appendText:`${u} ${p} `,insertAt:a.index,insertSkip:a[0].length})}return i}function Md(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<=t&&t<=i.index+i[0].length)return i;return[]}var Ba=class extends __.EditorSuggest{constructor(t,n){super(t);this.settings=n}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return s.contains(this.settings.globalFilter)&&s.match(w.taskRegex)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){let n=t.query,i=t.editor.getCursor(),s=g_(n,i.ch,this.settings),a=[];for(let o of s)a.push(qt($e({},o),{context:t}));return a}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){var u,l,c;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let d=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(l=(u=i==null?void 0:i.cm)==null?void 0:u.contentDOM)==null||l.dispatchEvent(d);return}let s=t.context.editor.getCursor(),a={line:s.line,ch:(c=t.insertAt)!=null?c:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length})}};var Ga=class extends T_.Plugin{onload(){return ne(this,null,function*(){console.log('loading plugin "tasks"'),yield this.loadSettings(),this.addSettingTab(new ja({plugin:this})),ef({metadataCache:this.app.metadataCache,vault:this.app.vault});let t=new ma({obsidianEvents:this.app.workspace});this.cache=new hr({metadataCache:this.app.metadataCache,vault:this.app.vault,events:t}),this.inlineRenderer=new ya({plugin:this}),this.queryRenderer=new Ya({plugin:this,events:t}),this.registerEditorExtension(r_()),this.registerEditorSuggest(new Ba(this.app,ie())),new ha({plugin:this})})}onunload(){var t;console.log('unloading plugin "tasks"'),(t=this.cache)==null||t.unload()}loadSettings(){return ne(this,null,function*(){let t=yield this.loadData();Wt(t)})}saveSettings(){return ne(this,null,function*(){yield this.saveData(ie())})}};
