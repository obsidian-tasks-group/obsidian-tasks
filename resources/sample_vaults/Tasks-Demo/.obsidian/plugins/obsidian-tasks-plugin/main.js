/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck and Clare Macrae

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

"use strict";var fT=Object.create;var Ti=Object.defineProperty,pT=Object.defineProperties,hT=Object.getOwnPropertyDescriptor,mT=Object.getOwnPropertyDescriptors,yT=Object.getOwnPropertyNames,Sf=Object.getOwnPropertySymbols,gT=Object.getPrototypeOf,Pf=Object.prototype.hasOwnProperty,_T=Object.prototype.propertyIsEnumerable;var kf=(r,e,t)=>e in r?Ti(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,we=(r,e)=>{for(var t in e||(e={}))Pf.call(e,t)&&kf(r,t,e[t]);if(Sf)for(var t of Sf(e))_T.call(e,t)&&kf(r,t,e[t]);return r},vt=(r,e)=>pT(r,mT(e));var p=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),TT=(r,e)=>{for(var t in e)Ti(r,t,{get:e[t],enumerable:!0})},Af=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of yT(e))!Pf.call(r,i)&&i!==t&&Ti(r,i,{get:()=>e[i],enumerable:!(n=hT(e,i))||n.enumerable});return r};var Ks=(r,e,t)=>(t=r!=null?fT(gT(r)):{},Af(e||!r||!r.__esModule?Ti(t,"default",{value:r,enumerable:!0}):t,r)),bT=r=>Af(Ti({},"__esModule",{value:!0}),r);var x=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var rp=p((hP,ea)=>{var If,Ff,Uf,Lf,qf,Wf,Yf,$f,jf,Qs,Io,Bf,Gf,Hf,Dn,zf,Kf,Vf,Xf,Zf,Qf,Jf,ep,tp,Js;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof ea=="object"&&typeof ea.exports=="object"?r(t(e,t(ea.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,a){return n[s]=i?i(s,a):a}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])};If=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},Ff=Object.assign||function(n){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},Uf=function(n,i){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)i.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(s[a[o]]=n[a[o]]);return s},Lf=function(n,i,s,a){var o=arguments.length,u=o<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,s,a);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(u=(o<3?l(u):o>3?l(i,s,u):l(i,s))||u);return o>3&&u&&Object.defineProperty(i,s,u),u},qf=function(n,i){return function(s,a){i(s,a,n)}},Wf=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},Yf=function(n,i,s,a){function o(u){return u instanceof s?u:new s(function(l){l(u)})}return new(s||(s=Promise))(function(u,l){function c(h){try{f(a.next(h))}catch(y){l(y)}}function d(h){try{f(a.throw(h))}catch(y){l(y)}}function f(h){h.done?u(h.value):o(h.value).then(c,d)}f((a=a.apply(n,i||[])).next())})},$f=function(n,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,o,u,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(h){return d([f,h])}}function d(f){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(u=f[0]&2?o.return:f[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,f[1])).done)return u;switch(o=0,u&&(f=[f[0]&2,u.value]),f[0]){case 0:case 1:u=f;break;case 4:return s.label++,{value:f[1],done:!1};case 5:s.label++,o=f[1],f=[0];continue;case 7:f=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(f[0]===6||f[0]===2)){s=0;continue}if(f[0]===3&&(!u||f[1]>u[0]&&f[1]<u[3])){s.label=f[1];break}if(f[0]===6&&s.label<u[1]){s.label=u[1],u=f;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(f);break}u[2]&&s.ops.pop(),s.trys.pop();continue}f=i.call(n,s)}catch(h){f=[6,h],o=0}finally{a=u=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},jf=function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&Js(i,n,s)},Js=Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]},Qs=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],a=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Io=function(n,i){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var a=s.call(n),o,u=[],l;try{for(;(i===void 0||i-- >0)&&!(o=a.next()).done;)u.push(o.value)}catch(c){l={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(l)throw l.error}}return u},Bf=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(Io(arguments[i]));return n},Gf=function(){for(var n=0,i=0,s=arguments.length;i<s;i++)n+=arguments[i].length;for(var a=Array(n),o=0,i=0;i<s;i++)for(var u=arguments[i],l=0,c=u.length;l<c;l++,o++)a[o]=u[l];return a},Hf=function(n,i,s){if(s||arguments.length===2)for(var a=0,o=i.length,u;a<o;a++)(u||!(a in i))&&(u||(u=Array.prototype.slice.call(i,0,a)),u[a]=i[a]);return n.concat(u||Array.prototype.slice.call(i))},Dn=function(n){return this instanceof Dn?(this.v=n,this):new Dn(n)},zf=function(n,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(n,i||[]),o,u=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(m){a[m]&&(o[m]=function(g){return new Promise(function(R,O){u.push([m,g,R,O])>1||c(m,g)})})}function c(m,g){try{d(a[m](g))}catch(R){y(u[0][3],R)}}function d(m){m.value instanceof Dn?Promise.resolve(m.value.v).then(f,h):y(u[0][2],m)}function f(m){c("next",m)}function h(m){c("throw",m)}function y(m,g){m(g),u.shift(),u.length&&c(u[0][0],u[0][1])}},Kf=function(n){var i,s;return i={},a("next"),a("throw",function(o){throw o}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(o,u){i[o]=n[o]?function(l){return(s=!s)?{value:Dn(n[o](l)),done:o==="return"}:u?u(l):l}:u}},Vf=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],s;return i?i.call(n):(n=typeof Qs=="function"?Qs(n):n[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(u){s[u]=n[u]&&function(l){return new Promise(function(c,d){l=n[u](l),o(c,d,l.done,l.value)})}}function o(u,l,c,d){Promise.resolve(d).then(function(f){u({value:f,done:c})},l)}},Xf=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};Zf=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&Js(i,n,s);return t(i,n),i},Qf=function(n){return n&&n.__esModule?n:{default:n}},Jf=function(n,i,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(n):a?a.value:i.get(n)},ep=function(n,i,s,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(n,s):o?o.value=s:i.set(n,s),s},tp=function(n,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?i===n:n.has(i)},r("__extends",If),r("__assign",Ff),r("__rest",Uf),r("__decorate",Lf),r("__param",qf),r("__metadata",Wf),r("__awaiter",Yf),r("__generator",$f),r("__exportStar",jf),r("__createBinding",Js),r("__values",Qs),r("__read",Io),r("__spread",Bf),r("__spreadArrays",Gf),r("__spreadArray",Hf),r("__await",Dn),r("__asyncGenerator",zf),r("__asyncDelegator",Kf),r("__asyncValues",Vf),r("__makeTemplateObject",Xf),r("__importStar",Zf),r("__importDefault",Qf),r("__classPrivateFieldGet",Jf),r("__classPrivateFieldSet",ep),r("__classPrivateFieldIn",tp)})});var ie=p(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.matchAnyPattern=Ar.extractTerms=Ar.repeatedTimeunitPattern=void 0;function ZT(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}Ar.repeatedTimeunitPattern=ZT;function Fp(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}Ar.extractTerms=Fp;function QT(r){return`(?:${Fp(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}Ar.matchAnyPattern=QT});var ee=p((Yo,$o)=>{(function(r,e){typeof Yo=="object"&&typeof $o!="undefined"?$o.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(Yo,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",d="year",f="date",h="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},R=function(A,E,b){var C=String(A);return!C||C.length>=E?A:""+Array(E+1-C.length).join(b)+A},O={s:R,z:function(A){var E=-A.utcOffset(),b=Math.abs(E),C=Math.floor(b/60),v=b%60;return(E<=0?"+":"-")+R(C,2,"0")+":"+R(v,2,"0")},m:function A(E,b){if(E.date()<b.date())return-A(b,E);var C=12*(b.year()-E.year())+(b.month()-E.month()),v=E.clone().add(C,l),q=b-v<0,w=E.clone().add(C+(q?-1:1),l);return+(-(C+(b-v)/(q?v-w:w-v))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:l,y:d,w:u,d:o,D:f,h:a,m:s,s:i,ms:n,Q:c}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},P="en",X={};X[P]=g;var ye=function(A){return A instanceof bt},Te=function(A,E,b){var C;if(!A)return P;if(typeof A=="string")X[A]&&(C=A),E&&(X[A]=E,C=A);else{var v=A.name;X[v]=A,C=v}return!b&&C&&(P=C),C||!b&&P},se=function(A,E){if(ye(A))return A.clone();var b=typeof E=="object"?E:{};return b.date=A,b.args=arguments,new bt(b)},H=O;H.l=Te,H.i=ye,H.w=function(A,E){return se(A,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var bt=function(){function A(b){this.$L=Te(b.locale,null,!0),this.parse(b)}var E=A.prototype;return E.parse=function(b){this.$d=function(C){var v=C.date,q=C.utc;if(v===null)return new Date(NaN);if(H.u(v))return new Date;if(v instanceof Date)return new Date(v);if(typeof v=="string"&&!/Z$/i.test(v)){var w=v.match(y);if(w){var F=w[2]-1||0,B=(w[7]||"0").substring(0,3);return q?new Date(Date.UTC(w[1],F,w[3]||1,w[4]||0,w[5]||0,w[6]||0,B)):new Date(w[1],F,w[3]||1,w[4]||0,w[5]||0,w[6]||0,B)}}return new Date(v)}(b),this.$x=b.x||{},this.init()},E.init=function(){var b=this.$d;this.$y=b.getFullYear(),this.$M=b.getMonth(),this.$D=b.getDate(),this.$W=b.getDay(),this.$H=b.getHours(),this.$m=b.getMinutes(),this.$s=b.getSeconds(),this.$ms=b.getMilliseconds()},E.$utils=function(){return H},E.isValid=function(){return this.$d.toString()!==h},E.isSame=function(b,C){var v=se(b);return this.startOf(C)<=v&&v<=this.endOf(C)},E.isAfter=function(b,C){return se(b)<this.startOf(C)},E.isBefore=function(b,C){return this.endOf(C)<se(b)},E.$g=function(b,C,v){return H.u(b)?this[C]:this.set(v,b)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(b,C){var v=this,q=!!H.u(C)||C,w=H.p(b),F=function(Ze,Se){var ct=H.w(v.$u?Date.UTC(v.$y,Se,Ze):new Date(v.$y,Se,Ze),v);return q?ct:ct.endOf(o)},B=function(Ze,Se){return H.w(v.toDate()[Ze].apply(v.toDate("s"),(q?[0,0,0,0]:[23,59,59,999]).slice(Se)),v)},W=this.$W,de=this.$M,fe=this.$D,xe="set"+(this.$u?"UTC":"");switch(w){case d:return q?F(1,0):F(31,11);case l:return q?F(1,de):F(0,de+1);case u:var xt=this.$locale().weekStart||0,et=(W<xt?W+7:W)-xt;return F(q?fe-et:fe+(6-et),de);case o:case f:return B(xe+"Hours",0);case a:return B(xe+"Minutes",1);case s:return B(xe+"Seconds",2);case i:return B(xe+"Milliseconds",3);default:return this.clone()}},E.endOf=function(b){return this.startOf(b,!1)},E.$set=function(b,C){var v,q=H.p(b),w="set"+(this.$u?"UTC":""),F=(v={},v[o]=w+"Date",v[f]=w+"Date",v[l]=w+"Month",v[d]=w+"FullYear",v[a]=w+"Hours",v[s]=w+"Minutes",v[i]=w+"Seconds",v[n]=w+"Milliseconds",v)[q],B=q===o?this.$D+(C-this.$W):C;if(q===l||q===d){var W=this.clone().set(f,1);W.$d[F](B),W.init(),this.$d=W.set(f,Math.min(this.$D,W.daysInMonth())).$d}else F&&this.$d[F](B);return this.init(),this},E.set=function(b,C){return this.clone().$set(b,C)},E.get=function(b){return this[H.p(b)]()},E.add=function(b,C){var v,q=this;b=Number(b);var w=H.p(C),F=function(de){var fe=se(q);return H.w(fe.date(fe.date()+Math.round(de*b)),q)};if(w===l)return this.set(l,this.$M+b);if(w===d)return this.set(d,this.$y+b);if(w===o)return F(1);if(w===u)return F(7);var B=(v={},v[s]=e,v[a]=t,v[i]=r,v)[w]||1,W=this.$d.getTime()+b*B;return H.w(W,this)},E.subtract=function(b,C){return this.add(-1*b,C)},E.format=function(b){var C=this,v=this.$locale();if(!this.isValid())return v.invalidDate||h;var q=b||"YYYY-MM-DDTHH:mm:ssZ",w=H.z(this),F=this.$H,B=this.$m,W=this.$M,de=v.weekdays,fe=v.months,xe=function(Se,ct,Tn,ir){return Se&&(Se[ct]||Se(C,q))||Tn[ct].substr(0,ir)},xt=function(Se){return H.s(F%12||12,Se,"0")},et=v.meridiem||function(Se,ct,Tn){var ir=Se<12?"AM":"PM";return Tn?ir.toLowerCase():ir},Ze={YY:String(this.$y).slice(-2),YYYY:this.$y,M:W+1,MM:H.s(W+1,2,"0"),MMM:xe(v.monthsShort,W,fe,3),MMMM:xe(fe,W),D:this.$D,DD:H.s(this.$D,2,"0"),d:String(this.$W),dd:xe(v.weekdaysMin,this.$W,de,2),ddd:xe(v.weekdaysShort,this.$W,de,3),dddd:de[this.$W],H:String(F),HH:H.s(F,2,"0"),h:xt(1),hh:xt(2),a:et(F,B,!0),A:et(F,B,!1),m:String(B),mm:H.s(B,2,"0"),s:String(this.$s),ss:H.s(this.$s,2,"0"),SSS:H.s(this.$ms,3,"0"),Z:w};return q.replace(m,function(Se,ct){return ct||Ze[Se]||w.replace(":","")})},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(b,C,v){var q,w=H.p(C),F=se(b),B=(F.utcOffset()-this.utcOffset())*e,W=this-F,de=H.m(this,F);return de=(q={},q[d]=de/12,q[l]=de,q[c]=de/3,q[u]=(W-B)/6048e5,q[o]=(W-B)/864e5,q[a]=W/t,q[s]=W/e,q[i]=W/r,q)[w]||W,v?de:H.a(de)},E.daysInMonth=function(){return this.endOf(l).$D},E.$locale=function(){return X[this.$L]},E.locale=function(b,C){if(!b)return this.$L;var v=this.clone(),q=Te(b,C,!0);return q&&(v.$L=q),v},E.clone=function(){return H.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},A}(),lt=bt.prototype;return se.prototype=lt,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",d],["$D",f]].forEach(function(A){lt[A[1]]=function(E){return this.$g(E,A[0],A[1])}}),se.extend=function(A,E){return A.$i||(A(E,bt,se),A.$i=!0),se},se.locale=Te,se.isDayjs=ye,se.unix=function(A){return se(1e3*A)},se.en=X[P],se.Ls=X,se.p={},se})});var je=p(xr=>{"use strict";var JT=xr&&xr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xr,"__esModule",{value:!0});xr.findYearClosestToRef=xr.findMostLikelyADYear=void 0;var eb=JT(ee());function tb(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}xr.findMostLikelyADYear=tb;function rb(r,e,t){let n=eb.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}xr.findYearClosestToRef=rb});var Be=p($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.parseTimeUnits=$.TIME_UNITS_PATTERN=$.parseYear=$.YEAR_PATTERN=$.parseOrdinalNumberPattern=$.ORDINAL_NUMBER_PATTERN=$.parseNumberPattern=$.NUMBER_PATTERN=$.TIME_UNIT_DICTIONARY=$.ORDINAL_WORD_DICTIONARY=$.INTEGER_WORD_DICTIONARY=$.MONTH_DICTIONARY=$.FULL_MONTH_NAME_DICTIONARY=$.WEEKDAY_DICTIONARY=void 0;var na=ie(),nb=je();$.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};$.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};$.MONTH_DICTIONARY=Object.assign(Object.assign({},$.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});$.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};$.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};$.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};$.NUMBER_PATTERN=`(?:${na.matchAnyPattern($.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function Lp(r){let e=r.toLowerCase();return $.INTEGER_WORD_DICTIONARY[e]!==void 0?$.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}$.parseNumberPattern=Lp;$.ORDINAL_NUMBER_PATTERN=`(?:${na.matchAnyPattern($.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function ib(r){let e=r.toLowerCase();return $.ORDINAL_WORD_DICTIONARY[e]!==void 0?$.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}$.parseOrdinalNumberPattern=ib;$.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function sb(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return nb.findMostLikelyADYear(e)}$.parseYear=sb;var qp=`(${$.NUMBER_PATTERN})\\s{0,3}(${na.matchAnyPattern($.TIME_UNIT_DICTIONARY)})`,Up=new RegExp(qp,"i");$.TIME_UNITS_PATTERN=na.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",qp);function ab(r){let e={},t=r,n=Up.exec(t);for(;n;)ob(e,n),t=t.substring(n[0].length).trim(),n=Up.exec(t);return e}$.parseTimeUnits=ab;function ob(r,e){let t=Lp(e[1]),n=$.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Wp=p((jo,Bo)=>{(function(r,e){typeof jo=="object"&&typeof Bo!="undefined"?Bo.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(jo,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var d=this.quarter()-1;return c?this.month(3*d).startOf(r).startOf("day"):this.month(3*d+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var Rt=p(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.implySimilarTime=Xt.assignSimilarTime=Xt.assignSimilarDate=Xt.assignTheNextDay=void 0;var Yp=ke();function ub(r,e){e=e.add(1,"day"),$p(r,e),jp(r,e)}Xt.assignTheNextDay=ub;function $p(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}Xt.assignSimilarDate=$p;function lb(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",Yp.Meridiem.AM):r.assign("meridiem",Yp.Meridiem.PM)}Xt.assignSimilarTime=lb;function jp(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}Xt.implySimilarTime=jp});var Bp=p(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.toTimezoneOffset=Hr.TIMEZONE_ABBR_MAP=void 0;Hr.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function cb(r){var e;return r==null?null:typeof r=="number"?r:(e=Hr.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}Hr.toTimezoneOffset=cb});var be=p(Zt=>{"use strict";var Gp=Zt&&Zt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.ParsingResult=Zt.ParsingComponents=Zt.ReferenceWithTimezone=void 0;var db=Gp(Wp()),ia=Gp(ee()),Go=Rt(),fb=Bp();ia.default.extend(db.default);var Ho=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=fb.toTimezoneOffset(e.timezone))}};Zt.ReferenceWithTimezone=Ho;var zr=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=ia.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new zr(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return ia.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=ia.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new zr(e);return t.hour||t.minute||t.second?(Go.assignSimilarTime(i,n),Go.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(Go.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};Zt.ParsingComponents=zr;var Mi=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new zr(e),this.end=s}clone(){let e=new Mi(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};Zt.ParsingResult=Mi});var M=p(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.AbstractParserWithWordBoundaryChecking=void 0;var zo=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};sa.AbstractParserWithWordBoundaryChecking=zo});var Hp=p(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});var Vo=Be(),pb=be(),hb=M(),mb=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Vo.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),yb=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Vo.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Ko=class extends hb.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?yb:mb}innerExtract(e,t){let n=Vo.parseTimeUnits(t[1]);return pb.ParsingComponents.createRelativeFromReference(e.reference,n)}};Xo.default=Ko});var Qp=p(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});var gb=je(),Xp=Be(),Zp=Be(),aa=Be(),_b=ie(),Tb=M(),bb=new RegExp(`(?:on\\s{0,3})?(${aa.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${aa.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${_b.matchAnyPattern(Xp.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${Zp.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),zp=1,Kp=2,vb=3,Vp=4,Zo=class extends Tb.AbstractParserWithWordBoundaryChecking{innerPattern(){return bb}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Xp.MONTH_DICTIONARY[t[vb].toLowerCase()],s=aa.parseOrdinalNumberPattern(t[zp]);if(s>31)return t.index=t.index+t[zp].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Vp]){let a=Zp.parseYear(t[Vp]);n.start.assign("year",a)}else{let a=gb.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Kp]){let a=aa.parseOrdinalNumberPattern(t[Kp]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Qo.default=Zo});var nh=p(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});var Eb=je(),th=Be(),oa=Be(),rh=Be(),wb=ie(),Rb=M(),Ob=new RegExp(`(${wb.matchAnyPattern(th.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${oa.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${oa.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${rh.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),Db=1,Mb=2,Jp=3,eh=4,Jo=class extends Rb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Ob}innerExtract(e,t){let n=th.MONTH_DICTIONARY[t[Db].toLowerCase()],i=oa.parseOrdinalNumberPattern(t[Mb]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[eh]){let u=rh.parseYear(t[eh]);s.assign("year",u)}else{let u=Eb.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[Jp])return s;let a=oa.parseOrdinalNumberPattern(t[Jp]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};eu.default=Jo});var ah=p(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});var tu=Be(),Sb=je(),kb=ie(),sh=Be(),Pb=M(),Ab=new RegExp(`((?:in)\\s*)?(${kb.matchAnyPattern(tu.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${sh.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),xb=1,Cb=2,ih=3,ru=class extends Pb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Ab}innerExtract(e,t){let n=t[Cb].toLowerCase();if(t[0].length<=3&&!tu.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[xb]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=tu.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[ih]){let a=sh.parseYear(t[ih]);i.start.assign("year",a)}else{let a=Sb.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};nu.default=ru});var lh=p(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});var uh=Be(),Nb=ie(),Ib=M(),Fb=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${Nb.matchAnyPattern(uh.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),Ub=1,Lb=2,oh=3,qb=4,iu=class extends Ib.AbstractParserWithWordBoundaryChecking{innerPattern(){return Fb}innerExtract(e,t){let n=t[oh]?parseInt(t[oh]):uh.MONTH_DICTIONARY[t[Lb].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[Ub]);return{day:parseInt(t[qb]),month:n,year:i}}};su.default=iu});var ch=p(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});var Wb=M(),Yb=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),$b=1,jb=2,au=class extends Wb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Yb}innerExtract(e,t){let n=parseInt(t[jb]),i=parseInt(t[$b]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};ou.default=au});var Kr=p(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.AbstractTimeExpressionParser=void 0;var Je=ke();function Bb(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function Gb(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var dh=2,Pn=3,ua=4,la=5,Si=6,uu=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[dh]);if(o>100){if(this.strictMode||t[Pn]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[Pn]!=null){if(t[Pn].length==1&&!t[Si])return null;s=parseInt(t[Pn])}if(s>=60)return null;if(o>12&&(a=Je.Meridiem.PM),t[Si]!=null){if(o>12)return null;let u=t[Si][0].toLowerCase();u=="a"&&(a=Je.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=Je.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",Je.Meridiem.AM):i.imply("meridiem",Je.Meridiem.PM),t[la]!=null){let u=parseInt(t[la].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[ua]!=null){let u=parseInt(t[ua]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[la]!=null){let u=parseInt(t[la].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[ua]!=null){let u=parseInt(t[ua]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[dh]),a=0,o=-1;if(t[Pn]!=null?a=parseInt(t[Pn]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=Je.Meridiem.PM),t[Si]!=null){if(s>12)return null;let u=t[Si][0].toLowerCase();u=="a"&&(o=Je.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=Je.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==Je.Meridiem.AM?(n.start.imply("meridiem",Je.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",Je.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",Je.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",Je.Meridiem.PM)):s>12?i.imply("meridiem",Je.Meridiem.PM):s<=12&&i.imply("meridiem",Je.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=Bb(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=Gb(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};ca.AbstractTimeExpressionParser=uu});var fh=p(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});var da=ke(),Hb=Kr(),lu=class extends Hb.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",da.Meridiem.PM)):i<6&&n.assign("meridiem",da.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",da.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",da.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};cu.default=lu});var Ot=p(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.addImpliedTimeUnits=An.reverseTimeUnits=void 0;function zb(r){let e={};for(let t in r)e[t]=-r[t];return e}An.reverseTimeUnits=zb;function Kb(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}An.addImpliedTimeUnits=Kb});var ph=p(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});var fu=Be(),Vb=be(),Xb=M(),Zb=Ot(),Qb=new RegExp(`(${fu.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),Jb=new RegExp(`(${fu.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),du=class extends Xb.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Jb:Qb}innerExtract(e,t){let n=fu.parseTimeUnits(t[1]),i=Zb.reverseTimeUnits(n);return Vb.ParsingComponents.createRelativeFromReference(e.reference,i)}};pu.default=du});var hh=p(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});var mu=Be(),ev=be(),tv=M(),rv=new RegExp(`(${mu.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),nv=new RegExp("("+mu.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),iv=1,hu=class extends tv.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?nv:rv}innerExtract(e,t){let n=mu.parseTimeUnits(t[iv]);return ev.ParsingComponents.createRelativeFromReference(e.reference,n)}};yu.default=hu});var Cn=p(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.MergingRefiner=xn.Filter=void 0;var gu=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};xn.Filter=gu;var _u=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};xn.MergingRefiner=_u});var Qt=p(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});var sv=Cn(),Tu=class extends sv.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};bu.default=Tu});var mh=p(ki=>{"use strict";var av=ki&&ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ki,"__esModule",{value:!0});var ov=av(Qt()),vu=class extends ov.default{patternBetween(){return/^\s*(to|-)\s*$/i}};ki.default=vu});var yh=p(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.mergeDateTimeComponent=Nn.mergeDateTimeResult=void 0;var uv=ke();function lv(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=Eu(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=Eu(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}Nn.mergeDateTimeResult=lv;function Eu(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==uv.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}Nn.mergeDateTimeComponent=Eu});var or=p(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});var cv=Cn(),gh=yh(),wu=class extends cv.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?gh.mergeDateTimeResult(t,n):gh.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};Ru.default=wu});var _h=p(Pi=>{"use strict";var dv=Pi&&Pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pi,"__esModule",{value:!0});var fv=dv(or()),Ou=class extends fv.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};Pi.default=Ou});var Th=p(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});var pv=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),hv={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},Du=class{constructor(e){this.timezone=Object.assign(Object.assign({},hv),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=pv.exec(u);if(!l)return;let c=l[1].toUpperCase(),d=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(d===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${d} for: ${s.start}`)});let f=s.start.get("timezoneOffset");f!==null&&d!=f&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",d),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",d))}),t}};Mu.default=Du});var fa=p(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});var mv=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),yv=1,gv=2,_v=3,Su=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=mv.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[gv]),o=parseInt(s[_v]||"0"),u=a*60+o;u>14*60||(s[yv]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};ku.default=Su});var bh=p(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});var Pu=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};Au.default=Pu});var vh=p(Ai=>{"use strict";var Tv=Ai&&Ai.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ai,"__esModule",{value:!0});var bv=Tv(ee()),xu=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=bv.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};Ai.default=xu});var Eh=p(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});var vv=Cn(),Cu=class extends vv.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};Nu.default=Cu});var Uu=p(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});var Ev=M(),wv=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),Rv=1,Ov=2,Dv=3,wh=4,Mv=5,Rh=6,Oh=7,Dh=8,Mh=9,Iu=class extends Ev.AbstractParserWithWordBoundaryChecking{innerPattern(){return wv}innerExtract(e,t){let n={};if(n.year=parseInt(t[Rv]),n.month=parseInt(t[Ov]),n.day=parseInt(t[Dv]),t[wh]!=null)if(n.hour=parseInt(t[wh]),n.minute=parseInt(t[Mv]),t[Rh]!=null&&(n.second=parseInt(t[Rh])),t[Oh]!=null&&(n.millisecond=parseInt(t[Oh])),t[Dh]==null)n.timezoneOffset=0;else{let i=parseInt(t[Dh]),s=0;t[Mh]!=null&&(s=parseInt(t[Mh]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};Fu.default=Iu});var Sh=p(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});var Sv=Cn(),Lu=class extends Sv.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};qu.default=Lu});var ur=p(In=>{"use strict";var Vr=In&&In.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(In,"__esModule",{value:!0});In.includeCommonConfiguration=void 0;var kv=Vr(Th()),Pv=Vr(fa()),kh=Vr(bh()),Av=Vr(vh()),xv=Vr(Eh()),Cv=Vr(Uu()),Nv=Vr(Sh());function Iv(r,e=!1){return r.parsers.unshift(new Cv.default),r.refiners.unshift(new Nv.default),r.refiners.unshift(new kv.default),r.refiners.unshift(new Pv.default),r.refiners.unshift(new kh.default),r.refiners.push(new kh.default),r.refiners.push(new Av.default),r.refiners.push(new xv.default(e)),r}In.includeCommonConfiguration=Iv});var cr=p(ne=>{"use strict";var Fv=ne&&ne.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ne,"__esModule",{value:!0});ne.noon=ne.morning=ne.midnight=ne.yesterdayEvening=ne.evening=ne.lastNight=ne.tonight=ne.theDayAfter=ne.tomorrow=ne.theDayBefore=ne.yesterday=ne.today=ne.now=void 0;var Jt=be(),Fn=Fv(ee()),lr=Rt(),xi=ke();function Uv(r){let e=Fn.default(r.instant),t=new Jt.ParsingComponents(r,{});return lr.assignSimilarDate(t,e),lr.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}ne.now=Uv;function Lv(r){let e=Fn.default(r.instant),t=new Jt.ParsingComponents(r,{});return lr.assignSimilarDate(t,e),lr.implySimilarTime(t,e),t}ne.today=Lv;function qv(r){return Ph(r,1)}ne.yesterday=qv;function Ph(r,e){return Wu(r,-e)}ne.theDayBefore=Ph;function Wv(r){return Wu(r,1)}ne.tomorrow=Wv;function Wu(r,e){let t=Fn.default(r.instant),n=new Jt.ParsingComponents(r,{});return t=t.add(e,"day"),lr.assignSimilarDate(n,t),lr.implySimilarTime(n,t),n}ne.theDayAfter=Wu;function Yv(r,e=22){let t=Fn.default(r.instant),n=new Jt.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",xi.Meridiem.PM),lr.assignSimilarDate(n,t),n}ne.tonight=Yv;function $v(r,e=0){let t=Fn.default(r.instant),n=new Jt.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),lr.assignSimilarDate(n,t),n.imply("hour",e),n}ne.lastNight=$v;function jv(r,e=20){let t=new Jt.ParsingComponents(r,{});return t.imply("meridiem",xi.Meridiem.PM),t.imply("hour",e),t}ne.evening=jv;function Bv(r,e=20){let t=Fn.default(r.instant),n=new Jt.ParsingComponents(r,{});return t=t.add(-1,"day"),lr.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",xi.Meridiem.PM),n}ne.yesterdayEvening=Bv;function Gv(r){let e=new Jt.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}ne.midnight=Gv;function Hv(r,e=6){let t=new Jt.ParsingComponents(r,{});return t.imply("meridiem",xi.Meridiem.AM),t.imply("hour",e),t}ne.morning=Hv;function zv(r){let e=new Jt.ParsingComponents(r,{});return e.imply("meridiem",xi.Meridiem.AM),e.imply("hour",12),e}ne.noon=zv});var Ah=p(Nt=>{"use strict";var Kv=Nt&&Nt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Vv=Nt&&Nt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Xv=Nt&&Nt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Kv(e,r,t);return Vv(e,r),e},Zv=Nt&&Nt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Nt,"__esModule",{value:!0});var Qv=Zv(ee()),Jv=M(),eE=Rt(),Ci=Xv(cr()),tE=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,Yu=class extends Jv.AbstractParserWithWordBoundaryChecking{innerPattern(e){return tE}innerExtract(e,t){let n=Qv.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return Ci.now(e.reference);case"today":return Ci.today(e.reference);case"yesterday":return Ci.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return Ci.tomorrow(e.reference);case"tonight":return Ci.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),eE.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};Nt.default=Yu});var xh=p(Ni=>{"use strict";var rE=Ni&&Ni.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ni,"__esModule",{value:!0});var pa=ke(),nE=M(),iE=rE(ee()),sE=Rt(),aE=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,$u=class extends nE.AbstractParserWithWordBoundaryChecking{innerPattern(){return aE}innerExtract(e,t){let n=iE.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",pa.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",pa.Meridiem.PM),i.imply("hour",20);break;case"midnight":sE.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",pa.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",pa.Meridiem.AM),i.imply("hour",12);break}return i}};Ni.default=$u});var Xr=p(Cr=>{"use strict";var oE=Cr&&Cr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.toDayJSClosestWeekday=Cr.toDayJSWeekday=void 0;var Ch=oE(ee());function uE(r,e,t){if(!t)return Nh(r,e);let n=Ch.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}Cr.toDayJSWeekday=uE;function Nh(r,e){let t=Ch.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}Cr.toDayJSClosestWeekday=Nh});var Fh=p(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});var Ih=Be(),lE=ie(),cE=M(),dE=Xr(),fE=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${lE.matchAnyPattern(Ih.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),pE=1,hE=2,mE=3,ju=class extends cE.AbstractParserWithWordBoundaryChecking{innerPattern(){return fE}innerExtract(e,t){let n=t[hE].toLowerCase(),i=Ih.WEEKDAY_DICTIONARY[n],s=t[pE],a=t[mE],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=dE.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Bu.default=ju});var qh=p(Ii=>{"use strict";var yE=Ii&&Ii.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ii,"__esModule",{value:!0});var Lh=Be(),Uh=be(),gE=yE(ee()),_E=M(),TE=ie(),bE=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${TE.matchAnyPattern(Lh.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),vE=1,EE=2,Gu=class extends _E.AbstractParserWithWordBoundaryChecking{innerPattern(){return bE}innerExtract(e,t){let n=t[vE].toLowerCase(),i=t[EE].toLowerCase(),s=Lh.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,Uh.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,Uh.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=gE.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Ii.default=Gu});var It=p(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.ParsingContext=qn.Chrono=void 0;var Un=be(),wE=Hu(),Ln=class{constructor(e){e=e||wE.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new Ln({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new ha(e,t,n),s=[];return this.parsers.forEach(a=>{let o=Ln.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof Un.ParsingResult?c=l:l instanceof Un.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};qn.Chrono=Ln;var ha=class{constructor(e,t,n){this.text=e,this.reference=new Un.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof Un.ParsingComponents?e:new Un.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new Un.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};qn.ParsingContext=ha});var Zr=p(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});var Wh=je(),RE=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),ma=1,Yh=5,$h=2,jh=3,zu=4,Ku=class{constructor(e){this.groupNumberMonth=e?jh:$h,this.groupNumberDay=e?$h:jh}pattern(){return RE}extract(e,t){if(t[ma]=="/"||t[Yh]=="/"){t.index+=t[0].length;return}let n=t.index+t[ma].length,i=t[0].substr(t[ma].length,t[0].length-t[ma].length-t[Yh].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[zu]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[zu]){let u=parseInt(t[zu]),l=Wh.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=Wh.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};Vu.default=Ku});var Gh=p(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});var Bh=Be(),OE=be(),DE=M(),ME=Ot(),SE=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Bh.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Xu=class extends DE.AbstractParserWithWordBoundaryChecking{innerPattern(){return SE}innerExtract(e,t){let n=t[1].toLowerCase(),i=Bh.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=ME.reverseTimeUnits(i);break}return OE.ParsingComponents.createRelativeFromReference(e.reference,i)}};Zu.default=Xu});var zh=p(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});var kE=Cn(),Qu=be(),PE=Be(),AE=Ot();function Hh(r){return r.text.match(/\s+(before|from)$/i)!=null}function xE(r){return r.text.match(/\s+(after|since)$/i)!=null}var Ju=class extends kE.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!Hh(t)&&!xE(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=PE.parseTimeUnits(t.text);Hh(t)&&(i=AE.reverseTimeUnits(i));let s=Qu.ParsingComponents.createRelativeFromReference(new Qu.ReferenceWithTimezone(n.start.date()),i);return new Qu.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};el.default=Ju});var Hu=p(Oe=>{"use strict";var Ce=Oe&&Oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.createConfiguration=Oe.createCasualConfiguration=Oe.parseDate=Oe.parse=Oe.GB=Oe.strict=Oe.casual=void 0;var CE=Ce(Hp()),NE=Ce(Qp()),IE=Ce(nh()),FE=Ce(ah()),UE=Ce(lh()),LE=Ce(ch()),qE=Ce(fh()),WE=Ce(ph()),YE=Ce(hh()),$E=Ce(mh()),jE=Ce(_h()),BE=ur(),GE=Ce(Ah()),HE=Ce(xh()),zE=Ce(Fh()),KE=Ce(qh()),tl=It(),VE=Ce(Zr()),XE=Ce(Gh()),ZE=Ce(zh());Oe.casual=new tl.Chrono(Kh(!1));Oe.strict=new tl.Chrono(ya(!0,!1));Oe.GB=new tl.Chrono(ya(!1,!0));function QE(r,e,t){return Oe.casual.parse(r,e,t)}Oe.parse=QE;function JE(r,e,t){return Oe.casual.parseDate(r,e,t)}Oe.parseDate=JE;function Kh(r=!1){let e=ya(!1,r);return e.parsers.unshift(new GE.default),e.parsers.unshift(new HE.default),e.parsers.unshift(new FE.default),e.parsers.unshift(new KE.default),e.parsers.unshift(new XE.default),e}Oe.createCasualConfiguration=Kh;function ya(r=!0,e=!1){return BE.includeCommonConfiguration({parsers:[new VE.default(e),new CE.default,new NE.default,new IE.default,new zE.default,new UE.default,new LE.default,new qE.default(r),new WE.default(r),new YE.default(r)],refiners:[new ZE.default,new jE.default,new $E.default]},r)}Oe.createConfiguration=ya});var Vh=p(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});var e1=Kr(),rl=class extends e1.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};nl.default=rl});var Fi=p(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.parseTimeUnits=ae.TIME_UNITS_PATTERN=ae.parseYear=ae.YEAR_PATTERN=ae.parseNumberPattern=ae.NUMBER_PATTERN=ae.TIME_UNIT_DICTIONARY=ae.INTEGER_WORD_DICTIONARY=ae.MONTH_DICTIONARY=ae.WEEKDAY_DICTIONARY=void 0;var il=ie(),t1=je();ae.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};ae.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};ae.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};ae.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};ae.NUMBER_PATTERN=`(?:${il.matchAnyPattern(ae.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function Zh(r){let e=r.toLowerCase();return ae.INTEGER_WORD_DICTIONARY[e]!==void 0?ae.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}ae.parseNumberPattern=Zh;ae.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function r1(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return t1.findMostLikelyADYear(e)}ae.parseYear=r1;var Qh=`(${ae.NUMBER_PATTERN})\\s{0,5}(${il.matchAnyPattern(ae.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Xh=new RegExp(Qh,"i");ae.TIME_UNITS_PATTERN=il.repeatedTimeunitPattern("",Qh);function n1(r){let e={},t=r,n=Xh.exec(t);for(;n;)i1(e,n),t=t.substring(n[0].length),n=Xh.exec(t);return e}ae.parseTimeUnits=n1;function i1(r,e){let t=Zh(e[1]),n=ae.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var em=p(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});var Jh=Fi(),s1=ie(),a1=M(),o1=Xr(),u1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${s1.matchAnyPattern(Jh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),l1=1,c1=3,d1=2,sl=class extends a1.AbstractParserWithWordBoundaryChecking{innerPattern(){return u1}innerExtract(e,t){let n=t[d1].toLowerCase(),i=Jh.WEEKDAY_DICTIONARY[n],s=t[l1],a=t[c1],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=o1.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};al.default=sl});var im=p(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});var Nr=ke(),f1=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),p1=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),h1=2,tm=3,rm=4,nm=5,Wn=class{pattern(e){return f1}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=Wn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=p1.exec(i);return s&&(n.end=Wn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[h1]),t[tm]!=null&&(i=parseInt(t[tm])),i>=60||n>24)return null;if(n>=12&&(s=Nr.Meridiem.PM),t[nm]!=null){if(n>12)return null;let a=t[nm].toLowerCase();a.match(/morgen|vormittag/)&&(s=Nr.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=Nr.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=Nr.Meridiem.AM,n=0):n<6?s=Nr.Meridiem.AM:(s=Nr.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Nr.Meridiem.AM):e.imply("meridiem",Nr.Meridiem.PM),t[rm]!=null){let a=parseInt(t[rm]);if(a>=60)return null;e.assign("second",a)}return e}};ol.default=Wn});var sm=p(Ui=>{"use strict";var m1=Ui&&Ui.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ui,"__esModule",{value:!0});var y1=m1(Qt()),ul=class extends y1.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};Ui.default=ul});var am=p(Li=>{"use strict";var g1=Li&&Li.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Li,"__esModule",{value:!0});var _1=g1(or()),ll=class extends _1.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};Li.default=ll});var cl=p(Wi=>{"use strict";var T1=Wi&&Wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wi,"__esModule",{value:!0});var b1=T1(ee()),Qr=ke(),v1=M(),E1=Rt(),w1=Ot(),qi=class extends v1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=b1.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return E1.implySimilarTime(s,n),qi.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Qr.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Qr.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Qr.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Qr.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Qr.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Qr.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=w1.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Qr.Meridiem.AM);break}return e}};Wi.default=qi});var lm=p(Ft=>{"use strict";var R1=Ft&&Ft.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),O1=Ft&&Ft.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),D1=Ft&&Ft.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&R1(e,r,t);return O1(e,r),e},um=Ft&&Ft.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ft,"__esModule",{value:!0});var M1=um(ee()),S1=M(),Jr=Rt(),k1=um(cl()),om=D1(cr()),P1=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),A1=1,x1=2,dl=class extends S1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return P1}innerExtract(e,t){let n=M1.default(e.refDate),i=(t[A1]||"").toLowerCase(),s=(t[x1]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=om.now(e.reference);break;case"heute":a=om.today(e.reference);break;case"morgen":Jr.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),Jr.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),Jr.assignSimilarDate(a,n),Jr.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),Jr.assignSimilarDate(a,n),Jr.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),Jr.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=k1.default.extractTimeComponents(a,s)),a}};Ft.default=dl});var mm=p(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});var C1=je(),pm=Fi(),hm=Fi(),N1=ie(),I1=M(),F1=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${N1.matchAnyPattern(pm.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${hm.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),cm=1,dm=2,U1=3,fm=4,fl=class extends I1.AbstractParserWithWordBoundaryChecking{innerPattern(){return F1}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=pm.MONTH_DICTIONARY[t[U1].toLowerCase()],s=parseInt(t[cm]);if(s>31)return t.index=t.index+t[cm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[fm]){let a=hm.parseYear(t[fm]);n.start.assign("year",a)}else{let a=C1.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[dm]){let a=parseInt(t[dm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};pl.default=fl});var ym=p(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});var ga=Fi(),L1=be(),q1=M(),W1=Ot(),Y1=ie(),hl=class extends q1.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${ga.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${Y1.matchAnyPattern(ga.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?ga.parseNumberPattern(t[2]):1,i=ga.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=W1.reverseTimeUnits(s)),L1.ParsingComponents.createRelativeFromReference(e.reference,s)}};ml.default=hl});var Tm=p(Ne=>{"use strict";var Ut=Ne&&Ne.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.createConfiguration=Ne.createCasualConfiguration=Ne.parseDate=Ne.parse=Ne.strict=Ne.casual=void 0;var $1=ur(),gm=It(),j1=Ut(Zr()),B1=Ut(Uu()),G1=Ut(Vh()),H1=Ut(em()),z1=Ut(im()),K1=Ut(sm()),V1=Ut(am()),X1=Ut(lm()),Z1=Ut(cl()),Q1=Ut(mm()),J1=Ut(ym());Ne.casual=new gm.Chrono(_m());Ne.strict=new gm.Chrono(yl(!0));function ew(r,e,t){return Ne.casual.parse(r,e,t)}Ne.parse=ew;function tw(r,e,t){return Ne.casual.parseDate(r,e,t)}Ne.parseDate=tw;function _m(r=!0){let e=yl(!1,r);return e.parsers.unshift(new Z1.default),e.parsers.unshift(new X1.default),e.parsers.unshift(new J1.default),e}Ne.createCasualConfiguration=_m;function yl(r=!0,e=!0){return $1.includeCommonConfiguration({parsers:[new B1.default,new j1.default(e),new G1.default,new z1.default,new Q1.default,new H1.default],refiners:[new K1.default,new V1.default]},r)}Ne.createConfiguration=yl});var vm=p(Lt=>{"use strict";var rw=Lt&&Lt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),nw=Lt&&Lt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),iw=Lt&&Lt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&rw(e,r,t);return nw(e,r),e},sw=Lt&&Lt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Lt,"__esModule",{value:!0});var aw=sw(ee()),ow=ke(),uw=M(),bm=Rt(),_a=iw(cr()),gl=class extends uw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=aw.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return _a.now(e.reference);case"aujourd'hui":return _a.today(e.reference);case"hier":return _a.yesterday(e.reference);case"demain":return _a.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(bm.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",ow.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),bm.assignSimilarDate(s,n),s.imply("hour",0))}return s}};Lt.default=gl});var Em=p(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});var Yi=ke(),lw=M(),_l=class extends lw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",Yi.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",Yi.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",Yi.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",Yi.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",Yi.Meridiem.AM);break}return i}};Tl.default=_l});var wm=p(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});var cw=Kr(),bl=class extends cw.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};vl.default=bl});var Rm=p($i=>{"use strict";var dw=$i&&$i.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($i,"__esModule",{value:!0});var fw=dw(or()),El=class extends fw.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};$i.default=El});var Om=p(ji=>{"use strict";var pw=ji&&ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ji,"__esModule",{value:!0});var hw=pw(Qt()),wl=class extends hw.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};ji.default=wl});var Ir=p(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.parseTimeUnits=te.TIME_UNITS_PATTERN=te.parseYear=te.YEAR_PATTERN=te.parseOrdinalNumberPattern=te.ORDINAL_NUMBER_PATTERN=te.parseNumberPattern=te.NUMBER_PATTERN=te.TIME_UNIT_DICTIONARY=te.INTEGER_WORD_DICTIONARY=te.MONTH_DICTIONARY=te.WEEKDAY_DICTIONARY=void 0;var Rl=ie();te.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};te.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};te.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};te.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};te.NUMBER_PATTERN=`(?:${Rl.matchAnyPattern(te.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function Mm(r){let e=r.toLowerCase();return te.INTEGER_WORD_DICTIONARY[e]!==void 0?te.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}te.parseNumberPattern=Mm;te.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function mw(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}te.parseOrdinalNumberPattern=mw;te.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function yw(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}te.parseYear=yw;var Sm=`(${te.NUMBER_PATTERN})\\s{0,5}(${Rl.matchAnyPattern(te.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Dm=new RegExp(Sm,"i");te.TIME_UNITS_PATTERN=Rl.repeatedTimeunitPattern("",Sm);function gw(r){let e={},t=r,n=Dm.exec(t);for(;n;)_w(e,n),t=t.substring(n[0].length),n=Dm.exec(t);return e}te.parseTimeUnits=gw;function _w(r,e){let t=Mm(e[1]),n=te.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Pm=p(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});var km=Ir(),Tw=ie(),bw=M(),vw=Xr(),Ew=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${Tw.matchAnyPattern(km.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),ww=1,Rw=2,Ol=class extends bw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Ew}innerExtract(e,t){let n=t[ww].toLowerCase(),i=km.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[Rw];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=vw.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};Dl.default=Ol});var Nm=p(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});var Bi=ke(),Ow=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),Dw=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),Mw=2,Am=3,xm=4,Cm=5,Yn=class{pattern(e){return Ow}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=Yn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=Dw.exec(i);return s&&(n.end=Yn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[Mw]),t[Am]!=null&&(i=parseInt(t[Am])),i>=60||n>24)return null;if(n>=12&&(s=Bi.Meridiem.PM),t[Cm]!=null){if(n>12)return null;let a=t[Cm][0].toLowerCase();a=="a"&&(s=Bi.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=Bi.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Bi.Meridiem.AM):e.imply("meridiem",Bi.Meridiem.PM),t[xm]!=null){let a=parseInt(t[xm]);if(a>=60)return null;e.assign("second",a)}return e}};Ml.default=Yn});var Wm=p(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});var Sw=je(),Lm=Ir(),qm=Ir(),Ta=Ir(),kw=ie(),Pw=M(),Aw=new RegExp(`(?:on\\s*?)?(${Ta.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${Ta.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${kw.matchAnyPattern(Lm.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${qm.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Im=1,Fm=2,xw=3,Um=4,Sl=class extends Pw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Aw}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Lm.MONTH_DICTIONARY[t[xw].toLowerCase()],s=Ta.parseOrdinalNumberPattern(t[Im]);if(s>31)return t.index=t.index+t[Im].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Um]){let a=qm.parseYear(t[Um]);n.start.assign("year",a)}else{let a=Sw.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Fm]){let a=Ta.parseOrdinalNumberPattern(t[Fm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};kl.default=Sl});var $m=p(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});var Ym=Ir(),Cw=be(),Nw=M(),Iw=Ot(),Pl=class extends Nw.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${Ym.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=Ym.parseTimeUnits(t[1]),i=Iw.reverseTimeUnits(n);return Cw.ParsingComponents.createRelativeFromReference(e.reference,i)}};Al.default=Pl});var Bm=p(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});var jm=Ir(),Fw=be(),Uw=M(),xl=class extends Uw.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${jm.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=jm.parseTimeUnits(t[1]);return Fw.ParsingComponents.createRelativeFromReference(e.reference,n)}};Cl.default=xl});var Gm=p(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});var ba=Ir(),Lw=be(),qw=M(),Ww=Ot(),Yw=ie(),Nl=class extends qw.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${ba.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${Yw.matchAnyPattern(ba.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?ba.parseNumberPattern(t[1]):1,i=ba.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=Ww.reverseTimeUnits(s)),Lw.ParsingComponents.createRelativeFromReference(e.reference,s)}};Il.default=Nl});var Km=p(Ie=>{"use strict";var Dt=Ie&&Ie.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.createConfiguration=Ie.createCasualConfiguration=Ie.parseDate=Ie.parse=Ie.strict=Ie.casual=void 0;var $w=ur(),Hm=It(),jw=Dt(vm()),Bw=Dt(Em()),Gw=Dt(Zr()),Hw=Dt(wm()),zw=Dt(Rm()),Kw=Dt(Om()),Vw=Dt(Pm()),Xw=Dt(Nm()),Zw=Dt(Wm()),Qw=Dt($m()),Jw=Dt(Bm()),e0=Dt(Gm());Ie.casual=new Hm.Chrono(zm());Ie.strict=new Hm.Chrono(Fl(!0));function t0(r,e,t){return Ie.casual.parse(r,e,t)}Ie.parse=t0;function r0(r,e,t){return Ie.casual.parseDate(r,e,t)}Ie.parseDate=r0;function zm(r=!0){let e=Fl(!1,r);return e.parsers.unshift(new jw.default),e.parsers.unshift(new Bw.default),e.parsers.unshift(new e0.default),e}Ie.createCasualConfiguration=zm;function Fl(r=!0,e=!0){return $w.includeCommonConfiguration({parsers:[new Gw.default(e),new Zw.default,new Hw.default,new Xw.default,new Qw.default,new Jw.default,new Vw.default],refiners:[new zw.default,new Kw.default]},r)}Ie.createConfiguration=Fl});var Vm=p(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.toHankaku=void 0;function n0(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,i0)}va.toHankaku=n0;function i0(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var Zm=p(Gi=>{"use strict";var s0=Gi&&Gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gi,"__esModule",{value:!0});var Ul=Vm(),a0=je(),o0=s0(ee()),u0=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,Xm=1,l0=2,Ll=3,c0=4,d0=5,f0=6,ql=class{pattern(){return u0}extract(e,t){let n=parseInt(Ul.toHankaku(t[d0])),i=parseInt(Ul.toHankaku(t[f0])),s=e.createParsingComponents({day:i,month:n});if(t[Xm]&&t[Xm].match("\u540C|\u4ECA|\u672C")){let a=o0.default(e.refDate);s.assign("year",a.year())}if(t[l0]){let a=t[c0],o=a=="\u5143"?1:parseInt(Ul.toHankaku(a));t[Ll]=="\u4EE4\u548C"?o+=2018:t[Ll]=="\u5E73\u6210"?o+=1988:t[Ll]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=a0.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};Gi.default=ql});var Qm=p(Hi=>{"use strict";var p0=Hi&&Hi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Hi,"__esModule",{value:!0});var h0=p0(Qt()),Wl=class extends h0.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};Hi.default=Wl});var ey=p(qt=>{"use strict";var m0=qt&&qt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),y0=qt&&qt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),g0=qt&&qt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&m0(e,r,t);return y0(e,r),e},_0=qt&&qt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qt,"__esModule",{value:!0});var T0=_0(ee()),Jm=ke(),Yl=g0(cr()),b0=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,$l=class{pattern(){return b0}extract(e,t){let n=t[0],i=T0.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return Yl.yesterday(e.reference);case"\u660E\u65E5":return Yl.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return Yl.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",Jm.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",Jm.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};qt.default=$l});var ny=p(Fe=>{"use strict";var jl=Fe&&Fe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.createConfiguration=Fe.createCasualConfiguration=Fe.parseDate=Fe.parse=Fe.strict=Fe.casual=void 0;var v0=jl(Zm()),E0=jl(Qm()),w0=jl(ey()),ty=It();Fe.casual=new ty.Chrono(ry());Fe.strict=new ty.Chrono(Bl());function R0(r,e,t){return Fe.casual.parse(r,e,t)}Fe.parse=R0;function O0(r,e,t){return Fe.casual.parseDate(r,e,t)}Fe.parseDate=O0;function ry(){let r=Bl();return r.parsers.unshift(new w0.default),r}Fe.createCasualConfiguration=ry;function Bl(){return{parsers:[new v0.default],refiners:[new E0.default]}}Fe.createConfiguration=Bl});var Ea=p(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.parseYear=er.YEAR_PATTERN=er.MONTH_DICTIONARY=er.WEEKDAY_DICTIONARY=void 0;er.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};er.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};er.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function D0(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}er.parseYear=D0});var sy=p(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});var iy=Ea(),M0=ie(),S0=M(),k0=Xr(),P0=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${M0.matchAnyPattern(iy.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),A0=1,x0=2,C0=3,Gl=class extends S0.AbstractParserWithWordBoundaryChecking{innerPattern(){return P0}innerExtract(e,t){let n=t[x0].toLowerCase(),i=iy.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[A0],a=t[C0],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=k0.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Hl.default=Gl});var ay=p(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});var N0=Kr(),zl=class extends N0.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};Kl.default=zl});var oy=p(zi=>{"use strict";var I0=zi&&zi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zi,"__esModule",{value:!0});var F0=I0(or()),Vl=class extends F0.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};zi.default=Vl});var uy=p(Ki=>{"use strict";var U0=Ki&&Ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ki,"__esModule",{value:!0});var L0=U0(Qt()),Xl=class extends L0.default{patternBetween(){return/^\s*(?:-)\s*$/i}};Ki.default=Xl});var hy=p(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});var q0=je(),fy=Ea(),py=Ea(),W0=ie(),Y0=M(),$0=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${W0.matchAnyPattern(fy.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${py.YEAR_PATTERN}))?(?=\\W|$)`,"i"),ly=1,cy=2,j0=3,dy=4,Zl=class extends Y0.AbstractParserWithWordBoundaryChecking{innerPattern(){return $0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=fy.MONTH_DICTIONARY[t[j0].toLowerCase()],s=parseInt(t[ly]);if(s>31)return t.index=t.index+t[ly].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[dy]){let a=py.parseYear(t[dy]);n.start.assign("year",a)}else{let a=q0.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[cy]){let a=parseInt(t[cy]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Ql.default=Zl});var my=p(dr=>{"use strict";var B0=dr&&dr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),G0=dr&&dr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),H0=dr&&dr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&B0(e,r,t);return G0(e,r),e};Object.defineProperty(dr,"__esModule",{value:!0});var z0=M(),wa=H0(cr()),Jl=class extends z0.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return wa.now(e.reference);case"hoje":return wa.today(e.reference);case"amanha":case"amanh\xE3":return wa.tomorrow(e.reference);case"ontem":return wa.yesterday(e.reference)}return i}};dr.default=Jl});var yy=p(Vi=>{"use strict";var K0=Vi&&Vi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vi,"__esModule",{value:!0});var Ra=ke(),V0=M(),X0=Rt(),Z0=K0(ee()),ec=class extends V0.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=Z0.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",Ra.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",Ra.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",Ra.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":X0.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",Ra.Meridiem.AM),i.imply("hour",12);break}return i}};Vi.default=ec});var Ty=p(Ue=>{"use strict";var Fr=Ue&&Ue.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.createConfiguration=Ue.createCasualConfiguration=Ue.parseDate=Ue.parse=Ue.strict=Ue.casual=void 0;var Q0=ur(),gy=It(),J0=Fr(Zr()),eR=Fr(sy()),tR=Fr(ay()),rR=Fr(oy()),nR=Fr(uy()),iR=Fr(hy()),sR=Fr(my()),aR=Fr(yy());Ue.casual=new gy.Chrono(_y());Ue.strict=new gy.Chrono(tc(!0));function oR(r,e,t){return Ue.casual.parse(r,e,t)}Ue.parse=oR;function uR(r,e,t){return Ue.casual.parseDate(r,e,t)}Ue.parseDate=uR;function _y(r=!0){let e=tc(!1,r);return e.parsers.push(new sR.default),e.parsers.push(new aR.default),e}Ue.createCasualConfiguration=_y;function tc(r=!0,e=!0){return Q0.includeCommonConfiguration({parsers:[new J0.default(e),new eR.default,new tR.default,new iR.default],refiners:[new rR.default,new nR.default]},r)}Ue.createConfiguration=tc});var by=p(Xi=>{"use strict";var lR=Xi&&Xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xi,"__esModule",{value:!0});var cR=lR(Qt()),rc=class extends cR.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};Xi.default=rc});var vy=p(Zi=>{"use strict";var dR=Zi&&Zi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zi,"__esModule",{value:!0});var fR=dR(or()),nc=class extends fR.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};Zi.default=nc});var Ey=p(fr=>{"use strict";var pR=fr&&fr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),hR=fr&&fr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),mR=fr&&fr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&pR(e,r,t);return hR(e,r),e};Object.defineProperty(fr,"__esModule",{value:!0});var yR=M(),Oa=mR(cr()),ic=class extends yR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return Oa.now(e.reference);case"vandaag":return Oa.today(e.reference);case"morgen":case"morgend":return Oa.tomorrow(e.reference);case"gisteren":return Oa.yesterday(e.reference)}return i}};fr.default=ic});var wy=p(Qi=>{"use strict";var gR=Qi&&Qi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qi,"__esModule",{value:!0});var Da=ke(),_R=M(),TR=gR(ee()),bR=Rt(),vR=1,ER=2,sc=class extends _R.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=TR.default(e.refDate),i=e.createParsingComponents();switch(t[vR]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[ER].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",Da.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",Da.Meridiem.PM),i.imply("hour",20);break;case"middernacht":bR.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",Da.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",Da.Meridiem.AM),i.imply("hour",12);break}return i}};Qi.default=sc});var pt=p(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.parseTimeUnits=K.TIME_UNITS_PATTERN=K.parseYear=K.YEAR_PATTERN=K.parseOrdinalNumberPattern=K.ORDINAL_NUMBER_PATTERN=K.parseNumberPattern=K.NUMBER_PATTERN=K.TIME_UNIT_DICTIONARY=K.ORDINAL_WORD_DICTIONARY=K.INTEGER_WORD_DICTIONARY=K.MONTH_DICTIONARY=K.WEEKDAY_DICTIONARY=void 0;var Ma=ie(),wR=je();K.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};K.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};K.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};K.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};K.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};K.NUMBER_PATTERN=`(?:${Ma.matchAnyPattern(K.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function Oy(r){let e=r.toLowerCase();return K.INTEGER_WORD_DICTIONARY[e]!==void 0?K.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}K.parseNumberPattern=Oy;K.ORDINAL_NUMBER_PATTERN=`(?:${Ma.matchAnyPattern(K.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function RR(r){let e=r.toLowerCase();return K.ORDINAL_WORD_DICTIONARY[e]!==void 0?K.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}K.parseOrdinalNumberPattern=RR;K.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function OR(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return wR.findMostLikelyADYear(e)}K.parseYear=OR;var Dy=`(${K.NUMBER_PATTERN})\\s{0,5}(${Ma.matchAnyPattern(K.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Ry=new RegExp(Dy,"i");K.TIME_UNITS_PATTERN=Ma.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",Dy);function DR(r){let e={},t=r,n=Ry.exec(t);for(;n;)MR(e,n),t=t.substring(n[0].length),n=Ry.exec(t);return e}K.parseTimeUnits=DR;function MR(r,e){let t=Oy(e[1]),n=K.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Sy=p(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});var My=pt(),SR=be(),kR=M(),ac=class extends kR.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+My.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=My.parseTimeUnits(t[1]);return SR.ParsingComponents.createRelativeFromReference(e.reference,n)}};oc.default=ac});var Py=p(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});var ky=pt(),PR=ie(),AR=M(),xR=Xr(),CR=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${PR.matchAnyPattern(ky.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),NR=1,IR=2,FR=3,uc=class extends AR.AbstractParserWithWordBoundaryChecking{innerPattern(){return CR}innerExtract(e,t){let n=t[IR].toLowerCase(),i=ky.WEEKDAY_DICTIONARY[n],s=t[NR],a=t[FR],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=xR.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};lc.default=uc});var Fy=p(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});var UR=je(),Ny=pt(),Sa=pt(),Iy=pt(),LR=ie(),qR=M(),WR=new RegExp(`(?:on\\s*?)?(${Sa.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${Sa.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+LR.matchAnyPattern(Ny.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${Iy.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),YR=3,Ay=1,xy=2,Cy=4,cc=class extends qR.AbstractParserWithWordBoundaryChecking{innerPattern(){return WR}innerExtract(e,t){let n=Ny.MONTH_DICTIONARY[t[YR].toLowerCase()],i=Sa.parseOrdinalNumberPattern(t[Ay]);if(i>31)return t.index=t.index+t[Ay].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[Cy]){let u=Iy.parseYear(t[Cy]);s.assign("year",u)}else{let u=UR.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[xy])return s;let a=Sa.parseOrdinalNumberPattern(t[xy]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};dc.default=cc});var Wy=p(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});var Ly=pt(),$R=je(),jR=ie(),qy=pt(),BR=M(),GR=new RegExp(`(${jR.matchAnyPattern(Ly.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${qy.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),HR=1,Uy=2,fc=class extends BR.AbstractParserWithWordBoundaryChecking{innerPattern(){return GR}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[HR],s=Ly.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[Uy]){let a=qy.parseYear(t[Uy]);n.assign("year",a)}else{let a=$R.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};pc.default=fc});var Yy=p(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});var zR=M(),KR=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),VR=1,XR=2,hc=class extends zR.AbstractParserWithWordBoundaryChecking{innerPattern(){return KR}innerExtract(e,t){let n=parseInt(t[XR]),i=parseInt(t[VR]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};mc.default=hc});var $y=p(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});var ZR=Kr(),yc=class extends ZR.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};gc.default=yc});var Gy=p(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});var By=pt(),QR=ie(),JR=M(),eO=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${QR.matchAnyPattern(By.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),tO=1,rO=2,jy=3,nO=4,_c=class extends JR.AbstractParserWithWordBoundaryChecking{innerPattern(){return eO}innerExtract(e,t){let n=t[jy]?parseInt(t[jy]):By.MONTH_DICTIONARY[t[rO].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[tO]);return{day:parseInt(t[nO]),month:n,year:i}}};Tc.default=_c});var Hy=p(Ji=>{"use strict";var iO=Ji&&Ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ji,"__esModule",{value:!0});var sO=M(),ka=ke(),bc=Rt(),aO=iO(ee()),oO=1,uO=2,vc=class extends sO.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[oO].toLowerCase(),i=t[uO].toLowerCase(),s=e.createParsingComponents(),a=aO.default(e.refDate);switch(n){case"gisteren":bc.assignSimilarDate(s,a.add(-1,"day"));break;case"van":bc.assignSimilarDate(s,a);break;case"morgen":bc.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",ka.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",ka.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",ka.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",ka.Meridiem.PM),s.imply("hour",20);break}return s}};Ji.default=vc});var Ky=p(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});var zy=pt(),lO=be(),cO=M(),dO=Ot(),fO=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${zy.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Ec=class extends cO.AbstractParserWithWordBoundaryChecking{innerPattern(){return fO}innerExtract(e,t){let n=t[1].toLowerCase(),i=zy.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=dO.reverseTimeUnits(i);break}return lO.ParsingComponents.createRelativeFromReference(e.reference,i)}};wc.default=Ec});var Zy=p(es=>{"use strict";var pO=es&&es.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(es,"__esModule",{value:!0});var Xy=pt(),Vy=be(),hO=pO(ee()),mO=M(),yO=ie(),gO=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${yO.matchAnyPattern(Xy.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),_O=1,TO=2,Rc=class extends mO.AbstractParserWithWordBoundaryChecking{innerPattern(){return gO}innerExtract(e,t){let n=t[_O].toLowerCase(),i=t[TO].toLowerCase(),s=Xy.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,Vy.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,Vy.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=hO.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};es.default=Rc});var Qy=p(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});var Dc=pt(),bO=be(),vO=M(),EO=Ot(),wO=new RegExp("("+Dc.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),RO=new RegExp("("+Dc.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),Oc=class extends vO.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?RO:wO}innerExtract(e,t){let n=Dc.parseTimeUnits(t[1]),i=EO.reverseTimeUnits(n);return bO.ParsingComponents.createRelativeFromReference(e.reference,i)}};Mc.default=Oc});var Jy=p(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});var kc=pt(),OO=be(),DO=M(),MO=new RegExp("("+kc.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),SO=new RegExp("("+kc.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),kO=1,Sc=class extends DO.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?SO:MO}innerExtract(e,t){let n=kc.parseTimeUnits(t[kO]);return OO.ParsingComponents.createRelativeFromReference(e.reference,n)}};Pc.default=Sc});var ng=p(Le=>{"use strict";var Ge=Le&&Le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Le,"__esModule",{value:!0});Le.createConfiguration=Le.createCasualConfiguration=Le.parseDate=Le.parse=Le.strict=Le.casual=void 0;var PO=ur(),eg=It(),AO=Ge(by()),xO=Ge(vy()),CO=Ge(Ey()),NO=Ge(wy()),IO=Ge(Zr()),FO=Ge(Sy()),UO=Ge(Py()),LO=Ge(Fy()),tg=Ge(Wy()),qO=Ge(Yy()),WO=Ge($y()),YO=Ge(Gy()),$O=Ge(Hy()),jO=Ge(Ky()),BO=Ge(Zy()),GO=Ge(Qy()),HO=Ge(Jy());Le.casual=new eg.Chrono(rg());Le.strict=new eg.Chrono(Ac(!0));function zO(r,e,t){return Le.casual.parse(r,e,t)}Le.parse=zO;function KO(r,e,t){return Le.casual.parseDate(r,e,t)}Le.parseDate=KO;function rg(r=!0){let e=Ac(!1,r);return e.parsers.unshift(new CO.default),e.parsers.unshift(new NO.default),e.parsers.unshift(new $O.default),e.parsers.unshift(new tg.default),e.parsers.unshift(new BO.default),e.parsers.unshift(new jO.default),e}Le.createCasualConfiguration=rg;function Ac(r=!0,e=!0){return PO.includeCommonConfiguration({parsers:[new IO.default(e),new FO.default,new LO.default,new tg.default,new UO.default,new YO.default,new qO.default,new WO.default(r),new GO.default(r),new HO.default(r)],refiners:[new xO.default,new AO.default]},r)}Le.createConfiguration=Ac});var og=p(ts=>{"use strict";var VO=ts&&ts.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ts,"__esModule",{value:!0});var XO=VO(ee()),ZO=M(),QO=1,ig=2,JO=3,sg=4,ag=5,eD=6,xc=class extends ZO.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=XO.default(e.refDate),a=s;if(t[QO])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[ig]){let o=t[ig],u=t[JO];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[sg]){let u=t[sg][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[ag]){let o=t[ag];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[eD];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};ts.default=xc});var $n=p(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.zhStringToYear=nt.zhStringToNumber=nt.WEEKDAY_OFFSET=nt.NUMBER=void 0;nt.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};nt.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function tD(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?nt.NUMBER[n]:e*nt.NUMBER[n]:e+=nt.NUMBER[n]}return e}nt.zhStringToNumber=tD;function rD(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+nt.NUMBER[n]}return parseInt(e)}nt.zhStringToYear=rD});var lg=p(rs=>{"use strict";var nD=rs&&rs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rs,"__esModule",{value:!0});var iD=nD(ee()),sD=M(),en=$n(),Cc=1,ug=2,Nc=3,Ic=class extends sD.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(en.NUMBER).join("")+"]{4}|["+Object.keys(en.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(en.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(en.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=iD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[ug]);if(isNaN(s)&&(s=en.zhStringToNumber(t[ug])),i.start.assign("month",s),t[Nc]){let a=parseInt(t[Nc]);isNaN(a)&&(a=en.zhStringToNumber(t[Nc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[Cc]){let a=parseInt(t[Cc]);isNaN(a)&&(a=en.zhStringToYear(t[Cc])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};rs.default=Ic});var dg=p(ns=>{"use strict";var aD=ns&&ns.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ns,"__esModule",{value:!0});var oD=aD(ee()),uD=M(),cg=$n(),lD=new RegExp("(\\d+|["+Object.keys(cg.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),Fc=1,cD=2,Uc=class extends uD.AbstractParserWithWordBoundaryChecking{innerPattern(){return lD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[Fc]);if(isNaN(i)&&(i=cg.zhStringToNumber(t[Fc])),isNaN(i)){let u=t[Fc];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=oD.default(e.refDate),o=t[cD][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};ns.default=Uc});var pg=p(is=>{"use strict";var dD=is&&is.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(is,"__esModule",{value:!0});var fD=dD(ee()),pD=M(),fg=$n(),hD=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(fg.WEEKDAY_OFFSET).join("|")+")"),Lc=class extends pD.AbstractParserWithWordBoundaryChecking{innerPattern(){return hD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=fg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=fD.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};is.default=Lc});var hg=p(ss=>{"use strict";var mD=ss&&ss.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ss,"__esModule",{value:!0});var yD=mD(ee()),gD=M(),St=$n(),_D=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(St.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(St.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(St.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),TD=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(St.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(St.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(St.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),Pa=1,Aa=2,xa=3,Ca=4,Na=5,Ia=6,Mt=7,jn=8,Fa=9,qc=class extends gD.AbstractParserWithWordBoundaryChecking{innerPattern(){return _D}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=yD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[Pa]){var a=t[Pa];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[Ca]){var o=t[Ca];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[jn]){var d=parseInt(t[jn]);if(isNaN(d)&&(d=St.zhStringToNumber(t[jn])),d>=60)return null;i.start.assign("second",d)}if(u=parseInt(t[Ia]),isNaN(u)&&(u=St.zhStringToNumber(t[Ia])),t[Mt]?t[Mt]=="\u534A"?l=30:t[Mt]=="\u6B63"||t[Mt]=="\u6574"?l=0:(l=parseInt(t[Mt]),isNaN(l)&&(l=St.zhStringToNumber(t[Mt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[Fa]){if(u>12)return null;var f=t[Fa][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12))}else if(t[Aa]){var h=t[Aa],y=h[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[xa]){var m=t[xa],g=m[0];g=="\u4E0A"||g=="\u671D"||g=="\u65E9"||g=="\u51CC"?(c=0,u==12&&(u=0)):(g=="\u4E0B"||g=="\u664F"||g=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[Na]){var R=t[Na],O=R[0];O=="\u4E0A"||O=="\u671D"||O=="\u65E9"||O=="\u51CC"?(c=0,u==12&&(u=0)):(O=="\u4E0B"||O=="\u664F"||O=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=TD.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let P=s.clone();if(i.end=e.createParsingComponents(),t[Pa]){var a=t[Pa];a=="\u660E"||a=="\u807D"?n.hour()>1&&P.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?P.add(-1,"day"):a=="\u524D"?P.add(-2,"day"):a=="\u5927\u524D"?P.add(-3,"day"):a=="\u5F8C"?P.add(2,"day"):a=="\u5927\u5F8C"&&P.add(3,"day"),i.end.assign("day",P.date()),i.end.assign("month",P.month()+1),i.end.assign("year",P.year())}else if(t[Ca]){var o=t[Ca];o=="\u660E"||o=="\u807D"?P.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?P.add(-1,"day"):o=="\u524D"?P.add(-2,"day"):o=="\u5927\u524D"?P.add(-3,"day"):o=="\u5F8C"?P.add(2,"day"):o=="\u5927\u5F8C"&&P.add(3,"day"),i.end.assign("day",P.date()),i.end.assign("month",P.month()+1),i.end.assign("year",P.year())}else i.end.imply("day",P.date()),i.end.imply("month",P.month()+1),i.end.imply("year",P.year());if(u=0,l=0,c=-1,t[jn]){var d=parseInt(t[jn]);if(isNaN(d)&&(d=St.zhStringToNumber(t[jn])),d>=60)return null;i.end.assign("second",d)}if(u=parseInt(t[Ia]),isNaN(u)&&(u=St.zhStringToNumber(t[Ia])),t[Mt]?t[Mt]=="\u534A"?l=30:t[Mt]=="\u6B63"||t[Mt]=="\u6574"?l=0:(l=parseInt(t[Mt]),isNaN(l)&&(l=St.zhStringToNumber(t[Mt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[Fa]){if(u>12)return null;var f=t[Fa][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[Aa]){var h=t[Aa],y=h[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[xa]){var m=t[xa],g=m[0];g=="\u4E0A"||g=="\u671D"||g=="\u65E9"||g=="\u51CC"?(c=0,u==12&&(u=0)):(g=="\u4E0B"||g=="\u664F"||g=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[Na]){var R=t[Na],O=R[0];O=="\u4E0A"||O=="\u671D"||O=="\u65E9"||O=="\u51CC"?(c=0,u==12&&(u=0)):(O=="\u4E0B"||O=="\u664F"||O=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};ss.default=qc});var yg=p(as=>{"use strict";var bD=as&&as.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(as,"__esModule",{value:!0});var vD=bD(ee()),ED=M(),mg=$n(),wD=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(mg.WEEKDAY_OFFSET).join("|")+")"),Wc=class extends ED.AbstractParserWithWordBoundaryChecking{innerPattern(){return wD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=mg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=vD.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};as.default=Wc});var gg=p(os=>{"use strict";var RD=os&&os.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(os,"__esModule",{value:!0});var OD=RD(Qt()),Yc=class extends OD.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};os.default=Yc});var _g=p(us=>{"use strict";var DD=us&&us.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(us,"__esModule",{value:!0});var MD=DD(or()),$c=class extends MD.default{patternBetween(){return/^\s*$/i}};us.default=$c});var Tg=p(De=>{"use strict";var pr=De&&De.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(De,"__esModule",{value:!0});De.createConfiguration=De.createCasualConfiguration=De.parseDate=De.parse=De.strict=De.casual=De.hant=void 0;var jc=It(),SD=pr(fa()),kD=ur(),PD=pr(og()),AD=pr(lg()),xD=pr(dg()),CD=pr(pg()),ND=pr(hg()),ID=pr(yg()),FD=pr(gg()),UD=pr(_g());De.hant=new jc.Chrono(Bc());De.casual=new jc.Chrono(Bc());De.strict=new jc.Chrono(Gc());function LD(r,e,t){return De.casual.parse(r,e,t)}De.parse=LD;function qD(r,e,t){return De.casual.parseDate(r,e,t)}De.parseDate=qD;function Bc(){let r=Gc();return r.parsers.unshift(new PD.default),r}De.createCasualConfiguration=Bc;function Gc(){let r=kD.includeCommonConfiguration({parsers:[new AD.default,new CD.default,new ID.default,new ND.default,new xD.default],refiners:[new FD.default,new UD.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof SD.default)),r}De.createConfiguration=Gc});var wg=p(ls=>{"use strict";var WD=ls&&ls.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ls,"__esModule",{value:!0});var YD=WD(ee()),$D=M(),jD=1,bg=2,BD=3,vg=4,Eg=5,GD=6,Hc=class extends $D.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=YD.default(e.refDate),a=s;if(t[jD])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[bg]){let o=t[bg],u=t[BD];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[vg]){let u=t[vg][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[Eg]){let o=t[Eg];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[GD];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};ls.default=Hc});var Bn=p(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.zhStringToYear=it.zhStringToNumber=it.WEEKDAY_OFFSET=it.NUMBER=void 0;it.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};it.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function HD(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?it.NUMBER[n]:e*it.NUMBER[n]:e+=it.NUMBER[n]}return e}it.zhStringToNumber=HD;function zD(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+it.NUMBER[n]}return parseInt(e)}it.zhStringToYear=zD});var Og=p(cs=>{"use strict";var KD=cs&&cs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(cs,"__esModule",{value:!0});var VD=KD(ee()),XD=M(),tn=Bn(),zc=1,Rg=2,Kc=3,Vc=class extends XD.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(tn.NUMBER).join("")+"]{4}|["+Object.keys(tn.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(tn.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(tn.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=VD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[Rg]);if(isNaN(s)&&(s=tn.zhStringToNumber(t[Rg])),i.start.assign("month",s),t[Kc]){let a=parseInt(t[Kc]);isNaN(a)&&(a=tn.zhStringToNumber(t[Kc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[zc]){let a=parseInt(t[zc]);isNaN(a)&&(a=tn.zhStringToYear(t[zc])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};cs.default=Vc});var Mg=p(ds=>{"use strict";var ZD=ds&&ds.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ds,"__esModule",{value:!0});var QD=ZD(ee()),JD=M(),Dg=Bn(),eM=new RegExp("(\\d+|["+Object.keys(Dg.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),Xc=1,tM=2,Zc=class extends JD.AbstractParserWithWordBoundaryChecking{innerPattern(){return eM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[Xc]);if(isNaN(i)&&(i=Dg.zhStringToNumber(t[Xc])),isNaN(i)){let u=t[Xc];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=QD.default(e.refDate),o=t[tM][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};ds.default=Zc});var kg=p(fs=>{"use strict";var rM=fs&&fs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fs,"__esModule",{value:!0});var nM=rM(ee()),iM=M(),Sg=Bn(),sM=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(Sg.WEEKDAY_OFFSET).join("|")+")"),Qc=class extends iM.AbstractParserWithWordBoundaryChecking{innerPattern(){return sM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Sg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=nM.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};fs.default=Qc});var Pg=p(ps=>{"use strict";var aM=ps&&ps.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ps,"__esModule",{value:!0});var oM=aM(ee()),uM=M(),Pt=Bn(),lM=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Pt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Pt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Pt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),cM=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Pt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Pt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Pt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),Ua=1,La=2,qa=3,Wa=4,Ya=5,$a=6,kt=7,Gn=8,ja=9,Jc=class extends uM.AbstractParserWithWordBoundaryChecking{innerPattern(){return lM}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=oM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[Ua]){let c=t[Ua];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[Wa]){let c=t[Wa];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[Gn]){let c=parseInt(t[Gn]);if(isNaN(c)&&(c=Pt.zhStringToNumber(t[Gn])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[$a]),isNaN(a)&&(a=Pt.zhStringToNumber(t[$a])),t[kt]?t[kt]=="\u534A"?o=30:t[kt]=="\u6B63"||t[kt]=="\u6574"?o=0:(o=parseInt(t[kt]),isNaN(o)&&(o=Pt.zhStringToNumber(t[kt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[ja]){if(a>12)return null;let c=t[ja][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[La]){let d=t[La][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[qa]){let d=t[qa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[Ya]){let d=t[Ya][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=cM.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[Ua]){let c=t[Ua];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[Wa]){let c=t[Wa];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[Gn]){let c=parseInt(t[Gn]);if(isNaN(c)&&(c=Pt.zhStringToNumber(t[Gn])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[$a]),isNaN(a)&&(a=Pt.zhStringToNumber(t[$a])),t[kt]?t[kt]=="\u534A"?o=30:t[kt]=="\u6B63"||t[kt]=="\u6574"?o=0:(o=parseInt(t[kt]),isNaN(o)&&(o=Pt.zhStringToNumber(t[kt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[ja]){if(a>12)return null;let c=t[ja][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[La]){let d=t[La][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[qa]){let d=t[qa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[Ya]){let d=t[Ya][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};ps.default=Jc});var xg=p(hs=>{"use strict";var dM=hs&&hs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hs,"__esModule",{value:!0});var fM=dM(ee()),pM=M(),Ag=Bn(),hM=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(Ag.WEEKDAY_OFFSET).join("|")+")"),ed=class extends pM.AbstractParserWithWordBoundaryChecking{innerPattern(){return hM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Ag.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=fM.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};hs.default=ed});var Cg=p(ms=>{"use strict";var mM=ms&&ms.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ms,"__esModule",{value:!0});var yM=mM(Qt()),td=class extends yM.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};ms.default=td});var Ng=p(ys=>{"use strict";var gM=ys&&ys.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ys,"__esModule",{value:!0});var _M=gM(or()),rd=class extends _M.default{patternBetween(){return/^\s*$/i}};ys.default=rd});var Ig=p(Me=>{"use strict";var hr=Me&&Me.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Me,"__esModule",{value:!0});Me.createConfiguration=Me.createCasualConfiguration=Me.parseDate=Me.parse=Me.strict=Me.casual=Me.hans=void 0;var nd=It(),TM=hr(fa()),bM=ur(),vM=hr(wg()),EM=hr(Og()),wM=hr(Mg()),RM=hr(kg()),OM=hr(Pg()),DM=hr(xg()),MM=hr(Cg()),SM=hr(Ng());Me.hans=new nd.Chrono(id());Me.casual=new nd.Chrono(id());Me.strict=new nd.Chrono(sd());function kM(r,e,t){return Me.casual.parse(r,e,t)}Me.parse=kM;function PM(r,e,t){return Me.casual.parseDate(r,e,t)}Me.parseDate=PM;function id(){let r=sd();return r.parsers.unshift(new vM.default),r}Me.createCasualConfiguration=id;function sd(){let r=bM.includeCommonConfiguration({parsers:[new EM.default,new RM.default,new DM.default,new OM.default,new wM.default],refiners:[new MM.default,new SM.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof TM.default)),r}Me.createConfiguration=sd});var Ug=p(ht=>{"use strict";var Fg=ht&&ht.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),AM=ht&&ht.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),xM=ht&&ht.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Fg(e,r,t)},CM=ht&&ht.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Fg(e,r,t);return AM(e,r),e};Object.defineProperty(ht,"__esModule",{value:!0});ht.hans=void 0;xM(Tg(),ht);ht.hans=CM(Ig())});var st=p(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.parseTimeUnits=Y.TIME_UNITS_PATTERN=Y.parseYear=Y.YEAR_PATTERN=Y.parseOrdinalNumberPattern=Y.ORDINAL_NUMBER_PATTERN=Y.parseNumberPattern=Y.NUMBER_PATTERN=Y.TIME_UNIT_DICTIONARY=Y.ORDINAL_WORD_DICTIONARY=Y.INTEGER_WORD_DICTIONARY=Y.MONTH_DICTIONARY=Y.FULL_MONTH_NAME_DICTIONARY=Y.WEEKDAY_DICTIONARY=Y.REGEX_PARTS=void 0;var Ba=ie(),NM=je();Y.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};Y.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};Y.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};Y.MONTH_DICTIONARY=Object.assign(Object.assign({},Y.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});Y.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};Y.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};Y.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};Y.NUMBER_PATTERN=`(?:${Ba.matchAnyPattern(Y.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function qg(r){let e=r.toLowerCase();return Y.INTEGER_WORD_DICTIONARY[e]!==void 0?Y.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}Y.parseNumberPattern=qg;Y.ORDINAL_NUMBER_PATTERN=`(?:${Ba.matchAnyPattern(Y.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function IM(r){let e=r.toLowerCase();return Y.ORDINAL_WORD_DICTIONARY[e]!==void 0?Y.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}Y.parseOrdinalNumberPattern=IM;var ad="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";Y.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${ad}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${ad}|[5-9][0-9]${ad})`;function FM(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return NM.findMostLikelyADYear(e)}Y.parseYear=FM;var Wg=`(${Y.NUMBER_PATTERN})\\s{0,3}(${Ba.matchAnyPattern(Y.TIME_UNIT_DICTIONARY)})`,Lg=new RegExp(Wg,"i");Y.TIME_UNITS_PATTERN=Ba.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",Wg);function UM(r){let e={},t=r,n=Lg.exec(t);for(;n;)LM(e,n),t=t.substring(n[0].length).trim(),n=Lg.exec(t);return e}Y.parseTimeUnits=UM;function LM(r,e){let t=qg(e[1]),n=Y.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var $g=p(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});var gs=st(),qM=be(),WM=M(),Yg=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${gs.TIME_UNITS_PATTERN})${gs.REGEX_PARTS.rightBoundary}`,YM=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${Yg}`,gs.REGEX_PARTS.flags),$M=new RegExp(Yg,"i"),od=class extends WM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return gs.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?$M:YM}innerExtract(e,t){let n=gs.parseTimeUnits(t[1]);return qM.ParsingComponents.createRelativeFromReference(e.reference,n)}};ud.default=od});var zg=p(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});var jM=je(),_s=st(),Hg=st(),Ga=st(),BM=ie(),GM=M(),HM=new RegExp(`(?:\u0441)?\\s*(${Ga.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${Ga.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${BM.matchAnyPattern(_s.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${Hg.YEAR_PATTERN}(?![^\\s]\\d)))?${_s.REGEX_PARTS.rightBoundary}`,_s.REGEX_PARTS.flags),jg=1,Bg=2,zM=3,Gg=4,ld=class extends GM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return _s.REGEX_PARTS.leftBoundary}innerPattern(){return HM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=_s.MONTH_DICTIONARY[t[zM].toLowerCase()],s=Ga.parseOrdinalNumberPattern(t[jg]);if(s>31)return t.index=t.index+t[jg].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Gg]){let a=Hg.parseYear(t[Gg]);n.start.assign("year",a)}else{let a=jM.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Bg]){let a=Ga.parseOrdinalNumberPattern(t[Bg]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};cd.default=ld});var Xg=p(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});var Ts=st(),KM=je(),VM=ie(),Vg=st(),XM=M(),ZM=new RegExp(`((?:\u0432)\\s*)?(${VM.matchAnyPattern(Ts.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Vg.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,Ts.REGEX_PARTS.flags),QM=2,Kg=3,dd=class extends XM.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ts.REGEX_PARTS.leftBoundary}innerPattern(){return ZM}innerExtract(e,t){let n=t[QM].toLowerCase();if(t[0].length<=3&&!Ts.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=Ts.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Kg]){let a=Vg.parseYear(t[Kg]);i.start.assign("year",a)}else{let a=KM.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};fd.default=dd});var Qg=p(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});var Ha=ke(),JM=Kr(),Zg=st(),pd=class extends JM.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return Zg.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${Zg.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",Ha.Meridiem.PM)):i<6&&n.assign("meridiem",Ha.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",Ha.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",Ha.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};hd.default=pd});var Jg=p(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});var za=st(),eS=be(),tS=M(),rS=Ot(),nS=new RegExp(`(${za.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,za.REGEX_PARTS.flags),md=class extends tS.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return za.REGEX_PARTS.leftBoundary}innerPattern(){return nS}innerExtract(e,t){let n=za.parseTimeUnits(t[1]),i=rS.reverseTimeUnits(n);return eS.ParsingComponents.createRelativeFromReference(e.reference,i)}};yd.default=md});var e_=p(bs=>{"use strict";var iS=bs&&bs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bs,"__esModule",{value:!0});var sS=iS(Qt()),gd=class extends sS.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};bs.default=gd});var t_=p(vs=>{"use strict";var aS=vs&&vs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vs,"__esModule",{value:!0});var oS=aS(or()),_d=class extends oS.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};vs.default=_d});var r_=p(mr=>{"use strict";var uS=mr&&mr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),lS=mr&&mr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),cS=mr&&mr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&uS(e,r,t);return lS(e,r),e};Object.defineProperty(mr,"__esModule",{value:!0});var dS=M(),Es=cS(cr()),Td=st(),fS=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${Td.REGEX_PARTS.rightBoundary}`,Td.REGEX_PARTS.flags),bd=class extends dS.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Td.REGEX_PARTS.leftBoundary}innerPattern(e){return fS}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return Es.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return Es.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return Es.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return Es.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return Es.theDayBefore(e.reference,2)}return i}};mr.default=bd});var n_=p(Wt=>{"use strict";var pS=Wt&&Wt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),hS=Wt&&Wt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),mS=Wt&&Wt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&pS(e,r,t);return hS(e,r),e},yS=Wt&&Wt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wt,"__esModule",{value:!0});var gS=M(),rn=mS(cr()),_S=Rt(),TS=yS(ee()),vd=st(),bS=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${vd.REGEX_PARTS.rightBoundary}`,vd.REGEX_PARTS.flags),Ed=class extends gS.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return vd.REGEX_PARTS.leftBoundary}innerPattern(){return bS}innerExtract(e,t){let n=TS.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return rn.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return rn.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return rn.morning(e.reference);if(i.match(/в\s*полдень/))return rn.noon(e.reference);if(i.match(/прошлой\s*ночью/))return rn.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return rn.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),_S.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?rn.midnight(e.reference):s}};Wt.default=Ed});var i_=p(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});var ws=st(),vS=ie(),ES=M(),wS=Xr(),RS=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${vS.matchAnyPattern(ws.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${ws.REGEX_PARTS.rightBoundary}`,ws.REGEX_PARTS.flags),OS=1,DS=2,MS=3,wd=class extends ES.AbstractParserWithWordBoundaryChecking{innerPattern(){return RS}patternLeftBoundary(){return ws.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[DS].toLowerCase(),i=ws.WEEKDAY_DICTIONARY[n],s=t[OS],a=t[MS],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=wS.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Rd.default=wd});var a_=p(Os=>{"use strict";var SS=Os&&Os.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Os,"__esModule",{value:!0});var Rs=st(),s_=be(),kS=SS(ee()),PS=M(),AS=ie(),xS=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${AS.matchAnyPattern(Rs.TIME_UNIT_DICTIONARY)})(?=\\s*)${Rs.REGEX_PARTS.rightBoundary}`,Rs.REGEX_PARTS.flags),CS=1,NS=2,Od=class extends PS.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Rs.REGEX_PARTS.leftBoundary}innerPattern(){return xS}innerExtract(e,t){let n=t[CS].toLowerCase(),i=t[NS].toLowerCase(),s=Rs.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,s_.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,s_.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=kS.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Os.default=Od});var o_=p(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});var Ds=st(),IS=be(),FS=M(),US=Ot(),LS=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${Ds.TIME_UNITS_PATTERN})${Ds.REGEX_PARTS.rightBoundary}`,Ds.REGEX_PARTS.flags),Dd=class extends FS.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ds.REGEX_PARTS.leftBoundary}innerPattern(){return LS}innerExtract(e,t){let n=t[1].toLowerCase(),i=Ds.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=US.reverseTimeUnits(i);break}return IS.ParsingComponents.createRelativeFromReference(e.reference,i)}};Md.default=Dd});var c_=p(qe=>{"use strict";var mt=qe&&qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qe,"__esModule",{value:!0});qe.createConfiguration=qe.createCasualConfiguration=qe.parseDate=qe.parse=qe.strict=qe.casual=void 0;var qS=mt($g()),WS=mt(zg()),YS=mt(Xg()),$S=mt(Qg()),jS=mt(Jg()),BS=mt(e_()),GS=mt(t_()),HS=ur(),zS=mt(r_()),KS=mt(n_()),VS=mt(i_()),XS=mt(a_()),u_=It(),ZS=mt(Zr()),QS=mt(o_());qe.casual=new u_.Chrono(l_());qe.strict=new u_.Chrono(Sd(!0));function JS(r,e,t){return qe.casual.parse(r,e,t)}qe.parse=JS;function ek(r,e,t){return qe.casual.parseDate(r,e,t)}qe.parseDate=ek;function l_(){let r=Sd(!1);return r.parsers.unshift(new zS.default),r.parsers.unshift(new KS.default),r.parsers.unshift(new YS.default),r.parsers.unshift(new XS.default),r.parsers.unshift(new QS.default),r}qe.createCasualConfiguration=l_;function Sd(r=!0){return HS.includeCommonConfiguration({parsers:[new ZS.default(!0),new qS.default,new WS.default,new VS.default,new $S.default(r),new jS.default],refiners:[new GS.default,new BS.default]},r)}qe.createConfiguration=Sd});var ke=p(G=>{"use strict";var tk=G&&G.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),rk=G&&G.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Ur=G&&G.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&tk(e,r,t);return rk(e,r),e};Object.defineProperty(G,"__esModule",{value:!0});G.parseDate=G.parse=G.casual=G.strict=G.ru=G.zh=G.nl=G.pt=G.ja=G.fr=G.de=G.Meridiem=G.Chrono=G.en=void 0;var kd=Ur(Hu());G.en=kd;var nk=It();Object.defineProperty(G,"Chrono",{enumerable:!0,get:function(){return nk.Chrono}});var ik;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(ik=G.Meridiem||(G.Meridiem={}));var sk=Ur(Tm());G.de=sk;var ak=Ur(Km());G.fr=ak;var ok=Ur(ny());G.ja=ok;var uk=Ur(Ty());G.pt=uk;var lk=Ur(ng());G.nl=lk;var ck=Ur(Ug());G.zh=ck;var dk=Ur(c_());G.ru=dk;G.strict=kd.strict;G.casual=kd.casual;function fk(r,e,t){return G.casual.parse(r,e,t)}G.parse=fk;function pk(r,e,t){return G.casual.parseDate(r,e,t)}G.parseDate=pk});var nr=p(Yr=>{"use strict";Yr.__esModule=!0;var Yk;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})(Yk=Yr.Operators||(Yr.Operators={}));var $k;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})($k=Yr.StructuralCharacters||(Yr.StructuralCharacters={}));var jk;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(jk=Yr.Tokens||(Yr.Tokens={}))});var Qd=p(co=>{"use strict";co.__esModule=!0;var ve=nr();co.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};co.VALID_TOKENS={identifierOnly:[{name:ve.Tokens.IDENTIFIER},{name:ve.Tokens.STRUCTURAL_CHARACTER,value:ve.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:ve.Tokens.IDENTIFIER},{name:ve.Tokens.STRUCTURAL_CHARACTER,value:ve.StructuralCharacters.OPEN_PARENTHESIS},{name:ve.Tokens.OPERATOR,value:ve.Operators.NOT}],binaryOperator:[{name:ve.Tokens.OPERATOR,value:ve.Operators.AND},{name:ve.Tokens.OPERATOR,value:ve.Operators.OR},{name:ve.Tokens.OPERATOR,value:ve.Operators.XOR}],binaryOperatorOrClose:[{name:ve.Tokens.OPERATOR,value:ve.Operators.AND},{name:ve.Tokens.OPERATOR,value:ve.Operators.OR},{name:ve.Tokens.OPERATOR,value:ve.Operators.XOR},{name:ve.Tokens.STRUCTURAL_CHARACTER,value:ve.StructuralCharacters.CLOSE_PARENTHESIS}]}});var Jd=p(Er=>{"use strict";Er.__esModule=!0;var ii=nr();Er.STRUCTURAL_CHARACTERS={"(":ii.StructuralCharacters.OPEN_PARENTHESIS,")":ii.StructuralCharacters.CLOSE_PARENTHESIS};Er.OPERATORS={AND:ii.Operators.AND,OR:ii.Operators.OR,XOR:ii.Operators.XOR,NOT:ii.Operators.NOT};Er.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));Er.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);Er.COMMENT_DELIMITER=String.fromCodePoint(35);Er.EOL=String.fromCodePoint(10);Er.ESCAPE_CHARACTER=String.fromCodePoint(92)});var B_=p(wr=>{"use strict";var ef=wr&&wr.__assign||function(){return ef=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},ef.apply(this,arguments)};wr.__esModule=!0;var j_=nr(),hn=Jd();wr.createResult=function(r,e,t){return{token:ef({name:r},e!==null?{value:e}:{}),remainingString:t}};wr.getComment=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===hn.EOL){e=t;break}}return wr.createResult(j_.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};wr.getQuotedIdentifier=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===hn.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+hn.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===hn.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!hn.SEPARATORS.has(s)&&!hn.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: "+s+" Expected ) character or separator");break}}if(n===null)throw new Error("Unexpected end of expression: expected "+hn.QUOTED_IDENTIFIER_DELIMITER+" character");return wr.createResult(j_.Tokens.IDENTIFIER,t,r.slice(n+1))}});var G_=p(tf=>{"use strict";tf.__esModule=!0;var si=nr(),_t=Jd(),ai=B_();tf.lex=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!_t.SEPARATORS.has(s)){var a=_t.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===si.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!_t.SEPARATORS.has(o)&&o!==si.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: "+o+". A closing parenthesis should be followed by another closing parenthesis or whitespace");return ai.createResult(si.Tokens.STRUCTURAL_CHARACTER,_t.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===_t.QUOTED_IDENTIFIER_DELIMITER)return ai.getQuotedIdentifier(r.slice(i+1));if(s===_t.COMMENT_DELIMITER)return ai.getComment(r.slice(i+1));e=i}}else if(_t.SEPARATORS.has(s)||_t.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===_t.QUOTED_IDENTIFIER_DELIMITER||s===_t.COMMENT_DELIMITER)throw new Error("Unexpected character: "+s)}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(_t.OPERATORS[u]){if(n&&!_t.SEPARATORS.has(n))throw new Error("Unexpected character: "+n+". Operators should be separated using whitespace");return ai.createResult(si.Tokens.OPERATOR,_t.OPERATORS[u],l)}else return ai.createResult(si.Tokens.IDENTIFIER,u,l)}return ai.createResult(si.Tokens.EOF,null,"")}});var H_=p(Rr=>{"use strict";var Bk=Rr&&Rr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Rr.__esModule=!0;var Gk=G_(),oi=nr(),fo=Qd();Rr.newTokenGenerator=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=Gk.lex(e),s=i.token,a=i.remainingString;if(e=a,s.name!==oi.Tokens.COMMENT)return Rr.validateToken(s,t,n),s}}};Rr.getValue=function(r,e){var t=r(fo.VALID_TOKENS.identifierOrNot),n=t.value===oi.Operators.NOT;n&&(t=r(fo.VALID_TOKENS.identifierOnly));var i=t.name===oi.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?Bk(i,[{name:oi.Tokens.OPERATOR,value:oi.Operators.NOT}]):i};Rr.previousOperatorTakesPrecedent=function(r,e){return fo.OPERATOR_PRECEDENCE[r]<=fo.OPERATOR_PRECEDENCE[e]};Rr.validateToken=function(r,e,t){if(t===void 0&&(t=!1),r.name===oi.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")}});var nf=p(Fs=>{"use strict";var ui=Fs&&Fs.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Fs.__esModule=!0;var z_=nr(),K_=Qd(),po=H_();Fs.parse=function(r){if(typeof r!="string")throw new Error("Expected string but received "+typeof r);var e=po.newTokenGenerator(r);return rf(e)};var rf=function(r,e){e===void 0&&(e=!1);for(var t=ui(po.getValue(r,rf)),n=[];;){var i=e?K_.VALID_TOKENS.binaryOperatorOrClose:K_.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===z_.Tokens.EOF||s.name===z_.Tokens.STRUCTURAL_CHARACTER)return ui(t,ui(n).reverse());for(;n.length;){var a=n[n.length-1]||null;if(a&&po.previousOperatorTakesPrecedent(a.value,s.value))t=ui(t,[a]),n=n.slice(0,-1);else break}n=ui(n,[s]),t=ui(t,po.getValue(r,rf))}}});var sf=p(Or=>{"use strict";Or.__esModule=!0;var V_=nr();Or.andUtil=function(r,e){return r&&e};Or.orUtil=function(r,e){return r||e};Or.xorUtil=function(r,e){return r!==e};Or.notUtil=function(r){return!r};Or.isIdentifier=function(r){var e=r.name,t=r.value;return e===V_.Tokens.IDENTIFIER&&typeof t=="string"};Or.isOperator=function(r){var e=r.name,t=r.value;return e===V_.Tokens.OPERATOR&&typeof t=="string"};Or.throwInvalidExpression=function(r){throw new TypeError("Invalid postfix expression: "+r)}});var X_=p(uf=>{"use strict";var Us;uf.__esModule=!0;var af=nr(),of=sf();uf.OPERATOR_MAP=(Us={},Us[af.Operators.AND]=of.andUtil,Us[af.Operators.OR]=of.orUtil,Us[af.Operators.XOR]=of.xorUtil,Us)});var Q_=p(yn=>{"use strict";var lf=yn&&yn.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};yn.__esModule=!0;var Hk=nf(),Z_=nr(),zk=X_(),mn=sf();yn.getEvaluator=function(r){var e=Hk.parse(r);return function(t){return yn.evaluate(e,t)}};yn.evaluate=function(r,e){if(!Array.isArray(r))throw new Error(r+" should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator");var t=r.reduce(function(n,i,s){if(!(i&&(mn.isIdentifier(i)||mn.isOperator(i))))throw new Error("Invalid token: "+i+". Found in parsed expression at index "+s);if(i.name===Z_.Tokens.IDENTIFIER)return lf(n,[Boolean(e[i.value])]);var a=n[n.length-2],o=n[n.length-1];if(i.value===Z_.Operators.NOT)return o===void 0&&mn.throwInvalidExpression("missing identifier"),lf(n.slice(0,-1),[mn.notUtil(o)]);(o===void 0||a===void 0)&&mn.throwInvalidExpression("missing identifier");var u=zk.OPERATOR_MAP[i.value];return u||mn.throwInvalidExpression("unknown operator"),lf(n.slice(0,-2),[u(a,o)])},[]);return t.length!==1&&mn.throwInvalidExpression("too many identifiers after evaluation"),t[0]}});var eT=p(Ls=>{"use strict";Ls.__esModule=!0;var J_=Q_();Ls.getEvaluator=J_.getEvaluator;Ls.evaluate=J_.evaluate;var Kk=nf();Ls.parse=Kk.parse});var rP={};TT(rP,{default:()=>Po});module.exports=bT(rP);var dT=require("obsidian");var zn=require("obsidian");var iP=new Error("timeout while waiting for mutex to become available"),sP=new Error("mutex already locked"),vT=new Error("request for lock canceled"),xf=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},Co=class{constructor(e,t=vT){if(this._maxConcurrency=e,this._cancelError=t,this._queue=[],this._waiters=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}acquire(){let e=this.isLocked(),t=new Promise((n,i)=>this._queue.push({resolve:n,reject:i}));return e||this._dispatch(),t}runExclusive(e){return xf(this,void 0,void 0,function*(){let[t,n]=yield this.acquire();try{return yield e(t)}finally{n()}})}waitForUnlock(){return xf(this,void 0,void 0,function*(){return this.isLocked()?new Promise(t=>this._waiters.push({resolve:t})):Promise.resolve()})}isLocked(){return this._value<=0}release(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){let e=this._currentReleaser;this._currentReleaser=void 0,e()}}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatch(){let e=this._queue.shift();if(!e)return;let t=!1;this._currentReleaser=()=>{t||(t=!0,this._value++,this._resolveWaiters(),this._dispatch())},e.resolve([this._value--,this._currentReleaser])}_resolveWaiters(){this._waiters.forEach(e=>e.resolve()),this._waiters=[]}},ET=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},Vs=class{constructor(e){this._semaphore=new Co(1,e)}acquire(){return ET(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var bi=class{constructor(){this.hideTaskCount=!1;this.hideBacklinks=!1;this.hidePriority=!1;this.hideStartDate=!1;this.hideScheduledDate=!1;this.hideDoneDate=!1;this.hideDueDate=!1;this.hideRecurrenceRule=!1;this.hideEditButton=!1;this.hideUrgency=!0;this.shortMode=!1;this.explainQuery=!1}},On=class{constructor(e,t){this.defaultLayout=["description","priority","recurrenceRule","startDate","scheduledDate","dueDate","doneDate","blockLink"];e?this.options=e:this.options=new bi,t?this.layoutComponents=t:this.layoutComponents=this.defaultLayout,this.layoutComponents=this.applyOptions(this.options)}applyOptions(e){let t=(i,s,a)=>s?i.filter(o=>o!=a):i,n=this.layoutComponents;return n=t(n,e.hidePriority,"priority"),n=t(n,e.hideRecurrenceRule,"recurrenceRule"),n=t(n,e.hideStartDate,"startDate"),n=t(n,e.hideScheduledDate,"scheduledDate"),n=t(n,e.hideDueDate,"dueDate"),n=t(n,e.hideDoneDate,"doneDate"),n}};var Xs=["MO","TU","WE","TH","FR","SA","SU"],Re=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(Xs.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=Xs[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var pe=function(r){return r!=null},dt=function(r){return typeof r=="number"},No=function(r){return typeof r=="string"&&Xs.includes(r)},$e=Array.isArray,Et=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var V=function(r,e){var t=0,n=[];if($e(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},Cf=function(r){return $e(r)?r:[r]};function jr(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=V(t,e/t.length)),t.slice(0,e)+String(n))}var Nf=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},He=function(r,e){var t=r%e;return t*e<0?t+e:t},Zs=function(r,e){return{div:Math.floor(r/e),mod:He(r,e)}},ft=function(r){return!pe(r)||r.length===0},Ee=function(r){return!ft(r)},Z=function(r,e){return Ee(r)&&r.indexOf(e)!==-1};var Sr;(function(r){r.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],r.ONE_DAY=1e3*60*60*24,r.MAXYEAR=9999,r.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),r.PY_WEEKDAYS=[6,0,1,2,3,4,5],r.getYearDay=function(e){var t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((t.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/r.ONE_DAY)+1},r.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},r.isDate=function(e){return e instanceof Date},r.isValidDate=function(e){return r.isDate(e)&&!isNaN(e.getTime())},r.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},r.daysBetween=function(e,t){var n=e.getTime()-r.tzOffset(e),i=t.getTime()-r.tzOffset(t),s=n-i;return Math.round(s/r.ONE_DAY)},r.toOrdinal=function(e){return r.daysBetween(e,r.ORDINAL_BASE)},r.fromOrdinal=function(e){return new Date(r.ORDINAL_BASE.getTime()+e*r.ONE_DAY)},r.getMonthDays=function(e){var t=e.getUTCMonth();return t===1&&r.isLeapYear(e.getUTCFullYear())?29:r.MONTH_DAYS[t]},r.getWeekday=function(e){return r.PY_WEEKDAYS[e.getUTCDay()]},r.monthRange=function(e,t){var n=new Date(Date.UTC(e,t,1));return[r.getWeekday(n),r.getMonthDays(n)]},r.combine=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},r.clone=function(e){var t=new Date(e.getTime());return t},r.cloneDates=function(e){for(var t=[],n=0;n<e.length;n++)t.push(r.clone(e[n]));return t},r.sort=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},r.timeToUntilString=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[jr(n.getUTCFullYear().toString(),4,"0"),jr(n.getUTCMonth()+1,2,"0"),jr(n.getUTCDate(),2,"0"),"T",jr(n.getUTCHours(),2,"0"),jr(n.getUTCMinutes(),2,"0"),jr(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},r.untilStringToDate=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(Sr||(Sr={}));var I=Sr;var wT=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),sr=wT;var np=Ks(rp(),1),{__extends:Mn,__assign:Qe,__rest:mP,__decorate:yP,__param:gP,__metadata:_P,__awaiter:TP,__generator:bP,__exportStar:vP,__createBinding:EP,__values:wP,__read:RP,__spread:OP,__spreadArrays:DP,__spreadArray:T,__await:MP,__asyncGenerator:SP,__asyncDelegator:kP,__asyncValues:PP,__makeTemplateObject:AP,__importStar:xP,__importDefault:CP,__classPrivateFieldGet:NP,__classPrivateFieldSet:IP,__classPrivateFieldIn:FP}=np.default;var RT=function(r){Mn(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(sr),Fo=RT;var OT={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Br=OT;var ip=function(r,e){return r.indexOf(e)!==-1},DT=function(r){return r.toString()},MT=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},ST=function(){function r(e,t,n,i){if(t===void 0&&(t=DT),n===void 0&&(n=Br),i===void 0&&(i=MT),this.text=[],this.language=n||Br,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,d){return c-d}),a.sort(function(c,d){return d-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(pe(this.origOptions.byweekday)){var o=$e(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,d){return c.weekday-d.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(ip(["dtstart","wkst","freq"],n))return!0;if(!ip(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[k.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=dt(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),$e(e)||(e=[e]);var a=function(u,l,c){for(var d="",f=0;f<u.length;f++)f!==0&&(f===u.length-1?d+=" "+c+" ":d+=l+" "),d+=u[f];return d};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),Vt=ST;var kT=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function vi(r,e){e===void 0&&(e=Br);var t={},n=new kT(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var f=n.acceptNumber();if(f&&(t.interval=parseInt(f[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=k.DAILY,n.nextSymbol()&&(a(),d());break;case"weekday(s)":t.freq=k.WEEKLY,t.byweekday=[k.MO,k.TU,k.WE,k.TH,k.FR],n.nextSymbol(),d();break;case"week(s)":t.freq=k.WEEKLY,n.nextSymbol()&&(s(),d());break;case"hour(s)":t.freq=k.HOURLY,n.nextSymbol()&&(s(),d());break;case"minute(s)":t.freq=k.MINUTELY,n.nextSymbol()&&(s(),d());break;case"month(s)":t.freq=k.MONTHLY,n.nextSymbol()&&(s(),d());break;case"year(s)":t.freq=k.YEARLY,n.nextSymbol()&&(s(),d());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=k.WEEKLY;var h=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[k[h]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=u();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(k[y]),n.nextSymbol()}c(),d();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=k.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=o();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(m),n.nextSymbol()}s(),d();break;default:throw new Error("Unknown symbol")}}function s(){var f=n.accept("on"),h=n.accept("the");if(!!(f||h))do{var y=l(),m=u(),g=o();if(y)m?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(k[m].nth(y))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(y),n.accept("day(s)"));else if(m)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(k[m]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[k.MO,k.TU,k.WE,k.TH,k.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var R=n.acceptNumber();if(!R)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(R[0],10)];n.accept("comma");){if(R=n.acceptNumber(),!R)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(R[0],10))}}else if(g)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(g);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var f=n.accept("at");if(!!f)do{var h=n.acceptNumber();if(!h)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(h[0],10)];n.accept("comma");){if(h=n.acceptNumber(),!h)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(h[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var f=parseInt(n.value[1],10);if(f<-366||f>366)throw new Error("Nth out of range: "+f);return n.nextSymbol(),n.accept("last")?-f:f;default:return!1}}function c(){n.accept("on"),n.accept("the");var f=l();if(!!f)for(t.bymonthday=[f],n.nextSymbol();n.accept("comma");){if(f=l(),!f)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(f),n.nextSymbol()}}function d(){if(n.symbol==="until"){var f=Date.parse(n.text);if(!f)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(f)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var z;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(z||(z={}));function Ei(r){return r<z.HOURLY}var sp=function(r,e){return e===void 0&&(e=Br),new k(vi(r,e)||void 0)},Sn=["count","until","interval","byweekday","bymonthday","bymonth"];Vt.IMPLEMENTED=[];Vt.IMPLEMENTED[z.HOURLY]=Sn;Vt.IMPLEMENTED[z.MINUTELY]=Sn;Vt.IMPLEMENTED[z.DAILY]=["byhour"].concat(Sn);Vt.IMPLEMENTED[z.WEEKLY]=Sn;Vt.IMPLEMENTED[z.MONTHLY]=Sn;Vt.IMPLEMENTED[z.YEARLY]=["byweekno","byyearday"].concat(Sn);var ap=function(r,e,t,n){return new Vt(r,e,t,n).toString()},op=Vt.isFullyConvertible;var kn=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var up=function(r){Mn(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return Sr.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=He(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=Zs(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),ft(i)||Z(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=Zs(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(ft(i)||Z(i,this.hour))&&(ft(s)||Z(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=Zs(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(ft(i)||Z(i,this.hour))&&(ft(s)||Z(s,this.minute))&&(ft(a)||Z(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=Sr.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>Sr.MAXYEAR))return;t=Sr.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case z.YEARLY:return this.addYears(s);case z.MONTHLY:return this.addMonths(s);case z.WEEKLY:return this.addWeekly(s,a);case z.DAILY:return this.addDaily(s);case z.HOURLY:return this.addHours(s,n,o);case z.MINUTELY:return this.addMinutes(s,n,o,u);case z.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(kn);function Uo(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];Z(dp,s)||e.push(s),I.isDate(r[s])&&!I.isValidDate(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return Qe({},r)}function lp(r){var e=Qe(Qe({},wi),Uo(r));if(pe(e.byeaster)&&(e.freq=k.YEARLY),!(pe(e.freq)&&k.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),pe(e.wkst)?dt(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=k.MO.weekday,pe(e.bysetpos)){dt(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||Ee(e.byweekno)||Ee(e.byyearday)||Boolean(e.bymonthday)||Ee(e.bymonthday)||pe(e.byweekday)||pe(e.byeaster)))switch(e.freq){case k.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case k.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case k.WEEKLY:e.byweekday=[I.getWeekday(e.dtstart)];break}if(pe(e.bymonth)&&!$e(e.bymonth)&&(e.bymonth=[e.bymonth]),pe(e.byyearday)&&!$e(e.byyearday)&&dt(e.byyearday)&&(e.byyearday=[e.byyearday]),!pe(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if($e(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(pe(e.byweekno)&&!$e(e.byweekno)&&(e.byweekno=[e.byweekno]),!pe(e.byweekday))e.bynweekday=null;else if(dt(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(No(e.byweekday))e.byweekday=[Re.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof Re)!e.byweekday.n||e.freq>k.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(dt(u)){a.push(u);continue}else if(No(u)){a.push(Re.fromStr(u).weekday);continue}!u.n||e.freq>k.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=Ee(a)?a:null,e.bynweekday=Ee(o)?o:null}return pe(e.byhour)?dt(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<k.HOURLY?[e.dtstart.getUTCHours()]:null,pe(e.byminute)?dt(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<k.MINUTELY?[e.dtstart.getUTCMinutes()]:null,pe(e.bysecond)?dt(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<k.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function cp(r){var e=r.dtstart.getTime()%1e3;if(!Ei(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new kn(n,i,s,e))})})}),t}function Oi(r){var e=r.split(`
`).map(PT).filter(function(t){return t!==null});return Qe(Qe({},e[0]),e[1])}function Ri(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=I.untilStringToDate(i),e}function PT(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return fp(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return fp(r);case"DTSTART":return Ri(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function fp(r){var e=r.replace(/^RRULE:/i,""),t=Ri(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=z[o.toUpperCase()];break;case"WKST":t.wkst=wt[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=AT(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=xT(o);break;case"DTSTART":case"TZID":var c=Ri(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=I.untilStringToDate(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function AT(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(pp)}return pp(r)}function pp(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function xT(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return wt[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=wt[s].weekday;return new Re(a,i)})}var Gr=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=I.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:t})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid)!==null&&e!==void 0?e:"UTC"})),s=i.getTime()-n.getTime();return new Date(this.date.getTime()-s)},r}();function Di(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(wi),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!Z(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!pe(o)||$e(o)&&!o.length)){switch(a){case"FREQ":u=k.FREQUENCIES[r.freq];break;case"WKST":dt(o)?u=new Re(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=Cf(o).map(function(h){return h instanceof Re?h:$e(h)?new Re(h[0],h[1]):new Re(h)}).toString();break;case"DTSTART":t=CT(o,r.tzid);break;case"UNTIL":u=I.timeToUntilString(o,!r.tzid);break;default:if($e(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var d=e.map(function(h){var y=h[0],m=h[1];return"".concat(y,"=").concat(m.toString())}).join(";"),f="";return d!==""&&(f="RRULE:".concat(d)),[t,f].filter(function(h){return!!h}).join(`
`)}function CT(r,e){return r?"DTSTART"+new Gr(new Date(r),e).toString():""}function NT(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var hp=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?I.clone(t):I.cloneDates(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var d=0;d<i.length;d++){var f=i[d];if(!NT(t[f],c[f]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if($e(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new sr(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return $e(n)?I.cloneDates(n):n instanceof Date?I.clone(n):n},r}();var mp=T(T(T(T(T(T(T(T(T(T(T(T(T([],V(1,31),!0),V(2,28),!0),V(3,31),!0),V(4,30),!0),V(5,31),!0),V(6,30),!0),V(7,31),!0),V(8,31),!0),V(9,30),!0),V(10,31),!0),V(11,30),!0),V(12,31),!0),V(1,7),!0),yp=T(T(T(T(T(T(T(T(T(T(T(T(T([],V(1,31),!0),V(2,29),!0),V(3,31),!0),V(4,30),!0),V(5,31),!0),V(6,30),!0),V(7,31),!0),V(8,31),!0),V(9,30),!0),V(10,31),!0),V(11,30),!0),V(12,31),!0),V(1,7),!0),IT=Et(1,29),FT=Et(1,30),kr=Et(1,31),ze=Et(1,32),gp=T(T(T(T(T(T(T(T(T(T(T(T(T([],ze,!0),FT,!0),ze,!0),kr,!0),ze,!0),kr,!0),ze,!0),ze,!0),kr,!0),ze,!0),kr,!0),ze,!0),ze.slice(0,7),!0),_p=T(T(T(T(T(T(T(T(T(T(T(T(T([],ze,!0),IT,!0),ze,!0),kr,!0),ze,!0),kr,!0),ze,!0),ze,!0),kr,!0),ze,!0),kr,!0),ze,!0),ze.slice(0,7),!0),UT=Et(-28,0),LT=Et(-29,0),Pr=Et(-30,0),Ke=Et(-31,0),Tp=T(T(T(T(T(T(T(T(T(T(T(T(T([],Ke,!0),LT,!0),Ke,!0),Pr,!0),Ke,!0),Pr,!0),Ke,!0),Ke,!0),Pr,!0),Ke,!0),Pr,!0),Ke,!0),Ke.slice(0,7),!0),bp=T(T(T(T(T(T(T(T(T(T(T(T(T([],Ke,!0),UT,!0),Ke,!0),Pr,!0),Ke,!0),Pr,!0),Ke,!0),Ke,!0),Pr,!0),Ke,!0),Pr,!0),Ke,!0),Ke.slice(0,7),!0),vp=[0,31,60,91,121,152,182,213,244,274,305,335,366],Ep=[0,31,59,90,120,151,181,212,243,273,304,334,365],Lo=function(){for(var r=[],e=0;e<55;e++)r=r.concat(Et(7));return r}();function wp(r,e){var t=new Date(Date.UTC(r,0,1)),n=I.isLeapYear(r)?366:365,i=I.isLeapYear(r+1)?366:365,s=I.toOrdinal(t),a=I.getWeekday(t),o=Qe(Qe({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},qT(r)),{wnomask:null});if(ft(e.byweekno))return o;o.wnomask=V(0,n+7);var u,l,c=u=He(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+He(a-e.wkst,7)):l=n-c;for(var d=Math.floor(l/7),f=He(l,7),h=Math.floor(d+f/4),y=0;y<e.byweekno.length;y++){var m=e.byweekno[y];if(m<0&&(m+=h+1),m>0&&m<=h){var g=void 0;m>1?(g=c+(m-1)*7,c!==u&&(g-=7-u)):g=c;for(var R=0;R<7&&(o.wnomask[g]=1,g++,o.wdaymask[g]!==e.wkst);R++);}}if(Z(e.byweekno,1)){var g=c+h*7;if(c!==u&&(g-=7-u),g<n)for(var y=0;y<7&&(o.wnomask[g]=1,g+=1,o.wdaymask[g]!==e.wkst);y++);}if(c){var O=void 0;if(Z(e.byweekno,-1))O=-1;else{var P=I.getWeekday(new Date(Date.UTC(r-1,0,1))),X=He(7-P.valueOf()+e.wkst,7),ye=I.isLeapYear(r-1)?366:365,Te=void 0;X>=4?(X=0,Te=ye+He(P-e.wkst,7)):Te=n-c,O=Math.floor(52+He(Te,7)/4)}if(Z(e.byweekno,O))for(var g=0;g<c;g++)o.wnomask[g]=1}return o}function qT(r){var e=I.isLeapYear(r)?366:365,t=new Date(Date.UTC(r,0,1)),n=I.getWeekday(t);return e===365?{mmask:mp,mdaymask:_p,nmdaymask:bp,wdaymask:Lo.slice(n),mrange:Ep}:{mmask:yp,mdaymask:gp,nmdaymask:Tp,wdaymask:Lo.slice(n),mrange:vp}}function Rp(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===k.YEARLY)if(ft(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===k.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(ft(o))return a;a.nwdaymask=V(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],d=l[1]-1,f=0;f<s.bynweekday.length;f++){var h=void 0,y=s.bynweekday[f],m=y[0],g=y[1];g<0?(h=d+(g+1)*7,h-=He(i[h]-m,7)):(h=c+(g-1)*7,h+=He(7-i[h]+m,7)),c<=h&&h<=d&&(a.nwdaymask[h]=1)}return a}function Op(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),d=i%4,f=Math.floor(32+2*a+2*c-l-d)%7,h=Math.floor((t+11*l+22*f)/451),y=Math.floor((l+f-7*h+114)/31),m=(l+f-7*h+114)%31+1,g=Date.UTC(r,y-1,m+e),R=Date.UTC(r,0,1);return[Math.ceil((g-R)/(1e3*60*60*24))]}var WT=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=wp(e,n)),Ee(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=Rp(e,t,s,a,o,n)}pe(n.byeaster)&&(this.eastermask=Op(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[Et(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=V(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=V(null,this.yearlen+7),s=I.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=V(null,this.yearlen),s=I.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),I.sort(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new kn(e,t,a,i)});return I.sort(s),s},r.prototype.stimeset=function(e,t,n,i){return[new kn(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case z.YEARLY:return this.ydayset.bind(this);case z.MONTHLY:return this.mdayset.bind(this);case z.WEEKLY:return this.wdayset.bind(this);case z.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case z.HOURLY:return this.htimeset.bind(this);case z.MINUTELY:return this.mtimeset.bind(this);case z.SECONDLY:return this.stimeset.bind(this)}},r}(),Dp=WT;function Mp(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=He(c,e.length)):(u=Math.floor((c-1)/e.length),l=He(c-1,e.length));for(var d=[],f=t;f<n;f++){var h=s[f];!pe(h)||d.push(h)}var y=void 0;u<0?y=d.slice(u)[0]:y=d[u];var m=e[l],g=I.fromOrdinal(i.yearordinal+y),R=I.combine(g,m);Z(a,R)||a.push(R)}return I.sort(a),a}function ta(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return ar(r);var u=up.fromDate(t),l=new Dp(e);l.rebuild(u.year,u.month);for(var c=jT(l,u,e);;){var d=l.getdayset(n)(u.year,u.month,u.day),f=d[0],h=d[1],y=d[2],m=$T(f,h,y,l,e);if(Ee(a))for(var g=Mp(a,c,h,y,l,f),R=0;R<g.length;R++){var O=g[R];if(s&&O>s)return ar(r);if(O>=t){var P=Sp(O,e);if(!r.accept(P)||o&&(--o,!o))return ar(r)}}else for(var R=h;R<y;R++){var X=f[R];if(!!pe(X))for(var ye=I.fromOrdinal(l.yearordinal+X),Te=0;Te<c.length;Te++){var se=c[Te],O=I.combine(ye,se);if(s&&O>s)return ar(r);if(O>=t){var P=Sp(O,e);if(!r.accept(P)||o&&(--o,!o))return ar(r)}}}if(e.interval===0||(u.add(e,m),u.year>I.MAXYEAR))return ar(r);Ei(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function YT(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return Ee(n)&&!Z(n,r.mmask[e])||Ee(i)&&!r.wnomask[e]||Ee(s)&&!Z(s,r.wdaymask[e])||Ee(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!Z(r.eastermask,e)||(Ee(o)||Ee(u))&&!Z(o,r.mdaymask[e])&&!Z(u,r.nmdaymask[e])||Ee(l)&&(e<r.yearlen&&!Z(l,e+1)&&!Z(l,-r.yearlen+e)||e>=r.yearlen&&!Z(l,e+1-r.yearlen)&&!Z(l,-r.nextyearlen+e-r.yearlen))}function Sp(r,e){return new Gr(r,e.tzid).rezonedDate()}function ar(r){return r.getValue()}function $T(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=YT(n,o,i),s&&(r[o]=null)}return s}function jT(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return Ei(n)?cp(t):n>=k.HOURLY&&Ee(i)&&!Z(i,e.hour)||n>=k.MINUTELY&&Ee(s)&&!Z(s,e.minute)||n>=k.SECONDLY&&Ee(a)&&!Z(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var wt={MO:new Re(0),TU:new Re(1),WE:new Re(2),TH:new Re(3),FR:new Re(4),SA:new Re(5),SU:new Re(6)},wi={freq:z.YEARLY,dtstart:null,interval:1,wkst:wt.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},dp=Object.keys(wi),k=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new hp,this.origOptions=Uo(e);var n=lp(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return vi(e,t)},r.fromText=function(e,t){return sp(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return ta(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new Fo("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new sr("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!I.isValidDate(e)||!I.isValidDate(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new Fo("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new sr("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!I.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new sr("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!I.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new sr("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return Di(this.origOptions)},r.prototype.toText=function(e,t,n){return ap(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return op(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=z.YEARLY,r.MONTHLY=z.MONTHLY,r.WEEKLY=z.WEEKLY,r.DAILY=z.DAILY,r.HOURLY=z.HOURLY,r.MINUTELY=z.MINUTELY,r.SECONDLY=z.SECONDLY,r.MO=wt.MO,r.TU=wt.TU,r.WE=wt.WE,r.TH=wt.TH,r.FR=wt.FR,r.SA=wt.SA,r.SU=wt.SU,r.parseString=Oi,r.optionsToString=Di,r}();function kp(r,e,t,n,i,s){var a={},o=r.accept;function u(f,h){t.forEach(function(y){y.between(f,h,!0).forEach(function(m){a[Number(m)]=!0})})}i.forEach(function(f){var h=new Gr(f,s).rezonedDate();a[Number(h)]=!0}),r.accept=function(f){var h=Number(f);return isNaN(h)?o.call(this,f):!a[h]&&(u(new Date(h-1),new Date(h+1)),!a[h])?(a[h]=!0,o.call(this,f)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(f){var h=Number(f);return a[h]?!0:(a[h]=!0,o.call(this,f))});for(var l=0;l<n.length;l++){var c=new Gr(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(f){ta(r,f.options)});var d=r._result;switch(I.sort(d),r.method){case"all":case"between":return d;case"before":return d.length&&d[d.length-1]||null;case"after":default:return d.length&&d[0]||null}}var Pp={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function BT(r,e){var t=[],n=[],i=[],s=[],a=Ri(r),o=a.dtstart,u=a.tzid,l=VT(r,e.unfold);return l.forEach(function(c){var d;if(!!c){var f=KT(c),h=f.name,y=f.parms,m=f.value;switch(h.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: ".concat(y.join(",")));t.push(Oi(c));break;case"RDATE":var g=(d=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&d!==void 0?d:[],R=g[1];R&&!u&&(u=R),n=n.concat(Ap(m,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: ".concat(y.join(",")));i.push(Oi(m));break;case"EXDATE":s=s.concat(Ap(m,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+h)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function GT(r,e){var t=BT(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new Wo(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(f){c.rrule(new k(qo(f,o,u),l))}),i.forEach(function(f){c.rdate(f)}),s.forEach(function(f){c.exrule(new k(qo(f,o,u),l))}),a.forEach(function(f){c.exdate(f)}),e.compatible&&e.dtstart&&c.rdate(o),c}var d=n[0]||{};return new k(qo(d,d.dtstart||e.dtstart||o,d.tzid||e.tzid||u),l)}function ra(r,e){return e===void 0&&(e={}),GT(r,HT(e))}function qo(r,e,t){return Qe(Qe({},r),{dtstart:e,tzid:t})}function HT(r){var e=[],t=Object.keys(r),n=Object.keys(Pp);if(t.forEach(function(i){Z(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return Qe(Qe({},Pp),r)}function zT(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=Nf(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function KT(r){var e=zT(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function VT(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function XT(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function Ap(r,e){return XT(e),r.split(",").map(function(t){return I.untilStringToDate(t)})}function xp(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var Wo=function(r){Mn(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=xp.apply(n,["dtstart"]),n.tzid=xp.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return kp(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){Cp(t,this._rrule)},e.prototype.exrule=function(t){Cp(t,this._exrule)},e.prototype.rdate=function(t){Np(t,this._rdate)},e.prototype.exdate=function(t){Np(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return ra(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return ra(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(Di({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(Ip("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(Ip("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(k);function Cp(r,e){if(!(r instanceof k))throw new TypeError(String(r)+" is not RRule instance");Z(e.map(String),String(r))||e.push(r)}function Np(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");Z(e.map(Number),Number(r))||(e.push(r),I.sort(e))}function Ip(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return I.timeToUntilString(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}var d_=Ks(ke()),yr=class{static parseDate(e,t=!1){return window.moment(d_.parseDate(e,void 0,{forwardDate:t})).startOf("day")}};var ge=class{constructor(e,t=[],n=""){this.description=e,this.symbol=n,this.children=t}static booleanAnd(e){return this.combineOrCreateExplanation("All of",e,"AND")}static booleanOr(e){return this.combineOrCreateExplanation("At least one of",e,"OR")}static booleanNot(e){return new ge("None of",e,"NOT")}static booleanXor(e){return new ge("Exactly one of",e,"XOR")}asString(e=""){if(this.children.length==0)return e+this.description;let t=e+`${this.symbol}`;this.children.length>1&&(t+=` (${this.description})`),t+=":";let n=e+"  ";for(let i=0;i<this.children.length;i++)t+=`
${this.children[i].asString(n)}`;return t}static combineOrCreateExplanation(e,t,n){if(t.length===2){let i=t[0],s=t[1];if(i.symbol===n&&s.symbol==="")return i.children.push(s),i}return new ge(e,t,n)}};var gr=class{constructor(e,t,n){this.property=e,this.comparator=gr.maybeReverse(n,t)}static maybeReverse(e,t){return e?gr.makeReversedComparator(t):t}static makeReversedComparator(e){return(t,n)=>e(t,n)*-1}};function Ka(r){return r.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}var Hn=class{constructor(e,t){this.property=e,this.grouper=t}};var oe=class{canCreateFilterForLine(e){return oe.lineMatchesFilter(this.filterRegExp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}fieldNameSingular(){return this.fieldName()}fieldNameSingularEscaped(){return Ka(this.fieldNameSingular())}supportsSorting(){return!1}parseSortLine(e){return!this.supportsSorting()||!this.canCreateSorterForLine(e)?null:this.createSorterFromLine(e)}canCreateSorterForLine(e){return this.supportsSorting()?oe.lineMatchesFilter(this.sorterRegExp(),e):!1}createSorterFromLine(e){if(!this.supportsSorting())return null;let t=oe.getMatch(this.sorterRegExp(),e);if(t===null)return null;let n=!!t[1];return this.createSorter(n)}sorterRegExp(){if(!this.supportsSorting())throw Error(`sorterRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^sort by ${this.fieldNameSingularEscaped()}( reverse)?`)}comparator(){throw Error(`comparator() unimplemented for ${this.fieldNameSingular()}`)}createSorter(e){return new gr(this.fieldNameSingular(),this.comparator(),e)}createNormalSorter(){return this.createSorter(!1)}createReverseSorter(){return this.createSorter(!0)}supportsGrouping(){return!1}grouper(){throw Error(`grouper() unimplemented for ${this.fieldNameSingular()}`)}createGrouper(){return new Hn(this.fieldNameSingular(),this.grouper())}};var Ve=class{constructor(e,t,n){this.instruction=e,this.explanation=n,this.filterFunction=t}explainFilterIndented(e){let t=this.explanation;return t.asString()===this.instruction?`${e}${this.instruction}
`:`${e}${this.instruction} =>
${t.asString("  ")}
`}},le=class{constructor(e){this.instruction=e}get filter(){return this._filter}set filter(e){this._filter=e}get filterFunction(){if(this._filter)return this._filter.filterFunction}static fromFilter(e){let t=new le(e.instruction);return t.filter=e,t}static fromError(e,t){let n=new le(e);return n.error=t,n}};var Va=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e==this._instruction}createFilterOrErrorMessage(e){let t=new le(e);return e===this._instruction?(t.filter=new Ve(e,this._filter,new ge(e)),t):(t.error=`do not understand filter: ${e}`,t)}};var Lr=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new Va(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let n of this._filters){let i=n.createFilterOrErrorMessage(e);if(i.error===void 0)return i}let t=new le(e);return t.error=`do not understand filter: ${e}`,t}};var _e=class extends oe{constructor(){super();this.filterInstructions=new Lr,this.filterInstructions.add(`has ${this.fieldName()} date`,t=>this.date(t)!==null),this.filterInstructions.add(`no ${this.fieldName()} date`,t=>this.date(t)===null),this.filterInstructions.add(`${this.fieldName()} date is invalid`,t=>{let n=this.date(t);return n!==null&&!n.isValid()})}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);if(n.filter!==void 0)return n;let i=new le(t),s=oe.getMatch(this.filterRegExp(),t),a;if(s!==null){let o=yr.parseDate(s[2]);if(!o.isValid())i.error="do not understand "+this.fieldName()+" date";else{let u;s[1]==="before"?(a=c=>{let d=this.date(c);return d?d.isBefore(o):this.filterResultIfFieldMissing()},u=" "+s[1]):s[1]==="after"?(a=c=>{let d=this.date(c);return d?d.isAfter(o):this.filterResultIfFieldMissing()},u=" "+s[1]):(a=c=>{let d=this.date(c);return d?d.isSame(o):this.filterResultIfFieldMissing()},u=" on");let l=_e.getExplanationString(this.fieldName(),u,this.filterResultIfFieldMissing(),o);i.filter=new Ve(t,a,new ge(l))}}else i.error="do not understand query filter ("+this.fieldName()+" date)";return i}static getExplanationString(t,n,i,s){let a=s.format("YYYY-MM-DD (dddd Do MMMM YYYY)"),o=`${t} date is${n} ${a}`;return i&&(o+=` OR no ${t} date`),o}supportsSorting(){return!0}comparator(){return(t,n)=>_e.compareByDate(this.date(t),this.date(n))}static compareByDate(t,n){return t!==null&&n===null?-1:t===null&&n!==null?1:t!==null&&n!==null?t.isValid()&&!n.isValid()?-1:!t.isValid()&&n.isValid()||t.isAfter(n)?1:t.isBefore(n)?-1:0:0}};var We=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=k.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new k(u);return new We({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(){var t;let e;if(this.baseOnToday){let n=window.moment(),i=new k(vt(we({},this.rrule.origOptions),{dtstart:n.startOf("day").utc(!0).toDate()}));e=this.nextAfter(n.endOf("day"),i)}else{let n=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day");e=this.nextAfter(n,this.rrule)}if(e!==null){let n=null,i=null,s=null;if(this.referenceDate){if(this.startDate){let a=window.moment.duration(this.startDate.diff(this.referenceDate));n=window.moment(e),n.add(Math.round(a.asDays()),"days")}if(this.scheduledDate){let a=window.moment.duration(this.scheduledDate.diff(this.referenceDate));i=window.moment(e),i.add(Math.round(a.asDays()),"days")}if(this.dueDate){let a=window.moment.duration(this.dueDate.diff(this.referenceDate));s=window.moment(e),s.add(Math.round(a.asDays()),"days")}}return{startDate:n,scheduledDate:i,dueDate:s}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||_e.compareByDate(this.startDate,e.startDate)!==0||_e.compareByDate(this.scheduledDate,e.scheduledDate)!==0||_e.compareByDate(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}nextAfter(e,t){e.utc(!0);let n=window.moment(t.after(e.toDate())),i=this.toText(),s=i.match(/every( \d+)? month(s)?(.*)?/);s!==null&&(i.includes(" on ")||(n=We.nextAfterMonths(e,n,t,s[1])));let a=i.match(/every( \d+)? year(s)?(.*)?/);return a!==null&&(n=We.nextAfterYears(e,n,t,a[1])),We.addTimezone(n).toDate()}static nextAfterMonths(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));We.isSkippingTooManyMonths(e,t,s);)t=We.fromOneDayEarlier(e,n);return t}static isSkippingTooManyMonths(e,t,n){let i=t.month()-e.month();return i+=(t.year()-e.year())*12,i>n}static nextAfterYears(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));We.isSkippingTooManyYears(e,t,s);)t=We.fromOneDayEarlier(e,n);return t}static isSkippingTooManyYears(e,t,n){return t.year()-e.year()>n}static fromOneDayEarlier(e,t){e.subtract(1,"days").endOf("day");let n=t.origOptions;return n.dtstart=e.startOf("day").toDate(),t=new k(n),window.moment(t.after(e.toDate()))}static addTimezone(e){return window.moment.utc(e).local(!0).startOf("day")}};var tr=(a=>(a.TODO="TODO",a.DONE="DONE",a.IN_PROGRESS="IN_PROGRESS",a.CANCELLED="CANCELLED",a.NON_TASK="NON_TASK",a.EMPTY="EMPTY",a))(tr||{}),Ye=class{constructor(e,t,n,i,s="TODO"){this.symbol=e,this.name=t,this.nextStatusSymbol=n,this.availableAsCommand=i,this.type=s}};var at=class{get symbol(){return this.configuration.symbol}get name(){return this.configuration.name}get nextStatusSymbol(){return this.configuration.nextStatusSymbol}get availableAsCommand(){return this.configuration.availableAsCommand}get type(){return this.configuration.type}constructor(e){this.configuration=e}static makeDone(){return new at(new Ye("x","Done"," ",!0,"DONE"))}static makeEmpty(){return new at(new Ye("","EMPTY","",!0,"EMPTY"))}static makeTodo(){return new at(new Ye(" ","Todo","x",!0,"TODO"))}static makeCancelled(){return new at(new Ye("-","Cancelled"," ",!0,"CANCELLED"))}static makeInProgress(){return new at(new Ye("/","In Progress","x",!0,"IN_PROGRESS"))}static getTypeForUnknownSymbol(e){switch(e){case"x":case"X":return"DONE";case"/":return"IN_PROGRESS";case"-":return"CANCELLED";case"":return"EMPTY";case" ":default:return"TODO"}}static getTypeFromStatusTypeString(e){return tr[e]||"TODO"}static createUnknownStatus(e){return new at(new Ye(e,"Unknown","x",!1,"TODO"))}static createFromImportedValue(e){let t=e[0],n=at.getTypeFromStatusTypeString(e[3]);return new at(new Ye(t,e[1],e[2],!1,n))}isCompleted(){return this.type==="DONE"}previewText(){let e="";return at.tasksPluginCanCreateCommandsForStatuses()&&this.availableAsCommand&&(e=" Available as a command."),`- [${this.symbol}] => [${this.nextStatusSymbol}], name: '${this.name}', type: '${this.configuration.type}'.${e}`}static tasksPluginCanCreateCommandsForStatuses(){return!1}},j=at;j.DONE=at.makeDone(),j.EMPTY=at.makeEmpty(),j.TODO=at.makeTodo();var Pe=class{constructor(){this.coreStatuses=[j.makeTodo().configuration,j.makeDone().configuration],this.customStatuses=[j.makeInProgress().configuration,j.makeCancelled().configuration]}static addStatus(e,t){e.push(t)}static replaceStatus(e,t,n){let i=this.findStatusIndex(t,e);return i<=-1?!1:(e.splice(i,1,n),!0)}static findStatusIndex(e,t){let n=new j(e);return t.findIndex(i=>new j(i).previewText()==n.previewText())}static deleteStatus(e,t){let n=this.findStatusIndex(t,e);return n<=-1?!1:(e.splice(n,1),!0)}static deleteAllCustomStatuses(e){e.customStatuses.splice(0)}static resetAllCustomStatuses(e){Pe.deleteAllCustomStatuses(e),new Pe().customStatuses.forEach(n=>{Pe.addStatus(e.customStatuses,n)})}static bulkAddStatusCollection(e,t){let n=[];return t.forEach(i=>{e.customStatuses.find(a=>a.symbol==i[0]&&a.name==i[1]&&a.nextStatusSymbol==i[2])?n.push(`The status ${i[1]} (${i[0]}) is already added.`):Pe.addStatus(e.customStatuses,j.createFromImportedValue(i))}),n}static applyToStatusRegistry(e,t){t.clearStatuses(),e.coreStatuses.forEach(n=>{t.add(n)}),e.customStatuses.forEach(n=>{t.add(n)})}};var p_=[{index:9999,internalName:"INTERNAL_TESTING_ENABLED_BY_DEFAULT",displayName:"Test Item. Used to validate the Feature Framework.",description:"Description",enabledByDefault:!0,stable:!1}];var rr=class{constructor(e,t,n,i,s,a){this.internalName=e;this.index=t;this.description=n;this.displayName=i;this.enabledByDefault=s;this.stable=a}static get values(){let e=[];return p_.forEach(t=>{e=[...e,new rr(t.internalName,t.index,t.description,t.displayName,t.enabledByDefault,t.stable)]}),e}static get settingsFlags(){let e={};return rr.values.forEach(t=>{e[t.internalName]=t.enabledByDefault}),e}static fromString(e){for(let t of rr.values)if(e===t.internalName)return t;throw new RangeError(`Illegal argument passed to fromString(): ${e} does not correspond to any available Feature ${this.prototype.constructor.name}`)}};var mk={globalFilter:"",removeGlobalFilter:!1,setDoneDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6,provideAccessKeys:!0,useFilenameAsScheduledDate:!1,filenameAsDateFolders:[],statusSettings:new Pe,features:rr.settingsFlags,generalSettings:{},headingOpened:{}},qr=we({},mk),U=()=>{for(let r in rr.settingsFlags)qr.features[r]===void 0&&(qr.features[r]=rr.settingsFlags[r]);return qr.statusSettings.customStatuses.forEach((r,e,t)=>{var i,s;let n=j.getTypeFromStatusTypeString(r.type);t[e]=new Ye((i=r.symbol)!=null?i:" ",r.name,(s=r.nextStatusSymbol)!=null?s:"x",r.availableAsCommand,n)}),we({},qr)},ot=r=>(qr=we(we({},qr),r),U());var nn=(r,e)=>(qr.generalSettings[r]=e,U()),h_=r=>{var e;return(e=qr.features[r])!=null?e:!1};var he=class{constructor(){this._registeredStatuses=[];this.addDefaultStatusTypes()}get registeredStatuses(){return this._registeredStatuses.filter(({symbol:e})=>e!==j.EMPTY.symbol)}static getInstance(){return he.instance||(he.instance=new he),he.instance}add(e){this.hasSymbol(e.symbol)||(e instanceof j?this._registeredStatuses.push(e):this._registeredStatuses.push(new j(e)))}bySymbol(e){return this.hasSymbol(e)?this.getSymbol(e):j.EMPTY}bySymbolOrCreate(e){return this.hasSymbol(e)?this.getSymbol(e):j.createUnknownStatus(e)}byName(e){return this._registeredStatuses.filter(({name:t})=>t===e).length>0?this._registeredStatuses.filter(({name:t})=>t===e)[0]:j.EMPTY}resetToDefaultStatuses(){this.clearStatuses(),this.addDefaultStatusTypes()}clearStatuses(){this._registeredStatuses=[]}getNextStatus(e){if(e.nextStatusSymbol!==""){let t=this.bySymbol(e.nextStatusSymbol);if(t!==null)return t}return j.EMPTY}getNextStatusOrCreate(e){let t=this.getNextStatus(e);return t.type!=="EMPTY"?t:j.createUnknownStatus(e.nextStatusSymbol)}findUnknownStatuses(e){let n=e.map(a=>a.status).filter(a=>!this.hasSymbol(a.symbol)),i=new he,s=[];return n.forEach(a=>{if(i.hasSymbol(a.symbol))return;let o=he.copyStatusWithNewName(a,`Unknown (${a.symbol})`);s.push(o),i.add(o)}),s}static copyStatusWithNewName(e,t){let n=new Ye(e.symbol,t,e.nextStatusSymbol,e.availableAsCommand,e.type);return new j(n)}getSymbol(e){return this._registeredStatuses.filter(({symbol:t})=>t===e)[0]}hasSymbol(e){return this._registeredStatuses.find(t=>t.symbol===e)!==void 0}addDefaultStatusTypes(){[j.makeTodo(),j.makeInProgress(),j.makeDone(),j.makeCancelled()].forEach(t=>{this.add(t)})}};var Tr=class{static calculate(e){let t=0;if(e.dueDate!==null){let n=Math.round(window.moment().diff(e.dueDate)/Tr.milliSecondsPerDay),i;n>=7?i=1:n>=-14?i=(n+14)*.8/21+.2:i=.2,t+=i*Tr.dueCoefficient}switch(e.scheduledDate!==null&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*Tr.scheduledCoefficient),e.startDate!==null&&window.moment().isBefore(e.startDate)&&(t+=1*Tr.startedCoefficient),e.priority){case"1":t+=1*Tr.priorityCoefficient;break;case"2":t+=.65*Tr.priorityCoefficient;break;case"3":t+=.325*Tr.priorityCoefficient;break}return t}},_r=Tr;_r.dueCoefficient=12,_r.scheduledCoefficient=5,_r.startedCoefficient=-3,_r.priorityCoefficient=6,_r.milliSecondsPerDay=1e3*60*60*24;var __=require("obsidian");var m_=require("obsidian");var Pd,Ad,y_=({metadataCache:r,vault:e})=>{Pd=r,Ad=e},Xa=t=>x(void 0,[t],function*({originalTask:r,newTasks:e}){if(Ad===void 0||Pd===void 0){console.error("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]),g_({originalTask:r,newTasks:e,vault:Ad,metadataCache:Pd,previousTries:0})}),g_=s=>x(void 0,[s],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i}){let a=()=>{if(i>10){console.error("Tasks: Too many retries. File update not possible ...");return}let g=Math.min(Math.pow(10,i),100);setTimeout(()=>{g_({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i+1})},g)},o=t.getAbstractFileByPath(r.path);if(!(o instanceof m_.TFile))return console.warn(`Tasks: No file found for task ${r.description}. Retrying ...`),a();if(o.extension!=="md"){console.error("Tasks: Only supporting files with the .md file extension.");return}let u=n.getFileCache(o);if(u==null||u===null)return console.warn(`Tasks: No file cache found for file ${o.path}. Retrying ...`),a();let l=u.listItems;if(l===void 0||l.length===0)return console.warn(`Tasks: No list items found in file cache of ${o.path}. Retrying ...`),a();let d=(yield t.read(o)).split(`
`),{globalFilter:f}=U(),h,y=0;for(let g of l){if(g.position.start.line<r.sectionStart||g.task===void 0)continue;if(d[g.position.start.line].includes(f)){if(y===r.sectionIndex){h=g;break}y++}}if(h===void 0){console.error("Tasks: could not find task to toggle in the file.");return}let m=[...d.slice(0,h.position.start.line),...e.map(g=>g.toFileLineString()),...d.slice(h.position.start.line+1)];yield t.modify(o,m.join(`
`))});function yk(r,e,t){return x(this,null,function*(){yield __.MarkdownRenderer.renderMarkdown(r,e,t,null)})}function T_(r,e,t=null){return x(this,null,function*(){var a;t||(t=yk);let n=document.createElement("li");e.parentUlElement.appendChild(n),n.classList.add("task-list-item","plugin-tasks-list-item");let i=document.createElement("span");n.appendChild(i),i.classList.add("tasks-list-text"),yield gk(r,e,i,t);let s=document.createElement("input");return n.appendChild(s),s.classList.add("task-list-item-checkbox"),s.type="checkbox",r.status.symbol!==" "&&(s.checked=!0,n.classList.add("is-checked")),s.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),s.disabled=!0;let u=r.toggle();Xa({originalTask:r,newTasks:u})}),n.prepend(s),n.setAttribute("data-task",r.status.symbol.trim()),n.setAttribute("data-line",e.listIndex.toString()),s.setAttribute("data-line",e.listIndex.toString()),(a=e.layoutOptions)!=null&&a.shortMode&&Tk({task:r,element:i,isFilenameUnique:e.isFilenameUnique}),n})}function gk(r,e,t,n){return x(this,null,function*(){let i="",s=new On(e.layoutOptions);for(let a of s.layoutComponents){let o=r.componentToString(s,a);o&&(a==="description"&&(o=bk(o)),i+=o)}yield _k(t,i,"description",r,n)})}function _k(r,e,t,n,i){return x(this,null,function*(){if(t==="description"){yield i(e,r,n.path);let s=r.querySelector("blockquote"),a=s!=null?s:r,o=a.querySelector("p");if(o!==null){for(;o.firstChild;)a.insertBefore(o.firstChild,o);o.remove()}r.querySelectorAll("p").forEach(u=>{u.hasChildNodes()||u.remove()}),r.querySelectorAll(".footnotes").forEach(u=>{u.remove()})}else r.innerHTML=e})}function Tk({task:r,element:e,isFilenameUnique:t}){e.addEventListener("mouseenter",()=>{let n=e.createDiv();n.addClasses(["tooltip","mod-right"]),r.recurrence&&n.createDiv().setText(`${Yt} ${r.recurrence.toText()}`),r.startDate&&n.createDiv().setText(Za({signifier:$t,date:r.startDate})),r.scheduledDate&&n.createDiv().setText(Za({signifier:jt,date:r.scheduledDate})),r.dueDate&&n.createDiv().setText(Za({signifier:Bt,date:r.dueDate})),r.doneDate&&n.createDiv().setText(Za({signifier:Qa,date:r.doneDate}));let i=r.getLinkText({isFilenameUnique:t});i&&n.createDiv().setText(`\u{1F517} ${i}`),e.addEventListener("mouseleave",()=>{n.remove()})})}function Za({signifier:r,date:e}){return`${r} ${e.format(S.dateFormat)} (${e.from(window.moment().startOf("day"))})`}function bk(r){let{globalFilter:e,removeGlobalFilter:t}=U();return t?r.replace(e,"").trim():r}var ut=class{static fromPath(e){let{useFilenameAsScheduledDate:t,filenameAsDateFolders:n}=U();return!t||!this.matchesAnyFolder(n,e)?null:this.extractDateFromPath(e)}static matchesAnyFolder(e,t){return e.length===0?!0:e.some(n=>t.startsWith(n+"/"))}static extractDateFromPath(e){let t=Math.max(0,e.lastIndexOf("/")+1),n=e.lastIndexOf("."),i=e.substring(t,n),s=/(\d{4})-(\d{2})-(\d{2})/.exec(i);if(s||(s=/(\d{4})(\d{2})(\d{2})/.exec(i)),s){let a=window.moment([parseInt(s[1]),parseInt(s[2])-1,parseInt(s[3])]);if(a.isValid())return a}return null}static canApplyFallback({startDate:e,scheduledDate:t,dueDate:n}){return e===null&&n===null&&t===null}static updateTaskPath(e,t,n){let i=e.scheduledDate,s=e.scheduledDateIsInferred;return n===null?s&&(s=!1,i=null):s?i=n:this.canApplyFallback(e)&&(i=n,s=!0),new me(vt(we({},e),{path:t,scheduledDate:i,scheduledDateIsInferred:s}))}static removeInferredStatusIfNeeded(e,t){let n=e.scheduledDateIsInferred?e.scheduledDate:null;return t.map(i=>(n!==null&&!n.isSame(i.scheduledDate,"day")&&(i=new me(vt(we({},i),{scheduledDateIsInferred:!1}))),i))}};var Ae={High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",None:""},Yt="\u{1F501}",$t="\u{1F6EB}",jt="\u23F3",Bt="\u{1F4C5}",Qa="\u2705",yt=class{},S=yt;S.dateFormat="YYYY-MM-DD",S.indentationRegex=/^([\s\t>]*)/,S.listMarkerRegex=/([-*]|[0-9]+\.)/,S.checkboxRegex=/\[(.)\]/u,S.afterCheckboxRegex=/ *(.*)/u,S.taskRegex=new RegExp(yt.indentationRegex.source+yt.listMarkerRegex.source+" +"+yt.checkboxRegex.source+yt.afterCheckboxRegex.source,"u"),S.nonTaskRegex=new RegExp(yt.indentationRegex.source+yt.listMarkerRegex.source+"? *("+yt.checkboxRegex.source+")?"+yt.afterCheckboxRegex.source,"u"),S.listItemRegex=new RegExp(yt.indentationRegex.source+yt.listMarkerRegex.source),S.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,S.priorityRegex=/([⏫🔼🔽])$/u,S.startDateRegex=/🛫 *(\d{4}-\d{2}-\d{2})$/u,S.scheduledDateRegex=/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,S.dueDateRegex=/[📅📆🗓] *(\d{4}-\d{2}-\d{2})$/u,S.doneDateRegex=/✅ *(\d{4}-\d{2}-\d{2})$/u,S.recurrenceRegex=/🔁 ?([a-zA-Z0-9, !]+)$/iu,S.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]*/g,S.hashTagsFromEnd=new RegExp(yt.hashTags.source+"$");var me=class{constructor({status:e,description:t,path:n,indentation:i,listMarker:s,sectionStart:a,sectionIndex:o,precedingHeader:u,priority:l,startDate:c,scheduledDate:d,dueDate:f,doneDate:h,recurrence:y,blockLink:m,tags:g,originalMarkdown:R,scheduledDateIsInferred:O}){this._urgency=null;this.status=e,this.description=t,this.path=n,this.indentation=i,this.listMarker=s,this.sectionStart=a,this.sectionIndex=o,this.precedingHeader=u,this.tags=g,this.priority=l,this.startDate=c,this.scheduledDate=d,this.dueDate=f,this.doneDate=h,this.recurrence=y,this.blockLink=m,this.originalMarkdown=R,this.scheduledDateIsInferred=O}static fromLine({line:e,path:t,sectionStart:n,sectionIndex:i,precedingHeader:s,fallbackDate:a}){let o=e.match(S.taskRegex);if(o===null)return null;let u=o[4].trim(),{globalFilter:l}=U();if(!u.includes(l))return null;let c=u,d=o[1],f=o[2],h=o[3],y=he.getInstance().bySymbolOrCreate(h),m=c.match(S.blockLinkRegex),g=m!==null?m[0]:"";g!==""&&(c=c.replace(S.blockLinkRegex,"").trim());let R,O="3",P=null,X=null,ye=!1,Te=null,se=null,H="",bt=null,lt=[],A="",E=20,b=0;do{R=!1;let v=c.match(S.priorityRegex);if(v!==null){switch(v[1]){case Ae.Low:O="4";break;case Ae.Medium:O="2";break;case Ae.High:O="1";break}c=c.replace(S.priorityRegex,"").trim(),R=!0}let q=c.match(S.doneDateRegex);q!==null&&(se=window.moment(q[1],S.dateFormat),c=c.replace(S.doneDateRegex,"").trim(),R=!0);let w=c.match(S.dueDateRegex);w!==null&&(Te=window.moment(w[1],S.dateFormat),c=c.replace(S.dueDateRegex,"").trim(),R=!0);let F=c.match(S.scheduledDateRegex);F!==null&&(X=window.moment(F[1],S.dateFormat),c=c.replace(S.scheduledDateRegex,"").trim(),R=!0);let B=c.match(S.startDateRegex);B!==null&&(P=window.moment(B[1],S.dateFormat),c=c.replace(S.startDateRegex,"").trim(),R=!0);let W=c.match(S.recurrenceRegex);W!==null&&(H=W[1].trim(),c=c.replace(S.recurrenceRegex,"").trim(),R=!0);let de=c.match(S.hashTagsFromEnd);if(de!=null){c=c.replace(S.hashTagsFromEnd,"").trim(),R=!0;let fe=de[0].trim();A=A.length>0?[fe,A].join(" "):fe}b++}while(R&&b<=E);H.length>0&&(bt=We.fromText({recurrenceRuleText:H,startDate:P,scheduledDate:X,dueDate:Te})),ut.canApplyFallback({startDate:P,scheduledDate:X,dueDate:Te})&&a!==null&&(X=a,ye=!0),A.length>0&&(c+=" "+A);let C=c.match(S.hashTags);return C!==null&&(lt=C.filter(v=>v!==l).map(v=>v.trim())),new me({status:y,description:c,path:t,indentation:d,listMarker:f,sectionStart:n,sectionIndex:i,precedingHeader:s,priority:O,startDate:P,scheduledDate:X,dueDate:Te,doneDate:se,recurrence:bt,blockLink:g,tags:lt,originalMarkdown:e,scheduledDateIsInferred:ye})}toLi(e){return x(this,null,function*(){return T_(this,e)})}toString(e){let t=new On(e),n="";for(let i of t.layoutComponents)n+=this.componentToString(t,i);return n}componentToString(e,t){var n;switch(t){case"description":return this.description;case"priority":{let i="";return this.priority==="1"?i=" "+Ae.High:this.priority==="2"?i=" "+Ae.Medium:this.priority==="4"&&(i=" "+Ae.Low),i}case"startDate":return this.startDate?e.options.shortMode?" "+$t:` ${$t} ${this.startDate.format(S.dateFormat)}`:"";case"scheduledDate":return!this.scheduledDate||this.scheduledDateIsInferred?"":e.options.shortMode?" "+jt:` ${jt} ${this.scheduledDate.format(S.dateFormat)}`;case"doneDate":return this.doneDate?e.options.shortMode?" "+Qa:` ${Qa} ${this.doneDate.format(S.dateFormat)}`:"";case"dueDate":return this.dueDate?e.options.shortMode?" "+Bt:` ${Bt} ${this.dueDate.format(S.dateFormat)}`:"";case"recurrenceRule":return this.recurrence?e.options.shortMode?" "+Yt:` ${Yt} ${this.recurrence.toText()}`:"";case"blockLink":return(n=this.blockLink)!=null?n:"";default:throw new Error(`Don't know how to render task component of type '${t}'`)}}toFileLineString(){return`${this.indentation}${this.listMarker} [${this.status.symbol}] ${this.toString()}`}toggle(){let e=he.getInstance().getNextStatusOrCreate(this.status),t=null,n=null;if(e.isCompleted()){let{setDoneDate:a}=U();a&&(t=window.moment()),this.recurrence!==null&&(n=this.recurrence.next())}let i=new me(vt(we({},this),{status:e,doneDate:t})),s=[];if(n!==null){let a=he.getInstance().getNextStatusOrCreate(e),o=new me(vt(we(we({},this),n),{status:a,blockLink:""}));s.push(o)}return s.push(i),s}get urgency(){return this._urgency===null&&(this._urgency=_r.calculate(this)),this._urgency}get filename(){let e=this.path.match(/([^/]+)\.md$/);return e!==null?e[1]:null}getLinkText({isFilenameUnique:e}){let t;return e?t=this.filename:t="/"+this.path,t===null?null:(this.precedingHeader!==null&&this.precedingHeader!==t&&(t=t+" > "+this.precedingHeader),t)}static tasksListsIdentical(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.identicalTo(t[i]))}identicalTo(e){let t=["status","description","path","indentation","listMarker","sectionStart","sectionIndex","precedingHeader","priority","blockLink","scheduledDateIsInferred"];for(let s of t)if(this[s]!==e[s])return!1;if(this.tags.length!==e.tags.length||!this.tags.every(function(s,a){return s===e.tags[a]}))return!1;t=["startDate","scheduledDate","dueDate","doneDate"];for(let s of t){let a=this[s],o=e[s];if(_e.compareByDate(a,o)!==0)return!1}let n=this.recurrence,i=e.recurrence;return n===null&&i!==null||n!==null&&i===null?!1:!(n&&i&&!n.identicalTo(i))}getDescriptionWithoutGlobalFilter(){let{globalFilter:e}=U(),t=this.description;if(e.length===0)return t;let n=RegExp("(^|\\s)"+Ka(e)+"($|\\s)","ug");return this.description.search(n)>-1&&(t=t.replace(n,"$1$2").replace("  "," ").trim()),t}};var Ms=class{constructor(e){this.fetch=e;this._value=void 0}get value(){return this._value===void 0&&(this._value=this.fetch()),this._value}};var sn=class{constructor({metadataCache:e,vault:t,events:n}){this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new Vs,this.state="Cold",this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){let e=this.metadataCache.on("resolved",()=>x(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){let{useFilenameAsScheduledDate:e}=U(),t=this.vault.on("create",s=>{s instanceof zn.TFile&&this.tasksMutex.runExclusive(()=>{this.indexFile(s)})});this.vaultEventReferences.push(t);let n=this.vault.on("delete",s=>{s instanceof zn.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(a=>a.path!==s.path),this.notifySubscribers()})});this.vaultEventReferences.push(n);let i=this.vault.on("rename",(s,a)=>{s instanceof zn.TFile&&this.tasksMutex.runExclusive(()=>{let o=new Ms(()=>ut.fromPath(s.path));this.tasks=this.tasks.map(u=>u.path===a?e?ut.updateTaskPath(u,s.path,o.value):new me(vt(we({},u),{path:s.path})):u),this.notifySubscribers()})});this.vaultEventReferences.push(i)}subscribeToEvents(){let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.tasksMutex.runExclusive(()=>x(this,null,function*(){this.state="Initializing",yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.notifySubscribers()}))}indexFile(e){return x(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=this.getTasksFromFileContent(a,i,t,e)}me.tasksListsIdentical(n,s)||(this.getState()=="Warm"&&console.debug(`At least one task, its line number or its heading has changed in ${e.path}: triggering a refresh of all active Tasks blocks in Live Preview and Reading mode views.`),this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.notifySubscribers())})}getTasksFromFileContent(e,t,n,i){let s=[],a=e.split(`
`),o=a.length,u=new Ms(()=>ut.fromPath(i.path)),l=null,c=0;for(let d of t)if(d.task!==void 0){let f=d.position.start.line;if(f>=o)return console.log(`${i.path} Obsidian gave us a line number ${f} past the end of the file. ${o}.`),s;if((l===null||l.position.end.line<f)&&(l=sn.getSection(f,n.sections),c=0),l===null)continue;let h=a[f];if(h===void 0){console.log(`${i.path}: line ${f} - ignoring 'undefined' line.`);continue}let y;try{y=me.fromLine({line:h,path:i.path,sectionStart:l.position.start.line,sectionIndex:c,precedingHeader:sn.getPrecedingHeader(f,n.headings),fallbackDate:u.value})}catch(m){this.reportTaskParsingErrorToUser(m,i,d,h);continue}y!==null&&(c++,s.push(y))}return s}reportTaskParsingErrorToUser(e,t,n,i){let s=`There was an error reading one of the tasks in this vault.
The following task has been ignored, to prevent Tasks queries getting stuck with 'Loading Tasks ...'
Error: ${e}
File: ${t.path}
Line number: ${n.position.start.line}
Task line: ${i}

Please create a bug report for this message at
https://github.com/obsidian-tasks-group/obsidian-tasks/issues/new/choose
to help us find and fix the underlying issue.

Include:
- either a screenshot of the error popup, or copy the text from the console, if on a desktop machine.
- the output from running the Obsidian command 'Show debug info'

The error popup will only be shown when Tasks is starting up, but if the error persists,
it will be shown in the console every time this file is edited during the Obsidian
session.
`;console.error(s),e instanceof Error&&console.error(e.stack),this.state==="Initializing"&&new zn.Notice(s,1e4)}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var Bd=require("obsidian");var F_=require("obsidian");function on(){}function Id(r){return r()}function b_(){return Object.create(null)}function un(r){r.forEach(Id)}function E_(r){return typeof r=="function"}function w_(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function R_(r){return Object.keys(r).length===0}var O_=!1;function vk(){O_=!0}function Ek(){O_=!1}function _(r,e){r.appendChild(e)}function Kn(r,e,t){r.insertBefore(e,t||null)}function ln(r){r.parentNode.removeChild(r)}function Fd(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function L(r){return document.createElement(r)}function wk(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function gt(r){return document.createTextNode(r)}function J(){return gt(" ")}function At(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function D_(r){return function(e){return e.preventDefault(),r.call(this,e)}}function D(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function Rk(r){return Array.from(r.childNodes)}function Ud(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function Gt(r,e){r.value=e==null?"":e}function Ld(r,e){for(let t=0;t<r.options.length;t+=1){let n=r.options[t];if(n.__value===e){n.selected=!0;return}}r.selectedIndex=-1}function M_(r){let e=r.querySelector(":checked")||r.options[0];return e&&e.__value}function qd(r,e,t){r.classList[t?"add":"remove"](e)}var an=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=wk(t.nodeName):this.e=L(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)Kn(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(ln)}};var Ps;function ks(r){Ps=r}function Ok(){if(!Ps)throw new Error("Function called outside component initialization");return Ps}function Wd(r){Ok().$$.on_mount.push(r)}var Ss=[];var to=[],eo=[],v_=[],Dk=Promise.resolve(),Nd=!1;function Mk(){Nd||(Nd=!0,Dk.then(S_))}function As(r){eo.push(r)}var Cd=new Set,Ja=0;function S_(){let r=Ps;do{for(;Ja<Ss.length;){let e=Ss[Ja];Ja++,ks(e),Sk(e.$$)}for(ks(null),Ss.length=0,Ja=0;to.length;)to.pop()();for(let e=0;e<eo.length;e+=1){let t=eo[e];Cd.has(t)||(Cd.add(t),t())}eo.length=0}while(Ss.length);for(;v_.length;)v_.pop()();Nd=!1,Cd.clear(),ks(r)}function Sk(r){if(r.fragment!==null){r.update(),un(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(As)}}var kk=new Set;function Pk(r,e){r&&r.i&&(kk.delete(r),r.i(e))}var q2=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function Ak(r,e,t,n){let{fragment:i,on_mount:s,on_destroy:a,after_update:o}=r.$$;i&&i.m(e,t),n||As(()=>{let u=s.map(Id).filter(E_);a?a.push(...u):un(u),r.$$.on_mount=[]}),o.forEach(As)}function k_(r,e){let t=r.$$;t.fragment!==null&&(un(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function xk(r,e){r.$$.dirty[0]===-1&&(Ss.push(r),Mk(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function P_(r,e,t,n,i,s,a,o=[-1]){let u=Ps;ks(r);let l=r.$$={fragment:null,ctx:null,props:s,update:on,not_equal:i,bound:b_(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:b_(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(d,f,...h)=>{let y=h.length?h[0]:f;return l.ctx&&i(l.ctx[d],l.ctx[d]=y)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](y),c&&xk(r,d)),f}):[],l.update(),c=!0,un(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){vk();let d=Rk(e.target);l.fragment&&l.fragment.l(d),d.forEach(ln)}else l.fragment&&l.fragment.c();e.intro&&Pk(r.$$.fragment),Ak(r,e.target,e.anchor,e.customElement),Ek(),S_()}ks(u)}var Ck;typeof HTMLElement=="function"&&(Ck=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(Id).filter(E_);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){un(this.$$.on_disconnect)}$destroy(){k_(this,1),this.$destroy=on}$on(r,e){let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!R_(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var ro=class{$destroy(){k_(this,1),this.$destroy=on}$on(e,t){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!R_(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var xs=Ks(ke());var Nk={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function Vn(r){for(let[e,t]of Object.entries(Nk))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}function A_(r,e,t){let n=r.slice();return n[30]=e[t],n}function x_(r,e,t){let n=r.slice();return n[33]=e[t].value,n[34]=e[t].label,n[35]=e[t].symbol,n}function Ik(r){let e,t=r[35]+"",n;return{c(){e=L("span"),n=gt(t)},m(i,s){Kn(i,e,s),_(e,n)},p:on,d(i){i&&ln(e)}}}function C_(r){let e,t,n,i,s,a,o,u,l=r[34]+"",c,d,f=r[35]&&r[35].charCodeAt(0)>=256,h,y,m,g,R=f&&Ik(r);return{c(){e=L("span"),t=L("input"),a=J(),o=L("label"),u=L("span"),c=gt(l),d=J(),R&&R.c(),y=J(),D(t,"type","radio"),D(t,"id",n="priority-"+r[33]),t.__value=i=r[33],t.value=t.__value,D(t,"accesskey",s=r[9](r[34].charAt(0).toLowerCase())),r[21][0].push(t),D(u,"class","accesskey-first"),D(o,"for",h="priority-"+r[33])},m(O,P){Kn(O,e,P),_(e,t),t.checked=t.__value===r[1].priority,_(e,a),_(e,o),_(o,u),_(u,c),_(o,d),R&&R.m(o,null),_(e,y),m||(g=At(t,"change",r[20]),m=!0)},p(O,P){P[0]&512&&s!==(s=O[9](O[34].charAt(0).toLowerCase()))&&D(t,"accesskey",s),P[0]&3&&(t.checked=t.__value===O[1].priority),f&&R.p(O,P)},d(O){O&&ln(e),r[21][0].splice(r[21][0].indexOf(t),1),R&&R.d(),m=!1,g()}}}function N_(r){let e,t=r[30].name+"",n,i,s=r[30].symbol+"",a,o,u;return{c(){e=L("option"),n=gt(t),i=gt(" ["),a=gt(s),o=gt("]"),e.__value=u=r[30],e.value=e.__value},m(l,c){Kn(l,e,c),_(e,n),_(e,i),_(e,a),_(e,o)},p(l,c){c[0]&1&&t!==(t=l[30].name+"")&&Ud(n,t),c[0]&1&&s!==(s=l[30].symbol+"")&&Ud(a,s),c[0]&1&&u!==(u=l[30])&&(e.__value=u,e.value=e.__value)},d(l){l&&ln(e)}}}function Fk(r){let e,t,n,i,s,a,o,u,l,c,d,f,h,y,m,g,R,O,P,X,ye,Te,se,H,bt,lt,A,E,b,C,v,q,w,F,B,W,de,fe,xe,xt,et,Ze,Se,ct,Tn,ir,pf,Ct,Ws,hf,fi,mf,yf,Ys,gf,pi,$s,_f,zt,js,Tf,bn,Bs,bf,Kt,vf,vn,hi,Gs,Ef,Mr,Hs,wf,mi,Ao,Rf,zs,Of,En,yi,Df,gi,xo,Mf,wn=r[10],tt=[];for(let N=0;N<wn.length;N+=1)tt[N]=C_(x_(r,wn,N));let Rn=r[0],rt=[];for(let N=0;N<Rn.length;N+=1)rt[N]=N_(A_(r,Rn,N));return{c(){e=L("div"),t=L("form"),n=L("div"),i=L("label"),i.innerHTML='Descrip<span class="accesskey">t</span>ion',s=J(),a=L("input"),u=J(),l=L("div"),c=L("label"),d=gt("Priority"),h=J();for(let N=0;N<tt.length;N+=1)tt[N].c();y=J(),m=L("div"),g=L("label"),g.textContent="Recurs",R=J(),O=L("input"),X=J(),ye=L("code"),Te=gt(Yt),se=J(),H=new an(!1),bt=J(),lt=L("label"),lt.textContent="Due",A=J(),E=L("input"),C=J(),v=L("code"),q=gt(Bt),w=J(),F=new an(!1),B=J(),W=L("label"),W.textContent="Scheduled",de=J(),fe=L("input"),xt=J(),et=L("code"),Ze=gt(jt),Se=J(),ct=new an(!1),Tn=J(),ir=L("label"),ir.innerHTML='St<span class="accesskey">a</span>rt',pf=J(),Ct=L("input"),hf=J(),fi=L("code"),mf=gt($t),yf=J(),Ys=new an(!1),gf=J(),pi=L("div"),$s=L("label"),$s.innerHTML=`Only
                    <span class="accesskey-first">future</span> dates:`,_f=J(),zt=L("input"),Tf=J(),bn=L("div"),Bs=L("label"),Bs.textContent="Status",bf=J(),Kt=L("select");for(let N=0;N<rt.length;N+=1)rt[N].c();vf=J(),vn=L("div"),hi=L("div"),Gs=L("label"),Gs.textContent="Completed:",Ef=J(),Mr=L("input"),wf=J(),mi=L("div"),Ao=L("span"),Ao.textContent="Done on:",Rf=J(),zs=L("code"),Of=J(),En=L("div"),yi=L("button"),yi.textContent="Apply",Df=J(),gi=L("button"),gi.textContent="Cancel",D(i,"for","description"),D(a,"id","description"),D(a,"type","text"),D(a,"class","tasks-modal-description"),D(a,"placeholder","Take out the trash"),D(a,"accesskey",o=r[9]("t")),D(n,"class","tasks-modal-section"),D(c,"for",f="priority-"+r[1].priority),D(l,"class","tasks-modal-section tasks-modal-priorities"),D(g,"for","recurrence"),D(g,"class","accesskey-first"),D(O,"id","recurrence"),D(O,"type","text"),D(O,"placeholder","Try 'every 2 weeks on Thursday'."),D(O,"accesskey",P=r[9]("r")),H.a=null,D(lt,"for","due"),D(lt,"class","accesskey-first"),D(E,"id","due"),D(E,"type","text"),D(E,"placeholder",Yd),D(E,"accesskey",b=r[9]("d")),F.a=null,D(W,"for","scheduled"),D(W,"class","accesskey-first"),D(fe,"id","scheduled"),D(fe,"type","text"),D(fe,"placeholder",Yd),D(fe,"accesskey",xe=r[9]("s")),ct.a=null,D(ir,"for","start"),D(Ct,"id","start"),D(Ct,"type","text"),D(Ct,"placeholder",Yd),D(Ct,"accesskey",Ws=r[9]("a")),Ys.a=null,D($s,"for","forwardOnly"),D(zt,"id","forwardOnly"),D(zt,"type","checkbox"),D(zt,"class","task-list-item-checkbox tasks-modal-checkbox"),D(zt,"accesskey",js=r[9]("f")),D(m,"class","tasks-modal-section tasks-modal-dates"),D(Bs,"for","status"),D(Kt,"id","status-type"),D(Kt,"class","dropdown"),r[1].status===void 0&&As(()=>r[27].call(Kt)),D(bn,"class","tasks-modal-section"),D(Gs,"for","status"),D(Mr,"id","status"),D(Mr,"type","checkbox"),D(Mr,"class","task-list-item-checkbox tasks-modal-checkbox"),Mr.checked=Hs=r[1].status.isCompleted(),Mr.disabled=!0,D(vn,"class","tasks-modal-section tasks-modal-status"),D(yi,"type","submit"),D(yi,"class","mod-cta"),D(gi,"type","button"),D(En,"class","tasks-modal-section tasks-modal-buttons"),qd(t,"with-accesskeys",r[2]),D(e,"class","tasks-modal")},m(N,ue){Kn(N,e,ue),_(e,t),_(t,n),_(n,i),_(n,s),_(n,a),Gt(a,r[1].description),r[19](a),_(t,u),_(t,l),_(l,c),_(c,d),_(l,h);for(let Q=0;Q<tt.length;Q+=1)tt[Q].m(l,null);_(t,y),_(t,m),_(m,g),_(m,R),_(m,O),Gt(O,r[1].recurrenceRule),_(m,X),_(m,ye),_(ye,Te),_(ye,se),H.m(r[7],ye),_(m,bt),_(m,lt),_(m,A),_(m,E),Gt(E,r[1].dueDate),_(m,C),_(m,v),_(v,q),_(v,w),F.m(r[6],v),_(m,B),_(m,W),_(m,de),_(m,fe),Gt(fe,r[1].scheduledDate),_(m,xt),_(m,et),_(et,Ze),_(et,Se),ct.m(r[5],et),_(m,Tn),_(m,ir),_(m,pf),_(m,Ct),Gt(Ct,r[1].startDate),_(m,hf),_(m,fi),_(fi,mf),_(fi,yf),Ys.m(r[4],fi),_(m,gf),_(m,pi),_(pi,$s),_(pi,_f),_(pi,zt),zt.checked=r[1].forwardOnly,_(t,Tf),_(t,bn),_(bn,Bs),_(bn,bf),_(bn,Kt);for(let Q=0;Q<rt.length;Q+=1)rt[Q].m(Kt,null);Ld(Kt,r[1].status),_(t,vf),_(t,vn),_(vn,hi),_(hi,Gs),_(hi,Ef),_(hi,Mr),_(vn,wf),_(vn,mi),_(mi,Ao),_(mi,Rf),_(mi,zs),zs.innerHTML=r[8],_(t,Of),_(t,En),_(En,yi),_(En,Df),_(En,gi),xo||(Mf=[At(a,"input",r[18]),At(l,"keyup",r[11]),At(O,"input",r[22]),At(E,"input",r[23]),At(fe,"input",r[24]),At(Ct,"input",r[25]),At(zt,"change",r[26]),At(Kt,"change",r[27]),At(gi,"click",r[12]),At(t,"submit",D_(r[13]))],xo=!0)},p(N,ue){if(ue[0]&512&&o!==(o=N[9]("t"))&&D(a,"accesskey",o),ue[0]&3&&a.value!==N[1].description&&Gt(a,N[1].description),ue[0]&3&&f!==(f="priority-"+N[1].priority)&&D(c,"for",f),ue[0]&1538){wn=N[10];let Q;for(Q=0;Q<wn.length;Q+=1){let _i=x_(N,wn,Q);tt[Q]?tt[Q].p(_i,ue):(tt[Q]=C_(_i),tt[Q].c(),tt[Q].m(l,null))}for(;Q<tt.length;Q+=1)tt[Q].d(1);tt.length=wn.length}if(ue[0]&512&&P!==(P=N[9]("r"))&&D(O,"accesskey",P),ue[0]&3&&O.value!==N[1].recurrenceRule&&Gt(O,N[1].recurrenceRule),ue[0]&128&&H.p(N[7]),ue[0]&512&&b!==(b=N[9]("d"))&&D(E,"accesskey",b),ue[0]&3&&E.value!==N[1].dueDate&&Gt(E,N[1].dueDate),ue[0]&64&&F.p(N[6]),ue[0]&512&&xe!==(xe=N[9]("s"))&&D(fe,"accesskey",xe),ue[0]&3&&fe.value!==N[1].scheduledDate&&Gt(fe,N[1].scheduledDate),ue[0]&32&&ct.p(N[5]),ue[0]&512&&Ws!==(Ws=N[9]("a"))&&D(Ct,"accesskey",Ws),ue[0]&3&&Ct.value!==N[1].startDate&&Gt(Ct,N[1].startDate),ue[0]&16&&Ys.p(N[4]),ue[0]&512&&js!==(js=N[9]("f"))&&D(zt,"accesskey",js),ue[0]&3&&(zt.checked=N[1].forwardOnly),ue[0]&1){Rn=N[0];let Q;for(Q=0;Q<Rn.length;Q+=1){let _i=A_(N,Rn,Q);rt[Q]?rt[Q].p(_i,ue):(rt[Q]=N_(_i),rt[Q].c(),rt[Q].m(Kt,null))}for(;Q<rt.length;Q+=1)rt[Q].d(1);rt.length=Rn.length}ue[0]&3&&Ld(Kt,N[1].status),ue[0]&3&&Hs!==(Hs=N[1].status.isCompleted())&&(Mr.checked=Hs),ue[0]&256&&(zs.innerHTML=N[8]),ue[0]&4&&qd(t,"with-accesskeys",N[2])},i:on,o:on,d(N){N&&ln(e),r[19](null),Fd(tt,N),Fd(rt,N),xo=!1,un(Mf)}}}var Yd="Try 'Monday' or 'tomorrow', or [td|tm|yd|tw|nw|we] then space.";function Uk(r,e,t){let n;var i,s;let{task:a}=e,{onSubmit:o}=e,{statusOptions:u}=e,l,c={description:"",status:j.TODO,priority:"none",recurrenceRule:"",startDate:"",scheduledDate:"",dueDate:"",doneDate:"",forwardOnly:!0},d="",f="",h="",y="",m="",g=!1,R=!0,O=[{value:"low",label:"Low",symbol:Ae.Low},{value:"none",label:"Normal",symbol:Ae.None},{value:"medium",label:"Medium",symbol:Ae.Medium},{value:"high",label:"High",symbol:Ae.High}];function P(w,F,B=void 0){if(!F)return`<i>no ${w} date</i>`;let W=xs.parseDate(F,B,{forwardDate:B!=null});return W!==null?window.moment(W).format("YYYY-MM-DD"):`<i>invalid ${w} date</i>`}Wd(()=>{let{globalFilter:w,provideAccessKeys:F}=U();t(2,R=F);let B=a.getDescriptionWithoutGlobalFilter();(B!=a.description||B.indexOf(w)==-1)&&(g=!0);let W="none";a.priority==="4"?W="low":a.priority==="2"?W="medium":a.priority==="1"&&(W="high"),t(1,c={description:B,status:a.status,priority:W,recurrenceRule:a.recurrence?a.recurrence.toText():"",startDate:a.startDate?a.startDate.format("YYYY-MM-DD"):"",scheduledDate:a.scheduledDate?a.scheduledDate.format("YYYY-MM-DD"):"",dueDate:a.dueDate?a.dueDate.format("YYYY-MM-DD"):"",doneDate:a.doneDate?a.doneDate.format("YYYY-MM-DD"):"",forwardOnly:!0}),setTimeout(()=>{l.focus()},10)});let X=w=>{if(w.key&&!w.altKey&&!w.ctrlKey){let F=O.find(B=>B.label.charAt(0).toLowerCase()==w.key);F&&t(1,c.priority=F.value,c)}},ye=()=>{o([])},Te=()=>{let{globalFilter:w}=U(),F=c.description.trim();g&&(F=w+" "+F);let B=null,W=xs.parseDate(c.startDate,new Date,{forwardDate:c.forwardOnly});W!==null&&(B=window.moment(W));let de=null,fe=xs.parseDate(c.scheduledDate,new Date,{forwardDate:c.forwardOnly});fe!==null&&(de=window.moment(fe));let xe=null,xt=xs.parseDate(c.dueDate,new Date,{forwardDate:c.forwardOnly});xt!==null&&(xe=window.moment(xt));let et=null;c.recurrenceRule&&(et=We.fromText({recurrenceRuleText:c.recurrenceRule,startDate:B,scheduledDate:de,dueDate:xe}));let Ze;switch(c.priority){case"low":Ze="4";break;case"medium":Ze="2";break;case"high":Ze="1";break;default:Ze="3"}let Se=new me(Object.assign(Object.assign({},a),{description:F,status:c.status,priority:Ze,recurrence:et,startDate:B,scheduledDate:de,dueDate:xe,doneDate:window.moment(c.doneDate,"YYYY-MM-DD").isValid()?window.moment(c.doneDate,"YYYY-MM-DD"):null}));o([Se])},se=[[]];function H(){c.description=this.value,t(1,c),t(0,u)}function bt(w){to[w?"unshift":"push"](()=>{l=w,t(3,l)})}function lt(){c.priority=this.__value,t(1,c),t(0,u)}function A(){c.recurrenceRule=this.value,t(1,c),t(0,u)}function E(){c.dueDate=this.value,t(1,c),t(0,u)}function b(){c.scheduledDate=this.value,t(1,c),t(0,u)}function C(){c.startDate=this.value,t(1,c),t(0,u)}function v(){c.forwardOnly=this.checked,t(1,c),t(0,u)}function q(){c.status=M_(this),t(1,c),t(0,u)}return r.$$set=w=>{"task"in w&&t(14,a=w.task),"onSubmit"in w&&t(15,o=w.onSubmit),"statusOptions"in w&&t(0,u=w.statusOptions)},r.$$.update=()=>{if(r.$$.dirty[0]&4){e:t(9,n=w=>R?w:null)}if(r.$$.dirty[0]&2){e:t(1,c.startDate=Vn(c.startDate),c),t(4,d=P("start",c.startDate,c.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&2){e:t(1,c.scheduledDate=Vn(c.scheduledDate),c),t(5,f=P("scheduled",c.scheduledDate,c.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&2){e:t(1,c.dueDate=Vn(c.dueDate),c),t(6,h=P("due",c.dueDate,c.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&196610){e:c.recurrenceRule?t(7,y=t(17,s=t(16,i=We.fromText({recurrenceRuleText:c.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))===null||i===void 0?void 0:i.toText())!==null&&s!==void 0?s:"<i>invalid recurrence rule</i>"):t(7,y="<i>not recurring</>")}if(r.$$.dirty[0]&2){e:t(8,m=P("done",c.doneDate))}},[u,c,R,l,d,f,h,y,m,n,O,X,ye,Te,a,o,i,s,H,bt,lt,se,A,E,b,C,v,q]}var $d=class extends ro{constructor(e){super(),P_(this,e,Uk,Fk,w_,{task:14,onSubmit:15,statusOptions:0},null,[-1,-1])}},I_=$d;var Xn=class extends F_.Modal{constructor({app:t,task:n,onSubmit:i}){super(t);this.task=n,this.onSubmit=s=>{s.length&&i(s),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task");let{contentEl:t}=this,n=this.getKnownStatusesAndCurrentTaskStatusIfNotKnown();new I_({target:t,props:{task:this.task,statusOptions:n,onSubmit:this.onSubmit}})}getKnownStatusesAndCurrentTaskStatusIfNotKnown(){let t=he.getInstance().registeredStatuses;return he.getInstance().bySymbol(this.task.status.symbol)===j.EMPTY&&t.push(this.task.status),t}onClose(){let{contentEl:t}=this;t.empty()}};var U_=({line:r,path:e})=>{var f,h;let t=ut.fromPath(e),n=me.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:t});if(n!==null)return n;let i=r.match(S.nonTaskRegex);if(i===null)return console.error("Tasks: Cannot create task on line:",r),new me({status:j.TODO,description:"",path:e,indentation:"",listMarker:"-",priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,blockLink:"",tags:[],originalMarkdown:"",scheduledDateIsInferred:!1});let s=i[1],a=(f=i[2])!=null?f:"-",o=(h=i[4])!=null?h:" ",u=he.getInstance().bySymbolOrCreate(o),l=i[5],c=r.match(S.blockLinkRegex),d=c!==null?c[0]:"";return d!==""&&(l=l.replace(S.blockLinkRegex,"")),new me({status:u,description:l,path:e,indentation:s,listMarker:a,blockLink:d,priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,tags:[],originalMarkdown:"",scheduledDateIsInferred:!1})};var L_=(r,e,t,n)=>{var d;if(r)return t instanceof Bd.MarkdownView;if(!(t instanceof Bd.MarkdownView))return;let i=(d=t.file)==null?void 0:d.path;if(i===void 0)return;let a=e.getCursor().line,o=e.getLine(a),u=U_({line:o,path:i}),l=f=>{let h=ut.removeInferredStatusIfNeeded(u,f).map(y=>y.toFileLineString()).join(`
`);e.setLine(a,h)};new Xn({app:n,task:u,onSubmit:l}).open()};var Gd=require("obsidian");var q_=(r,e,t)=>{var u;if(r)return t instanceof Gd.MarkdownView;if(!(t instanceof Gd.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=Lk(a,n);e.setLine(s,o),e.setCursor({line:i.line,ch:Wk(i.ch,a,o)})},Lk=(r,e)=>{let t=r,n=me.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:null});if(n!==null)t=qk(n);else{let i=r.match(S.taskRegex);if(i!==null){let s=i[3],o=he.getInstance().bySymbol(s).nextStatusSymbol;t=r.replace(S.taskRegex,`$1- [${o}] $4`)}else S.listItemRegex.test(r)?t=r.replace(S.listItemRegex,"$1$2 [ ]"):t=r.replace(S.indentationRegex,"$1- ")}return t},qk=r=>r.toggle().map(t=>t.toFileLineString()).join(`
`),Wk=(r,e,t)=>{let n=t.length;if(n<=e.length)return r>=t.length?n:r;let i=13;if(t.match(S.doneDateRegex)&&n-e.length>=i&&(n-=i),n>=2*e.length&&t.search(`.+
.+`)!==-1)return r+n-e.length;let s=t.search(/[-*]/);return r<s?r:r+n-e.length};var no=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>L_(t,n,i,this.app)}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:q_})}};var io=class{constructor({obsidianEvents:e}){this.obsidianEvents=e}onCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.obsidianEvents.offref(e)}};var so=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return x(this,null,function*(){var c;let{globalFilter:n}=U(),i=e.findAll(".task-list-item").filter(d=>{var y;let f=(y=d.textContent)==null?void 0:y.split(`
`);if(f===void 0)return!1;let h=null;for(let m=0;m<f.length;m=m+1)if(f[m]!==""){h=f[m];break}return h===null?!1:h.includes(n)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let d=a.lineStart;d<=a.lineEnd;d++){let f=o[d];if(f===void 0)continue;let h=me.fromLine({line:f,path:s,sectionStart:a.lineStart,sectionIndex:u,precedingHeader:null,fallbackDate:null});h!==null&&(l.push(h),u++)}for(let d=0;d<i.length;d++){let f=l[d],h=i[d];if(f===void 0||h===void 0)continue;let y=(c=h.getAttr("data-line"))!=null?c:"0",m=Number.parseInt(y,10),g=yield f.toLi({parentUlElement:e,listIndex:m}),R=h.childNodes;for(let X=0;X<R.length;X=X+1){let ye=R[X];ye.nodeName.toLowerCase()==="div"?g.prepend(ye):ye.nodeName.toLowerCase()==="ul"&&g.append(ye)}let O=h.querySelectorAll("[data-footnote-id]"),P=g.querySelectorAll("[data-footnote-id]");if(O.length===P.length)for(let X=0;X<O.length;X++)P[X].replaceWith(O[X]);h.replaceWith(g)}})}};var W_=require("@codemirror/view"),Y_=require("obsidian");var $_=()=>W_.ViewPlugin.fromClass(Hd),Hd=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let f=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(f),new Y_.Notice(f,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=me.fromLine({line:a.text,path:"",sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:null});if(console.debug(`Live Preview Extension: toggle called. Position: ${s} Line: ${a.text}`),o===null)return!1;e.preventDefault();let l=o.toggle().map(f=>f.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let d=t.checked;return setTimeout(()=>{t.checked=d},1),!0}};var So=require("obsidian");var Wr=class extends oe{constructor(){super(...arguments);this._filters=new Lr}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegExp(){return null}};var br=class extends Wr{constructor(){super(),this._filters.add("done",e=>e.status.type==="DONE"||e.status.type==="CANCELLED"||e.status.type==="NON_TASK"),this._filters.add("not done",e=>e.status.type==="TODO"||e.status.type==="IN_PROGRESS")}fieldName(){return"status"}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=br.oldStatusName(e),i=br.oldStatusName(t);return n<i?1:n>i?-1:0}}static oldStatusName(e){return e.status.symbol===" "?"Todo":"Done"}};var zd=class extends _e{filterRegExp(){return zd.dueRegexp}fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}},cn=zd;cn.dueRegexp=/^due (before|after|on)? ?(.*)/;var Kd=class extends oe{createFilterOrErrorMessage(e){let t=new le(e),n=oe.getMatch(this.filterRegExp(),e);if(n!==null){let i=n[5],s=null;switch(i){case"low":s="4";break;case"none":s="3";break;case"medium":s="2";break;case"high":s="1";break}if(s===null)return t.error="do not understand priority",t;let a=e,o;switch(n[3]){case"above":o=u=>u.priority.localeCompare(s)<0;break;case"below":o=u=>u.priority.localeCompare(s)>0;break;case"not":o=u=>u.priority!==s;break;default:o=u=>u.priority===s,a=`${this.fieldName()} is ${i}`}t.filter=new Ve(e,o,new ge(a))}else t.error="do not understand query filter (priority)";return t}fieldName(){return"priority"}filterRegExp(){return Kd.priorityRegexp}supportsSorting(){return!0}comparator(){return(e,t)=>e.priority.localeCompare(t.priority)}},dn=Kd;dn.priorityRegexp=/^priority(\s+is)?(\s+(above|below|not))?(\s+(low|none|medium|high))$/;var Zn=class{matchesAnyOf(e){return e.some(t=>this.matches(t))}};var Qn=class extends Zn{constructor(t){super();this.stringToFind=t}matches(t){return Qn.stringIncludesCaseInsensitive(t,this.stringToFind)}static stringIncludesCaseInsensitive(t,n){return t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}};var Jn=class extends Zn{constructor(t){super();this.regex=t}static validateAndConstruct(t){let n=/\/((?![*+?])(?:[^\r\n[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*])+)\/((?:g(?:im?|mi?)?|i(?:gm?|mg?)?|m(?:gi?|ig?)?)?)/,i=t.match(n);if(i!==null){let s=new RegExp(i[1],i[2]);return new Jn(s)}else return null}matches(t){return t.match(this.regex)!==null}};var Xe=class extends oe{createFilterOrErrorMessage(e){let t=oe.getMatch(this.filterRegExp(),e);if(t===null)return le.fromError(e,`do not understand query filter (${this.fieldName()})`);let[n,i,s]=t,a=null;if(i.includes("include"))a=new Qn(s);else if(i.includes("regex")&&(a=Jn.validateAndConstruct(s),a===null))return le.fromError(e,`cannot parse regex (${this.fieldName()}); check your leading and trailing slashes for your query`);if(a===null)return le.fromError(e,`do not understand query filter (${this.fieldName()})`);let o=i.match(/not/)!==null,u=new Ve(e,this.getFilter(a,o),new ge(e));return le.fromFilter(u)}fieldPattern(){return this.fieldNameSingularEscaped()}filterOperatorPattern(){return"includes|does not include|regex matches|regex does not match"}filterRegExp(){return new RegExp(`^(?:${this.fieldPattern()}) (${this.filterOperatorPattern()}) (.*)`)}getFilter(e,t){return n=>{let i=e.matches(this.value(n));return t?!i:i}}comparator(){return(e,t)=>this.value(e).localeCompare(this.value(t),void 0,{numeric:!0})}grouper(){return e=>[this.value(e)]}};var ei=class extends Xe{fieldName(){return"path"}value(e){return e.path}supportsSorting(){return!0}};var ti=class extends oe{canCreateFilterForLine(e){return!1}createFilterOrErrorMessage(e){return le.fromError(e,"Filtering by urgency is not yet supported")}fieldName(){return"urgency"}filterRegExp(){throw Error(`filterRegExp() unimplemented for ${this.fieldName()}`)}supportsSorting(){return!0}comparator(){return(e,t)=>t.urgency-e.urgency}};var ri=class{static by(e,t){let n=[new ti().comparator(),new br().comparator(),new cn().comparator(),new dn().comparator(),new ei().comparator()],i=[];for(let s of e)i.push(s.comparator);return t.sort(ri.makeCompositeComparator([...i,...n]))}static makeCompositeComparator(e){return(t,n)=>{for(let i of e){let s=i(t,n);if(s!==0)return s}return 0}}};var fn=class extends Xe{fieldName(){return"description"}value(e){let t=U().globalFilter;return e.description.replace(t,"").trim()}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=fn.cleanDescription(e.description),i=fn.cleanDescription(t.description);return n.localeCompare(i,void 0,{numeric:!0})}}static cleanDescription(e){let t=U().globalFilter;e=e.replace(t,"").trim();let n=/^\[\[?([^\]]*)]]?/,i=e.match(n);if(i!==null){let s=i[1];e=s.substring(s.indexOf("|")+1)+e.replace(n,"")}return e=this.replaceFormatting(e,/^\*\*([^*]+)\*\*/),e=this.replaceFormatting(e,/^\*([^*]+)\*/),e=this.replaceFormatting(e,/^==([^=]+)==/),e=this.replaceFormatting(e,/^__([^_]+)__/),e=this.replaceFormatting(e,/^_([^_]+)_/),e}static replaceFormatting(e,t){let n=e.match(t);return n!==null&&(e=n[1]+e.replace(t,"")),e}};var Vd=class extends _e{filterRegExp(){return Vd.doneRegexp}fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}},Cs=Vd;Cs.doneRegexp=/^done (before|after|on)? ?(.*)/;var ao=class extends Wr{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};var oo=class extends Xe{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}supportsSorting(){return!0}};var Xd=class extends _e{filterRegExp(){return Xd.scheduledRegexp}fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}},Ns=Xd;Ns.scheduledRegexp=/^scheduled (before|after|on)? ?(.*)/;var Zd=class extends _e{filterRegExp(){return Zd.startRegexp}fieldName(){return"start"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}},Is=Zd;Is.startRegexp=/^starts (before|after|on)? ?(.*)/;var ni=class extends oe{constructor(){super();this.filterInstructions=new Lr,this.filterInstructions.add(ni.instructionForFieldPresence,t=>this.dates(t).some(n=>n!==null)),this.filterInstructions.add(ni.instructionForFieldAbsence,t=>!this.dates(t).some(n=>n!==null))}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);if(n.filter!==void 0)return n;let i=new le(t),s=oe.getMatch(this.filterRegExp(),t);if(s!==null){let a=yr.parseDate(s[2]);if(!a.isValid())i.error="do not understand happens date";else{let o,u;s[1]==="before"?(o=c=>this.dates(c).some(d=>d&&d.isBefore(a)),u=" "+s[1]):s[1]==="after"?(o=c=>this.dates(c).some(d=>d&&d.isAfter(a)),u=" "+s[1]):(o=c=>this.dates(c).some(d=>d&&d.isSame(a)),u=" on");let l=_e.getExplanationString("due, start or scheduled",u,!1,a);i.filter=new Ve(t,o,new ge(l))}}else i.error="do not understand query filter (happens date)";return i}earliestDate(t){return new ni().dates(t).sort(_e.compareByDate)[0]}filterRegExp(){return ni.happensRegexp}dates(t){return Array.of(t.startDate,t.scheduledDate,t.dueDate)}fieldName(){return"happens"}supportsSorting(){return!0}comparator(){return(t,n)=>_e.compareByDate(this.earliestDate(t),this.earliestDate(n))}},vr=ni;vr.happensRegexp=/^happens (before|after|on)? ?(.*)/,vr.instructionForFieldPresence="has happens date",vr.instructionForFieldAbsence="no happens date";var uo=class extends Wr{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}};var lo=class extends Xe{fieldNamePlural(){return this.fieldNameSingular()+"s"}fieldName(){return`${this.fieldNameSingular()}/${this.fieldNamePlural()}`}fieldPattern(){return`${this.fieldNameSingular()}|${this.fieldNamePlural()}`}filterOperatorPattern(){return`${super.filterOperatorPattern()}|include|do not include`}value(e){return this.values(e).join(", ")}getFilter(e,t){return n=>{let i=e.matchesAnyOf(this.values(n));return t?!i:i}}};var pn=class extends lo{fieldNameSingular(){return"tag"}values(e){return e.tags}supportsSorting(){return!0}createSorterFromLine(e){let t=e.match(this.sorterRegExp());if(t===null)return null;let n=!!t[1],i=isNaN(+t[2])?1:+t[2],s=pn.makeCompareByTagComparator(i);return new gr(this.fieldNameSingular(),s,n)}sorterRegExp(){return/^sort by tag( reverse)?[\s]*(\d+)?/}comparator(){return pn.makeCompareByTagComparator(1)}static makeCompareByTagComparator(e){return(t,n)=>{if(t.tags.length===0&&n.tags.length===0)return 0;if(t.tags.length===0)return 1;if(n.tags.length===0)return-1;let i=e-1;if(t.tags.length<e&&n.tags.length>=e)return 1;if(n.tags.length<e&&t.tags.length>=e)return-1;if(t.tags.length<e&&n.tags.length<e)return 0;let s=t.tags[i],a=n.tags[i];return s.localeCompare(a,void 0,{numeric:!0})}}};var tT=Ks(eT());var ho=class extends oe{constructor(){super(...arguments);this.basicBooleanRegexp=/(.*(AND|OR|XOR|NOT)\s*[("].*|\(.+\))/g;this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={}}filterRegExp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){let n=new le(t);if(t.length===0)return n.error="empty line",n;let i=this.preprocessExpression(t);try{let s=(0,tT.parse)(i);for(let u of s)if(u.name==="IDENTIFIER"&&u.value){let l=u.value.trim();if(!(l in this.subFields)){let c=mo(l);if(c===null)return n.error=`couldn't parse sub-expression '${l}'`,n;if(c.error)return n.error=`couldn't parse sub-expression '${l}': ${c.error}`,n;c.filter&&(this.subFields[l]=c.filter)}}else if(u.name==="OPERATOR"){if(u.value==null)return n.error="empty operator in boolean query",n;if(!this.supportedOperators.includes(u.value))return n.error=`unknown boolean operator '${u.value}'`,n}let a=u=>this.filterTaskWithParsedQuery(u,s),o=this.constructExplanation(s);return n.filter=new Ve(t,a,o),n}catch(s){let a=s instanceof Error?s.message:"unknown error type";return n.error=`malformed boolean query -- ${a} (check the documentation for guidelines)`,n}return n}preprocessExpression(t){return t.replace(/\(([^()]+)\)/g,'("$1")')}filterTaskWithParsedQuery(t,n){let i=o=>o==="true",s=o=>o?"true":"false",a=[];for(let o of n)if(o.name==="IDENTIFIER"){if(o.value==null)throw Error("null token value");let l=this.subFields[o.value.trim()].filterFunction(t);a.push(s(l))}else if(o.name==="OPERATOR")if(o.value==="NOT"){let u=i(a.pop());a.push(s(!u))}else if(o.value==="OR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u||l))}else if(o.value==="AND"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&l))}else if(o.value==="XOR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&!l||!u&&l))}else throw Error("Unsupported operator: "+o.value);else throw Error("Unsupported token type: "+o);return i(a[0])}constructExplanation(t){let n=[];for(let i of t)if(i.name==="IDENTIFIER"){if(i.value==null)throw Error("null token value");let s=this.subFields[i.value.trim()];n.push(s.explanation)}else if(i.name==="OPERATOR")if(i.value==="NOT"){let s=n.pop();n.push(ge.booleanNot([s]))}else if(i.value==="OR"){let s=n.pop(),a=n.pop();n.push(ge.booleanOr([a,s]))}else if(i.value==="AND"){let s=n.pop(),a=n.pop();n.push(ge.booleanAnd([a,s]))}else if(i.value==="XOR"){let s=n.pop(),a=n.pop();n.push(ge.booleanXor([a,s]))}else throw Error("Unsupported operator: "+i.value);else throw Error("Unsupported token type: "+i);return n[0]}};var yo=class extends Xe{fieldName(){return"filename"}value(e){let t=e.filename;return t===null?"":t+".md"}supportsSorting(){return!0}};var go=class extends Xe{constructor(){super()}fieldName(){return"status.name"}value(e){return e.status.name}supportsSorting(){return!0}supportsGrouping(){return!0}};var $r=class extends oe{canCreateFilterForLine(e){let t=new RegExp(`^(?:${this.fieldNameSingularEscaped()})`);return oe.lineMatchesFilter(t,e)}createFilterOrErrorMessage(e){let t=oe.getMatch(this.filterRegExp(),e);if(t===null)return this.helpMessage(e);let[n,i,s]=t,a=tr[s.toUpperCase()];if(!a)return this.helpMessage(e);let o;switch(i){case"is":o=u=>u.status.type===a;break;case"is not":o=u=>u.status.type!==a;break;default:return this.helpMessage(e)}return le.fromFilter(new Ve(e,o,new ge(e)))}filterRegExp(){return new RegExp(`^(?:${this.fieldNameSingularEscaped()}) (is|is not) ([^ ]+)$`)}helpMessage(e){let t=Object.values(tr).filter(i=>i!=="EMPTY").join(" "),n=`Invalid ${this.fieldNameSingular()} instruction: '${e}'.
    Allowed options: 'is' and 'is not' (without quotes).
    Allowed values:  ${t}
                     Note: values are case-insensitive,
                           so 'in_progress' works too, for example.
    Example:         ${this.fieldNameSingular()} is not NON_TASK`;return le.fromError(e,n)}fieldName(){return"status.type"}value(e){return e.status.type}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=$r.groupName(e),i=$r.groupName(t);return n.localeCompare(i,void 0,{numeric:!0})}}supportsGrouping(){return!0}grouper(){return e=>[$r.groupName(e)]}static groupName(e){let t;switch(e.status.type){case"IN_PROGRESS":t="1";break;case"TODO":t="2";break;case"DONE":t="3";break;case"CANCELLED":t="4";break;case"NON_TASK":t="5";break;case"EMPTY":t="6";break}return t+" "+e.status.type}};var _o=class extends Xe{fieldName(){return"recurrence"}value(e){return e.recurrence!==null?e.recurrence.toText():""}};var cf=[()=>new go,()=>new $r,()=>new br,()=>new uo,()=>new dn,()=>new vr,()=>new Is,()=>new Ns,()=>new cn,()=>new Cs,()=>new ei,()=>new fn,()=>new pn,()=>new oo,()=>new ao,()=>new ho,()=>new yo,()=>new ti,()=>new _o];function mo(r){for(let e of cf){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}function rT(r){let e=/^sort by /;if(r.match(e)===null)return null;for(let t of cf){let i=t().parseSortLine(r);if(i)return i}return null}function nT(r){let e=/^group by /;if(r.match(e)===null)return null;for(let t of cf){let n=t(),i=n.fieldNameSingular();if(r===`group by ${i}`&&n.supportsGrouping())return n.createGrouper()}return null}var To=class{constructor(e,t){this.nestingLevel=e,this.name=t}};var bo=class{constructor(e){this.lastHeadingAtLevel=new Array;let n=e.keys().next().value.length;for(let i=0;i<n;i++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new To(n,i));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var vo=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var Eo=class extends Map{},wo=class extends vo{},Ro=class{constructor(e,t){this.groups=new Eo;let n=this.buildGroupingTree(e,t);this.groups=n.generateAllPaths(),this.groups=this.getSortedGroups()}buildGroupingTree(e,t){let n=new wo(t),i=[n];for(let s of e){let a=[];for(let o of i)for(let u of o.values){let l=Dr.getGroupNamesForTask(s,u);for(let c of l){let d=o.children.get(c);d===void 0&&(d=new wo([]),o.children.set(c,d),a.push(d)),d.values.push(u)}}i=a}return n}getSortedGroups(){return new Eo([...this.groups.entries()].sort())}};var Oo=class{constructor(e,t,n){this.groups=e,this.groupHeadings=t,this.tasks=n}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} ${t.name}
`;return e+=this.tasksAsStringOfLines(),e}};var Do=class{constructor(e,t){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length;let n=new Ro(e,t);this.addTasks(n)}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTasks(e){let t=new bo(e.groups);for(let[n,i]of e.groups){let s=t.getHeadingsForTaskGroup(n),a=new Oo(n,s,i);this.add(a)}}add(e){this._groups.push(e)}};var re=class{static fromGroupingProperty(e){return new Hn(e,re.grouperForProperty(e))}static by(e,t){return new Do(e,t)}static getGroupNamesForTask(e,t){return e.grouper(t)}static grouperForProperty(e){return re.groupers[e]}static escapeMarkdownCharacters(e){return e.replace(/\\/g,"\\\\").replace(/_/g,"\\_")}static groupByPriority(e){let t="ERROR";switch(e.priority){case"1":t="High";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break}return[`Priority ${e.priority}: ${t}`]}static groupByRecurrence(e){return e.recurrence!==null?[e.recurrence.toText()]:["None"]}static groupByRecurring(e){return e.recurrence!==null?["Recurring"]:["Not Recurring"]}static groupByStartDate(e){return[re.stringFromDate(e.startDate,"start")]}static groupByScheduledDate(e){return[re.stringFromDate(e.scheduledDate,"scheduled")]}static groupByDueDate(e){return[re.stringFromDate(e.dueDate,"due")]}static groupByDoneDate(e){return[re.stringFromDate(e.doneDate,"done")]}static groupByHappensDate(e){let t=new vr().earliestDate(e);return[re.stringFromDate(t,"happens")]}static stringFromDate(e,t){return e===null?"No "+t+" date":e.format(re.groupDateFormat)}static groupByPath(e){return[re.escapeMarkdownCharacters(e.path.replace(".md",""))]}static groupByFolder(e){let t=e.path,n=e.filename+".md",i=t.substring(0,t.lastIndexOf(n));return i===""?["/"]:[re.escapeMarkdownCharacters(i)]}static groupByFileName(e){let t=e.filename;return t===null?["Unknown Location"]:["[["+re.escapeMarkdownCharacters(t)+"]]"]}static groupByRoot(e){let t=e.path.replace(/\\/g,"/"),n=t.indexOf("/");return n==-1?["/"]:[re.escapeMarkdownCharacters(t.substring(0,n+1))]}static groupByBacklink(e){if(e.getLinkText({isFilenameUnique:!0})===null)return["Unknown Location"];let n="Unknown Location";if(e.filename!==null&&(n=re.escapeMarkdownCharacters(e.filename)),e.precedingHeader===null||e.precedingHeader.length===0)return[n];let i=re.groupByHeading(e)[0];return n===i?[n]:[`${n} > ${i}`]}static groupByStatus(e){return e.status.symbol===" "?["Todo"]:["Done"]}static groupByHeading(e){return e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}static groupByTags(e){return e.tags.length==0?["(No tags)"]:e.tags}},Dr=re;Dr.groupDateFormat="YYYY-MM-DD dddd",Dr.groupers={backlink:re.groupByBacklink,done:re.groupByDoneDate,due:re.groupByDueDate,filename:re.groupByFileName,folder:re.groupByFolder,happens:re.groupByHappensDate,heading:re.groupByHeading,path:re.groupByPath,priority:re.groupByPriority,recurrence:re.groupByRecurrence,recurring:re.groupByRecurring,root:re.groupByRoot,scheduled:re.groupByScheduledDate,start:re.groupByStartDate,status:re.groupByStatus,tags:re.groupByTags};var li=class{constructor({source:e}){this._limit=void 0;this._layoutOptions=new bi;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this.groupByRegexp=/^group by (backlink|done|due|filename|folder|happens|heading|path|priority|recurrence|recurring|root|scheduled|start|status|tags)/;this.hideOptionsRegexp=/^(hide|show) (task count|backlink|priority|start date|scheduled date|done date|due date|recurrence rule|edit button|urgency)/;this.shortModeRegexp=/^short/;this.explainQueryRegexp=/^explain/;this.limitRegexp=/^limit (to )?(\d+)( tasks?)?/;this.commentRegexp=/^#.*/;this.source=e,e.split(`
`).map(t=>t.trim()).forEach(t=>{switch(!0){case t==="":break;case this.shortModeRegexp.test(t):this._layoutOptions.shortMode=!0;break;case this.explainQueryRegexp.test(t):this._layoutOptions.explainQuery=!0;break;case this.limitRegexp.test(t):this.parseLimit({line:t});break;case this.parseSortBy({line:t}):break;case this.parseGroupBy2({line:t}):break;case this.groupByRegexp.test(t):this.parseGroupBy({line:t});break;case this.hideOptionsRegexp.test(t):this.parseHideOptions({line:t});break;case this.commentRegexp.test(t):break;case this.parseFilter(t):break;default:this._error=`do not understand query: ${t}`}})}explainQuery(){return`Explanation of this Tasks code block query:

`+this.explainQueryWithoutIntroduction()}explainQueryWithoutIntroduction(){let e="",{globalFilter:t}=U();t.length!==0&&(e+=`Only tasks containing the global filter '${t}'.

`);let n=this.filters.length;if(n===0)e+="No filters supplied. All tasks will match the query.";else for(let i=0;i<n;i++)i>0&&(e+=`
`),e+=this.filters[i].explainFilterIndented("");return this._limit!==void 0&&(e+=`

At most ${this._limit} task`,this._limit!==1&&(e+="s"),e+=`.
`),e}get limit(){return this._limit}get layoutOptions(){return this._layoutOptions}get filters(){return this._filters}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}applyQueryToTasks(e){this.filters.forEach(n=>{e=e.filter(n.filterFunction)});let t=ri.by(this.sorting,e).slice(0,this.limit);return Dr.by(this.grouping,t)}parseHideOptions({line:e}){let t=e.match(this.hideOptionsRegexp);if(t!==null){let n=t[1]==="hide";switch(t[2]){case"task count":this._layoutOptions.hideTaskCount=n;break;case"backlink":this._layoutOptions.hideBacklinks=n;break;case"priority":this._layoutOptions.hidePriority=n;break;case"start date":this._layoutOptions.hideStartDate=n;break;case"scheduled date":this._layoutOptions.hideScheduledDate=n;break;case"due date":this._layoutOptions.hideDueDate=n;break;case"done date":this._layoutOptions.hideDoneDate=n;break;case"recurrence rule":this._layoutOptions.hideRecurrenceRule=n;break;case"edit button":this._layoutOptions.hideEditButton=n;break;case"urgency":this._layoutOptions.hideUrgency=n;break;default:this._error="do not understand hide/show option"}}}parseFilter(e){let t=mo(e);return t!=null?(t.filter?this._filters.push(t.filter):this._error=t.error,!0):!1}parseLimit({line:e}){let t=e.match(this.limitRegexp);t!==null?this._limit=Number.parseInt(t[2],10):this._error="do not understand query limit"}parseSortBy({line:e}){let t=rT(e);return t?(this._sorting.push(t),!0):!1}parseGroupBy({line:e}){let t=e.match(this.groupByRegexp);t!==null?this._grouping.push(Dr.fromGroupingProperty(t[1])):this._error="do not understand query grouping"}parseGroupBy2({line:e}){let t=nT(e);return t?(this._grouping.push(t),!0):!1}};var Mo=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return x(this,null,function*(){n.addChild(new df({app:this.app,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},df=class extends So.MarkdownRenderChild{constructor({app:t,events:n,container:i,source:s,filePath:a}){super(i);switch(this.app=t,this.events=n,this.source=s,this.filePath=a,this.containerEl.className){case"block-language-tasks":this.query=new li({source:s}),this.queryType="tasks";break;default:this.query=new li({source:s}),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=new li({source:this.source}),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return x(this,arguments,function*({tasks:t,state:n}){var a;let s=this.containerEl.createEl("div");if(n==="Warm"&&this.query.error===void 0){console.debug(`Render ${this.queryType} called for a block in active file "${this.filePath}", to select from ${t.length} tasks: plugin state: ${n}`),this.query.layoutOptions.explainQuery&&this.createExplanation(s);let o=this.query.applyQueryToTasks(t);for(let l of o.groups){this.addGroupHeadings(s,l.groupHeadings);let{taskList:c}=yield this.createTasksList({tasks:l.tasks,content:s});s.appendChild(c)}let u=o.totalTasksCount();console.debug(`${u} of ${t.length} tasks displayed in a block in "${this.filePath}"`),this.addTaskCount(s,u)}else this.query.error!==void 0?s.createDiv().innerHTML=`<pre>Tasks query: ${this.query.error.replace(/\n/g,"<br>")}</pre>`:s.setText("Loading Tasks ...");(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}createExplanation(t){let n=this.query.explainQuery(),i=t.createEl("pre");i.addClasses(["plugin-tasks-query-explanation"]),i.setText(n),t.appendChild(i)}createTasksList(i){return x(this,arguments,function*({tasks:t,content:n}){let s=t.length,a=n.createEl("ul");a.addClasses(["contains-task-list","plugin-tasks-query-result"]);for(let o=0;o<s;o++){let u=t[o],l=this.isFilenameUnique({task:u}),c=yield u.toLi({parentUlElement:a,listIndex:o,layoutOptions:this.query.layoutOptions,isFilenameUnique:l});c.querySelectorAll("[data-footnote-id]").forEach(h=>h.remove());let f=this.query.layoutOptions.shortMode;this.query.layoutOptions.hideUrgency||this.addUrgency(c,u),this.query.layoutOptions.hideBacklinks||this.addBacklinks(c,u,f,l),this.query.layoutOptions.hideEditButton||this.addEditButton(c,u),a.appendChild(c)}return{taskList:a,tasksCount:s}})}addEditButton(t,n){t.createEl("a",{cls:"tasks-edit"}).onClickEvent(s=>{s.preventDefault();let a=u=>{Xa({originalTask:n,newTasks:ut.removeInferredStatusIfNeeded(n,u)})};new Xn({app:this.app,task:n,onSubmit:a}).open()})}addUrgency(t,n){let i=new Intl.NumberFormat().format(n.urgency);t.createSpan({text:i,cls:"tasks-urgency"})}addGroupHeadings(t,n){for(let i of n)this.addGroupHeading(t,i)}addGroupHeading(t,n){return x(this,null,function*(){let i;n.nestingLevel===0?i=t.createEl("h4",{cls:"tasks-group-heading"}):n.nestingLevel===1?i=t.createEl("h5",{cls:"tasks-group-heading"}):i=t.createEl("h6",{cls:"tasks-group-heading"}),yield So.MarkdownRenderer.renderMarkdown(n.name,i,this.filePath,this)})}addBacklinks(t,n,i,s){var l;let a=t.createSpan({cls:"tasks-backlink"});i||a.append(" (");let o=a.createEl("a");if(o.href=n.path,o.setAttribute("data-href",n.path),o.rel="noopener",o.target="_blank",o.addClass("internal-link"),i&&o.addClass("internal-link-short-mode"),n.precedingHeader!==null){let c=n.precedingHeader.replace(/#/g,"");o.href=o.href+"#"+c,o.setAttribute("data-href",o.getAttribute("data-href")+"#"+c)}let u;i?u=" \u{1F517}":u=(l=n.getLinkText({isFilenameUnique:s}))!=null?l:"",o.setText(u),i||a.append(")")}addTaskCount(t,n){this.query.layoutOptions.hideTaskCount||t.createDiv({text:`${n} task${n!==1?"s":""}`,cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}};var ce=require("obsidian");var iT=[{text:"Core Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:"<p>These are the core statuses that Tasks supports natively, with no need for custom CSS styling or theming.</p><p>You can add edit and add your own custom statuses in the section below.</p>"},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertTaskCoreStatusSettings",featureFlag:"",notice:null}]},{text:"Custom Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:`<p>You should first <b>select and install a CSS Snippet or Theme</b> to style custom checkboxes.</p><p>Then, use the buttons below to set up your custom statuses, to match your chosen CSS checkboxes.</p><p><b>Note</b> Any statuses with the same symbol as any earlier statuses will be ignored. You can confirm the actually loaded statuses by running the 'Create or edit task' command and looking at the Status drop-down.</p><p></p><p>See the <a href="https://obsidian-tasks-group.github.io/obsidian-tasks/getting-started/statuses/">documentation</a> to get started!</p>`},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertCustomTaskStatusSettings",featureFlag:"",notice:null}]}];var Ht=require("obsidian");var gn=class{validate(e){let t=[];return t.push(...this.validateSymbol(e)),t.push(...this.validateName(e)),t.push(...this.validateNextSymbol(e)),t}validateSymbol(e){return gn.validateOneSymbol(e.symbol,"Task Status Symbol")}validateNextSymbol(e){return gn.validateOneSymbol(e.nextStatusSymbol,"Task Next Status Symbol")}validateName(e){let t=[];return e.name.length===0&&t.push("Task Status Name cannot be empty."),t}static validateOneSymbol(e,t){let n=[];return e.length===0&&n.push(`${t} cannot be empty.`),e.length>1&&n.push(`${t} ("${e}") must be a single character.`),n}};var _n=new gn,Tt=class extends Ht.Modal{constructor(t,n,i){super(t.app);this.plugin=t;this.saved=!1;this.error=!1;this.statusSymbol=n.symbol,this.statusName=n.name,this.statusNextSymbol=n.nextStatusSymbol,this.statusAvailableAsCommand=n.availableAsCommand,this.type=n.type,this.isCoreStatus=i}statusConfiguration(){return new Ye(this.statusSymbol,this.statusName,this.statusNextSymbol,this.statusAvailableAsCommand,this.type)}display(){return x(this,null,function*(){let{contentEl:t}=this;t.empty();let n=t.createDiv(),i;new Ht.Setting(n).setName("Task Status Symbol").setDesc("This is the character between the square braces. (It can only be edited for Custom statuses, and not Core statuses.)").addText(l=>{i=l,l.setValue(this.statusSymbol).onChange(c=>{this.statusSymbol=c,Tt.setValid(l,_n.validateSymbol(this.statusConfiguration()))})}).setDisabled(this.isCoreStatus).then(l=>{Tt.setValid(i,_n.validateSymbol(this.statusConfiguration()))});let s;new Ht.Setting(n).setName("Task Status Name").setDesc("This is the friendly name of the task status.").addText(l=>{s=l,l.setValue(this.statusName).onChange(c=>{this.statusName=c,Tt.setValid(l,_n.validateName(this.statusConfiguration()))})}).then(l=>{Tt.setValid(s,_n.validateName(this.statusConfiguration()))});let a;new Ht.Setting(n).setName("Task Next Status Symbol").setDesc("When clicked on this is the symbol that should be used next.").addText(l=>{a=l,l.setValue(this.statusNextSymbol).onChange(c=>{this.statusNextSymbol=c,Tt.setValid(l,_n.validateNextSymbol(this.statusConfiguration()))})}).then(l=>{Tt.setValid(a,_n.validateNextSymbol(this.statusConfiguration()))}),new Ht.Setting(n).setName("Task Status Type").setDesc("Control how the status behaves for searching and toggling.").addDropdown(l=>{["TODO","IN_PROGRESS","DONE","CANCELLED","NON_TASK"].forEach(d=>{l.addOption(d,d)}),l.setValue(this.type).onChange(d=>{this.type=j.getTypeFromStatusTypeString(d)})}),j.tasksPluginCanCreateCommandsForStatuses()&&new Ht.Setting(n).setName("Available as command").setDesc("If enabled this status will be available as a command so you can assign a hotkey and toggle the status using it.").addToggle(l=>{l.setValue(this.statusAvailableAsCommand).onChange(c=>x(this,null,function*(){this.statusAvailableAsCommand=c}))});let o=t.createDiv(),u=new Ht.Setting(o);u.addButton(l=>(l.setTooltip("Save").setIcon("checkmark").onClick(()=>x(this,null,function*(){let c=_n.validate(this.statusConfiguration());if(c.length>0){let d=c.join(`
`)+`

Fix errors before saving.`;new Ht.Notice(d);return}this.saved=!0,this.close()})),l)),u.addExtraButton(l=>(l.setIcon("cross").setTooltip("Cancel").onClick(()=>{this.saved=!1,this.close()}),l))})}onOpen(){this.display()}static setValidationError(t){t.inputEl.addClass("tasks-settings-is-invalid")}static removeValidationError(t){t.inputEl.removeClass("tasks-settings-is-invalid")}static setValid(t,n){n.length===0?Tt.removeValidationError(t):Tt.setValidationError(t)}};function sT(){return[[" ","Unchecked","x","TODO"],["x","Regular"," ","DONE"],["X","Checked"," ","DONE"],["-","Dropped","x","CANCELLED"],[">","Forward","x","TODO"],["D","Date","x","TODO"],["?","Question","x","TODO"],["/","Half Done","x","IN_PROGRESS"],["+","Add","x","TODO"],["R","Research","x","TODO"],["!","Important","x","TODO"],["i","Idea","x","TODO"],["B","Brainstorm","x","TODO"],["P","Pro","x","TODO"],["C","Con","x","TODO"],["Q","Quote","x","TODO"],["N","Note","x","TODO"],["b","Bookmark","x","TODO"],["I","Information","x","TODO"],["p","Paraphrase","x","TODO"],["L","Location","x","TODO"],["E","Example","x","TODO"],["A","Answer","x","TODO"],["r","Reward","x","TODO"],["c","Choice","x","TODO"],["d","Doing","x","IN_PROGRESS"],["T","Time","x","TODO"],["@","Character / Person","x","TODO"],["t","Talk","x","TODO"],["O","Outline / Plot","x","TODO"],["~","Conflict","x","TODO"],["W","World","x","TODO"],["f","Clue / Find","x","TODO"],["F","Foreshadow","x","TODO"],["H","Favorite / Health","x","TODO"],["&","Symbolism","x","TODO"],["s","Secret","x","TODO"]]}function aT(){return[[" ","to-do","x","TODO"],["/","incomplete","x","IN_PROGRESS"],["x","done"," ","DONE"],["-","canceled","x","CANCELLED"],[">","forwarded","x","TODO"],["<","scheduling","x","TODO"],["?","question","x","TODO"],["!","important","x","TODO"],["*","star","x","TODO"],['"',"quote","x","TODO"],["l","location","x","TODO"],["b","bookmark","x","TODO"],["i","information","x","TODO"],["S","savings","x","TODO"],["I","idea","x","TODO"],["p","pros","x","TODO"],["c","cons","x","TODO"],["f","fire","x","TODO"],["k","key","x","TODO"],["w","win","x","TODO"],["u","up","x","TODO"],["d","down","x","TODO"]]}var ci=class extends ce.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.customFunctions={insertTaskCoreStatusSettings:this.insertTaskCoreStatusSettings.bind(this),insertCustomTaskStatusSettings:this.insertCustomTaskStatusSettings.bind(this)};this.plugin=t}saveSettings(t){return x(this,null,function*(){yield this.plugin.saveSettings(),t&&this.display()})}display(){let{containerEl:t}=this;t.empty(),this.containerEl.addClass("tasks-settings"),t.createEl("h3",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),t.createEl("h4",{text:"Global filter Settings"}),new ce.Setting(t).setName("Global task filter").setDesc(ci.createFragmentWithHTML('<p><b>Recommended: Leave empty if you want all checklist items in your vault to be tasks managed by this plugin.</b></p><p>Use a global filter if you want Tasks to only act on a subset of your "<code>- [ ]</code>" checklist items, so that a checklist item must include the specified string in its description in order to be considered a task.<p><p>For example, if you set the global filter to <code>#task</code>, the Tasks plugin will only handle checklist items tagged with <code>#task</code>.</br>Other checklist items will remain normal checklist items and not appear in queries or get a done date set.</p><p>See the <a href="https://obsidian-tasks-group.github.io/obsidian-tasks/getting-started/global-filter/">documentation</a>.</p>')).addText(i=>{let s=U();i.setPlaceholder("e.g. #task or TODO").setValue(s.globalFilter).onChange(a=>x(this,null,function*(){ot({globalFilter:a}),yield this.plugin.saveSettings()}))}),new ce.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(i=>{let s=U();i.setValue(s.removeGlobalFilter).onChange(a=>x(this,null,function*(){ot({removeGlobalFilter:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Task Statuses"});let{headingOpened:n}=U();iT.forEach(i=>{this.addOneSettingsBlock(t,i,n)}),t.createEl("h4",{text:"Date Settings"}),new ce.Setting(t).setName("Set done date on every completed task").setDesc("Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done").addToggle(i=>{let s=U();i.setValue(s.setDoneDate).onChange(a=>x(this,null,function*(){ot({setDoneDate:a}),yield this.plugin.saveSettings()}))}),new ce.Setting(t).setName("Use filename as Scheduled date for undated tasks").setDesc(ci.createFragmentWithHTML('Save time entering Scheduled (\u23F3) dates.</br>If this option is enabled, any undated tasks will be given a default Scheduled date extracted from their file name.</br>The date in the file name must be in one of <code>YYYY-MM-DD</code> or <code>YYYYMMDD</code> formats.</br>Undated tasks have none of Due (\u{1F4C5} ), Scheduled (\u23F3) and Start (\u{1F6EB}) dates.</br><p>See the <a href="https://obsidian-tasks-group.github.io/obsidian-tasks/getting-started/use-filename-as-default-date/">documentation</a>.</p>')).addToggle(i=>{let s=U();i.setValue(s.useFilenameAsScheduledDate).onChange(a=>x(this,null,function*(){ot({useFilenameAsScheduledDate:a}),yield this.plugin.saveSettings()}))}),new ce.Setting(t).setName("Folders with default Scheduled dates").setDesc("Leave empty if you want to use default Scheduled dates everywhere, or enter a comma-separated list of folders.").addText(i=>x(this,null,function*(){let s=U();yield this.plugin.saveSettings(),i.setValue(ci.renderFolderArray(s.filenameAsDateFolders)).onChange(a=>x(this,null,function*(){let o=ci.parseCommaSeparatedFolders(a);ot({filenameAsDateFolders:o}),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Auto-suggest Settings"}),new ce.Setting(t).setName("Auto-suggest task content").setDesc("Enabling this will open an intelligent suggest menu while typing inside a recognized task line.").addToggle(i=>{let s=U();i.setValue(s.autoSuggestInEditor).onChange(a=>x(this,null,function*(){ot({autoSuggestInEditor:a}),yield this.plugin.saveSettings()}))}),new ce.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(i=>{let s=U();i.setLimits(0,3,1).setValue(s.autoSuggestMinMatch).setDynamicTooltip().onChange(a=>x(this,null,function*(){ot({autoSuggestMinMatch:a}),yield this.plugin.saveSettings()}))}),new ce.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(i=>{let s=U();i.setLimits(3,12,1).setValue(s.autoSuggestMaxItems).setDynamicTooltip().onChange(a=>x(this,null,function*(){ot({autoSuggestMaxItems:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Dialog Settings"}),new ce.Setting(t).setName("Provide access keys in dialogs").setDesc("If the access keys (keyboard shortcuts) for various controls in dialog boxes conflict with system keyboard shortcuts or assistive technology functionality that is important for you, you may want to deactivate them here.").addToggle(i=>{let s=U();i.setValue(s.provideAccessKeys).onChange(a=>x(this,null,function*(){ot({provideAccessKeys:a}),yield this.plugin.saveSettings()}))})}addOneSettingsBlock(t,n,i){let s=t.createEl("details",{cls:"tasks-nested-settings",attr:we({},n.open||i[n.text]?{open:!0}:{})});s.empty(),s.ontoggle=()=>{i[n.text]=s.open,ot({headingOpened:i}),this.plugin.saveSettings()};let a=s.createEl("summary");if(new ce.Setting(a).setHeading().setName(n.text),a.createDiv("collapser").createDiv("handle"),n.notice!==null){let o=s.createEl("div",{cls:n.notice.class,text:n.notice.text});n.notice.html!==null&&o.insertAdjacentHTML("beforeend",n.notice.html)}n.settings.forEach(o=>{if(!(o.featureFlag!==""&&!h_(o.featureFlag))&&(o.type==="checkbox"?new ce.Setting(s).setName(o.name).setDesc(o.description).addToggle(u=>{let l=U();l.generalSettings[o.settingName]||nn(o.settingName,o.initialValue),u.setValue(l.generalSettings[o.settingName]).onChange(c=>x(this,null,function*(){nn(o.settingName,c),yield this.plugin.saveSettings()}))}):o.type==="text"?new ce.Setting(s).setName(o.name).setDesc(o.description).addText(u=>{let l=U();l.generalSettings[o.settingName]||nn(o.settingName,o.initialValue);let c=d=>x(this,null,function*(){nn(o.settingName,d),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,ce.debounce)(c,500,!0))}):o.type==="textarea"?new ce.Setting(s).setName(o.name).setDesc(o.description).addTextArea(u=>{let l=U();l.generalSettings[o.settingName]||nn(o.settingName,o.initialValue);let c=d=>x(this,null,function*(){nn(o.settingName,d),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,ce.debounce)(c,500,!0)),u.inputEl.rows=8,u.inputEl.cols=40}):o.type==="function"&&this.customFunctions[o.settingName](s,this),o.notice!==null)){let u=s.createEl("p",{cls:o.notice.class,text:o.notice.text});o.notice.html!==null&&u.insertAdjacentHTML("beforeend",o.notice.html)}})}static parseCommaSeparatedFolders(t){return t.split(",").map(n=>n.trim()).map(n=>n.replace(/^\/|\/$/g,"")).filter(n=>n!=="")}static renderFolderArray(t){return t.join(",")}insertTaskCoreStatusSettings(t,n){let{statusSettings:i}=U();i.coreStatuses.forEach(s=>{oT(t,s,i.coreStatuses,i,n,n.plugin,!0)})}insertCustomTaskStatusSettings(t,n){let{statusSettings:i}=U();i.customStatuses.forEach(c=>{oT(t,c,i.customStatuses,i,n,n.plugin,!1)}),t.createEl("div"),new ce.Setting(t).addButton(c=>{c.setButtonText("Add New Task Status").setCta().onClick(()=>x(this,null,function*(){Pe.addStatus(i.customStatuses,new Ye("","","",!1,"TODO")),yield di(i,n)}))}).infoEl.remove(),new ce.Setting(t).addButton(c=>{c.setButtonText("Add all Status types supported by Minimal Theme").setCta().onClick(()=>x(this,null,function*(){yield uT(aT(),i,n)}))}).infoEl.remove(),new ce.Setting(t).addButton(c=>{c.setButtonText("Add all Status types supported by ITS Theme").setCta().onClick(()=>x(this,null,function*(){yield uT(sT(),i,n)}))}).infoEl.remove(),new ce.Setting(t).addButton(c=>{c.setButtonText("Add All Unknown Status Types").setCta().onClick(()=>x(this,null,function*(){let d=this.plugin.getTasks(),f=he.getInstance().findUnknownStatuses(d);f.length!==0&&(f.forEach(h=>{Pe.addStatus(i.customStatuses,h)}),yield di(i,n))}))}).infoEl.remove(),new ce.Setting(t).addButton(c=>{c.setButtonText("Reset Custom Status Types to Defaults").setWarning().onClick(()=>x(this,null,function*(){Pe.resetAllCustomStatuses(i),yield di(i,n)}))}).infoEl.remove()}},qs=ci;qs.createFragmentWithHTML=t=>createFragment(n=>n.createDiv().innerHTML=t);function oT(r,e,t,n,i,s,a){let o=r.createEl("pre");o.addClass("row-for-status"),o.textContent=new j(e).previewText();let u=new ce.Setting(r);u.infoEl.replaceWith(o),a||u.addExtraButton(l=>{l.setIcon("cross").setTooltip("Delete").onClick(()=>x(this,null,function*(){Pe.deleteStatus(t,e)&&(yield di(n,i))}))}),u.addExtraButton(l=>{l.setIcon("pencil").setTooltip("Edit").onClick(()=>x(this,null,function*(){let c=new Tt(s,e,a);c.onClose=()=>x(this,null,function*(){c.saved&&Pe.replaceStatus(t,e,c.statusConfiguration())&&(yield di(n,i))}),c.open()}))}),u.infoEl.remove()}function uT(r,e,t){return x(this,null,function*(){Pe.bulkAddStatusCollection(e,r).forEach(i=>{new ce.Notice(i)}),yield di(e,t)})}function di(r,e){return x(this,null,function*(){ot({statusSettings:r}),Pe.applyToStatusRegistry(r,he.getInstance()),yield e.saveSettings(!0)})}var cT=require("obsidian");var Zk=`${$t}${jt}${Bt}`;function lT(r,e,t){let n=[];n=n.concat(eP(r,e,t)),n=n.concat(tP(r,e,t));let i=Jk(r,t),s=ff(r,/([a-zA-Z'_-]*)/g,e),a=!1;if(s&&s.length>0){let o=s[0];if(o.length>=Math.max(1,t.autoSuggestMinMatch)){let u=i.filter(l=>l.displayText.toLowerCase().includes(o.toLowerCase()));for(let l of u)n.push({suggestionType:"match",displayText:l.displayText,appendText:l.appendText,insertAt:s.index,insertSkip:o.length}),a=!0}}return!a&&t.autoSuggestMinMatch===0&&(n=n.concat(i)),n.length>0&&!n.some(o=>o.suggestionType==="match")&&n.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`}),n=n.slice(0,t.autoSuggestMaxItems),n}function Qk(r){if(Object.values(Ae).some(e=>e.length>0&&r.includes(e)))return!0}function Jk(r,e){let t=[];return r.includes(Bt)||t.push({displayText:`${Bt} due date`,appendText:`${Bt} `}),r.includes($t)||t.push({displayText:`${$t} start date`,appendText:`${$t} `}),r.includes(jt)||t.push({displayText:`${jt} scheduled date`,appendText:`${jt} `}),Qk(r)||(t.push({displayText:`${Ae.High} high priority`,appendText:`${Ae.High} `}),t.push({displayText:`${Ae.Medium} medium priority`,appendText:`${Ae.Medium} `}),t.push({displayText:`${Ae.Low} low priority`,appendText:`${Ae.Low} `})),r.includes(Yt)||t.push({displayText:`${Yt} recurring (repeat)`,appendText:`${Yt} `}),t}function eP(r,e,t){let n=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],i=[],s=new RegExp(`([${Zk}])\\s*([0-9a-zA-Z ]*)`,"ug"),a=ff(r,s,e);if(a&&a.length>=2){let o=a[1],u=a[2];if(u.length<t.autoSuggestMinMatch)return[];let l=u&&u.length>1?yr.parseDate(Vn(u),!0):null;l&&l.isValid()&&i.push({displayText:`${l.format(S.dateFormat)}`,appendText:`${o} ${l.format(S.dateFormat)} `,insertAt:a.index,insertSkip:a[0].length});let c=1,d=5,f=n.filter(h=>u&&u.length>=c&&h.toLowerCase().includes(u.toLowerCase())).slice(0,d);f.length===0&&(f=n.slice(0,d));for(let h of f){let m=`${yr.parseDate(h,!0).format(S.dateFormat)}`;i.push({suggestionType:"match",displayText:`${h} (${m})`,appendText:`${o} ${m} `,insertAt:a.index,insertSkip:a[0].length})}}return i}function tP(r,e,t){var o;let n=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],i=[],s=new RegExp(`(${Yt})\\s*([0-9a-zA-Z ]*)`,"ug"),a=ff(r,s,e);if(a&&a.length>=2){let u=a[1],l=a[2];if(l.length<t.autoSuggestMinMatch)return[];if(l.length>0){let h=(o=We.fromText({recurrenceRuleText:l,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:o.toText();if(h){let y=`${u} ${h} `;if(i.push({suggestionType:"match",displayText:`\u2705 ${h}`,appendText:y,insertAt:a.index,insertSkip:a[0].length}),a[0]==y)return[]}}let c=1,d=t.autoSuggestMaxItems/2,f=n.filter(h=>l&&l.length>=c&&h.toLowerCase().includes(l.toLowerCase())).slice(0,d);f.length===0&&l.trim().length===0&&(f=n.slice(0,d));for(let h of f)i.push({suggestionType:"match",displayText:`${h}`,appendText:`${u} ${h} `,insertAt:a.index,insertSkip:a[0].length})}return i}function ff(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<=t&&t<=i.index+i[0].length)return i;return[]}var ko=class extends cT.EditorSuggest{constructor(t,n){super(t);this.settings=n}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return s.contains(this.settings.globalFilter)&&s.match(S.taskRegex)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){let n=t.query,i=t.editor.getCursor(),s=lT(n,i.ch,this.settings),a=[];for(let o of s)a.push(vt(we({},o),{context:t}));return a}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){var u,l,c;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let d=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(l=(u=i==null?void 0:i.cm)==null?void 0:u.contentDOM)==null||l.dispatchEvent(d);return}let s=t.context.editor.getCursor(),a={line:s.line,ch:(c=t.insertAt)!=null?c:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length})}};var Po=class extends dT.Plugin{onload(){return x(this,null,function*(){console.log('loading plugin "tasks"'),yield this.loadSettings(),this.addSettingTab(new qs({plugin:this})),y_({metadataCache:this.app.metadataCache,vault:this.app.vault}),yield this.loadTaskStatuses();let t=new io({obsidianEvents:this.app.workspace});this.cache=new sn({metadataCache:this.app.metadataCache,vault:this.app.vault,events:t}),this.inlineRenderer=new so({plugin:this}),this.queryRenderer=new Mo({plugin:this,events:t}),this.registerEditorExtension($_()),this.registerEditorSuggest(new ko(this.app,U())),new no({plugin:this})})}loadTaskStatuses(){return x(this,null,function*(){let{statusSettings:t}=U();Pe.applyToStatusRegistry(t,he.getInstance())})}onunload(){var t;console.log('unloading plugin "tasks"'),(t=this.cache)==null||t.unload()}loadSettings(){return x(this,null,function*(){let t=yield this.loadData();ot(t),yield this.loadTaskStatuses()})}saveSettings(){return x(this,null,function*(){yield this.saveData(U())})}getTasks(){var t;return(t=this.cache)==null?void 0:t.getTasks()}};
