/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck and Clare Macrae

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

"use strict";var zk=Object.create;var ra=Object.defineProperty,Kk=Object.defineProperties,Qk=Object.getOwnPropertyDescriptor,Xk=Object.getOwnPropertyDescriptors,Zk=Object.getOwnPropertyNames,jo=Object.getOwnPropertySymbols,Jk=Object.getPrototypeOf,Tc=Object.prototype.hasOwnProperty,Yh=Object.prototype.propertyIsEnumerable;var Gh=(r,e,t)=>e in r?ra(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,K=(r,e)=>{for(var t in e||(e={}))Tc.call(e,t)&&Gh(r,t,e[t]);if(jo)for(var t of jo(e))Yh.call(e,t)&&Gh(r,t,e[t]);return r},he=(r,e)=>Kk(r,Xk(e));var Go=(r,e)=>{var t={};for(var n in r)Tc.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&jo)for(var n of jo(r))e.indexOf(n)<0&&Yh.call(r,n)&&(t[n]=r[n]);return t};var k=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),eE=(r,e)=>{for(var t in e)ra(r,t,{get:e[t],enumerable:!0})},Bh=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Zk(e))!Tc.call(r,i)&&i!==t&&ra(r,i,{get:()=>e[i],enumerable:!(n=Qk(e,i))||n.enumerable});return r};var na=(r,e,t)=>(t=r!=null?zk(Jk(r)):{},Bh(e||!r||!r.__esModule?ra(t,"default",{value:r,enumerable:!0}):t,r)),tE=r=>Bh(ra({},"__esModule",{value:!0}),r);var P=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var Re=k(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.matchAnyPattern=Fn.extractTerms=Fn.repeatedTimeunitPattern=void 0;function sE(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}Fn.repeatedTimeunitPattern=sE;function Hh(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}Fn.extractTerms=Hh;function aE(r){return`(?:${Hh(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}Fn.matchAnyPattern=aE});var ve=k((vc,wc)=>{(function(r,e){typeof vc=="object"&&typeof wc!="undefined"?wc.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(vc,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",d="year",f="date",m="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,T={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},E=function(j,$,D){var V=String(j);return!V||V.length>=$?j:""+Array($+1-V.length).join(D)+j},S={s:E,z:function(j){var $=-j.utcOffset(),D=Math.abs($),V=Math.floor(D/60),U=D%60;return($<=0?"+":"-")+E(V,2,"0")+":"+E(U,2,"0")},m:function j($,D){if($.date()<D.date())return-j(D,$);var V=12*(D.year()-$.year())+(D.month()-$.month()),U=$.clone().add(V,l),X=D-U<0,p=$.clone().add(V+(X?-1:1),l);return+(-(V+(D-U)/(X?U-p:p-U))||0)},a:function(j){return j<0?Math.ceil(j)||0:Math.floor(j)},p:function(j){return{M:l,y:d,w:u,d:o,D:f,h:a,m:s,s:i,ms:n,Q:c}[j]||String(j||"").toLowerCase().replace(/s$/,"")},u:function(j){return j===void 0}},x="en",q={};q[x]=T;var W=function(j){return j instanceof be},re=function(j,$,D){var V;if(!j)return x;if(typeof j=="string")q[j]&&(V=j),$&&(q[j]=$,V=j);else{var U=j.name;q[U]=j,V=U}return!D&&V&&(x=V),V||!D&&x},H=function(j,$){if(W(j))return j.clone();var D=typeof $=="object"?$:{};return D.date=j,D.args=arguments,new be(D)},Y=S;Y.l=re,Y.i=W,Y.w=function(j,$){return H(j,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var be=function(){function j(D){this.$L=re(D.locale,null,!0),this.parse(D)}var $=j.prototype;return $.parse=function(D){this.$d=function(V){var U=V.date,X=V.utc;if(U===null)return new Date(NaN);if(Y.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var p=U.match(y);if(p){var h=p[2]-1||0,b=(p[7]||"0").substring(0,3);return X?new Date(Date.UTC(p[1],h,p[3]||1,p[4]||0,p[5]||0,p[6]||0,b)):new Date(p[1],h,p[3]||1,p[4]||0,p[5]||0,p[6]||0,b)}}return new Date(U)}(D),this.$x=D.x||{},this.init()},$.init=function(){var D=this.$d;this.$y=D.getFullYear(),this.$M=D.getMonth(),this.$D=D.getDate(),this.$W=D.getDay(),this.$H=D.getHours(),this.$m=D.getMinutes(),this.$s=D.getSeconds(),this.$ms=D.getMilliseconds()},$.$utils=function(){return Y},$.isValid=function(){return this.$d.toString()!==m},$.isSame=function(D,V){var U=H(D);return this.startOf(V)<=U&&U<=this.endOf(V)},$.isAfter=function(D,V){return H(D)<this.startOf(V)},$.isBefore=function(D,V){return this.endOf(V)<H(D)},$.$g=function(D,V,U){return Y.u(D)?this[V]:this.set(U,D)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(D,V){var U=this,X=!!Y.u(V)||V,p=Y.p(D),h=function(R,N){var te=Y.w(U.$u?Date.UTC(U.$y,N,R):new Date(U.$y,N,R),U);return X?te:te.endOf(o)},b=function(R,N){return Y.w(U.toDate()[R].apply(U.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(N)),U)},_=this.$W,w=this.$M,O=this.$D,M="set"+(this.$u?"UTC":"");switch(p){case d:return X?h(1,0):h(31,11);case l:return X?h(1,w):h(0,w+1);case u:var A=this.$locale().weekStart||0,v=(_<A?_+7:_)-A;return h(X?O-v:O+(6-v),w);case o:case f:return b(M+"Hours",0);case a:return b(M+"Minutes",1);case s:return b(M+"Seconds",2);case i:return b(M+"Milliseconds",3);default:return this.clone()}},$.endOf=function(D){return this.startOf(D,!1)},$.$set=function(D,V){var U,X=Y.p(D),p="set"+(this.$u?"UTC":""),h=(U={},U[o]=p+"Date",U[f]=p+"Date",U[l]=p+"Month",U[d]=p+"FullYear",U[a]=p+"Hours",U[s]=p+"Minutes",U[i]=p+"Seconds",U[n]=p+"Milliseconds",U)[X],b=X===o?this.$D+(V-this.$W):V;if(X===l||X===d){var _=this.clone().set(f,1);_.$d[h](b),_.init(),this.$d=_.set(f,Math.min(this.$D,_.daysInMonth())).$d}else h&&this.$d[h](b);return this.init(),this},$.set=function(D,V){return this.clone().$set(D,V)},$.get=function(D){return this[Y.p(D)]()},$.add=function(D,V){var U,X=this;D=Number(D);var p=Y.p(V),h=function(w){var O=H(X);return Y.w(O.date(O.date()+Math.round(w*D)),X)};if(p===l)return this.set(l,this.$M+D);if(p===d)return this.set(d,this.$y+D);if(p===o)return h(1);if(p===u)return h(7);var b=(U={},U[s]=e,U[a]=t,U[i]=r,U)[p]||1,_=this.$d.getTime()+D*b;return Y.w(_,this)},$.subtract=function(D,V){return this.add(-1*D,V)},$.format=function(D){var V=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var X=D||"YYYY-MM-DDTHH:mm:ssZ",p=Y.z(this),h=this.$H,b=this.$m,_=this.$M,w=U.weekdays,O=U.months,M=function(N,te,le,fe){return N&&(N[te]||N(V,X))||le[te].substr(0,fe)},A=function(N){return Y.s(h%12||12,N,"0")},v=U.meridiem||function(N,te,le){var fe=N<12?"AM":"PM";return le?fe.toLowerCase():fe},R={YY:String(this.$y).slice(-2),YYYY:this.$y,M:_+1,MM:Y.s(_+1,2,"0"),MMM:M(U.monthsShort,_,O,3),MMMM:M(O,_),D:this.$D,DD:Y.s(this.$D,2,"0"),d:String(this.$W),dd:M(U.weekdaysMin,this.$W,w,2),ddd:M(U.weekdaysShort,this.$W,w,3),dddd:w[this.$W],H:String(h),HH:Y.s(h,2,"0"),h:A(1),hh:A(2),a:v(h,b,!0),A:v(h,b,!1),m:String(b),mm:Y.s(b,2,"0"),s:String(this.$s),ss:Y.s(this.$s,2,"0"),SSS:Y.s(this.$ms,3,"0"),Z:p};return X.replace(g,function(N,te){return te||R[N]||p.replace(":","")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(D,V,U){var X,p=Y.p(V),h=H(D),b=(h.utcOffset()-this.utcOffset())*e,_=this-h,w=Y.m(this,h);return w=(X={},X[d]=w/12,X[l]=w,X[c]=w/3,X[u]=(_-b)/6048e5,X[o]=(_-b)/864e5,X[a]=_/t,X[s]=_/e,X[i]=_/r,X)[p]||_,U?w:Y.a(w)},$.daysInMonth=function(){return this.endOf(l).$D},$.$locale=function(){return q[this.$L]},$.locale=function(D,V){if(!D)return this.$L;var U=this.clone(),X=re(D,V,!0);return X&&(U.$L=X),U},$.clone=function(){return Y.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},j}(),Pe=be.prototype;return H.prototype=Pe,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",d],["$D",f]].forEach(function(j){Pe[j[1]]=function($){return this.$g($,j[0],j[1])}}),H.extend=function(j,$){return j.$i||(j($,be,H),j.$i=!0),H},H.locale=re,H.isDayjs=W,H.unix=function(j){return H(1e3*j)},H.en=q[x],H.Ls=q,H.p={},H})});var ot=k(Ln=>{"use strict";var oE=Ln&&Ln.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.findYearClosestToRef=Ln.findMostLikelyADYear=void 0;var uE=oE(ve());function lE(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}Ln.findMostLikelyADYear=lE;function cE(r,e,t){let n=uE.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}Ln.findYearClosestToRef=cE});var ut=k(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.parseTimeUnits=ce.TIME_UNITS_PATTERN=ce.parseYear=ce.YEAR_PATTERN=ce.parseOrdinalNumberPattern=ce.ORDINAL_NUMBER_PATTERN=ce.parseNumberPattern=ce.NUMBER_PATTERN=ce.TIME_UNIT_DICTIONARY=ce.ORDINAL_WORD_DICTIONARY=ce.INTEGER_WORD_DICTIONARY=ce.MONTH_DICTIONARY=ce.FULL_MONTH_NAME_DICTIONARY=ce.WEEKDAY_DICTIONARY=void 0;var Bo=Re(),dE=ot();ce.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};ce.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};ce.MONTH_DICTIONARY=Object.assign(Object.assign({},ce.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});ce.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};ce.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};ce.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};ce.NUMBER_PATTERN=`(?:${Bo.matchAnyPattern(ce.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function zh(r){let e=r.toLowerCase();return ce.INTEGER_WORD_DICTIONARY[e]!==void 0?ce.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}ce.parseNumberPattern=zh;ce.ORDINAL_NUMBER_PATTERN=`(?:${Bo.matchAnyPattern(ce.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function fE(r){let e=r.toLowerCase();return ce.ORDINAL_WORD_DICTIONARY[e]!==void 0?ce.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}ce.parseOrdinalNumberPattern=fE;ce.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function pE(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return dE.findMostLikelyADYear(e)}ce.parseYear=pE;var Kh=`(${ce.NUMBER_PATTERN})\\s{0,3}(${Bo.matchAnyPattern(ce.TIME_UNIT_DICTIONARY)})`,Vh=new RegExp(Kh,"i");ce.TIME_UNITS_PATTERN=Bo.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",Kh);function mE(r){let e={},t=r,n=Vh.exec(t);for(;n;)hE(e,n),t=t.substring(n[0].length).trim(),n=Vh.exec(t);return e}ce.parseTimeUnits=mE;function hE(r,e){let t=zh(e[1]),n=ce.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Qh=k((kc,Ec)=>{(function(r,e){typeof kc=="object"&&typeof Ec!="undefined"?Ec.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(kc,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var d=this.quarter()-1;return c?this.month(3*d).startOf(r).startOf("day"):this.month(3*d+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var nr=k(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.implySimilarTime=Ur.assignSimilarTime=Ur.assignSimilarDate=Ur.assignTheNextDay=void 0;var Xh=ze();function gE(r,e){e=e.add(1,"day"),Zh(r,e),Jh(r,e)}Ur.assignTheNextDay=gE;function Zh(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}Ur.assignSimilarDate=Zh;function yE(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",Xh.Meridiem.AM):r.assign("meridiem",Xh.Meridiem.PM)}Ur.assignSimilarTime=yE;function Jh(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}Ur.implySimilarTime=Jh});var eg=k(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.toTimezoneOffset=oi.TIMEZONE_ABBR_MAP=void 0;oi.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function bE(r){var e;return r==null?null:typeof r=="number"?r:(e=oi.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}oi.toTimezoneOffset=bE});var We=k(Wr=>{"use strict";var tg=Wr&&Wr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.ParsingResult=Wr.ParsingComponents=Wr.ReferenceWithTimezone=void 0;var TE=tg(Qh()),Ho=tg(ve()),Sc=nr(),_E=eg();Ho.default.extend(TE.default);var Oc=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=_E.toTimezoneOffset(e.timezone))}};Wr.ReferenceWithTimezone=Oc;var ui=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=Ho.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new ui(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return Ho.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=Ho.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new ui(e);return t.hour||t.minute||t.second?(Sc.assignSimilarTime(i,n),Sc.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(Sc.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};Wr.ParsingComponents=ui;var ia=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new ui(e),this.end=s}clone(){let e=new ia(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};Wr.ParsingResult=ia});var B=k(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.AbstractParserWithWordBoundaryChecking=void 0;var Dc=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};Vo.AbstractParserWithWordBoundaryChecking=Dc});var rg=k(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});var Rc=ut(),vE=We(),wE=B(),kE=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Rc.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),EE=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Rc.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),xc=class extends wE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?EE:kE}innerExtract(e,t){let n=Rc.parseTimeUnits(t[1]);return vE.ParsingComponents.createRelativeFromReference(e.reference,n)}};Mc.default=xc});var ug=k(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});var SE=ot(),ag=ut(),og=ut(),zo=ut(),OE=Re(),DE=B(),xE=new RegExp(`(?:on\\s{0,3})?(${zo.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${zo.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${OE.matchAnyPattern(ag.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${og.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),ng=1,ig=2,RE=3,sg=4,Cc=class extends DE.AbstractParserWithWordBoundaryChecking{innerPattern(){return xE}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=ag.MONTH_DICTIONARY[t[RE].toLowerCase()],s=zo.parseOrdinalNumberPattern(t[ng]);if(s>31)return t.index=t.index+t[ng].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[sg]){let a=og.parseYear(t[sg]);n.start.assign("year",a)}else{let a=SE.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[ig]){let a=zo.parseOrdinalNumberPattern(t[ig]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Ac.default=Cc});var pg=k(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});var ME=ot(),dg=ut(),Ko=ut(),fg=ut(),CE=Re(),AE=B(),PE=new RegExp(`(${CE.matchAnyPattern(dg.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${Ko.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${Ko.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${fg.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),NE=1,IE=2,lg=3,cg=4,Pc=class extends AE.AbstractParserWithWordBoundaryChecking{innerPattern(){return PE}innerExtract(e,t){let n=dg.MONTH_DICTIONARY[t[NE].toLowerCase()],i=Ko.parseOrdinalNumberPattern(t[IE]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[cg]){let u=fg.parseYear(t[cg]);s.assign("year",u)}else{let u=ME.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[lg])return s;let a=Ko.parseOrdinalNumberPattern(t[lg]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Nc.default=Pc});var gg=k(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});var Ic=ut(),FE=ot(),LE=Re(),hg=ut(),UE=B(),WE=new RegExp(`((?:in)\\s*)?(${LE.matchAnyPattern(Ic.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${hg.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),qE=1,$E=2,mg=3,Fc=class extends UE.AbstractParserWithWordBoundaryChecking{innerPattern(){return WE}innerExtract(e,t){let n=t[$E].toLowerCase();if(t[0].length<=3&&!Ic.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[qE]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=Ic.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[mg]){let a=hg.parseYear(t[mg]);i.start.assign("year",a)}else{let a=FE.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Lc.default=Fc});var Tg=k(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});var bg=ut(),jE=Re(),GE=B(),YE=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${jE.matchAnyPattern(bg.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),BE=1,HE=2,yg=3,VE=4,Uc=class extends GE.AbstractParserWithWordBoundaryChecking{innerPattern(){return YE}innerExtract(e,t){let n=t[yg]?parseInt(t[yg]):bg.MONTH_DICTIONARY[t[HE].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[BE]);return{day:parseInt(t[VE]),month:n,year:i}}};Wc.default=Uc});var _g=k($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});var zE=B(),KE=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),QE=1,XE=2,qc=class extends zE.AbstractParserWithWordBoundaryChecking{innerPattern(){return KE}innerExtract(e,t){let n=parseInt(t[XE]),i=parseInt(t[QE]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};$c.default=qc});var li=k(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.AbstractTimeExpressionParser=void 0;var wt=ze();function ZE(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function JE(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var vg=2,Bi=3,Qo=4,Xo=5,sa=6,jc=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[vg]);if(o>100){if(this.strictMode||t[Bi]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[Bi]!=null){if(t[Bi].length==1&&!t[sa])return null;s=parseInt(t[Bi])}if(s>=60)return null;if(o>12&&(a=wt.Meridiem.PM),t[sa]!=null){if(o>12)return null;let u=t[sa][0].toLowerCase();u=="a"&&(a=wt.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=wt.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",wt.Meridiem.AM):i.imply("meridiem",wt.Meridiem.PM),t[Xo]!=null){let u=parseInt(t[Xo].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Qo]!=null){let u=parseInt(t[Qo]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[Xo]!=null){let u=parseInt(t[Xo].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Qo]!=null){let u=parseInt(t[Qo]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[vg]),a=0,o=-1;if(t[Bi]!=null?a=parseInt(t[Bi]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=wt.Meridiem.PM),t[sa]!=null){if(s>12)return null;let u=t[sa][0].toLowerCase();u=="a"&&(o=wt.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=wt.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==wt.Meridiem.AM?(n.start.imply("meridiem",wt.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",wt.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",wt.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",wt.Meridiem.PM)):s>12?i.imply("meridiem",wt.Meridiem.PM):s<=12&&i.imply("meridiem",wt.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=ZE(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=JE(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};Zo.AbstractTimeExpressionParser=jc});var wg=k(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});var Jo=ze(),eS=li(),Gc=class extends eS.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",Jo.Meridiem.PM)):i<6&&n.assign("meridiem",Jo.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",Jo.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",Jo.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Yc.default=Gc});var ir=k(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.addImpliedTimeUnits=Hi.reverseTimeUnits=void 0;function tS(r){let e={};for(let t in r)e[t]=-r[t];return e}Hi.reverseTimeUnits=tS;function rS(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}Hi.addImpliedTimeUnits=rS});var kg=k(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});var Hc=ut(),nS=We(),iS=B(),sS=ir(),aS=new RegExp(`(${Hc.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),oS=new RegExp(`(${Hc.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),Bc=class extends iS.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?oS:aS}innerExtract(e,t){let n=Hc.parseTimeUnits(t[1]),i=sS.reverseTimeUnits(n);return nS.ParsingComponents.createRelativeFromReference(e.reference,i)}};Vc.default=Bc});var Eg=k(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});var Kc=ut(),uS=We(),lS=B(),cS=new RegExp(`(${Kc.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),dS=new RegExp("("+Kc.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),fS=1,zc=class extends lS.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?dS:cS}innerExtract(e,t){let n=Kc.parseTimeUnits(t[fS]);return uS.ParsingComponents.createRelativeFromReference(e.reference,n)}};Qc.default=zc});var zi=k(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.MergingRefiner=Vi.Filter=void 0;var Xc=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};Vi.Filter=Xc;var Zc=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};Vi.MergingRefiner=Zc});var qr=k(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});var pS=zi(),Jc=class extends pS.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};ed.default=Jc});var Sg=k(aa=>{"use strict";var mS=aa&&aa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(aa,"__esModule",{value:!0});var hS=mS(qr()),td=class extends hS.default{patternBetween(){return/^\s*(to|-)\s*$/i}};aa.default=td});var Og=k(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.mergeDateTimeComponent=Ki.mergeDateTimeResult=void 0;var gS=ze();function yS(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=rd(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=rd(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}Ki.mergeDateTimeResult=yS;function rd(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==gS.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}Ki.mergeDateTimeComponent=rd});var un=k(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});var bS=zi(),Dg=Og(),nd=class extends bS.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?Dg.mergeDateTimeResult(t,n):Dg.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};id.default=nd});var xg=k(oa=>{"use strict";var TS=oa&&oa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(oa,"__esModule",{value:!0});var _S=TS(un()),sd=class extends _S.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};oa.default=sd});var Rg=k(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});var vS=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),wS={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},ad=class{constructor(e){this.timezone=Object.assign(Object.assign({},wS),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=vS.exec(u);if(!l)return;let c=l[1].toUpperCase(),d=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(d===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${d} for: ${s.start}`)});let f=s.start.get("timezoneOffset");f!==null&&d!=f&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",d),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",d))}),t}};od.default=ad});var eu=k(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});var kS=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),ES=1,SS=2,OS=3,ud=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=kS.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[SS]),o=parseInt(s[OS]||"0"),u=a*60+o;u>14*60||(s[ES]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};ld.default=ud});var Mg=k(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});var cd=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};dd.default=cd});var Cg=k(ua=>{"use strict";var DS=ua&&ua.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ua,"__esModule",{value:!0});var xS=DS(ve()),fd=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=xS.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};ua.default=fd});var Ag=k(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0});var RS=zi(),pd=class extends RS.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};md.default=pd});var yd=k(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});var MS=B(),CS=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),AS=1,PS=2,NS=3,Pg=4,IS=5,Ng=6,Ig=7,Fg=8,Lg=9,hd=class extends MS.AbstractParserWithWordBoundaryChecking{innerPattern(){return CS}innerExtract(e,t){let n={};if(n.year=parseInt(t[AS]),n.month=parseInt(t[PS]),n.day=parseInt(t[NS]),t[Pg]!=null)if(n.hour=parseInt(t[Pg]),n.minute=parseInt(t[IS]),t[Ng]!=null&&(n.second=parseInt(t[Ng])),t[Ig]!=null&&(n.millisecond=parseInt(t[Ig])),t[Fg]==null)n.timezoneOffset=0;else{let i=parseInt(t[Fg]),s=0;t[Lg]!=null&&(s=parseInt(t[Lg]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};gd.default=hd});var Ug=k(Td=>{"use strict";Object.defineProperty(Td,"__esModule",{value:!0});var FS=zi(),bd=class extends FS.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};Td.default=bd});var ln=k(Qi=>{"use strict";var ci=Qi&&Qi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.includeCommonConfiguration=void 0;var LS=ci(Rg()),US=ci(eu()),Wg=ci(Mg()),WS=ci(Cg()),qS=ci(Ag()),$S=ci(yd()),jS=ci(Ug());function GS(r,e=!1){return r.parsers.unshift(new $S.default),r.refiners.unshift(new jS.default),r.refiners.unshift(new LS.default),r.refiners.unshift(new US.default),r.refiners.unshift(new Wg.default),r.refiners.push(new Wg.default),r.refiners.push(new WS.default),r.refiners.push(new qS.default(e)),r}Qi.includeCommonConfiguration=GS});var dn=k(Oe=>{"use strict";var YS=Oe&&Oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.noon=Oe.morning=Oe.midnight=Oe.yesterdayEvening=Oe.evening=Oe.lastNight=Oe.tonight=Oe.theDayAfter=Oe.tomorrow=Oe.theDayBefore=Oe.yesterday=Oe.today=Oe.now=void 0;var $r=We(),Xi=YS(ve()),cn=nr(),la=ze();function BS(r){let e=Xi.default(r.instant),t=new $r.ParsingComponents(r,{});return cn.assignSimilarDate(t,e),cn.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}Oe.now=BS;function HS(r){let e=Xi.default(r.instant),t=new $r.ParsingComponents(r,{});return cn.assignSimilarDate(t,e),cn.implySimilarTime(t,e),t}Oe.today=HS;function VS(r){return qg(r,1)}Oe.yesterday=VS;function qg(r,e){return _d(r,-e)}Oe.theDayBefore=qg;function zS(r){return _d(r,1)}Oe.tomorrow=zS;function _d(r,e){let t=Xi.default(r.instant),n=new $r.ParsingComponents(r,{});return t=t.add(e,"day"),cn.assignSimilarDate(n,t),cn.implySimilarTime(n,t),n}Oe.theDayAfter=_d;function KS(r,e=22){let t=Xi.default(r.instant),n=new $r.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",la.Meridiem.PM),cn.assignSimilarDate(n,t),n}Oe.tonight=KS;function QS(r,e=0){let t=Xi.default(r.instant),n=new $r.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),cn.assignSimilarDate(n,t),n.imply("hour",e),n}Oe.lastNight=QS;function XS(r,e=20){let t=new $r.ParsingComponents(r,{});return t.imply("meridiem",la.Meridiem.PM),t.imply("hour",e),t}Oe.evening=XS;function ZS(r,e=20){let t=Xi.default(r.instant),n=new $r.ParsingComponents(r,{});return t=t.add(-1,"day"),cn.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",la.Meridiem.PM),n}Oe.yesterdayEvening=ZS;function JS(r){let e=new $r.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}Oe.midnight=JS;function eO(r,e=6){let t=new $r.ParsingComponents(r,{});return t.imply("meridiem",la.Meridiem.AM),t.imply("hour",e),t}Oe.morning=eO;function tO(r){let e=new $r.ParsingComponents(r,{});return e.imply("meridiem",la.Meridiem.AM),e.imply("hour",12),e}Oe.noon=tO});var $g=k(_r=>{"use strict";var rO=_r&&_r.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),nO=_r&&_r.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),iO=_r&&_r.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&rO(e,r,t);return nO(e,r),e},sO=_r&&_r.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_r,"__esModule",{value:!0});var aO=sO(ve()),oO=B(),uO=nr(),ca=iO(dn()),lO=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,vd=class extends oO.AbstractParserWithWordBoundaryChecking{innerPattern(e){return lO}innerExtract(e,t){let n=aO.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return ca.now(e.reference);case"today":return ca.today(e.reference);case"yesterday":return ca.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return ca.tomorrow(e.reference);case"tonight":return ca.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),uO.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};_r.default=vd});var jg=k(da=>{"use strict";var cO=da&&da.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(da,"__esModule",{value:!0});var tu=ze(),dO=B(),fO=cO(ve()),pO=nr(),mO=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,wd=class extends dO.AbstractParserWithWordBoundaryChecking{innerPattern(){return mO}innerExtract(e,t){let n=fO.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",tu.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",tu.Meridiem.PM),i.imply("hour",20);break;case"midnight":pO.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",tu.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",tu.Meridiem.AM),i.imply("hour",12);break}return i}};da.default=wd});var di=k(Un=>{"use strict";var hO=Un&&Un.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Un,"__esModule",{value:!0});Un.toDayJSClosestWeekday=Un.toDayJSWeekday=void 0;var Gg=hO(ve());function gO(r,e,t){if(!t)return Yg(r,e);let n=Gg.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}Un.toDayJSWeekday=gO;function Yg(r,e){let t=Gg.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}Un.toDayJSClosestWeekday=Yg});var Hg=k(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});var Bg=ut(),yO=Re(),bO=B(),TO=di(),_O=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${yO.matchAnyPattern(Bg.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),vO=1,wO=2,kO=3,kd=class extends bO.AbstractParserWithWordBoundaryChecking{innerPattern(){return _O}innerExtract(e,t){let n=t[wO].toLowerCase(),i=Bg.WEEKDAY_DICTIONARY[n],s=t[vO],a=t[kO],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=TO.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Ed.default=kd});var Kg=k(fa=>{"use strict";var EO=fa&&fa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fa,"__esModule",{value:!0});var zg=ut(),Vg=We(),SO=EO(ve()),OO=B(),DO=Re(),xO=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${DO.matchAnyPattern(zg.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),RO=1,MO=2,Sd=class extends OO.AbstractParserWithWordBoundaryChecking{innerPattern(){return xO}innerExtract(e,t){let n=t[RO].toLowerCase(),i=t[MO].toLowerCase(),s=zg.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,Vg.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,Vg.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=SO.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};fa.default=Sd});var vr=k(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.ParsingContext=es.Chrono=void 0;var Zi=We(),CO=Od(),Ji=class{constructor(e){e=e||CO.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new Ji({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new ru(e,t,n),s=[];return this.parsers.forEach(a=>{let o=Ji.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof Zi.ParsingResult?c=l:l instanceof Zi.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};es.Chrono=Ji;var ru=class{constructor(e,t,n){this.text=e,this.reference=new Zi.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof Zi.ParsingComponents?e:new Zi.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new Zi.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};es.ParsingContext=ru});var fi=k(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});var Qg=ot(),AO=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),nu=1,Xg=5,Zg=2,Jg=3,Dd=4,xd=class{constructor(e){this.groupNumberMonth=e?Jg:Zg,this.groupNumberDay=e?Zg:Jg}pattern(){return AO}extract(e,t){if(t[nu]=="/"||t[Xg]=="/"){t.index+=t[0].length;return}let n=t.index+t[nu].length,i=t[0].substr(t[nu].length,t[0].length-t[nu].length-t[Xg].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[Dd]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[Dd]){let u=parseInt(t[Dd]),l=Qg.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=Qg.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};Rd.default=xd});var ty=k(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});var ey=ut(),PO=We(),NO=B(),IO=ir(),FO=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${ey.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Md=class extends NO.AbstractParserWithWordBoundaryChecking{innerPattern(){return FO}innerExtract(e,t){let n=t[1].toLowerCase(),i=ey.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=IO.reverseTimeUnits(i);break}return PO.ParsingComponents.createRelativeFromReference(e.reference,i)}};Cd.default=Md});var ny=k(Nd=>{"use strict";Object.defineProperty(Nd,"__esModule",{value:!0});var LO=zi(),Ad=We(),UO=ut(),WO=ir();function ry(r){return r.text.match(/\s+(before|from)$/i)!=null}function qO(r){return r.text.match(/\s+(after|since)$/i)!=null}var Pd=class extends LO.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!ry(t)&&!qO(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=UO.parseTimeUnits(t.text);ry(t)&&(i=WO.reverseTimeUnits(i));let s=Ad.ParsingComponents.createRelativeFromReference(new Ad.ReferenceWithTimezone(n.start.date()),i);return new Ad.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};Nd.default=Pd});var Od=k(Ge=>{"use strict";var Ze=Ge&&Ge.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.createConfiguration=Ge.createCasualConfiguration=Ge.parseDate=Ge.parse=Ge.GB=Ge.strict=Ge.casual=void 0;var $O=Ze(rg()),jO=Ze(ug()),GO=Ze(pg()),YO=Ze(gg()),BO=Ze(Tg()),HO=Ze(_g()),VO=Ze(wg()),zO=Ze(kg()),KO=Ze(Eg()),QO=Ze(Sg()),XO=Ze(xg()),ZO=ln(),JO=Ze($g()),e0=Ze(jg()),t0=Ze(Hg()),r0=Ze(Kg()),Id=vr(),n0=Ze(fi()),i0=Ze(ty()),s0=Ze(ny());Ge.casual=new Id.Chrono(iy(!1));Ge.strict=new Id.Chrono(iu(!0,!1));Ge.GB=new Id.Chrono(iu(!1,!0));function a0(r,e,t){return Ge.casual.parse(r,e,t)}Ge.parse=a0;function o0(r,e,t){return Ge.casual.parseDate(r,e,t)}Ge.parseDate=o0;function iy(r=!1){let e=iu(!1,r);return e.parsers.unshift(new JO.default),e.parsers.unshift(new e0.default),e.parsers.unshift(new YO.default),e.parsers.unshift(new r0.default),e.parsers.unshift(new i0.default),e}Ge.createCasualConfiguration=iy;function iu(r=!0,e=!1){return ZO.includeCommonConfiguration({parsers:[new n0.default(e),new $O.default,new jO.default,new GO.default,new t0.default,new BO.default,new HO.default,new VO.default(r),new zO.default(r),new KO.default(r)],refiners:[new s0.default,new XO.default,new QO.default]},r)}Ge.createConfiguration=iu});var sy=k(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0});var u0=li(),Fd=class extends u0.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Ld.default=Fd});var pa=k(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.parseTimeUnits=Ae.TIME_UNITS_PATTERN=Ae.parseYear=Ae.YEAR_PATTERN=Ae.parseNumberPattern=Ae.NUMBER_PATTERN=Ae.TIME_UNIT_DICTIONARY=Ae.INTEGER_WORD_DICTIONARY=Ae.MONTH_DICTIONARY=Ae.WEEKDAY_DICTIONARY=void 0;var Ud=Re(),l0=ot();Ae.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};Ae.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};Ae.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};Ae.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};Ae.NUMBER_PATTERN=`(?:${Ud.matchAnyPattern(Ae.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function oy(r){let e=r.toLowerCase();return Ae.INTEGER_WORD_DICTIONARY[e]!==void 0?Ae.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}Ae.parseNumberPattern=oy;Ae.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function c0(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return l0.findMostLikelyADYear(e)}Ae.parseYear=c0;var uy=`(${Ae.NUMBER_PATTERN})\\s{0,5}(${Ud.matchAnyPattern(Ae.TIME_UNIT_DICTIONARY)})\\s{0,5}`,ay=new RegExp(uy,"i");Ae.TIME_UNITS_PATTERN=Ud.repeatedTimeunitPattern("",uy);function d0(r){let e={},t=r,n=ay.exec(t);for(;n;)f0(e,n),t=t.substring(n[0].length),n=ay.exec(t);return e}Ae.parseTimeUnits=d0;function f0(r,e){let t=oy(e[1]),n=Ae.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var cy=k(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});var ly=pa(),p0=Re(),m0=B(),h0=di(),g0=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${p0.matchAnyPattern(ly.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),y0=1,b0=3,T0=2,Wd=class extends m0.AbstractParserWithWordBoundaryChecking{innerPattern(){return g0}innerExtract(e,t){let n=t[T0].toLowerCase(),i=ly.WEEKDAY_DICTIONARY[n],s=t[y0],a=t[b0],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=h0.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};qd.default=Wd});var my=k($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});var Wn=ze(),_0=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),v0=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),w0=2,dy=3,fy=4,py=5,ts=class{pattern(e){return _0}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=ts.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=v0.exec(i);return s&&(n.end=ts.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[w0]),t[dy]!=null&&(i=parseInt(t[dy])),i>=60||n>24)return null;if(n>=12&&(s=Wn.Meridiem.PM),t[py]!=null){if(n>12)return null;let a=t[py].toLowerCase();a.match(/morgen|vormittag/)&&(s=Wn.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=Wn.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=Wn.Meridiem.AM,n=0):n<6?s=Wn.Meridiem.AM:(s=Wn.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Wn.Meridiem.AM):e.imply("meridiem",Wn.Meridiem.PM),t[fy]!=null){let a=parseInt(t[fy]);if(a>=60)return null;e.assign("second",a)}return e}};$d.default=ts});var hy=k(ma=>{"use strict";var k0=ma&&ma.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ma,"__esModule",{value:!0});var E0=k0(qr()),jd=class extends E0.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};ma.default=jd});var gy=k(ha=>{"use strict";var S0=ha&&ha.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ha,"__esModule",{value:!0});var O0=S0(un()),Gd=class extends O0.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};ha.default=Gd});var Yd=k(ya=>{"use strict";var D0=ya&&ya.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ya,"__esModule",{value:!0});var x0=D0(ve()),pi=ze(),R0=B(),M0=nr(),C0=ir(),ga=class extends R0.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=x0.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return M0.implySimilarTime(s,n),ga.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",pi.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",pi.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",pi.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",pi.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",pi.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",pi.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=C0.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",pi.Meridiem.AM);break}return e}};ya.default=ga});var Ty=k(wr=>{"use strict";var A0=wr&&wr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),P0=wr&&wr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),N0=wr&&wr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&A0(e,r,t);return P0(e,r),e},by=wr&&wr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wr,"__esModule",{value:!0});var I0=by(ve()),F0=B(),mi=nr(),L0=by(Yd()),yy=N0(dn()),U0=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),W0=1,q0=2,Bd=class extends F0.AbstractParserWithWordBoundaryChecking{innerPattern(e){return U0}innerExtract(e,t){let n=I0.default(e.refDate),i=(t[W0]||"").toLowerCase(),s=(t[q0]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=yy.now(e.reference);break;case"heute":a=yy.today(e.reference);break;case"morgen":mi.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),mi.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),mi.assignSimilarDate(a,n),mi.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),mi.assignSimilarDate(a,n),mi.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),mi.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=L0.default.extractTimeComponents(a,s)),a}};wr.default=Bd});var Sy=k(Vd=>{"use strict";Object.defineProperty(Vd,"__esModule",{value:!0});var $0=ot(),ky=pa(),Ey=pa(),j0=Re(),G0=B(),Y0=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${j0.matchAnyPattern(ky.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Ey.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),_y=1,vy=2,B0=3,wy=4,Hd=class extends G0.AbstractParserWithWordBoundaryChecking{innerPattern(){return Y0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=ky.MONTH_DICTIONARY[t[B0].toLowerCase()],s=parseInt(t[_y]);if(s>31)return t.index=t.index+t[_y].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[wy]){let a=Ey.parseYear(t[wy]);n.start.assign("year",a)}else{let a=$0.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[vy]){let a=parseInt(t[vy]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Vd.default=Hd});var Oy=k(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});var su=pa(),H0=We(),V0=B(),z0=ir(),K0=Re(),zd=class extends V0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${su.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${K0.matchAnyPattern(su.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?su.parseNumberPattern(t[2]):1,i=su.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=z0.reverseTimeUnits(s)),H0.ParsingComponents.createRelativeFromReference(e.reference,s)}};Kd.default=zd});var Ry=k(Je=>{"use strict";var kr=Je&&Je.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Je,"__esModule",{value:!0});Je.createConfiguration=Je.createCasualConfiguration=Je.parseDate=Je.parse=Je.strict=Je.casual=void 0;var Q0=ln(),Dy=vr(),X0=kr(fi()),Z0=kr(yd()),J0=kr(sy()),e1=kr(cy()),t1=kr(my()),r1=kr(hy()),n1=kr(gy()),i1=kr(Ty()),s1=kr(Yd()),a1=kr(Sy()),o1=kr(Oy());Je.casual=new Dy.Chrono(xy());Je.strict=new Dy.Chrono(Qd(!0));function u1(r,e,t){return Je.casual.parse(r,e,t)}Je.parse=u1;function l1(r,e,t){return Je.casual.parseDate(r,e,t)}Je.parseDate=l1;function xy(r=!0){let e=Qd(!1,r);return e.parsers.unshift(new s1.default),e.parsers.unshift(new i1.default),e.parsers.unshift(new o1.default),e}Je.createCasualConfiguration=xy;function Qd(r=!0,e=!0){return Q0.includeCommonConfiguration({parsers:[new Z0.default,new X0.default(e),new J0.default,new t1.default,new a1.default,new e1.default],refiners:[new r1.default,new n1.default]},r)}Je.createConfiguration=Qd});var Cy=k(Er=>{"use strict";var c1=Er&&Er.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),d1=Er&&Er.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),f1=Er&&Er.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&c1(e,r,t);return d1(e,r),e},p1=Er&&Er.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Er,"__esModule",{value:!0});var m1=p1(ve()),h1=ze(),g1=B(),My=nr(),au=f1(dn()),Xd=class extends g1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=m1.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return au.now(e.reference);case"aujourd'hui":return au.today(e.reference);case"hier":return au.yesterday(e.reference);case"demain":return au.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(My.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",h1.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),My.assignSimilarDate(s,n),s.imply("hour",0))}return s}};Er.default=Xd});var Ay=k(Jd=>{"use strict";Object.defineProperty(Jd,"__esModule",{value:!0});var ba=ze(),y1=B(),Zd=class extends y1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",ba.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",ba.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",ba.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",ba.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",ba.Meridiem.AM);break}return i}};Jd.default=Zd});var Py=k(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});var b1=li(),ef=class extends b1.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};tf.default=ef});var Ny=k(Ta=>{"use strict";var T1=Ta&&Ta.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ta,"__esModule",{value:!0});var _1=T1(un()),rf=class extends _1.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};Ta.default=rf});var Iy=k(_a=>{"use strict";var v1=_a&&_a.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_a,"__esModule",{value:!0});var w1=v1(qr()),nf=class extends w1.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};_a.default=nf});var qn=k(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.parseTimeUnits=we.TIME_UNITS_PATTERN=we.parseYear=we.YEAR_PATTERN=we.parseOrdinalNumberPattern=we.ORDINAL_NUMBER_PATTERN=we.parseNumberPattern=we.NUMBER_PATTERN=we.TIME_UNIT_DICTIONARY=we.INTEGER_WORD_DICTIONARY=we.MONTH_DICTIONARY=we.WEEKDAY_DICTIONARY=void 0;var sf=Re();we.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};we.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};we.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};we.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};we.NUMBER_PATTERN=`(?:${sf.matchAnyPattern(we.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function Ly(r){let e=r.toLowerCase();return we.INTEGER_WORD_DICTIONARY[e]!==void 0?we.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}we.parseNumberPattern=Ly;we.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function k1(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}we.parseOrdinalNumberPattern=k1;we.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function E1(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}we.parseYear=E1;var Uy=`(${we.NUMBER_PATTERN})\\s{0,5}(${sf.matchAnyPattern(we.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Fy=new RegExp(Uy,"i");we.TIME_UNITS_PATTERN=sf.repeatedTimeunitPattern("",Uy);function S1(r){let e={},t=r,n=Fy.exec(t);for(;n;)O1(e,n),t=t.substring(n[0].length),n=Fy.exec(t);return e}we.parseTimeUnits=S1;function O1(r,e){let t=Ly(e[1]),n=we.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var qy=k(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});var Wy=qn(),D1=Re(),x1=B(),R1=di(),M1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${D1.matchAnyPattern(Wy.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),C1=1,A1=2,af=class extends x1.AbstractParserWithWordBoundaryChecking{innerPattern(){return M1}innerExtract(e,t){let n=t[C1].toLowerCase(),i=Wy.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[A1];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=R1.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};of.default=af});var Yy=k(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});var va=ze(),P1=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),N1=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),I1=2,$y=3,jy=4,Gy=5,rs=class{pattern(e){return P1}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=rs.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=N1.exec(i);return s&&(n.end=rs.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[I1]),t[$y]!=null&&(i=parseInt(t[$y])),i>=60||n>24)return null;if(n>=12&&(s=va.Meridiem.PM),t[Gy]!=null){if(n>12)return null;let a=t[Gy][0].toLowerCase();a=="a"&&(s=va.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=va.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",va.Meridiem.AM):e.imply("meridiem",va.Meridiem.PM),t[jy]!=null){let a=parseInt(t[jy]);if(a>=60)return null;e.assign("second",a)}return e}};uf.default=rs});var Qy=k(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});var F1=ot(),zy=qn(),Ky=qn(),ou=qn(),L1=Re(),U1=B(),W1=new RegExp(`(?:on\\s*?)?(${ou.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${ou.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${L1.matchAnyPattern(zy.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Ky.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),By=1,Hy=2,q1=3,Vy=4,lf=class extends U1.AbstractParserWithWordBoundaryChecking{innerPattern(){return W1}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=zy.MONTH_DICTIONARY[t[q1].toLowerCase()],s=ou.parseOrdinalNumberPattern(t[By]);if(s>31)return t.index=t.index+t[By].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Vy]){let a=Ky.parseYear(t[Vy]);n.start.assign("year",a)}else{let a=F1.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Hy]){let a=ou.parseOrdinalNumberPattern(t[Hy]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};cf.default=lf});var Zy=k(ff=>{"use strict";Object.defineProperty(ff,"__esModule",{value:!0});var Xy=qn(),$1=We(),j1=B(),G1=ir(),df=class extends j1.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${Xy.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=Xy.parseTimeUnits(t[1]),i=G1.reverseTimeUnits(n);return $1.ParsingComponents.createRelativeFromReference(e.reference,i)}};ff.default=df});var eb=k(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});var Jy=qn(),Y1=We(),B1=B(),pf=class extends B1.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${Jy.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=Jy.parseTimeUnits(t[1]);return Y1.ParsingComponents.createRelativeFromReference(e.reference,n)}};mf.default=pf});var tb=k(gf=>{"use strict";Object.defineProperty(gf,"__esModule",{value:!0});var uu=qn(),H1=We(),V1=B(),z1=ir(),K1=Re(),hf=class extends V1.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${uu.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${K1.matchAnyPattern(uu.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?uu.parseNumberPattern(t[1]):1,i=uu.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=z1.reverseTimeUnits(s)),H1.ParsingComponents.createRelativeFromReference(e.reference,s)}};gf.default=hf});var ib=k(et=>{"use strict";var sr=et&&et.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(et,"__esModule",{value:!0});et.createConfiguration=et.createCasualConfiguration=et.parseDate=et.parse=et.strict=et.casual=void 0;var Q1=ln(),rb=vr(),X1=sr(Cy()),Z1=sr(Ay()),J1=sr(fi()),eD=sr(Py()),tD=sr(Ny()),rD=sr(Iy()),nD=sr(qy()),iD=sr(Yy()),sD=sr(Qy()),aD=sr(Zy()),oD=sr(eb()),uD=sr(tb());et.casual=new rb.Chrono(nb());et.strict=new rb.Chrono(yf(!0));function lD(r,e,t){return et.casual.parse(r,e,t)}et.parse=lD;function cD(r,e,t){return et.casual.parseDate(r,e,t)}et.parseDate=cD;function nb(r=!0){let e=yf(!1,r);return e.parsers.unshift(new X1.default),e.parsers.unshift(new Z1.default),e.parsers.unshift(new uD.default),e}et.createCasualConfiguration=nb;function yf(r=!0,e=!0){return Q1.includeCommonConfiguration({parsers:[new J1.default(e),new sD.default,new eD.default,new iD.default,new aD.default,new oD.default,new nD.default],refiners:[new tD.default,new rD.default]},r)}et.createConfiguration=yf});var sb=k(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.toHankaku=void 0;function dD(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,fD)}lu.toHankaku=dD;function fD(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var ob=k(wa=>{"use strict";var pD=wa&&wa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wa,"__esModule",{value:!0});var bf=sb(),mD=ot(),hD=pD(ve()),gD=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,ab=1,yD=2,Tf=3,bD=4,TD=5,_D=6,_f=class{pattern(){return gD}extract(e,t){let n=parseInt(bf.toHankaku(t[TD])),i=parseInt(bf.toHankaku(t[_D])),s=e.createParsingComponents({day:i,month:n});if(t[ab]&&t[ab].match("\u540C|\u4ECA|\u672C")){let a=hD.default(e.refDate);s.assign("year",a.year())}if(t[yD]){let a=t[bD],o=a=="\u5143"?1:parseInt(bf.toHankaku(a));t[Tf]=="\u4EE4\u548C"?o+=2018:t[Tf]=="\u5E73\u6210"?o+=1988:t[Tf]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=mD.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};wa.default=_f});var ub=k(ka=>{"use strict";var vD=ka&&ka.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ka,"__esModule",{value:!0});var wD=vD(qr()),vf=class extends wD.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};ka.default=vf});var cb=k(Sr=>{"use strict";var kD=Sr&&Sr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),ED=Sr&&Sr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),SD=Sr&&Sr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&kD(e,r,t);return ED(e,r),e},OD=Sr&&Sr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Sr,"__esModule",{value:!0});var DD=OD(ve()),lb=ze(),wf=SD(dn()),xD=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,kf=class{pattern(){return xD}extract(e,t){let n=t[0],i=DD.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return wf.yesterday(e.reference);case"\u660E\u65E5":return wf.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return wf.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",lb.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",lb.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};Sr.default=kf});var pb=k(tt=>{"use strict";var Ef=tt&&tt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(tt,"__esModule",{value:!0});tt.createConfiguration=tt.createCasualConfiguration=tt.parseDate=tt.parse=tt.strict=tt.casual=void 0;var RD=Ef(ob()),MD=Ef(ub()),CD=Ef(cb()),db=vr();tt.casual=new db.Chrono(fb());tt.strict=new db.Chrono(Sf());function AD(r,e,t){return tt.casual.parse(r,e,t)}tt.parse=AD;function PD(r,e,t){return tt.casual.parseDate(r,e,t)}tt.parseDate=PD;function fb(){let r=Sf();return r.parsers.unshift(new CD.default),r}tt.createCasualConfiguration=fb;function Sf(){return{parsers:[new RD.default],refiners:[new MD.default]}}tt.createConfiguration=Sf});var cu=k(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.parseYear=jr.YEAR_PATTERN=jr.MONTH_DICTIONARY=jr.WEEKDAY_DICTIONARY=void 0;jr.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};jr.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};jr.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function ND(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}jr.parseYear=ND});var hb=k(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});var mb=cu(),ID=Re(),FD=B(),LD=di(),UD=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${ID.matchAnyPattern(mb.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),WD=1,qD=2,$D=3,Of=class extends FD.AbstractParserWithWordBoundaryChecking{innerPattern(){return UD}innerExtract(e,t){let n=t[qD].toLowerCase(),i=mb.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[WD],a=t[$D],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=LD.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Df.default=Of});var gb=k(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});var jD=li(),xf=class extends jD.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};Rf.default=xf});var yb=k(Ea=>{"use strict";var GD=Ea&&Ea.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ea,"__esModule",{value:!0});var YD=GD(un()),Mf=class extends YD.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};Ea.default=Mf});var bb=k(Sa=>{"use strict";var BD=Sa&&Sa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Sa,"__esModule",{value:!0});var HD=BD(qr()),Cf=class extends HD.default{patternBetween(){return/^\s*(?:-)\s*$/i}};Sa.default=Cf});var Eb=k(Pf=>{"use strict";Object.defineProperty(Pf,"__esModule",{value:!0});var VD=ot(),wb=cu(),kb=cu(),zD=Re(),KD=B(),QD=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${zD.matchAnyPattern(wb.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${kb.YEAR_PATTERN}))?(?=\\W|$)`,"i"),Tb=1,_b=2,XD=3,vb=4,Af=class extends KD.AbstractParserWithWordBoundaryChecking{innerPattern(){return QD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=wb.MONTH_DICTIONARY[t[XD].toLowerCase()],s=parseInt(t[Tb]);if(s>31)return t.index=t.index+t[Tb].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[vb]){let a=kb.parseYear(t[vb]);n.start.assign("year",a)}else{let a=VD.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[_b]){let a=parseInt(t[_b]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Pf.default=Af});var Sb=k(fn=>{"use strict";var ZD=fn&&fn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),JD=fn&&fn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),ex=fn&&fn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&ZD(e,r,t);return JD(e,r),e};Object.defineProperty(fn,"__esModule",{value:!0});var tx=B(),du=ex(dn()),Nf=class extends tx.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return du.now(e.reference);case"hoje":return du.today(e.reference);case"amanha":case"amanh\xE3":return du.tomorrow(e.reference);case"ontem":return du.yesterday(e.reference)}return i}};fn.default=Nf});var Ob=k(Oa=>{"use strict";var rx=Oa&&Oa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oa,"__esModule",{value:!0});var fu=ze(),nx=B(),ix=nr(),sx=rx(ve()),If=class extends nx.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=sx.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",fu.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",fu.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",fu.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":ix.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",fu.Meridiem.AM),i.imply("hour",12);break}return i}};Oa.default=If});var Rb=k(rt=>{"use strict";var $n=rt&&rt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rt,"__esModule",{value:!0});rt.createConfiguration=rt.createCasualConfiguration=rt.parseDate=rt.parse=rt.strict=rt.casual=void 0;var ax=ln(),Db=vr(),ox=$n(fi()),ux=$n(hb()),lx=$n(gb()),cx=$n(yb()),dx=$n(bb()),fx=$n(Eb()),px=$n(Sb()),mx=$n(Ob());rt.casual=new Db.Chrono(xb());rt.strict=new Db.Chrono(Ff(!0));function hx(r,e,t){return rt.casual.parse(r,e,t)}rt.parse=hx;function gx(r,e,t){return rt.casual.parseDate(r,e,t)}rt.parseDate=gx;function xb(r=!0){let e=Ff(!1,r);return e.parsers.push(new px.default),e.parsers.push(new mx.default),e}rt.createCasualConfiguration=xb;function Ff(r=!0,e=!0){return ax.includeCommonConfiguration({parsers:[new ox.default(e),new ux.default,new lx.default,new fx.default],refiners:[new cx.default,new dx.default]},r)}rt.createConfiguration=Ff});var Mb=k(Da=>{"use strict";var yx=Da&&Da.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Da,"__esModule",{value:!0});var bx=yx(qr()),Lf=class extends bx.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};Da.default=Lf});var Cb=k(xa=>{"use strict";var Tx=xa&&xa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xa,"__esModule",{value:!0});var _x=Tx(un()),Uf=class extends _x.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};xa.default=Uf});var Ab=k(pn=>{"use strict";var vx=pn&&pn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),wx=pn&&pn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),kx=pn&&pn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&vx(e,r,t);return wx(e,r),e};Object.defineProperty(pn,"__esModule",{value:!0});var Ex=B(),pu=kx(dn()),Wf=class extends Ex.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return pu.now(e.reference);case"vandaag":return pu.today(e.reference);case"morgen":case"morgend":return pu.tomorrow(e.reference);case"gisteren":return pu.yesterday(e.reference)}return i}};pn.default=Wf});var Pb=k(Ra=>{"use strict";var Sx=Ra&&Ra.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ra,"__esModule",{value:!0});var mu=ze(),Ox=B(),Dx=Sx(ve()),xx=nr(),Rx=1,Mx=2,qf=class extends Ox.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=Dx.default(e.refDate),i=e.createParsingComponents();switch(t[Rx]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[Mx].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",mu.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",mu.Meridiem.PM),i.imply("hour",20);break;case"middernacht":xx.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",mu.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",mu.Meridiem.AM),i.imply("hour",12);break}return i}};Ra.default=qf});var $t=k(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.parseTimeUnits=ge.TIME_UNITS_PATTERN=ge.parseYear=ge.YEAR_PATTERN=ge.parseOrdinalNumberPattern=ge.ORDINAL_NUMBER_PATTERN=ge.parseNumberPattern=ge.NUMBER_PATTERN=ge.TIME_UNIT_DICTIONARY=ge.ORDINAL_WORD_DICTIONARY=ge.INTEGER_WORD_DICTIONARY=ge.MONTH_DICTIONARY=ge.WEEKDAY_DICTIONARY=void 0;var hu=Re(),Cx=ot();ge.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};ge.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};ge.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};ge.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};ge.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};ge.NUMBER_PATTERN=`(?:${hu.matchAnyPattern(ge.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function Ib(r){let e=r.toLowerCase();return ge.INTEGER_WORD_DICTIONARY[e]!==void 0?ge.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}ge.parseNumberPattern=Ib;ge.ORDINAL_NUMBER_PATTERN=`(?:${hu.matchAnyPattern(ge.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function Ax(r){let e=r.toLowerCase();return ge.ORDINAL_WORD_DICTIONARY[e]!==void 0?ge.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}ge.parseOrdinalNumberPattern=Ax;ge.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function Px(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return Cx.findMostLikelyADYear(e)}ge.parseYear=Px;var Fb=`(${ge.NUMBER_PATTERN})\\s{0,5}(${hu.matchAnyPattern(ge.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Nb=new RegExp(Fb,"i");ge.TIME_UNITS_PATTERN=hu.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",Fb);function Nx(r){let e={},t=r,n=Nb.exec(t);for(;n;)Ix(e,n),t=t.substring(n[0].length),n=Nb.exec(t);return e}ge.parseTimeUnits=Nx;function Ix(r,e){let t=Ib(e[1]),n=ge.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Ub=k(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});var Lb=$t(),Fx=We(),Lx=B(),$f=class extends Lx.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+Lb.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=Lb.parseTimeUnits(t[1]);return Fx.ParsingComponents.createRelativeFromReference(e.reference,n)}};jf.default=$f});var qb=k(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});var Wb=$t(),Ux=Re(),Wx=B(),qx=di(),$x=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${Ux.matchAnyPattern(Wb.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),jx=1,Gx=2,Yx=3,Gf=class extends Wx.AbstractParserWithWordBoundaryChecking{innerPattern(){return $x}innerExtract(e,t){let n=t[Gx].toLowerCase(),i=Wb.WEEKDAY_DICTIONARY[n],s=t[jx],a=t[Yx],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=qx.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Yf.default=Gf});var Hb=k(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});var Bx=ot(),Yb=$t(),gu=$t(),Bb=$t(),Hx=Re(),Vx=B(),zx=new RegExp(`(?:on\\s*?)?(${gu.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${gu.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+Hx.matchAnyPattern(Yb.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${Bb.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Kx=3,$b=1,jb=2,Gb=4,Bf=class extends Vx.AbstractParserWithWordBoundaryChecking{innerPattern(){return zx}innerExtract(e,t){let n=Yb.MONTH_DICTIONARY[t[Kx].toLowerCase()],i=gu.parseOrdinalNumberPattern(t[$b]);if(i>31)return t.index=t.index+t[$b].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[Gb]){let u=Bb.parseYear(t[Gb]);s.assign("year",u)}else{let u=Bx.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[jb])return s;let a=gu.parseOrdinalNumberPattern(t[jb]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Hf.default=Bf});var Qb=k(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});var zb=$t(),Qx=ot(),Xx=Re(),Kb=$t(),Zx=B(),Jx=new RegExp(`(${Xx.matchAnyPattern(zb.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Kb.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),eR=1,Vb=2,Vf=class extends Zx.AbstractParserWithWordBoundaryChecking{innerPattern(){return Jx}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[eR],s=zb.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[Vb]){let a=Kb.parseYear(t[Vb]);n.assign("year",a)}else{let a=Qx.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};zf.default=Vf});var Xb=k(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});var tR=B(),rR=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),nR=1,iR=2,Kf=class extends tR.AbstractParserWithWordBoundaryChecking{innerPattern(){return rR}innerExtract(e,t){let n=parseInt(t[iR]),i=parseInt(t[nR]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Qf.default=Kf});var Zb=k(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});var sR=li(),Xf=class extends sR.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Zf.default=Xf});var tT=k(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});var eT=$t(),aR=Re(),oR=B(),uR=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${aR.matchAnyPattern(eT.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),lR=1,cR=2,Jb=3,dR=4,Jf=class extends oR.AbstractParserWithWordBoundaryChecking{innerPattern(){return uR}innerExtract(e,t){let n=t[Jb]?parseInt(t[Jb]):eT.MONTH_DICTIONARY[t[cR].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[lR]);return{day:parseInt(t[dR]),month:n,year:i}}};ep.default=Jf});var rT=k(Ma=>{"use strict";var fR=Ma&&Ma.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ma,"__esModule",{value:!0});var pR=B(),yu=ze(),tp=nr(),mR=fR(ve()),hR=1,gR=2,rp=class extends pR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[hR].toLowerCase(),i=t[gR].toLowerCase(),s=e.createParsingComponents(),a=mR.default(e.refDate);switch(n){case"gisteren":tp.assignSimilarDate(s,a.add(-1,"day"));break;case"van":tp.assignSimilarDate(s,a);break;case"morgen":tp.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",yu.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",yu.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",yu.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",yu.Meridiem.PM),s.imply("hour",20);break}return s}};Ma.default=rp});var iT=k(ip=>{"use strict";Object.defineProperty(ip,"__esModule",{value:!0});var nT=$t(),yR=We(),bR=B(),TR=ir(),_R=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${nT.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),np=class extends bR.AbstractParserWithWordBoundaryChecking{innerPattern(){return _R}innerExtract(e,t){let n=t[1].toLowerCase(),i=nT.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=TR.reverseTimeUnits(i);break}return yR.ParsingComponents.createRelativeFromReference(e.reference,i)}};ip.default=np});var oT=k(Ca=>{"use strict";var vR=Ca&&Ca.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ca,"__esModule",{value:!0});var aT=$t(),sT=We(),wR=vR(ve()),kR=B(),ER=Re(),SR=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${ER.matchAnyPattern(aT.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),OR=1,DR=2,sp=class extends kR.AbstractParserWithWordBoundaryChecking{innerPattern(){return SR}innerExtract(e,t){let n=t[OR].toLowerCase(),i=t[DR].toLowerCase(),s=aT.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,sT.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,sT.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=wR.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Ca.default=sp});var uT=k(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});var op=$t(),xR=We(),RR=B(),MR=ir(),CR=new RegExp("("+op.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),AR=new RegExp("("+op.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),ap=class extends RR.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?AR:CR}innerExtract(e,t){let n=op.parseTimeUnits(t[1]),i=MR.reverseTimeUnits(n);return xR.ParsingComponents.createRelativeFromReference(e.reference,i)}};up.default=ap});var lT=k(dp=>{"use strict";Object.defineProperty(dp,"__esModule",{value:!0});var cp=$t(),PR=We(),NR=B(),IR=new RegExp("("+cp.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),FR=new RegExp("("+cp.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),LR=1,lp=class extends NR.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?FR:IR}innerExtract(e,t){let n=cp.parseTimeUnits(t[LR]);return PR.ParsingComponents.createRelativeFromReference(e.reference,n)}};dp.default=lp});var pT=k(nt=>{"use strict";var lt=nt&&nt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(nt,"__esModule",{value:!0});nt.createConfiguration=nt.createCasualConfiguration=nt.parseDate=nt.parse=nt.strict=nt.casual=void 0;var UR=ln(),cT=vr(),WR=lt(Mb()),qR=lt(Cb()),$R=lt(Ab()),jR=lt(Pb()),GR=lt(fi()),YR=lt(Ub()),BR=lt(qb()),HR=lt(Hb()),dT=lt(Qb()),VR=lt(Xb()),zR=lt(Zb()),KR=lt(tT()),QR=lt(rT()),XR=lt(iT()),ZR=lt(oT()),JR=lt(uT()),eM=lt(lT());nt.casual=new cT.Chrono(fT());nt.strict=new cT.Chrono(fp(!0));function tM(r,e,t){return nt.casual.parse(r,e,t)}nt.parse=tM;function rM(r,e,t){return nt.casual.parseDate(r,e,t)}nt.parseDate=rM;function fT(r=!0){let e=fp(!1,r);return e.parsers.unshift(new $R.default),e.parsers.unshift(new jR.default),e.parsers.unshift(new QR.default),e.parsers.unshift(new dT.default),e.parsers.unshift(new ZR.default),e.parsers.unshift(new XR.default),e}nt.createCasualConfiguration=fT;function fp(r=!0,e=!0){return UR.includeCommonConfiguration({parsers:[new GR.default(e),new YR.default,new HR.default,new dT.default,new BR.default,new KR.default,new VR.default,new zR.default(r),new JR.default(r),new eM.default(r)],refiners:[new qR.default,new WR.default]},r)}nt.createConfiguration=fp});var yT=k(Aa=>{"use strict";var nM=Aa&&Aa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Aa,"__esModule",{value:!0});var iM=nM(ve()),sM=B(),aM=1,mT=2,oM=3,hT=4,gT=5,uM=6,pp=class extends sM.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=iM.default(e.refDate),a=s;if(t[aM])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[mT]){let o=t[mT],u=t[oM];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[hT]){let u=t[hT][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[gT]){let o=t[gT];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[uM];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Aa.default=pp});var ns=k(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.zhStringToYear=Mt.zhStringToNumber=Mt.WEEKDAY_OFFSET=Mt.NUMBER=void 0;Mt.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};Mt.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function lM(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?Mt.NUMBER[n]:e*Mt.NUMBER[n]:e+=Mt.NUMBER[n]}return e}Mt.zhStringToNumber=lM;function cM(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+Mt.NUMBER[n]}return parseInt(e)}Mt.zhStringToYear=cM});var TT=k(Pa=>{"use strict";var dM=Pa&&Pa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pa,"__esModule",{value:!0});var fM=dM(ve()),pM=B(),hi=ns(),mp=1,bT=2,hp=3,gp=class extends pM.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(hi.NUMBER).join("")+"]{4}|["+Object.keys(hi.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(hi.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(hi.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=fM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[bT]);if(isNaN(s)&&(s=hi.zhStringToNumber(t[bT])),i.start.assign("month",s),t[hp]){let a=parseInt(t[hp]);isNaN(a)&&(a=hi.zhStringToNumber(t[hp])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[mp]){let a=parseInt(t[mp]);isNaN(a)&&(a=hi.zhStringToYear(t[mp])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};Pa.default=gp});var vT=k(Na=>{"use strict";var mM=Na&&Na.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Na,"__esModule",{value:!0});var hM=mM(ve()),gM=B(),_T=ns(),yM=new RegExp("(\\d+|["+Object.keys(_T.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),yp=1,bM=2,bp=class extends gM.AbstractParserWithWordBoundaryChecking{innerPattern(){return yM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[yp]);if(isNaN(i)&&(i=_T.zhStringToNumber(t[yp])),isNaN(i)){let u=t[yp];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=hM.default(e.refDate),o=t[bM][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Na.default=bp});var kT=k(Ia=>{"use strict";var TM=Ia&&Ia.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ia,"__esModule",{value:!0});var _M=TM(ve()),vM=B(),wT=ns(),wM=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(wT.WEEKDAY_OFFSET).join("|")+")"),Tp=class extends vM.AbstractParserWithWordBoundaryChecking{innerPattern(){return wM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=wT.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=_M.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Ia.default=Tp});var ET=k(Fa=>{"use strict";var kM=Fa&&Fa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fa,"__esModule",{value:!0});var EM=kM(ve()),SM=B(),or=ns(),OM=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(or.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(or.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(or.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),DM=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(or.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(or.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(or.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),bu=1,Tu=2,_u=3,vu=4,wu=5,ku=6,ar=7,is=8,Eu=9,_p=class extends SM.AbstractParserWithWordBoundaryChecking{innerPattern(){return OM}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=EM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[bu]){var a=t[bu];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[vu]){var o=t[vu];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[is]){var d=parseInt(t[is]);if(isNaN(d)&&(d=or.zhStringToNumber(t[is])),d>=60)return null;i.start.assign("second",d)}if(u=parseInt(t[ku]),isNaN(u)&&(u=or.zhStringToNumber(t[ku])),t[ar]?t[ar]=="\u534A"?l=30:t[ar]=="\u6B63"||t[ar]=="\u6574"?l=0:(l=parseInt(t[ar]),isNaN(l)&&(l=or.zhStringToNumber(t[ar]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[Eu]){if(u>12)return null;var f=t[Eu][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12))}else if(t[Tu]){var m=t[Tu],y=m[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[_u]){var g=t[_u],T=g[0];T=="\u4E0A"||T=="\u671D"||T=="\u65E9"||T=="\u51CC"?(c=0,u==12&&(u=0)):(T=="\u4E0B"||T=="\u664F"||T=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[wu]){var E=t[wu],S=E[0];S=="\u4E0A"||S=="\u671D"||S=="\u65E9"||S=="\u51CC"?(c=0,u==12&&(u=0)):(S=="\u4E0B"||S=="\u664F"||S=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=DM.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let x=s.clone();if(i.end=e.createParsingComponents(),t[bu]){var a=t[bu];a=="\u660E"||a=="\u807D"?n.hour()>1&&x.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?x.add(-1,"day"):a=="\u524D"?x.add(-2,"day"):a=="\u5927\u524D"?x.add(-3,"day"):a=="\u5F8C"?x.add(2,"day"):a=="\u5927\u5F8C"&&x.add(3,"day"),i.end.assign("day",x.date()),i.end.assign("month",x.month()+1),i.end.assign("year",x.year())}else if(t[vu]){var o=t[vu];o=="\u660E"||o=="\u807D"?x.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?x.add(-1,"day"):o=="\u524D"?x.add(-2,"day"):o=="\u5927\u524D"?x.add(-3,"day"):o=="\u5F8C"?x.add(2,"day"):o=="\u5927\u5F8C"&&x.add(3,"day"),i.end.assign("day",x.date()),i.end.assign("month",x.month()+1),i.end.assign("year",x.year())}else i.end.imply("day",x.date()),i.end.imply("month",x.month()+1),i.end.imply("year",x.year());if(u=0,l=0,c=-1,t[is]){var d=parseInt(t[is]);if(isNaN(d)&&(d=or.zhStringToNumber(t[is])),d>=60)return null;i.end.assign("second",d)}if(u=parseInt(t[ku]),isNaN(u)&&(u=or.zhStringToNumber(t[ku])),t[ar]?t[ar]=="\u534A"?l=30:t[ar]=="\u6B63"||t[ar]=="\u6574"?l=0:(l=parseInt(t[ar]),isNaN(l)&&(l=or.zhStringToNumber(t[ar]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[Eu]){if(u>12)return null;var f=t[Eu][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[Tu]){var m=t[Tu],y=m[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[_u]){var g=t[_u],T=g[0];T=="\u4E0A"||T=="\u671D"||T=="\u65E9"||T=="\u51CC"?(c=0,u==12&&(u=0)):(T=="\u4E0B"||T=="\u664F"||T=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[wu]){var E=t[wu],S=E[0];S=="\u4E0A"||S=="\u671D"||S=="\u65E9"||S=="\u51CC"?(c=0,u==12&&(u=0)):(S=="\u4E0B"||S=="\u664F"||S=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};Fa.default=_p});var OT=k(La=>{"use strict";var xM=La&&La.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(La,"__esModule",{value:!0});var RM=xM(ve()),MM=B(),ST=ns(),CM=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(ST.WEEKDAY_OFFSET).join("|")+")"),vp=class extends MM.AbstractParserWithWordBoundaryChecking{innerPattern(){return CM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=ST.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=RM.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};La.default=vp});var DT=k(Ua=>{"use strict";var AM=Ua&&Ua.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ua,"__esModule",{value:!0});var PM=AM(qr()),wp=class extends PM.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};Ua.default=wp});var xT=k(Wa=>{"use strict";var NM=Wa&&Wa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wa,"__esModule",{value:!0});var IM=NM(un()),kp=class extends IM.default{patternBetween(){return/^\s*$/i}};Wa.default=kp});var RT=k(Ye=>{"use strict";var mn=Ye&&Ye.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.createConfiguration=Ye.createCasualConfiguration=Ye.parseDate=Ye.parse=Ye.strict=Ye.casual=Ye.hant=void 0;var Ep=vr(),FM=mn(eu()),LM=ln(),UM=mn(yT()),WM=mn(TT()),qM=mn(vT()),$M=mn(kT()),jM=mn(ET()),GM=mn(OT()),YM=mn(DT()),BM=mn(xT());Ye.hant=new Ep.Chrono(Sp());Ye.casual=new Ep.Chrono(Sp());Ye.strict=new Ep.Chrono(Op());function HM(r,e,t){return Ye.casual.parse(r,e,t)}Ye.parse=HM;function VM(r,e,t){return Ye.casual.parseDate(r,e,t)}Ye.parseDate=VM;function Sp(){let r=Op();return r.parsers.unshift(new UM.default),r}Ye.createCasualConfiguration=Sp;function Op(){let r=LM.includeCommonConfiguration({parsers:[new WM.default,new $M.default,new GM.default,new jM.default,new qM.default],refiners:[new YM.default,new BM.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof FM.default)),r}Ye.createConfiguration=Op});var PT=k(qa=>{"use strict";var zM=qa&&qa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qa,"__esModule",{value:!0});var KM=zM(ve()),QM=B(),XM=1,MT=2,ZM=3,CT=4,AT=5,JM=6,Dp=class extends QM.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=KM.default(e.refDate),a=s;if(t[XM])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[MT]){let o=t[MT],u=t[ZM];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[CT]){let u=t[CT][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[AT]){let o=t[AT];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[JM];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};qa.default=Dp});var ss=k(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.zhStringToYear=Ct.zhStringToNumber=Ct.WEEKDAY_OFFSET=Ct.NUMBER=void 0;Ct.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};Ct.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function eC(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?Ct.NUMBER[n]:e*Ct.NUMBER[n]:e+=Ct.NUMBER[n]}return e}Ct.zhStringToNumber=eC;function tC(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+Ct.NUMBER[n]}return parseInt(e)}Ct.zhStringToYear=tC});var IT=k($a=>{"use strict";var rC=$a&&$a.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($a,"__esModule",{value:!0});var nC=rC(ve()),iC=B(),gi=ss(),xp=1,NT=2,Rp=3,Mp=class extends iC.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(gi.NUMBER).join("")+"]{4}|["+Object.keys(gi.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(gi.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(gi.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=nC.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[NT]);if(isNaN(s)&&(s=gi.zhStringToNumber(t[NT])),i.start.assign("month",s),t[Rp]){let a=parseInt(t[Rp]);isNaN(a)&&(a=gi.zhStringToNumber(t[Rp])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[xp]){let a=parseInt(t[xp]);isNaN(a)&&(a=gi.zhStringToYear(t[xp])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};$a.default=Mp});var LT=k(ja=>{"use strict";var sC=ja&&ja.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ja,"__esModule",{value:!0});var aC=sC(ve()),oC=B(),FT=ss(),uC=new RegExp("(\\d+|["+Object.keys(FT.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),Cp=1,lC=2,Ap=class extends oC.AbstractParserWithWordBoundaryChecking{innerPattern(){return uC}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[Cp]);if(isNaN(i)&&(i=FT.zhStringToNumber(t[Cp])),isNaN(i)){let u=t[Cp];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=aC.default(e.refDate),o=t[lC][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};ja.default=Ap});var WT=k(Ga=>{"use strict";var cC=Ga&&Ga.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ga,"__esModule",{value:!0});var dC=cC(ve()),fC=B(),UT=ss(),pC=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(UT.WEEKDAY_OFFSET).join("|")+")"),Pp=class extends fC.AbstractParserWithWordBoundaryChecking{innerPattern(){return pC}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=UT.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=dC.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Ga.default=Pp});var qT=k(Ya=>{"use strict";var mC=Ya&&Ya.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ya,"__esModule",{value:!0});var hC=mC(ve()),gC=B(),lr=ss(),yC=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(lr.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(lr.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(lr.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),bC=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(lr.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(lr.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(lr.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),Su=1,Ou=2,Du=3,xu=4,Ru=5,Mu=6,ur=7,as=8,Cu=9,Np=class extends gC.AbstractParserWithWordBoundaryChecking{innerPattern(){return yC}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=hC.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[Su]){let c=t[Su];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[xu]){let c=t[xu];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[as]){let c=parseInt(t[as]);if(isNaN(c)&&(c=lr.zhStringToNumber(t[as])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[Mu]),isNaN(a)&&(a=lr.zhStringToNumber(t[Mu])),t[ur]?t[ur]=="\u534A"?o=30:t[ur]=="\u6B63"||t[ur]=="\u6574"?o=0:(o=parseInt(t[ur]),isNaN(o)&&(o=lr.zhStringToNumber(t[ur]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[Cu]){if(a>12)return null;let c=t[Cu][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[Ou]){let d=t[Ou][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[Du]){let d=t[Du][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[Ru]){let d=t[Ru][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=bC.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[Su]){let c=t[Su];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[xu]){let c=t[xu];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[as]){let c=parseInt(t[as]);if(isNaN(c)&&(c=lr.zhStringToNumber(t[as])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[Mu]),isNaN(a)&&(a=lr.zhStringToNumber(t[Mu])),t[ur]?t[ur]=="\u534A"?o=30:t[ur]=="\u6B63"||t[ur]=="\u6574"?o=0:(o=parseInt(t[ur]),isNaN(o)&&(o=lr.zhStringToNumber(t[ur]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[Cu]){if(a>12)return null;let c=t[Cu][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[Ou]){let d=t[Ou][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[Du]){let d=t[Du][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[Ru]){let d=t[Ru][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};Ya.default=Np});var jT=k(Ba=>{"use strict";var TC=Ba&&Ba.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ba,"__esModule",{value:!0});var _C=TC(ve()),vC=B(),$T=ss(),wC=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys($T.WEEKDAY_OFFSET).join("|")+")"),Ip=class extends vC.AbstractParserWithWordBoundaryChecking{innerPattern(){return wC}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=$T.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=_C.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};Ba.default=Ip});var GT=k(Ha=>{"use strict";var kC=Ha&&Ha.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ha,"__esModule",{value:!0});var EC=kC(qr()),Fp=class extends EC.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};Ha.default=Fp});var YT=k(Va=>{"use strict";var SC=Va&&Va.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Va,"__esModule",{value:!0});var OC=SC(un()),Lp=class extends OC.default{patternBetween(){return/^\s*$/i}};Va.default=Lp});var BT=k(Be=>{"use strict";var hn=Be&&Be.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Be,"__esModule",{value:!0});Be.createConfiguration=Be.createCasualConfiguration=Be.parseDate=Be.parse=Be.strict=Be.casual=Be.hans=void 0;var Up=vr(),DC=hn(eu()),xC=ln(),RC=hn(PT()),MC=hn(IT()),CC=hn(LT()),AC=hn(WT()),PC=hn(qT()),NC=hn(jT()),IC=hn(GT()),FC=hn(YT());Be.hans=new Up.Chrono(Wp());Be.casual=new Up.Chrono(Wp());Be.strict=new Up.Chrono(qp());function LC(r,e,t){return Be.casual.parse(r,e,t)}Be.parse=LC;function UC(r,e,t){return Be.casual.parseDate(r,e,t)}Be.parseDate=UC;function Wp(){let r=qp();return r.parsers.unshift(new RC.default),r}Be.createCasualConfiguration=Wp;function qp(){let r=xC.includeCommonConfiguration({parsers:[new MC.default,new AC.default,new NC.default,new PC.default,new CC.default],refiners:[new IC.default,new FC.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof DC.default)),r}Be.createConfiguration=qp});var VT=k(jt=>{"use strict";var HT=jt&&jt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),WC=jt&&jt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),qC=jt&&jt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&HT(e,r,t)},$C=jt&&jt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&HT(e,r,t);return WC(e,r),e};Object.defineProperty(jt,"__esModule",{value:!0});jt.hans=void 0;qC(RT(),jt);jt.hans=$C(BT())});var At=k(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.parseTimeUnits=se.TIME_UNITS_PATTERN=se.parseYear=se.YEAR_PATTERN=se.parseOrdinalNumberPattern=se.ORDINAL_NUMBER_PATTERN=se.parseNumberPattern=se.NUMBER_PATTERN=se.TIME_UNIT_DICTIONARY=se.ORDINAL_WORD_DICTIONARY=se.INTEGER_WORD_DICTIONARY=se.MONTH_DICTIONARY=se.FULL_MONTH_NAME_DICTIONARY=se.WEEKDAY_DICTIONARY=se.REGEX_PARTS=void 0;var Au=Re(),jC=ot();se.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};se.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};se.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};se.MONTH_DICTIONARY=Object.assign(Object.assign({},se.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});se.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};se.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};se.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};se.NUMBER_PATTERN=`(?:${Au.matchAnyPattern(se.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function KT(r){let e=r.toLowerCase();return se.INTEGER_WORD_DICTIONARY[e]!==void 0?se.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}se.parseNumberPattern=KT;se.ORDINAL_NUMBER_PATTERN=`(?:${Au.matchAnyPattern(se.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function GC(r){let e=r.toLowerCase();return se.ORDINAL_WORD_DICTIONARY[e]!==void 0?se.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}se.parseOrdinalNumberPattern=GC;var $p="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";se.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${$p}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${$p}|[5-9][0-9]${$p})`;function YC(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return jC.findMostLikelyADYear(e)}se.parseYear=YC;var QT=`(${se.NUMBER_PATTERN})\\s{0,3}(${Au.matchAnyPattern(se.TIME_UNIT_DICTIONARY)})`,zT=new RegExp(QT,"i");se.TIME_UNITS_PATTERN=Au.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",QT);function BC(r){let e={},t=r,n=zT.exec(t);for(;n;)HC(e,n),t=t.substring(n[0].length).trim(),n=zT.exec(t);return e}se.parseTimeUnits=BC;function HC(r,e){let t=KT(e[1]),n=se.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var ZT=k(Gp=>{"use strict";Object.defineProperty(Gp,"__esModule",{value:!0});var za=At(),VC=We(),zC=B(),XT=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${za.TIME_UNITS_PATTERN})${za.REGEX_PARTS.rightBoundary}`,KC=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${XT}`,za.REGEX_PARTS.flags),QC=new RegExp(XT,"i"),jp=class extends zC.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return za.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?QC:KC}innerExtract(e,t){let n=za.parseTimeUnits(t[1]);return VC.ParsingComponents.createRelativeFromReference(e.reference,n)}};Gp.default=jp});var n_=k(Bp=>{"use strict";Object.defineProperty(Bp,"__esModule",{value:!0});var XC=ot(),Ka=At(),r_=At(),Pu=At(),ZC=Re(),JC=B(),eA=new RegExp(`(?:\u0441)?\\s*(${Pu.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${Pu.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${ZC.matchAnyPattern(Ka.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${r_.YEAR_PATTERN}(?![^\\s]\\d)))?${Ka.REGEX_PARTS.rightBoundary}`,Ka.REGEX_PARTS.flags),JT=1,e_=2,tA=3,t_=4,Yp=class extends JC.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ka.REGEX_PARTS.leftBoundary}innerPattern(){return eA}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Ka.MONTH_DICTIONARY[t[tA].toLowerCase()],s=Pu.parseOrdinalNumberPattern(t[JT]);if(s>31)return t.index=t.index+t[JT].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[t_]){let a=r_.parseYear(t[t_]);n.start.assign("year",a)}else{let a=XC.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[e_]){let a=Pu.parseOrdinalNumberPattern(t[e_]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Bp.default=Yp});var a_=k(Vp=>{"use strict";Object.defineProperty(Vp,"__esModule",{value:!0});var Qa=At(),rA=ot(),nA=Re(),s_=At(),iA=B(),sA=new RegExp(`((?:\u0432)\\s*)?(${nA.matchAnyPattern(Qa.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${s_.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,Qa.REGEX_PARTS.flags),aA=2,i_=3,Hp=class extends iA.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Qa.REGEX_PARTS.leftBoundary}innerPattern(){return sA}innerExtract(e,t){let n=t[aA].toLowerCase();if(t[0].length<=3&&!Qa.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=Qa.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[i_]){let a=s_.parseYear(t[i_]);i.start.assign("year",a)}else{let a=rA.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Vp.default=Hp});var u_=k(Kp=>{"use strict";Object.defineProperty(Kp,"__esModule",{value:!0});var Nu=ze(),oA=li(),o_=At(),zp=class extends oA.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return o_.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${o_.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",Nu.Meridiem.PM)):i<6&&n.assign("meridiem",Nu.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",Nu.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",Nu.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};Kp.default=zp});var l_=k(Xp=>{"use strict";Object.defineProperty(Xp,"__esModule",{value:!0});var Iu=At(),uA=We(),lA=B(),cA=ir(),dA=new RegExp(`(${Iu.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,Iu.REGEX_PARTS.flags),Qp=class extends lA.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Iu.REGEX_PARTS.leftBoundary}innerPattern(){return dA}innerExtract(e,t){let n=Iu.parseTimeUnits(t[1]),i=cA.reverseTimeUnits(n);return uA.ParsingComponents.createRelativeFromReference(e.reference,i)}};Xp.default=Qp});var c_=k(Xa=>{"use strict";var fA=Xa&&Xa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xa,"__esModule",{value:!0});var pA=fA(qr()),Zp=class extends pA.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};Xa.default=Zp});var d_=k(Za=>{"use strict";var mA=Za&&Za.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Za,"__esModule",{value:!0});var hA=mA(un()),Jp=class extends hA.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};Za.default=Jp});var f_=k(gn=>{"use strict";var gA=gn&&gn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),yA=gn&&gn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),bA=gn&&gn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&gA(e,r,t);return yA(e,r),e};Object.defineProperty(gn,"__esModule",{value:!0});var TA=B(),Ja=bA(dn()),em=At(),_A=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${em.REGEX_PARTS.rightBoundary}`,em.REGEX_PARTS.flags),tm=class extends TA.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return em.REGEX_PARTS.leftBoundary}innerPattern(e){return _A}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return Ja.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return Ja.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return Ja.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return Ja.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return Ja.theDayBefore(e.reference,2)}return i}};gn.default=tm});var p_=k(Or=>{"use strict";var vA=Or&&Or.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),wA=Or&&Or.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),kA=Or&&Or.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&vA(e,r,t);return wA(e,r),e},EA=Or&&Or.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Or,"__esModule",{value:!0});var SA=B(),yi=kA(dn()),OA=nr(),DA=EA(ve()),rm=At(),xA=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${rm.REGEX_PARTS.rightBoundary}`,rm.REGEX_PARTS.flags),nm=class extends SA.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return rm.REGEX_PARTS.leftBoundary}innerPattern(){return xA}innerExtract(e,t){let n=DA.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return yi.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return yi.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return yi.morning(e.reference);if(i.match(/в\s*полдень/))return yi.noon(e.reference);if(i.match(/прошлой\s*ночью/))return yi.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return yi.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),OA.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?yi.midnight(e.reference):s}};Or.default=nm});var m_=k(sm=>{"use strict";Object.defineProperty(sm,"__esModule",{value:!0});var eo=At(),RA=Re(),MA=B(),CA=di(),AA=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${RA.matchAnyPattern(eo.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${eo.REGEX_PARTS.rightBoundary}`,eo.REGEX_PARTS.flags),PA=1,NA=2,IA=3,im=class extends MA.AbstractParserWithWordBoundaryChecking{innerPattern(){return AA}patternLeftBoundary(){return eo.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[NA].toLowerCase(),i=eo.WEEKDAY_DICTIONARY[n],s=t[PA],a=t[IA],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=CA.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};sm.default=im});var g_=k(ro=>{"use strict";var FA=ro&&ro.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ro,"__esModule",{value:!0});var to=At(),h_=We(),LA=FA(ve()),UA=B(),WA=Re(),qA=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${WA.matchAnyPattern(to.TIME_UNIT_DICTIONARY)})(?=\\s*)${to.REGEX_PARTS.rightBoundary}`,to.REGEX_PARTS.flags),$A=1,jA=2,am=class extends UA.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return to.REGEX_PARTS.leftBoundary}innerPattern(){return qA}innerExtract(e,t){let n=t[$A].toLowerCase(),i=t[jA].toLowerCase(),s=to.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,h_.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,h_.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=LA.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};ro.default=am});var y_=k(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});var no=At(),GA=We(),YA=B(),BA=ir(),HA=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${no.TIME_UNITS_PATTERN})${no.REGEX_PARTS.rightBoundary}`,no.REGEX_PARTS.flags),om=class extends YA.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return no.REGEX_PARTS.leftBoundary}innerPattern(){return HA}innerExtract(e,t){let n=t[1].toLowerCase(),i=no.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=BA.reverseTimeUnits(i);break}return GA.ParsingComponents.createRelativeFromReference(e.reference,i)}};um.default=om});var __=k(it=>{"use strict";var Gt=it&&it.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(it,"__esModule",{value:!0});it.createConfiguration=it.createCasualConfiguration=it.parseDate=it.parse=it.strict=it.casual=void 0;var VA=Gt(ZT()),zA=Gt(n_()),KA=Gt(a_()),QA=Gt(u_()),XA=Gt(l_()),ZA=Gt(c_()),JA=Gt(d_()),eP=ln(),tP=Gt(f_()),rP=Gt(p_()),nP=Gt(m_()),iP=Gt(g_()),b_=vr(),sP=Gt(fi()),aP=Gt(y_());it.casual=new b_.Chrono(T_());it.strict=new b_.Chrono(lm(!0));function oP(r,e,t){return it.casual.parse(r,e,t)}it.parse=oP;function uP(r,e,t){return it.casual.parseDate(r,e,t)}it.parseDate=uP;function T_(){let r=lm(!1);return r.parsers.unshift(new tP.default),r.parsers.unshift(new rP.default),r.parsers.unshift(new KA.default),r.parsers.unshift(new iP.default),r.parsers.unshift(new aP.default),r}it.createCasualConfiguration=T_;function lm(r=!0){return eP.includeCommonConfiguration({parsers:[new sP.default(!0),new VA.default,new zA.default,new nP.default,new QA.default(r),new XA.default],refiners:[new JA.default,new ZA.default]},r)}it.createConfiguration=lm});var ze=k(pe=>{"use strict";var lP=pe&&pe.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),cP=pe&&pe.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),jn=pe&&pe.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&lP(e,r,t);return cP(e,r),e};Object.defineProperty(pe,"__esModule",{value:!0});pe.parseDate=pe.parse=pe.casual=pe.strict=pe.ru=pe.zh=pe.nl=pe.pt=pe.ja=pe.fr=pe.de=pe.Meridiem=pe.Chrono=pe.en=void 0;var cm=jn(Od());pe.en=cm;var dP=vr();Object.defineProperty(pe,"Chrono",{enumerable:!0,get:function(){return dP.Chrono}});var fP;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(fP=pe.Meridiem||(pe.Meridiem={}));var pP=jn(Ry());pe.de=pP;var mP=jn(ib());pe.fr=mP;var hP=jn(pb());pe.ja=hP;var gP=jn(Rb());pe.pt=gP;var yP=jn(pT());pe.nl=yP;var bP=jn(VT());pe.zh=bP;var TP=jn(__());pe.ru=TP;pe.strict=cm.strict;pe.casual=cm.casual;function _P(r,e,t){return pe.casual.parse(r,e,t)}pe.parse=_P;function vP(r,e,t){return pe.casual.parseDate(r,e,t)}pe.parseDate=vP});var _v=k((bv,Tv)=>{(function(r){var e=Object.hasOwnProperty,t=Array.isArray?Array.isArray:function(h){return Object.prototype.toString.call(h)==="[object Array]"},n=10,i=typeof process=="object"&&typeof process.nextTick=="function",s=typeof Symbol=="function",a=typeof Reflect=="object",o=typeof setImmediate=="function",u=o?setImmediate:setTimeout,l=s?a&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(p){var h=Object.getOwnPropertyNames(p);return h.push.apply(h,Object.getOwnPropertySymbols(p)),h}:Object.keys;function c(){this._events={},this._conf&&d.call(this,this._conf)}function d(p){p&&(this._conf=p,p.delimiter&&(this.delimiter=p.delimiter),p.maxListeners!==r&&(this._maxListeners=p.maxListeners),p.wildcard&&(this.wildcard=p.wildcard),p.newListener&&(this._newListener=p.newListener),p.removeListener&&(this._removeListener=p.removeListener),p.verboseMemoryLeak&&(this.verboseMemoryLeak=p.verboseMemoryLeak),p.ignoreErrors&&(this.ignoreErrors=p.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function f(p,h){var b="(node) warning: possible EventEmitter memory leak detected. "+p+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(b+=" Event name: "+h+"."),typeof process!="undefined"&&process.emitWarning){var _=new Error(b);_.name="MaxListenersExceededWarning",_.emitter=this,_.count=p,process.emitWarning(_)}else console.error(b),console.trace&&console.trace()}var m=function(p,h,b){var _=arguments.length;switch(_){case 0:return[];case 1:return[p];case 2:return[p,h];case 3:return[p,h,b];default:for(var w=new Array(_);_--;)w[_]=arguments[_];return w}};function y(p,h){for(var b={},_,w=p.length,O=h?h.length:0,M=0;M<w;M++)_=p[M],b[_]=M<O?h[M]:r;return b}function g(p,h,b){this._emitter=p,this._target=h,this._listeners={},this._listenersCount=0;var _,w;if((b.on||b.off)&&(_=b.on,w=b.off),h.addEventListener?(_=h.addEventListener,w=h.removeEventListener):h.addListener?(_=h.addListener,w=h.removeListener):h.on&&(_=h.on,w=h.off),!_&&!w)throw Error("target does not implement any known event API");if(typeof _!="function")throw TypeError("on method must be a function");if(typeof w!="function")throw TypeError("off method must be a function");this._on=_,this._off=w;var O=p._observers;O?O.push(this):p._observers=[this]}Object.assign(g.prototype,{subscribe:function(p,h,b){var _=this,w=this._target,O=this._emitter,M=this._listeners,A=function(){var v=m.apply(null,arguments),R={data:v,name:h,original:p};if(b){var N=b.call(w,R);N!==!1&&O.emit.apply(O,[R.name].concat(v));return}O.emit.apply(O,[h].concat(v))};if(M[p])throw Error("Event '"+p+"' is already listening");this._listenersCount++,O._newListener&&O._removeListener&&!_._onNewListener?(this._onNewListener=function(v){v===h&&M[p]===null&&(M[p]=A,_._on.call(w,p,A))},O.on("newListener",this._onNewListener),this._onRemoveListener=function(v){v===h&&!O.hasListeners(v)&&M[p]&&(M[p]=null,_._off.call(w,p,A))},M[p]=null,O.on("removeListener",this._onRemoveListener)):(M[p]=A,_._on.call(w,p,A))},unsubscribe:function(p){var h=this,b=this._listeners,_=this._emitter,w,O,M=this._off,A=this._target,v;if(p&&typeof p!="string")throw TypeError("event must be a string");function R(){h._onNewListener&&(_.off("newListener",h._onNewListener),_.off("removeListener",h._onRemoveListener),h._onNewListener=null,h._onRemoveListener=null);var N=re.call(_,h);_._observers.splice(N,1)}if(p){if(w=b[p],!w)return;M.call(A,p,w),delete b[p],--this._listenersCount||R()}else{for(O=l(b),v=O.length;v-- >0;)p=O[v],M.call(A,p,b[p]);this._listeners={},this._listenersCount=0,R()}}});function T(p,h,b,_){var w=Object.assign({},h);if(!p)return w;if(typeof p!="object")throw TypeError("options must be an object");var O=Object.keys(p),M=O.length,A,v,R;function N(le){throw Error('Invalid "'+A+'" option value'+(le?". Reason: "+le:""))}for(var te=0;te<M;te++){if(A=O[te],!_&&!e.call(h,A))throw Error('Unknown "'+A+'" option');v=p[A],v!==r&&(R=b[A],w[A]=R?R(v,N):v)}return w}function E(p,h){return(typeof p!="function"||!p.hasOwnProperty("prototype"))&&h("value must be a constructor"),p}function S(p){var h="value must be type of "+p.join("|"),b=p.length,_=p[0],w=p[1];return b===1?function(O,M){if(typeof O===_)return O;M(h)}:b===2?function(O,M){var A=typeof O;if(A===_||A===w)return O;M(h)}:function(O,M){for(var A=typeof O,v=b;v-- >0;)if(A===p[v])return O;M(h)}}var x=S(["function"]),q=S(["object","function"]);function W(p,h,b){var _,w,O=0,M,A=new p(function(v,R,N){b=T(b,{timeout:0,overload:!1},{timeout:function(Ne,Ce){return Ne*=1,(typeof Ne!="number"||Ne<0||!Number.isFinite(Ne))&&Ce("timeout must be a positive number"),Ne}}),_=!b.overload&&typeof p.prototype.cancel=="function"&&typeof N=="function";function te(){w&&(w=null),O&&(clearTimeout(O),O=0)}var le=function(Ne){te(),v(Ne)},fe=function(Ne){te(),R(Ne)};_?h(le,fe,N):(w=[function(Ne){fe(Ne||Error("canceled"))}],h(le,fe,function(Ne){if(M)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof Ne!="function")throw TypeError("onCancel callback must be a function");w.push(Ne)}),M=!0),b.timeout>0&&(O=setTimeout(function(){var Ne=Error("timeout");Ne.code="ETIMEDOUT",O=0,A.cancel(Ne),R(Ne)},b.timeout))});return _||(A.cancel=function(v){if(!!w){for(var R=w.length,N=1;N<R;N++)w[N](v);w[0](v),w=null}}),A}function re(p){var h=this._observers;if(!h)return-1;for(var b=h.length,_=0;_<b;_++)if(h[_]._target===p)return _;return-1}function H(p,h,b,_,w){if(!b)return null;if(_===0){var O=typeof h;if(O==="string"){var M,A,v=0,R=0,N=this.delimiter,te=N.length;if((A=h.indexOf(N))!==-1){M=new Array(5);do M[v++]=h.slice(R,A),R=A+te;while((A=h.indexOf(N,R))!==-1);M[v++]=h.slice(R),h=M,w=v}else h=[h],w=1}else O==="object"?w=h.length:(h=[h],w=1)}var le=null,fe,Ne,Ce,Rt,nn,Fr=h[_],G=h[_+1],qt,Xe;if(_===w)b._listeners&&(typeof b._listeners=="function"?(p&&p.push(b._listeners),le=[b]):(p&&p.push.apply(p,b._listeners),le=[b]));else if(Fr==="*"){for(qt=l(b),A=qt.length;A-- >0;)fe=qt[A],fe!=="_listeners"&&(Xe=H(p,h,b[fe],_+1,w),Xe&&(le?le.push.apply(le,Xe):le=Xe));return le}else if(Fr==="**"){for(nn=_+1===w||_+2===w&&G==="*",nn&&b._listeners&&(le=H(p,h,b,w,w)),qt=l(b),A=qt.length;A-- >0;)fe=qt[A],fe!=="_listeners"&&(fe==="*"||fe==="**"?(b[fe]._listeners&&!nn&&(Xe=H(p,h,b[fe],w,w),Xe&&(le?le.push.apply(le,Xe):le=Xe)),Xe=H(p,h,b[fe],_,w)):fe===G?Xe=H(p,h,b[fe],_+2,w):Xe=H(p,h,b[fe],_,w),Xe&&(le?le.push.apply(le,Xe):le=Xe));return le}else b[Fr]&&(le=H(p,h,b[Fr],_+1,w));if(Ne=b["*"],Ne&&H(p,h,Ne,_+1,w),Ce=b["**"],Ce)if(_<w)for(Ce._listeners&&H(p,h,Ce,w,w),qt=l(Ce),A=qt.length;A-- >0;)fe=qt[A],fe!=="_listeners"&&(fe===G?H(p,h,Ce[fe],_+2,w):fe===Fr?H(p,h,Ce[fe],_+1,w):(Rt={},Rt[fe]=Ce[fe],H(p,h,{"**":Rt},_+1,w)));else Ce._listeners?H(p,h,Ce,w,w):Ce["*"]&&Ce["*"]._listeners&&H(p,h,Ce["*"],w,w);return le}function Y(p,h,b){var _=0,w=0,O,M=this.delimiter,A=M.length,v;if(typeof p=="string")if((O=p.indexOf(M))!==-1){v=new Array(5);do v[_++]=p.slice(w,O),w=O+A;while((O=p.indexOf(M,w))!==-1);v[_++]=p.slice(w)}else v=[p],_=1;else v=p,_=p.length;if(_>1){for(O=0;O+1<_;O++)if(v[O]==="**"&&v[O+1]==="**")return}var R=this.listenerTree,N;for(O=0;O<_;O++)if(N=v[O],R=R[N]||(R[N]={}),O===_-1)return R._listeners?(typeof R._listeners=="function"&&(R._listeners=[R._listeners]),b?R._listeners.unshift(h):R._listeners.push(h),!R._listeners.warned&&this._maxListeners>0&&R._listeners.length>this._maxListeners&&(R._listeners.warned=!0,f.call(this,R._listeners.length,N))):R._listeners=h,!0;return!0}function be(p,h,b,_){for(var w=l(p),O=w.length,M,A,v,R=p._listeners,N;O-- >0;)A=w[O],M=p[A],A==="_listeners"?v=b:v=b?b.concat(A):[A],N=_||typeof A=="symbol",R&&h.push(N?v:v.join(this.delimiter)),typeof M=="object"&&be.call(this,M,h,v,N);return h}function Pe(p){for(var h=l(p),b=h.length,_,w,O;b-- >0;)w=h[b],_=p[w],_&&(O=!0,w!=="_listeners"&&!Pe(_)&&delete p[w]);return O}function j(p,h,b){this.emitter=p,this.event=h,this.listener=b}j.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function $(p,h,b){if(b===!0)w=!0;else if(b===!1)_=!0;else{if(!b||typeof b!="object")throw TypeError("options should be an object or true");var _=b.async,w=b.promisify,O=b.nextTick,M=b.objectify}if(_||O||w){var A=h,v=h._origin||h;if(O&&!i)throw Error("process.nextTick is not supported");w===r&&(w=h.constructor.name==="AsyncFunction"),h=function(){var R=arguments,N=this,te=this.event;return w?O?Promise.resolve():new Promise(function(le){u(le)}).then(function(){return N.event=te,A.apply(N,R)}):(O?process.nextTick:u)(function(){N.event=te,A.apply(N,R)})},h._async=!0,h._origin=v}return[h,M?new j(this,p,h):this]}function D(p){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,d.call(this,p)}D.EventEmitter2=D,D.prototype.listenTo=function(p,h,b){if(typeof p!="object")throw TypeError("target musts be an object");var _=this;b=T(b,{on:r,off:r,reducers:r},{on:x,off:x,reducers:q});function w(O){if(typeof O!="object")throw TypeError("events must be an object");var M=b.reducers,A=re.call(_,p),v;A===-1?v=new g(_,p,b):v=_._observers[A];for(var R=l(O),N=R.length,te,le=typeof M=="function",fe=0;fe<N;fe++)te=R[fe],v.subscribe(te,O[te]||te,le?M:M&&M[te])}return t(h)?w(y(h)):w(typeof h=="string"?y(h.split(/\s+/)):h),this},D.prototype.stopListeningTo=function(p,h){var b=this._observers;if(!b)return!1;var _=b.length,w,O=!1;if(p&&typeof p!="object")throw TypeError("target should be an object");for(;_-- >0;)w=b[_],(!p||w._target===p)&&(w.unsubscribe(h),O=!0);return O},D.prototype.delimiter=".",D.prototype.setMaxListeners=function(p){p!==r&&(this._maxListeners=p,this._conf||(this._conf={}),this._conf.maxListeners=p)},D.prototype.getMaxListeners=function(){return this._maxListeners},D.prototype.event="",D.prototype.once=function(p,h,b){return this._once(p,h,!1,b)},D.prototype.prependOnceListener=function(p,h,b){return this._once(p,h,!0,b)},D.prototype._once=function(p,h,b,_){return this._many(p,1,h,b,_)},D.prototype.many=function(p,h,b,_){return this._many(p,h,b,!1,_)},D.prototype.prependMany=function(p,h,b,_){return this._many(p,h,b,!0,_)},D.prototype._many=function(p,h,b,_,w){var O=this;if(typeof b!="function")throw new Error("many only accepts instances of Function");function M(){return--h===0&&O.off(p,M),b.apply(this,arguments)}return M._origin=b,this._on(p,M,_,w)},D.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||c.call(this);var p=arguments[0],h,b=this.wildcard,_,w,O,M,A;if(p==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(b&&(h=p,p!=="newListener"&&p!=="removeListener"&&typeof p=="object")){if(w=p.length,s){for(O=0;O<w;O++)if(typeof p[O]=="symbol"){A=!0;break}}A||(p=p.join(this.delimiter))}var v=arguments.length,R;if(this._all&&this._all.length)for(R=this._all.slice(),O=0,w=R.length;O<w;O++)switch(this.event=p,v){case 1:R[O].call(this,p);break;case 2:R[O].call(this,p,arguments[1]);break;case 3:R[O].call(this,p,arguments[1],arguments[2]);break;default:R[O].apply(this,arguments)}if(b)R=[],H.call(this,R,h,this.listenerTree,0,w);else if(R=this._events[p],typeof R=="function"){switch(this.event=p,v){case 1:R.call(this);break;case 2:R.call(this,arguments[1]);break;case 3:R.call(this,arguments[1],arguments[2]);break;default:for(_=new Array(v-1),M=1;M<v;M++)_[M-1]=arguments[M];R.apply(this,_)}return!0}else R&&(R=R.slice());if(R&&R.length){if(v>3)for(_=new Array(v-1),M=1;M<v;M++)_[M-1]=arguments[M];for(O=0,w=R.length;O<w;O++)switch(this.event=p,v){case 1:R[O].call(this);break;case 2:R[O].call(this,arguments[1]);break;case 3:R[O].call(this,arguments[1],arguments[2]);break;default:R[O].apply(this,_)}return!0}else if(!this.ignoreErrors&&!this._all&&p==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},D.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||c.call(this);var p=arguments[0],h=this.wildcard,b,_,w,O,M,A;if(p==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(h&&(b=p,p!=="newListener"&&p!=="removeListener"&&typeof p=="object")){if(O=p.length,s){for(M=0;M<O;M++)if(typeof p[M]=="symbol"){_=!0;break}}_||(p=p.join(this.delimiter))}var v=[],R=arguments.length,N;if(this._all)for(M=0,O=this._all.length;M<O;M++)switch(this.event=p,R){case 1:v.push(this._all[M].call(this,p));break;case 2:v.push(this._all[M].call(this,p,arguments[1]));break;case 3:v.push(this._all[M].call(this,p,arguments[1],arguments[2]));break;default:v.push(this._all[M].apply(this,arguments))}if(h?(N=[],H.call(this,N,b,this.listenerTree,0)):N=this._events[p],typeof N=="function")switch(this.event=p,R){case 1:v.push(N.call(this));break;case 2:v.push(N.call(this,arguments[1]));break;case 3:v.push(N.call(this,arguments[1],arguments[2]));break;default:for(w=new Array(R-1),A=1;A<R;A++)w[A-1]=arguments[A];v.push(N.apply(this,w))}else if(N&&N.length){if(N=N.slice(),R>3)for(w=new Array(R-1),A=1;A<R;A++)w[A-1]=arguments[A];for(M=0,O=N.length;M<O;M++)switch(this.event=p,R){case 1:v.push(N[M].call(this));break;case 2:v.push(N[M].call(this,arguments[1]));break;case 3:v.push(N[M].call(this,arguments[1],arguments[2]));break;default:v.push(N[M].apply(this,w))}}else if(!this.ignoreErrors&&!this._all&&p==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(v)},D.prototype.on=function(p,h,b){return this._on(p,h,!1,b)},D.prototype.prependListener=function(p,h,b){return this._on(p,h,!0,b)},D.prototype.onAny=function(p){return this._onAny(p,!1)},D.prototype.prependAny=function(p){return this._onAny(p,!0)},D.prototype.addListener=D.prototype.on,D.prototype._onAny=function(p,h){if(typeof p!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),h?this._all.unshift(p):this._all.push(p),this},D.prototype._on=function(p,h,b,_){if(typeof p=="function")return this._onAny(p,h),this;if(typeof h!="function")throw new Error("on only accepts instances of Function");this._events||c.call(this);var w=this,O;return _!==r&&(O=$.call(this,p,h,_),h=O[0],w=O[1]),this._newListener&&this.emit("newListener",p,h),this.wildcard?(Y.call(this,p,h,b),w):(this._events[p]?(typeof this._events[p]=="function"&&(this._events[p]=[this._events[p]]),b?this._events[p].unshift(h):this._events[p].push(h),!this._events[p].warned&&this._maxListeners>0&&this._events[p].length>this._maxListeners&&(this._events[p].warned=!0,f.call(this,this._events[p].length,p))):this._events[p]=h,w)},D.prototype.off=function(p,h){if(typeof h!="function")throw new Error("removeListener only takes instances of Function");var b,_=[];if(this.wildcard){var w=typeof p=="string"?p.split(this.delimiter):p.slice();if(_=H.call(this,null,w,this.listenerTree,0),!_)return this}else{if(!this._events[p])return this;b=this._events[p],_.push({_listeners:b})}for(var O=0;O<_.length;O++){var M=_[O];if(b=M._listeners,t(b)){for(var A=-1,v=0,R=b.length;v<R;v++)if(b[v]===h||b[v].listener&&b[v].listener===h||b[v]._origin&&b[v]._origin===h){A=v;break}if(A<0)continue;return this.wildcard?M._listeners.splice(A,1):this._events[p].splice(A,1),b.length===0&&(this.wildcard?delete M._listeners:delete this._events[p]),this._removeListener&&this.emit("removeListener",p,h),this}else(b===h||b.listener&&b.listener===h||b._origin&&b._origin===h)&&(this.wildcard?delete M._listeners:delete this._events[p],this._removeListener&&this.emit("removeListener",p,h))}return this.listenerTree&&Pe(this.listenerTree),this},D.prototype.offAny=function(p){var h=0,b=0,_;if(p&&this._all&&this._all.length>0){for(_=this._all,h=0,b=_.length;h<b;h++)if(p===_[h])return _.splice(h,1),this._removeListener&&this.emit("removeListenerAny",p),this}else{if(_=this._all,this._removeListener)for(h=0,b=_.length;h<b;h++)this.emit("removeListenerAny",_[h]);this._all=[]}return this},D.prototype.removeListener=D.prototype.off,D.prototype.removeAllListeners=function(p){if(p===r)return!this._events||c.call(this),this;if(this.wildcard){var h=H.call(this,null,p,this.listenerTree,0),b,_;if(!h)return this;for(_=0;_<h.length;_++)b=h[_],b._listeners=null;this.listenerTree&&Pe(this.listenerTree)}else this._events&&(this._events[p]=null);return this},D.prototype.listeners=function(p){var h=this._events,b,_,w,O,M;if(p===r){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!h)return[];for(b=l(h),O=b.length,w=[];O-- >0;)_=h[b[O]],typeof _=="function"?w.push(_):w.push.apply(w,_);return w}else{if(this.wildcard){if(M=this.listenerTree,!M)return[];var A=[],v=typeof p=="string"?p.split(this.delimiter):p.slice();return H.call(this,A,v,M,0),A}return h?(_=h[p],_?typeof _=="function"?[_]:_:[]):[]}},D.prototype.eventNames=function(p){var h=this._events;return this.wildcard?be.call(this,this.listenerTree,[],null,p):h?l(h):[]},D.prototype.listenerCount=function(p){return this.listeners(p).length},D.prototype.hasListeners=function(p){if(this.wildcard){var h=[],b=typeof p=="string"?p.split(this.delimiter):p.slice();return H.call(this,h,b,this.listenerTree,0),h.length>0}var _=this._events,w=this._all;return!!(w&&w.length||_&&(p===r?l(_).length:_[p]))},D.prototype.listenersAny=function(){return this._all?this._all:[]},D.prototype.waitFor=function(p,h){var b=this,_=typeof h;return _==="number"?h={timeout:h}:_==="function"&&(h={filter:h}),h=T(h,{timeout:0,filter:r,handleError:!1,Promise,overload:!1},{filter:x,Promise:E}),W(h.Promise,function(w,O,M){function A(){var v=h.filter;if(!(v&&!v.apply(b,arguments)))if(b.off(p,A),h.handleError){var R=arguments[0];R?O(R):w(m.apply(null,arguments).slice(1))}else w(m.apply(null,arguments))}M(function(){b.off(p,A)}),b._on(p,A,!1)},{timeout:h.timeout,overload:h.overload})};function V(p,h,b){b=T(b,{Promise,timeout:0,overload:!1},{Promise:E});var _=b.Promise;return W(_,function(w,O,M){var A;if(typeof p.addEventListener=="function"){A=function(){w(m.apply(null,arguments))},M(function(){p.removeEventListener(h,A)}),p.addEventListener(h,A,{once:!0});return}var v=function(){R&&p.removeListener("error",R),w(m.apply(null,arguments))},R;h!=="error"&&(R=function(N){p.removeListener(h,v),O(N)},p.once("error",R)),M(function(){R&&p.removeListener("error",R),p.removeListener(h,v)}),p.once(h,v)},{timeout:b.timeout,overload:b.overload})}var U=D.prototype;if(Object.defineProperties(D,{defaultMaxListeners:{get:function(){return U._maxListeners},set:function(p){if(typeof p!="number"||p<0||Number.isNaN(p))throw TypeError("n must be a non-negative number");U._maxListeners=p},enumerable:!0},once:{value:V,writable:!0,configurable:!0}}),Object.defineProperties(U,{_maxListeners:{value:n,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return D});else if(typeof bv=="object")Tv.exports=D;else{var X=new Function("","return this")();X.EventEmitter2=D}})()});var Dw=k(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});var Sw=Symbol("MustacheDataPath");function Ew({target:r,propertyName:e}){return[...r[Sw]||[],e]}function Ow(r,e){return typeof r!="object"?r:new Proxy(r,{get(t,n){let i=t[n];if(i===void 0&&!(n in t)){let s=Ew({target:t,propertyName:n});if(e!=null&&e.handleError)return e.handleError(s),i;throw Error(`Missing Mustache data property: ${s.join(" > ")}`)}return i&&typeof i=="object"?(i[Sw]=Ew({target:t,propertyName:n}),Ow(i,e)):i}})}oh.default=Ow});var Jr=k(Pr=>{"use strict";Pr.__esModule=!0;Pr.Tokens=Pr.StructuralCharacters=Pr.Operators=void 0;var jI;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})(jI=Pr.Operators||(Pr.Operators={}));var GI;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})(GI=Pr.StructuralCharacters||(Pr.StructuralCharacters={}));var YI;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(YI=Pr.Tokens||(Pr.Tokens={}))});var mh=k(Ns=>{"use strict";Ns.__esModule=!0;Ns.VALID_TOKENS=Ns.OPERATOR_PRECEDENCE=void 0;var qe=Jr();Ns.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};Ns.VALID_TOKENS={identifierOnly:[{name:qe.Tokens.IDENTIFIER},{name:qe.Tokens.STRUCTURAL_CHARACTER,value:qe.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:qe.Tokens.IDENTIFIER},{name:qe.Tokens.STRUCTURAL_CHARACTER,value:qe.StructuralCharacters.OPEN_PARENTHESIS},{name:qe.Tokens.OPERATOR,value:qe.Operators.NOT}],binaryOperator:[{name:qe.Tokens.OPERATOR,value:qe.Operators.AND},{name:qe.Tokens.OPERATOR,value:qe.Operators.OR},{name:qe.Tokens.OPERATOR,value:qe.Operators.XOR}],binaryOperatorOrClose:[{name:qe.Tokens.OPERATOR,value:qe.Operators.AND},{name:qe.Tokens.OPERATOR,value:qe.Operators.OR},{name:qe.Tokens.OPERATOR,value:qe.Operators.XOR},{name:qe.Tokens.STRUCTURAL_CHARACTER,value:qe.StructuralCharacters.CLOSE_PARENTHESIS}]}});var hh=k(Tt=>{"use strict";Tt.__esModule=!0;Tt.ESCAPE_CHARACTER=Tt.EOL=Tt.COMMENT_DELIMITER=Tt.QUOTED_IDENTIFIER_DELIMITER=Tt.SEPARATORS=Tt.OPERATORS=Tt.STRUCTURAL_CHARACTERS=void 0;var Is=Jr();Tt.STRUCTURAL_CHARACTERS={"(":Is.StructuralCharacters.OPEN_PARENTHESIS,")":Is.StructuralCharacters.CLOSE_PARENTHESIS};Tt.OPERATORS={AND:Is.Operators.AND,OR:Is.Operators.OR,XOR:Is.Operators.XOR,NOT:Is.Operators.NOT};Tt.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));Tt.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);Tt.COMMENT_DELIMITER=String.fromCodePoint(35);Tt.EOL=String.fromCodePoint(10);Tt.ESCAPE_CHARACTER=String.fromCodePoint(92)});var Pw=k(br=>{"use strict";var gh=br&&br.__assign||function(){return gh=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},gh.apply(this,arguments)};br.__esModule=!0;br.getQuotedIdentifier=br.getComment=br.createResult=void 0;var Aw=Jr(),Ui=hh(),BI=function(r,e,t){return{token:gh({name:r},e!==null?{value:e}:{}),remainingString:t}};br.createResult=BI;var HI=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===Ui.EOL){e=t;break}}return(0,br.createResult)(Aw.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};br.getComment=HI;var VI=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===Ui.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+Ui.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===Ui.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!Ui.SEPARATORS.has(s)&&!Ui.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: ".concat(s," Expected ) character or separator"));break}}if(n===null)throw new Error("Unexpected end of expression: expected ".concat(Ui.QUOTED_IDENTIFIER_DELIMITER," character"));return(0,br.createResult)(Aw.Tokens.IDENTIFIER,t,r.slice(n+1))};br.getQuotedIdentifier=VI});var Nw=k(Rl=>{"use strict";Rl.__esModule=!0;Rl.lex=void 0;var Fs=Jr(),Zt=hh(),Ls=Pw(),zI=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!Zt.SEPARATORS.has(s)){var a=Zt.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===Fs.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!Zt.SEPARATORS.has(o)&&o!==Fs.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: ".concat(o,". A closing parenthesis should be followed by another closing parenthesis or whitespace"));return(0,Ls.createResult)(Fs.Tokens.STRUCTURAL_CHARACTER,Zt.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===Zt.QUOTED_IDENTIFIER_DELIMITER)return(0,Ls.getQuotedIdentifier)(r.slice(i+1));if(s===Zt.COMMENT_DELIMITER)return(0,Ls.getComment)(r.slice(i+1));e=i}}else if(Zt.SEPARATORS.has(s)||Zt.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===Zt.QUOTED_IDENTIFIER_DELIMITER||s===Zt.COMMENT_DELIMITER)throw new Error("Unexpected character: ".concat(s))}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(Zt.OPERATORS[u]){if(n&&!Zt.SEPARATORS.has(n))throw new Error("Unexpected character: ".concat(n,". Operators should be separated using whitespace"));return(0,Ls.createResult)(Fs.Tokens.OPERATOR,Zt.OPERATORS[u],l)}else return(0,Ls.createResult)(Fs.Tokens.IDENTIFIER,u,l)}return(0,Ls.createResult)(Fs.Tokens.EOF,null,"")};Rl.lex=zI});var Fw=k(Jt=>{"use strict";var Iw=Jt&&Jt.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))};Jt.__esModule=!0;Jt.validateToken=Jt.previousOperatorTakesPrecedent=Jt.getValue=Jt.newTokenGenerator=void 0;var KI=Nw(),Us=Jr(),Ml=mh(),QI=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=(0,KI.lex)(e),s=i.token,a=i.remainingString;if(e=a,s.name!==Us.Tokens.COMMENT)return(0,Jt.validateToken)(s,t,n),s}}};Jt.newTokenGenerator=QI;var XI=function(r,e){var t=r(Ml.VALID_TOKENS.identifierOrNot),n=t.value===Us.Operators.NOT;n&&(t=r(Ml.VALID_TOKENS.identifierOnly));var i=t.name===Us.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?Iw(Iw([],i,!0),[{name:Us.Tokens.OPERATOR,value:Us.Operators.NOT}],!1):i};Jt.getValue=XI;var ZI=function(r,e){return Ml.OPERATOR_PRECEDENCE[r]<=Ml.OPERATOR_PRECEDENCE[e]};Jt.previousOperatorTakesPrecedent=ZI;var JI=function(r,e,t){if(t===void 0&&(t=!1),r.name===Us.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")};Jt.validateToken=JI});var bh=k(Ws=>{"use strict";var en=Ws&&Ws.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))};Ws.__esModule=!0;Ws.parse=void 0;var Lw=Jr(),Uw=mh(),Cl=Fw(),eF=function(r){if(typeof r!="string")throw new Error("Expected string but received ".concat(typeof r));var e=(0,Cl.newTokenGenerator)(r);return yh(e)};Ws.parse=eF;var yh=function(r,e){e===void 0&&(e=!1);for(var t=en([],(0,Cl.getValue)(r,yh),!0),n=[];;){var i=e?Uw.VALID_TOKENS.binaryOperatorOrClose:Uw.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===Lw.Tokens.EOF||s.name===Lw.Tokens.STRUCTURAL_CHARACTER)return en(en([],t,!0),en([],n,!0).reverse(),!0);for(;n.length;){var a=n[n.length-1]||null;if(a&&(0,Cl.previousOperatorTakesPrecedent)(a.value,s.value))t=en(en([],t,!0),[a],!1),n=n.slice(0,-1);else break}n=en(en([],n,!0),[s],!1),t=en(en([],t,!0),(0,Cl.getValue)(r,yh),!0)}}});var Th=k(_t=>{"use strict";_t.__esModule=!0;_t.throwInvalidExpression=_t.isOperator=_t.isIdentifier=_t.notUtil=_t.xorUtil=_t.orUtil=_t.andUtil=void 0;var Ww=Jr(),tF=function(r,e){return r&&e};_t.andUtil=tF;var rF=function(r,e){return r||e};_t.orUtil=rF;var nF=function(r,e){return r!==e};_t.xorUtil=nF;var iF=function(r){return!r};_t.notUtil=iF;var sF=function(r){var e=r.name,t=r.value;return e===Ww.Tokens.IDENTIFIER&&typeof t=="string"};_t.isIdentifier=sF;var aF=function(r){var e=r.name,t=r.value;return e===Ww.Tokens.OPERATOR&&typeof t=="string"};_t.isOperator=aF;var oF=function(r){throw new TypeError("Invalid postfix expression: ".concat(r))};_t.throwInvalidExpression=oF});var qw=k(Al=>{"use strict";var Po;Al.__esModule=!0;Al.OPERATOR_MAP=void 0;var _h=Jr(),vh=Th();Al.OPERATOR_MAP=(Po={},Po[_h.Operators.AND]=vh.andUtil,Po[_h.Operators.OR]=vh.orUtil,Po[_h.Operators.XOR]=vh.xorUtil,Po)});var jw=k(Cn=>{"use strict";var qs=Cn&&Cn.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))};Cn.__esModule=!0;Cn.evaluate=Cn.getEvaluator=void 0;var uF=bh(),$w=Jr(),lF=qw(),Wi=Th(),cF=function(r){var e=(0,uF.parse)(r);return function(t){return(0,Cn.evaluate)(e,t)}};Cn.getEvaluator=cF;var dF=function(r,e){if(!Array.isArray(r))throw new Error("".concat(r," should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator"));var t=r.reduce(function(n,i,s){if(!(i&&((0,Wi.isIdentifier)(i)||(0,Wi.isOperator)(i))))throw new Error("Invalid token: ".concat(i,". Found in parsed expression at index ").concat(s));if(i.name===$w.Tokens.IDENTIFIER)return qs(qs([],n,!0),[Boolean(e[i.value])],!1);var a=n[n.length-2],o=n[n.length-1];if(i.value===$w.Operators.NOT)return o===void 0&&(0,Wi.throwInvalidExpression)("missing identifier"),qs(qs([],n.slice(0,-1),!0),[(0,Wi.notUtil)(o)],!1);(o===void 0||a===void 0)&&(0,Wi.throwInvalidExpression)("missing identifier");var u=lF.OPERATOR_MAP[i.value];return u||(0,Wi.throwInvalidExpression)("unknown operator"),qs(qs([],n.slice(0,-2),!0),[u(a,o)],!1)},[]);return t.length!==1&&(0,Wi.throwInvalidExpression)("too many identifiers after evaluation"),t[0]};Cn.evaluate=dF});var Yw=k(tn=>{"use strict";var wh=tn&&tn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]});tn.__esModule=!0;tn.parse=tn.evaluate=tn.getEvaluator=void 0;var Gw=jw();wh(tn,Gw,"getEvaluator");wh(tn,Gw,"evaluate");var fF=bh();wh(tn,fF,"parse")});var DF={};eE(DF,{default:()=>ac});module.exports=tE(DF);var Pk=require("obsidian");var ms=require("obsidian");var RF=new Error("timeout while waiting for mutex to become available"),MF=new Error("mutex already locked"),rE=new Error("request for lock canceled"),nE=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},_c=class{constructor(e,t=rE){this._value=e,this._cancelError=t,this._weightedQueues=[],this._weightedWaiters=[]}acquire(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((t,n)=>{this._weightedQueues[e-1]||(this._weightedQueues[e-1]=[]),this._weightedQueues[e-1].push({resolve:t,reject:n}),this._dispatch()})}runExclusive(e,t=1){return nE(this,void 0,void 0,function*(){let[n,i]=yield this.acquire(t);try{return yield e(n)}finally{i()}})}waitForUnlock(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise(t=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),this._weightedWaiters[e-1].push(t),this._dispatch()})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatch()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatch()}cancel(){this._weightedQueues.forEach(e=>e.forEach(t=>t.reject(this._cancelError))),this._weightedQueues=[]}_dispatch(){var e;for(let t=this._value;t>0;t--){let n=(e=this._weightedQueues[t-1])===null||e===void 0?void 0:e.shift();if(!n)continue;let i=this._value,s=t;this._value-=t,t=this._value+1,n.resolve([i,this._newReleaser(s)])}this._drainUnlockWaiters()}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){for(let e=this._value;e>0;e--)!this._weightedWaiters[e-1]||(this._weightedWaiters[e-1].forEach(t=>t()),this._weightedWaiters[e-1]=[])}},iE=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},Yo=class{constructor(e){this._semaphore=new _c(1,e)}acquire(){return iE(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var Ve=class{constructor(e){this._path=e}get path(){return this._path}get pathWithoutExtension(){return this.withoutExtension(this.path)}withoutExtension(e){return e.replace(/\.md$/,"")}get root(){let e=this.path.replace(/\\/g,"/");e.charAt(0)==="/"&&(e=e.substring(1));let t=e.indexOf("/");return t==-1?"/":e.substring(0,t+1)}get folder(){let e=this.path,t=this.filename,n=e.substring(0,e.lastIndexOf(t));return n===""?"/":n}get filename(){let e=this.path.match(/([^/]+)$/);return e!==null?e[1]:""}get filenameWithoutExtension(){return this.withoutExtension(this.filename)}};var Fu=na(ze());var kt=class{constructor(e,t){this.start=e,this.end=t,t.isBefore(e)&&(this.start=t,this.end=e),this.start=this.start.startOf("day"),this.end=this.end.startOf("day")}static buildRelative(e){let t=e==="week"?"isoWeek":e;return new kt(window.moment().startOf(t).startOf("day"),window.moment().endOf(t).startOf("day"))}static buildInvalid(){return new kt(window.moment.invalid(),window.moment.invalid())}isValid(){return this.start.isValid()&&this.end.isValid()}moveToPrevious(e){let t=window.moment.duration(1,e);this.start.subtract(t),this.end.subtract(t),(e==="month"||e==="quarter")&&(this.end=this.end.endOf(e).startOf("day"))}moveToNext(e){let t=window.moment.duration(1,e);this.start.add(t),this.end.add(t),(e==="month"||e==="quarter")&&(this.end=this.end.endOf(e).startOf("day"))}};var Yt=class{static parseDate(e,t=!1){return window.moment(Fu.parseDate(e,void 0,{forwardDate:t})).startOf("day")}static parseDateRange(e,t=!1){let n=[Yt.parseRelativeDateRange,Yt.parseNumberedDateRange,Yt.parseAbsoluteDateRange];for(let i of n){let s=i(e,t);if(s.isValid())return s}return kt.buildInvalid()}static parseAbsoluteDateRange(e,t){let n=Fu.parse(e,void 0,{forwardDate:t});if(n.length===0)return kt.buildInvalid();let i=n[0].start,s=n[1]&&n[1].start?n[1].start:i,a=window.moment(i.date()),o=window.moment(s.date());return new kt(a,o)}static parseRelativeDateRange(e,t){let n=/(last|this|next) (week|month|quarter|year)/,i=e.match(n);if(i&&i.length===3){let s=i[1],a=i[2],o=kt.buildRelative(a);switch(s){case"last":o.moveToPrevious(a);break;case"next":o.moveToNext(a);break}return o}return kt.buildInvalid()}static parseNumberedDateRange(e,t){let n=[[/^\s*[0-9]{4}\s*$/,"YYYY","year"],[/^\s*[0-9]{4}-Q[1-4]\s*$/,"YYYY-Q","quarter"],[/^\s*[0-9]{4}-[0-9]{2}\s*$/,"YYYY-MM","month"],[/^\s*[0-9]{4}-W[0-9]{2}\s*$/,"YYYY-WW","isoWeek"]];for(let[i,s,a]of n){let o=e.match(i);if(o){let u=o[0].trim();return new kt(window.moment(u,s).startOf(a),window.moment(u,s).endOf(a))}}return kt.buildInvalid()}};var wP={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function Lu(r){for(let[e,t]of Object.entries(wP))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}var Uu=["MO","TU","WE","TH","FR","SA","SU"],He=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(Uu.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=Uu[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var Fe=function(r){return r!=null},Bt=function(r){return typeof r=="number"},dm=function(r){return typeof r=="string"&&Uu.includes(r)},ct=Array.isArray,cr=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var ye=function(r,e){var t=0,n=[];if(ct(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},v_=function(r){return ct(r)?r:[r]};function bi(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=ye(t,e/t.length)),t.slice(0,e)+String(n))}var w_=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},mt=function(r,e){var t=r%e;return t*e<0?t+e:t},Wu=function(r,e){return{div:Math.floor(r/e),mod:mt(r,e)}},Ht=function(r){return!Fe(r)||r.length===0},$e=function(r){return!Ht(r)},Te=function(r,e){return $e(r)&&r.indexOf(e)!==-1};var Gr=function(r,e,t,n,i,s){return n===void 0&&(n=0),i===void 0&&(i=0),s===void 0&&(s=0),new Date(Date.UTC(r,e-1,t,n,i,s))},kP=[31,28,31,30,31,30,31,31,30,31,30,31],S_=1e3*60*60*24,qu=9999,O_=Gr(1970,1,1),EP=[6,0,1,2,3,4,5];var os=function(r){return r%4===0&&r%100!==0||r%400===0},fm=function(r){return r instanceof Date},Ti=function(r){return fm(r)&&!isNaN(r.getTime())},k_=function(r){return r.getTimezoneOffset()*60*1e3},SP=function(r,e){var t=r.getTime()-k_(r),n=e.getTime()-k_(e),i=t-n;return Math.round(i/S_)},io=function(r){return SP(r,O_)},$u=function(r){return new Date(O_.getTime()+r*S_)},OP=function(r){var e=r.getUTCMonth();return e===1&&os(r.getUTCFullYear())?29:kP[e]},yn=function(r){return EP[r.getUTCDay()]},pm=function(r,e){var t=Gr(r,e+1,1);return[yn(t),OP(t)]},ju=function(r,e){return e=e||r,new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))},Gu=function(r){var e=new Date(r.getTime());return e},mm=function(r){for(var e=[],t=0;t<r.length;t++)e.push(Gu(r[t]));return e},bn=function(r){r.sort(function(e,t){return e.getTime()-t.getTime()})},us=function(r,e){e===void 0&&(e=!0);var t=new Date(r);return[bi(t.getUTCFullYear().toString(),4,"0"),bi(t.getUTCMonth()+1,2,"0"),bi(t.getUTCDate(),2,"0"),"T",bi(t.getUTCHours(),2,"0"),bi(t.getUTCMinutes(),2,"0"),bi(t.getUTCSeconds(),2,"0"),e?"Z":""].join("")},so=function(r){var e=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,t=e.exec(r);if(!t)throw new Error("Invalid UNTIL value: ".concat(r));return new Date(Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[5],10)||0,parseInt(t[6],10)||0,parseInt(t[7],10)||0))},E_=function(r,e){var t=r.toLocaleString("sv-SE",{timeZone:e});return t.replace(" ","T")+"Z"},D_=function(r,e){var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(E_(r,t)),i=new Date(E_(r,e!=null?e:"UTC")),s=i.getTime()-n.getTime();return new Date(r.getTime()-s)};var DP=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),Tn=DP;var hm=function(r,e){return hm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},hm(r,e)};function ls(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");hm(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var dt=function(){return dt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},dt.apply(this,arguments)};function I(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}var xP=function(r){ls(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(Tn),gm=xP;var RP={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},_i=RP;var x_=function(r,e){return r.indexOf(e)!==-1},MP=function(r){return r.toString()},CP=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},AP=function(){function r(e,t,n,i){if(t===void 0&&(t=MP),n===void 0&&(n=_i),i===void 0&&(i=CP),this.text=[],this.language=n||_i,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,d){return c-d}),a.sort(function(c,d){return d-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(Fe(this.origOptions.byweekday)){var o=ct(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,d){return c.weekday-d.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(x_(["dtstart","wkst","freq"],n))return!0;if(!x_(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[z.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=Bt(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),ct(e)||(e=[e]);var a=function(u,l,c){for(var d="",f=0;f<u.length;f++)f!==0&&(f===u.length-1?d+=" "+c+" ":d+=l+" "),d+=u[f];return d};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),Yr=AP;var PP=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function ao(r,e){e===void 0&&(e=_i);var t={},n=new PP(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var f=n.acceptNumber();if(f&&(t.interval=parseInt(f[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=z.DAILY,n.nextSymbol()&&(a(),d());break;case"weekday(s)":t.freq=z.WEEKLY,t.byweekday=[z.MO,z.TU,z.WE,z.TH,z.FR],n.nextSymbol(),d();break;case"week(s)":t.freq=z.WEEKLY,n.nextSymbol()&&(s(),d());break;case"hour(s)":t.freq=z.HOURLY,n.nextSymbol()&&(s(),d());break;case"minute(s)":t.freq=z.MINUTELY,n.nextSymbol()&&(s(),d());break;case"month(s)":t.freq=z.MONTHLY,n.nextSymbol()&&(s(),d());break;case"year(s)":t.freq=z.YEARLY,n.nextSymbol()&&(s(),d());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=z.WEEKLY;var m=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[z[m]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=u();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(z[y]),n.nextSymbol()}c(),d();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=z.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var g=o();if(!g)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(g),n.nextSymbol()}s(),d();break;default:throw new Error("Unknown symbol")}}function s(){var f=n.accept("on"),m=n.accept("the");if(!!(f||m))do{var y=l(),g=u(),T=o();if(y)g?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(z[g].nth(y))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(y),n.accept("day(s)"));else if(g)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(z[g]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[z.MO,z.TU,z.WE,z.TH,z.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var E=n.acceptNumber();if(!E)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(E[0],10)];n.accept("comma");){if(E=n.acceptNumber(),!E)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(E[0],10))}}else if(T)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(T);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var f=n.accept("at");if(!!f)do{var m=n.acceptNumber();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(m[0],10)];n.accept("comma");){if(m=n.acceptNumber(),!m)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(m[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var f=parseInt(n.value[1],10);if(f<-366||f>366)throw new Error("Nth out of range: "+f);return n.nextSymbol(),n.accept("last")?-f:f;default:return!1}}function c(){n.accept("on"),n.accept("the");var f=l();if(!!f)for(t.bymonthday=[f],n.nextSymbol();n.accept("comma");){if(f=l(),!f)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(f),n.nextSymbol()}}function d(){if(n.symbol==="until"){var f=Date.parse(n.text);if(!f)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(f)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var me;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(me||(me={}));function oo(r){return r<me.HOURLY}var R_=function(r,e){return e===void 0&&(e=_i),new z(ao(r,e)||void 0)},cs=["count","until","interval","byweekday","bymonthday","bymonth"];Yr.IMPLEMENTED=[];Yr.IMPLEMENTED[me.HOURLY]=cs;Yr.IMPLEMENTED[me.MINUTELY]=cs;Yr.IMPLEMENTED[me.DAILY]=["byhour"].concat(cs);Yr.IMPLEMENTED[me.WEEKLY]=cs;Yr.IMPLEMENTED[me.MONTHLY]=cs;Yr.IMPLEMENTED[me.YEARLY]=["byweekno","byyearday"].concat(cs);var M_=function(r,e,t,n){return new Yr(r,e,t,n).toString()},C_=Yr.isFullyConvertible;var ds=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var A_=function(r){ls(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return yn(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=mt(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=Wu(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),Ht(i)||Te(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=Wu(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(Ht(i)||Te(i,this.hour))&&(Ht(s)||Te(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=Wu(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(Ht(i)||Te(i,this.hour))&&(Ht(s)||Te(s,this.minute))&&(Ht(a)||Te(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=pm(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>qu))return;t=pm(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case me.YEARLY:return this.addYears(s);case me.MONTHLY:return this.addMonths(s);case me.WEEKLY:return this.addWeekly(s,a);case me.DAILY:return this.addDaily(s);case me.HOURLY:return this.addHours(s,n,o);case me.MINUTELY:return this.addMinutes(s,n,o,u);case me.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(ds);function ym(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];Te(I_,s)||e.push(s),fm(r[s])&&!Ti(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return dt({},r)}function P_(r){var e=dt(dt({},uo),ym(r));if(Fe(e.byeaster)&&(e.freq=z.YEARLY),!(Fe(e.freq)&&z.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),Fe(e.wkst)?Bt(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=z.MO.weekday,Fe(e.bysetpos)){Bt(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||$e(e.byweekno)||$e(e.byyearday)||Boolean(e.bymonthday)||$e(e.bymonthday)||Fe(e.byweekday)||Fe(e.byeaster)))switch(e.freq){case z.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case z.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case z.WEEKLY:e.byweekday=[yn(e.dtstart)];break}if(Fe(e.bymonth)&&!ct(e.bymonth)&&(e.bymonth=[e.bymonth]),Fe(e.byyearday)&&!ct(e.byyearday)&&Bt(e.byyearday)&&(e.byyearday=[e.byyearday]),!Fe(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(ct(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(Fe(e.byweekno)&&!ct(e.byweekno)&&(e.byweekno=[e.byweekno]),!Fe(e.byweekday))e.bynweekday=null;else if(Bt(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(dm(e.byweekday))e.byweekday=[He.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof He)!e.byweekday.n||e.freq>z.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(Bt(u)){a.push(u);continue}else if(dm(u)){a.push(He.fromStr(u).weekday);continue}!u.n||e.freq>z.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=$e(a)?a:null,e.bynweekday=$e(o)?o:null}return Fe(e.byhour)?Bt(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<z.HOURLY?[e.dtstart.getUTCHours()]:null,Fe(e.byminute)?Bt(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<z.MINUTELY?[e.dtstart.getUTCMinutes()]:null,Fe(e.bysecond)?Bt(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<z.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function N_(r){var e=r.dtstart.getTime()%1e3;if(!oo(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new ds(n,i,s,e))})})}),t}function co(r){var e=r.split(`
`).map(NP).filter(function(t){return t!==null});return dt(dt({},e[0]),e[1])}function lo(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=so(i),e}function NP(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return F_(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return F_(r);case"DTSTART":return lo(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function F_(r){var e=r.replace(/^RRULE:/i,""),t=lo(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=me[o.toUpperCase()];break;case"WKST":t.wkst=dr[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=IP(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=FP(o);break;case"DTSTART":case"TZID":var c=lo(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=so(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function IP(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(L_)}return L_(r)}function L_(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function FP(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return dr[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=dr[s].weekday;return new He(a,i)})}var vi=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=us(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){return this.isUTC?this.date:D_(this.date,this.tzid)},r}();function fo(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(uo),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!Te(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!Fe(o)||ct(o)&&!o.length)){switch(a){case"FREQ":u=z.FREQUENCIES[r.freq];break;case"WKST":Bt(o)?u=new He(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=v_(o).map(function(m){return m instanceof He?m:ct(m)?new He(m[0],m[1]):new He(m)}).toString();break;case"DTSTART":t=LP(o,r.tzid);break;case"UNTIL":u=us(o,!r.tzid);break;default:if(ct(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var d=e.map(function(m){var y=m[0],g=m[1];return"".concat(y,"=").concat(g.toString())}).join(";"),f="";return d!==""&&(f="RRULE:".concat(d)),[t,f].filter(function(m){return!!m}).join(`
`)}function LP(r,e){return r?"DTSTART"+new vi(new Date(r),e).toString():""}function UP(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var U_=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?Gu(t):mm(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var d=0;d<i.length;d++){var f=i[d];if(!UP(t[f],c[f]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if(ct(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new Tn(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return ct(n)?mm(n):n instanceof Date?Gu(n):n},r}();var W_=I(I(I(I(I(I(I(I(I(I(I(I(I([],ye(1,31),!0),ye(2,28),!0),ye(3,31),!0),ye(4,30),!0),ye(5,31),!0),ye(6,30),!0),ye(7,31),!0),ye(8,31),!0),ye(9,30),!0),ye(10,31),!0),ye(11,30),!0),ye(12,31),!0),ye(1,7),!0),q_=I(I(I(I(I(I(I(I(I(I(I(I(I([],ye(1,31),!0),ye(2,29),!0),ye(3,31),!0),ye(4,30),!0),ye(5,31),!0),ye(6,30),!0),ye(7,31),!0),ye(8,31),!0),ye(9,30),!0),ye(10,31),!0),ye(11,30),!0),ye(12,31),!0),ye(1,7),!0),WP=cr(1,29),qP=cr(1,30),Gn=cr(1,31),ht=cr(1,32),$_=I(I(I(I(I(I(I(I(I(I(I(I(I([],ht,!0),qP,!0),ht,!0),Gn,!0),ht,!0),Gn,!0),ht,!0),ht,!0),Gn,!0),ht,!0),Gn,!0),ht,!0),ht.slice(0,7),!0),j_=I(I(I(I(I(I(I(I(I(I(I(I(I([],ht,!0),WP,!0),ht,!0),Gn,!0),ht,!0),Gn,!0),ht,!0),ht,!0),Gn,!0),ht,!0),Gn,!0),ht,!0),ht.slice(0,7),!0),$P=cr(-28,0),jP=cr(-29,0),Yn=cr(-30,0),gt=cr(-31,0),G_=I(I(I(I(I(I(I(I(I(I(I(I(I([],gt,!0),jP,!0),gt,!0),Yn,!0),gt,!0),Yn,!0),gt,!0),gt,!0),Yn,!0),gt,!0),Yn,!0),gt,!0),gt.slice(0,7),!0),Y_=I(I(I(I(I(I(I(I(I(I(I(I(I([],gt,!0),$P,!0),gt,!0),Yn,!0),gt,!0),Yn,!0),gt,!0),gt,!0),Yn,!0),gt,!0),Yn,!0),gt,!0),gt.slice(0,7),!0),B_=[0,31,60,91,121,152,182,213,244,274,305,335,366],H_=[0,31,59,90,120,151,181,212,243,273,304,334,365],bm=function(){for(var r=[],e=0;e<55;e++)r=r.concat(cr(7));return r}();function V_(r,e){var t=Gr(r,1,1),n=os(r)?366:365,i=os(r+1)?366:365,s=io(t),a=yn(t),o=dt(dt({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},GP(r)),{wnomask:null});if(Ht(e.byweekno))return o;o.wnomask=ye(0,n+7);var u,l,c=u=mt(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+mt(a-e.wkst,7)):l=n-c;for(var d=Math.floor(l/7),f=mt(l,7),m=Math.floor(d+f/4),y=0;y<e.byweekno.length;y++){var g=e.byweekno[y];if(g<0&&(g+=m+1),g>0&&g<=m){var T=void 0;g>1?(T=c+(g-1)*7,c!==u&&(T-=7-u)):T=c;for(var E=0;E<7&&(o.wnomask[T]=1,T++,o.wdaymask[T]!==e.wkst);E++);}}if(Te(e.byweekno,1)){var T=c+m*7;if(c!==u&&(T-=7-u),T<n)for(var y=0;y<7&&(o.wnomask[T]=1,T+=1,o.wdaymask[T]!==e.wkst);y++);}if(c){var S=void 0;if(Te(e.byweekno,-1))S=-1;else{var x=yn(Gr(r-1,1,1)),q=mt(7-x.valueOf()+e.wkst,7),W=os(r-1)?366:365,re=void 0;q>=4?(q=0,re=W+mt(x-e.wkst,7)):re=n-c,S=Math.floor(52+mt(re,7)/4)}if(Te(e.byweekno,S))for(var T=0;T<c;T++)o.wnomask[T]=1}return o}function GP(r){var e=os(r)?366:365,t=Gr(r,1,1),n=yn(t);return e===365?{mmask:W_,mdaymask:j_,nmdaymask:Y_,wdaymask:bm.slice(n),mrange:H_}:{mmask:q_,mdaymask:$_,nmdaymask:G_,wdaymask:bm.slice(n),mrange:B_}}function z_(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===z.YEARLY)if(Ht(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===z.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(Ht(o))return a;a.nwdaymask=ye(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],d=l[1]-1,f=0;f<s.bynweekday.length;f++){var m=void 0,y=s.bynweekday[f],g=y[0],T=y[1];T<0?(m=d+(T+1)*7,m-=mt(i[m]-g,7)):(m=c+(T-1)*7,m+=mt(7-i[m]+g,7)),c<=m&&m<=d&&(a.nwdaymask[m]=1)}return a}function K_(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),d=i%4,f=Math.floor(32+2*a+2*c-l-d)%7,m=Math.floor((t+11*l+22*f)/451),y=Math.floor((l+f-7*m+114)/31),g=(l+f-7*m+114)%31+1,T=Date.UTC(r,y-1,g+e),E=Date.UTC(r,0,1);return[Math.ceil((T-E)/(1e3*60*60*24))]}var YP=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=V_(e,n)),$e(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=z_(e,t,s,a,o,n)}Fe(n.byeaster)&&(this.eastermask=K_(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[cr(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=ye(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=ye(null,this.yearlen+7),s=io(Gr(e,t,n))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=ye(null,this.yearlen),s=io(Gr(e,t,n))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),bn(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new ds(e,t,a,i)});return bn(s),s},r.prototype.stimeset=function(e,t,n,i){return[new ds(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case me.YEARLY:return this.ydayset.bind(this);case me.MONTHLY:return this.mdayset.bind(this);case me.WEEKLY:return this.wdayset.bind(this);case me.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case me.HOURLY:return this.htimeset.bind(this);case me.MINUTELY:return this.mtimeset.bind(this);case me.SECONDLY:return this.stimeset.bind(this)}},r}(),Q_=YP;function X_(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=mt(c,e.length)):(u=Math.floor((c-1)/e.length),l=mt(c-1,e.length));for(var d=[],f=t;f<n;f++){var m=s[f];!Fe(m)||d.push(m)}var y=void 0;u<0?y=d.slice(u)[0]:y=d[u];var g=e[l],T=$u(i.yearordinal+y),E=ju(T,g);Te(a,E)||a.push(E)}return bn(a),a}function Yu(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return _n(r);var u=A_.fromDate(t),l=new Q_(e);l.rebuild(u.year,u.month);for(var c=VP(l,u,e);;){var d=l.getdayset(n)(u.year,u.month,u.day),f=d[0],m=d[1],y=d[2],g=HP(f,m,y,l,e);if($e(a))for(var T=X_(a,c,m,y,l,f),E=0;E<T.length;E++){var S=T[E];if(s&&S>s)return _n(r);if(S>=t){var x=Z_(S,e);if(!r.accept(x)||o&&(--o,!o))return _n(r)}}else for(var E=m;E<y;E++){var q=f[E];if(!!Fe(q))for(var W=$u(l.yearordinal+q),re=0;re<c.length;re++){var H=c[re],S=ju(W,H);if(s&&S>s)return _n(r);if(S>=t){var x=Z_(S,e);if(!r.accept(x)||o&&(--o,!o))return _n(r)}}}if(e.interval===0||(u.add(e,g),u.year>qu))return _n(r);oo(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function BP(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return $e(n)&&!Te(n,r.mmask[e])||$e(i)&&!r.wnomask[e]||$e(s)&&!Te(s,r.wdaymask[e])||$e(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!Te(r.eastermask,e)||($e(o)||$e(u))&&!Te(o,r.mdaymask[e])&&!Te(u,r.nmdaymask[e])||$e(l)&&(e<r.yearlen&&!Te(l,e+1)&&!Te(l,-r.yearlen+e)||e>=r.yearlen&&!Te(l,e+1-r.yearlen)&&!Te(l,-r.nextyearlen+e-r.yearlen))}function Z_(r,e){return new vi(r,e.tzid).rezonedDate()}function _n(r){return r.getValue()}function HP(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=BP(n,o,i),s&&(r[o]=null)}return s}function VP(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return oo(n)?N_(t):n>=z.HOURLY&&$e(i)&&!Te(i,e.hour)||n>=z.MINUTELY&&$e(s)&&!Te(s,e.minute)||n>=z.SECONDLY&&$e(a)&&!Te(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var dr={MO:new He(0),TU:new He(1),WE:new He(2),TH:new He(3),FR:new He(4),SA:new He(5),SU:new He(6)},uo={freq:me.YEARLY,dtstart:null,interval:1,wkst:dr.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},I_=Object.keys(uo),z=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new U_,this.origOptions=ym(e);var n=P_(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return ao(e,t)},r.fromText=function(e,t){return R_(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return Yu(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new gm("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new Tn("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!Ti(e)||!Ti(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new gm("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new Tn("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!Ti(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Tn("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!Ti(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Tn("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return fo(this.origOptions)},r.prototype.toText=function(e,t,n){return M_(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return C_(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=me.YEARLY,r.MONTHLY=me.MONTHLY,r.WEEKLY=me.WEEKLY,r.DAILY=me.DAILY,r.HOURLY=me.HOURLY,r.MINUTELY=me.MINUTELY,r.SECONDLY=me.SECONDLY,r.MO=dr.MO,r.TU=dr.TU,r.WE=dr.WE,r.TH=dr.TH,r.FR=dr.FR,r.SA=dr.SA,r.SU=dr.SU,r.parseString=co,r.optionsToString=fo,r}();function J_(r,e,t,n,i,s){var a={},o=r.accept;function u(f,m){t.forEach(function(y){y.between(f,m,!0).forEach(function(g){a[Number(g)]=!0})})}i.forEach(function(f){var m=new vi(f,s).rezonedDate();a[Number(m)]=!0}),r.accept=function(f){var m=Number(f);return isNaN(m)?o.call(this,f):!a[m]&&(u(new Date(m-1),new Date(m+1)),!a[m])?(a[m]=!0,o.call(this,f)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(f){var m=Number(f);return a[m]?!0:(a[m]=!0,o.call(this,f))});for(var l=0;l<n.length;l++){var c=new vi(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(f){Yu(r,f.options)});var d=r._result;switch(bn(d),r.method){case"all":case"between":return d;case"before":return d.length&&d[d.length-1]||null;case"after":default:return d.length&&d[0]||null}}var ev={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function zP(r,e){var t=[],n=[],i=[],s=[],a=lo(r),o=a.dtstart,u=a.tzid,l=JP(r,e.unfold);return l.forEach(function(c){var d;if(!!c){var f=ZP(c),m=f.name,y=f.parms,g=f.value;switch(m.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: ".concat(y.join(",")));t.push(co(c));break;case"RDATE":var T=(d=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&d!==void 0?d:[],E=T[1];E&&!u&&(u=E),n=n.concat(tv(g,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: ".concat(y.join(",")));i.push(co(g));break;case"EXDATE":s=s.concat(tv(g,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+m)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function KP(r,e){var t=zP(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new _m(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(f){c.rrule(new z(Tm(f,o,u),l))}),i.forEach(function(f){c.rdate(f)}),s.forEach(function(f){c.exrule(new z(Tm(f,o,u),l))}),a.forEach(function(f){c.exdate(f)}),e.compatible&&e.dtstart&&c.rdate(o),c}var d=n[0]||{};return new z(Tm(d,d.dtstart||e.dtstart||o,d.tzid||e.tzid||u),l)}function Bu(r,e){return e===void 0&&(e={}),KP(r,QP(e))}function Tm(r,e,t){return dt(dt({},r),{dtstart:e,tzid:t})}function QP(r){var e=[],t=Object.keys(r),n=Object.keys(ev);if(t.forEach(function(i){Te(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return dt(dt({},ev),r)}function XP(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=w_(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function ZP(r){var e=XP(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function JP(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function eN(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function tv(r,e){return eN(e),r.split(",").map(function(t){return so(t)})}function rv(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var _m=function(r){ls(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=rv.apply(n,["dtstart"]),n.tzid=rv.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return J_(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){nv(t,this._rrule)},e.prototype.exrule=function(t){nv(t,this._exrule)},e.prototype.rdate=function(t){iv(t,this._rdate)},e.prototype.exdate=function(t){iv(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return Bu(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return Bu(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(fo({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(sv("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(sv("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(z);function nv(r,e){if(!(r instanceof z))throw new TypeError(String(r)+" is not RRule instance");Te(e.map(String),String(r))||e.push(r)}function iv(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");Te(e.map(Number),Number(r))||(e.push(r),bn(e))}function sv(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return us(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}var vm=na(ze());function fr(r,e){return r!==null&&e===null?-1:r===null&&e!==null?1:r!==null&&e!==null?r.isValid()&&!e.isValid()?1:!r.isValid()&&e.isValid()?-1:r.isAfter(e)?1:r.isBefore(e)?-1:0:0}function tN(r,e,t=void 0){if(!e)return`<i>no ${r} date</i>`;let n=vm.parseDate(e,t,{forwardDate:t!=null});return n!==null?window.moment(n).format("YYYY-MM-DD"):`<i>invalid ${r} date</i>`}function av(r,e,t){return tN(r,e,t?new Date:void 0)}function wi(r,e){let t=null,n=vm.parseDate(r,new Date,{forwardDate:e});return n!==null&&(t=window.moment(n)),t}var st=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=z.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new z(u);return new st({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){s instanceof Error&&console.log(s.message)}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(e=window.moment()){let t=this.nextReferenceDate(e);if(t!==null){let n=null,i=null,s=null;if(this.referenceDate){if(this.startDate){let a=window.moment.duration(this.startDate.diff(this.referenceDate));n=window.moment(t),n.add(Math.round(a.asDays()),"days")}if(this.scheduledDate){let a=window.moment.duration(this.scheduledDate.diff(this.referenceDate));i=window.moment(t),i.add(Math.round(a.asDays()),"days")}if(this.dueDate){let a=window.moment.duration(this.dueDate.diff(this.referenceDate));s=window.moment(t),s.add(Math.round(a.asDays()),"days")}}return{startDate:n,scheduledDate:i,dueDate:s}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||fr(this.startDate,e.startDate)!==0||fr(this.scheduledDate,e.scheduledDate)!==0||fr(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}nextReferenceDate(e){return this.baseOnToday?this.nextReferenceDateFromToday(e).toDate():this.nextReferenceDateFromOriginalReferenceDate().toDate()}nextReferenceDateFromToday(e){let t=new z(he(K({},this.rrule.origOptions),{dtstart:e.startOf("day").utc(!0).toDate()}));return this.nextAfter(e.endOf("day"),t)}nextReferenceDateFromOriginalReferenceDate(){var t;let e=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day");return this.nextAfter(e,this.rrule)}nextAfter(e,t){e.utc(!0);let n=window.moment(t.after(e.toDate())),i=this.toText(),s=i.match(/every( \d+)? month(s)?(.*)?/);s!==null&&(i.includes(" on ")||(n=st.nextAfterMonths(e,n,t,s[1])));let a=i.match(/every( \d+)? year(s)?(.*)?/);return a!==null&&(n=st.nextAfterYears(e,n,t,a[1])),st.addTimezone(n)}static nextAfterMonths(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));st.isSkippingTooManyMonths(e,t,s);)t=st.fromOneDayEarlier(e,n);return t}static isSkippingTooManyMonths(e,t,n){let i=t.month()-e.month();return i+=(t.year()-e.year())*12,i>n}static nextAfterYears(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));st.isSkippingTooManyYears(e,t,s);)t=st.fromOneDayEarlier(e,n);return t}static isSkippingTooManyYears(e,t,n){return t.year()-e.year()>n}static fromOneDayEarlier(e,t){e.subtract(1,"days").endOf("day");let n=t.origOptions;return n.dtstart=e.startOf("day").toDate(),t=new z(n),window.moment(t.after(e.toDate()))}static addTimezone(e){return window.moment.utc(e).local(!0).startOf("day")}};var fs=(f=>(f.Description="description",f.Id="id",f.DependsOn="dependsOn",f.Priority="priority",f.RecurrenceRule="recurrenceRule",f.CreatedDate="createdDate",f.StartDate="startDate",f.ScheduledDate="scheduledDate",f.DueDate="dueDate",f.CancelledDate="cancelledDate",f.DoneDate="doneDate",f.BlockLink="blockLink",f))(fs||{}),Hu=Object.values(fs),Br=class{constructor(){this.visible={};this.tagsVisible=!0;Hu.forEach(e=>{this.visible[e]=!0})}isShown(e){return this.visible[e]}areTagsShown(){return this.tagsVisible}hide(e){this.visible[e]=!1}setVisibility(e,t){this.visible[e]=t}setTagsVisibility(e){this.tagsVisible=e}get shownComponents(){return Hu.filter(e=>this.visible[e])}get hiddenComponents(){return Hu.filter(e=>!this.visible[e])}get toggleableComponents(){return Hu.filter(e=>e!=="description"&&e!=="blockLink")}toggleVisibilityExceptDescriptionAndBlockLink(){this.toggleableComponents.forEach(e=>{this.visible[e]=!this.visible[e]}),this.setTagsVisibility(!this.areTagsShown())}};var Vt=class{},J=Vt;J.dateFormat="YYYY-MM-DD",J.dateTimeFormat="YYYY-MM-DD HH:mm",J.indentationRegex=/^([\s\t>]*)/,J.listMarkerRegex=/([-*+]|[0-9]+\.)/,J.checkboxRegex=/\[(.)\]/u,J.afterCheckboxRegex=/ *(.*)/u,J.taskRegex=new RegExp(Vt.indentationRegex.source+Vt.listMarkerRegex.source+" +"+Vt.checkboxRegex.source+Vt.afterCheckboxRegex.source,"u"),J.nonTaskRegex=new RegExp(Vt.indentationRegex.source+Vt.listMarkerRegex.source+"? *("+Vt.checkboxRegex.source+")?"+Vt.afterCheckboxRegex.source,"u"),J.listItemRegex=new RegExp(Vt.indentationRegex.source+Vt.listMarkerRegex.source),J.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,J.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]+/g,J.hashTagsFromEnd=new RegExp(Vt.hashTags.source+"$");var ki=/[a-zA-Z0-9-_]+/,km=new RegExp(ki.source+"( *, *"+ki.source+" *)*"),po={prioritySymbols:{Highest:"\u{1F53A}",High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",Lowest:"\u23EC",None:""},startDateSymbol:"\u{1F6EB}",createdDateSymbol:"\u2795",scheduledDateSymbol:"\u23F3",dueDateSymbol:"\u{1F4C5}",doneDateSymbol:"\u2705",cancelledDateSymbol:"\u274C",recurrenceSymbol:"\u{1F501}",dependsOnSymbol:"\u26D4",idSymbol:"\u{1F194}",TaskFormatRegularExpressions:{priorityRegex:/([🔺⏫🔼🔽⏬])\uFE0F?$/u,startDateRegex:/🛫 *(\d{4}-\d{2}-\d{2})$/u,createdDateRegex:/➕ *(\d{4}-\d{2}-\d{2})$/u,scheduledDateRegex:/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,dueDateRegex:/[📅📆🗓] *(\d{4}-\d{2}-\d{2})$/u,doneDateRegex:/✅ *(\d{4}-\d{2}-\d{2})$/u,cancelledDateRegex:/❌ *(\d{4}-\d{2}-\d{2})$/u,recurrenceRegex:/🔁 ?([a-zA-Z0-9, !]+)$/iu,dependsOnRegex:new RegExp("\u26D4\uFE0F? *("+km.source+")$","iu"),idRegex:new RegExp("\u{1F194} *("+ki.source+")$","iu")}};function wm(r,e,t){return t?r?" "+e:` ${e} ${t}`:""}function ps(r,e,t){return t?r?" "+e:` ${e} ${t.format(J.dateFormat)}`:""}function ov(){let r=[];return Object.values(po.prioritySymbols).forEach(e=>{e.length>0&&r.push(e)}),Object.values(po).forEach(e=>{typeof e=="string"&&r.push(e)}),r}var Ei=class{constructor(e){this.symbols=e}serialize(e){let t=new Br,n="",i=!1;for(let s of t.shownComponents)n+=this.componentToString(e,i,s);return n}componentToString(e,t,n){var y;let{prioritySymbols:i,startDateSymbol:s,createdDateSymbol:a,scheduledDateSymbol:o,doneDateSymbol:u,cancelledDateSymbol:l,recurrenceSymbol:c,dueDateSymbol:d,dependsOnSymbol:f,idSymbol:m}=this.symbols;switch(n){case"description":return e.description;case"priority":{let g="";return e.priority==="0"?g=" "+i.Highest:e.priority==="1"?g=" "+i.High:e.priority==="2"?g=" "+i.Medium:e.priority==="4"?g=" "+i.Low:e.priority==="5"&&(g=" "+i.Lowest),g}case"startDate":return ps(t,s,e.startDate);case"createdDate":return ps(t,a,e.createdDate);case"scheduledDate":return e.scheduledDateIsInferred?"":ps(t,o,e.scheduledDate);case"doneDate":return ps(t,u,e.doneDate);case"cancelledDate":return ps(t,l,e.cancelledDate);case"dueDate":return ps(t,d,e.dueDate);case"recurrenceRule":return e.recurrence?wm(t,c,e.recurrence.toText()):"";case"dependsOn":return e.dependsOn.length===0?"":wm(t,f,e.dependsOn.join(","));case"id":return wm(t,m,e.id);case"blockLink":return(y=e.blockLink)!=null?y:"";default:throw new Error(`Don't know how to render task component of type '${n}'`)}}parsePriority(e){let{prioritySymbols:t}=this.symbols;switch(e){case t.Lowest:return"5";case t.Low:return"4";case t.Medium:return"2";case t.High:return"1";case t.Highest:return"0";default:return"3"}}deserialize(e){let{TaskFormatRegularExpressions:t}=this.symbols,n,i="3",s=null,a=null,o=null,u=null,l=null,c=null,d="",f=null,m="",y=[],g="",T=20,E=0;do{n=!1;let S=e.match(t.priorityRegex);S!==null&&(i=this.parsePriority(S[1]),e=e.replace(t.priorityRegex,"").trim(),n=!0);let x=e.match(t.doneDateRegex);x!==null&&(u=window.moment(x[1],J.dateFormat),e=e.replace(t.doneDateRegex,"").trim(),n=!0);let q=e.match(t.cancelledDateRegex);q!==null&&(l=window.moment(q[1],J.dateFormat),e=e.replace(t.cancelledDateRegex,"").trim(),n=!0);let W=e.match(t.dueDateRegex);W!==null&&(o=window.moment(W[1],J.dateFormat),e=e.replace(t.dueDateRegex,"").trim(),n=!0);let re=e.match(t.scheduledDateRegex);re!==null&&(a=window.moment(re[1],J.dateFormat),e=e.replace(t.scheduledDateRegex,"").trim(),n=!0);let H=e.match(t.startDateRegex);H!==null&&(s=window.moment(H[1],J.dateFormat),e=e.replace(t.startDateRegex,"").trim(),n=!0);let Y=e.match(t.createdDateRegex);Y!==null&&(c=window.moment(Y[1],J.dateFormat),e=e.replace(t.createdDateRegex,"").trim(),n=!0);let be=e.match(t.recurrenceRegex);be!==null&&(d=be[1].trim(),e=e.replace(t.recurrenceRegex,"").trim(),n=!0);let Pe=e.match(J.hashTagsFromEnd);if(Pe!=null){e=e.replace(J.hashTagsFromEnd,"").trim(),n=!0;let D=Pe[0].trim();g=g.length>0?[D,g].join(" "):D}let j=e.match(t.idRegex);j!=null&&(e=e.replace(t.idRegex,"").trim(),m=j[1].trim(),n=!0);let $=e.match(t.dependsOnRegex);$!=null&&(e=e.replace(t.dependsOnRegex,"").trim(),y=$[1].replace(/ /g,"").split(",").filter(D=>D!==""),n=!0),E++}while(n&&E<=T);return d.length>0&&(f=st.fromText({recurrenceRuleText:d,startDate:s,scheduledDate:a,dueDate:o})),g.length>0&&(e+=" "+g),{description:e,priority:i,startDate:s,createdDate:c,scheduledDate:a,dueDate:o,doneDate:u,cancelledDate:l,recurrence:f,id:m,dependsOn:y,tags:ae.extractHashtags(e)}}};function ho(r){let e="",t=!0;for(;t;)e=Math.random().toString(36).substring(2,6+2),r.includes(e)||(t=!1);return e}function Vu(r,e){return r.id!==""?r:new ae(he(K({},r),{id:ho(e)}))}function uv(r,e){let t=r;if(!r.dependsOn.includes(e.id)){let n=[...r.dependsOn,e.id];t=new ae(he(K({},r),{dependsOn:n}))}return t}function lv(r,e){let t=r;if(r.dependsOn.includes(e.id)){let n=r.dependsOn.filter(i=>i!==e.id);t=new ae(he(K({},r),{dependsOn:n}))}return t}function Bn(r){return r.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}var Hn=class{constructor(){this._globalFilter="";this._removeGlobalFilter=!1}static getInstance(){return Hn.instance||(Hn.instance=new Hn),Hn.instance}get(){return this._globalFilter}set(e){this._globalFilter=e}reset(){this.set(Hn.empty)}isEmpty(){return this.get()===Hn.empty}equals(e){return this.get()===e}includedIn(e){let t=this.get();return e.includes(t)}prependTo(e){return this.get()+" "+e}removeAsWordFromDependingOnSettings(e){return this.getRemoveGlobalFilter()?this.removeAsWordFrom(e):e}getRemoveGlobalFilter(){return this._removeGlobalFilter}setRemoveGlobalFilter(e){this._removeGlobalFilter=e}removeAsWordFrom(e){if(this.isEmpty())return e;let t=RegExp("(^|\\s)"+Bn(this.get())+"($|\\s)","ug");return e.search(t)>-1&&(e=e.replace(t,"$1$2").replace("  "," ").trim()),e}removeAsSubstringFrom(e){let t=this.get();return e.replace(t,"").trim()}},_e=Hn;_e.empty="";var dv=require("obsidian");var rN=20;function Si(r){return _e.getInstance().removeAsWordFrom(r.description)}function nN(r,e){if(r==="")return e;let t=(0,dv.prepareSimpleSearch)(r),n=-4;return e.map(a=>{let o=t(Si(a));return o&&o.score>n?{item:a,match:o}:null}).filter(Boolean).sort((a,o)=>o.match.score-a.match.score).map(a=>a.item)}function zu(r,e,t,n,i){let s=nN(r,e);return s=s.filter(a=>!(a.isDone||a.description.includes("<%")&&a.description.includes("%>")||a.description===(t==null?void 0:t.description)&&a.taskLocation.path===(t==null?void 0:t.taskLocation.path)&&a.originalMarkdown===(t==null?void 0:t.originalMarkdown)||(n==null?void 0:n.includes(a))||(i==null?void 0:i.includes(a)))),t&&s.sort((a,o)=>{let u=a.taskLocation.path===t.taskLocation.path,l=o.taskLocation.path===t.taskLocation.path;return u&&l?Math.abs(a.taskLocation.lineNumber-t.taskLocation.lineNumber)-Math.abs(o.taskLocation.lineNumber-t.taskLocation.lineNumber):u?-1:l?1:0}),s.slice(0,rN)}var Em=5,iN=!0;globalThis.SHOW_DEPENDENCY_SUGGESTIONS=iN;function Sm(r,e,t){let n=[r.startDateSymbol,r.scheduledDateSymbol,r.dueDateSymbol].join("|");return(i,s,a,o,u)=>{let l=[];return l=l.concat(aN(i,s,a,n,e,t)),l=l.concat(oN(i,s,a,r.recurrenceSymbol,t)),globalThis.SHOW_DEPENDENCY_SUGGESTIONS&&(l=l.concat(uN(i,s,r.idSymbol,o)),l=l.concat(lN(i,s,a,r.dependsOnSymbol,o,t,u))),l=l.concat(sN(i,s,a,r,t)),l.length>0&&!l.some(c=>c.suggestionType==="match")&&(t||l.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`})),l=l.slice(0,a.autoSuggestMaxItems),l}}function Om(r,e,t){let n=dN(e.substring(0,t),[["(",")"],["[","]"]])=="("?")":"]",i=r?n+" ":" ",s=r&&e.length>t&&e.charAt(t)===n?1:0;return{postfix:i,insertSkip:s}}function sN(r,e,t,n,i){let s=d=>Object.values(n.prioritySymbols).some(f=>f.length>0&&d.includes(f)),a=[],{postfix:o,insertSkip:u}=Om(i,r,e);if(r.includes(n.dueDateSymbol)||a.push({displayText:`${n.dueDateSymbol} due date`,appendText:`${n.dueDateSymbol} `}),r.includes(n.startDateSymbol)||a.push({displayText:`${n.startDateSymbol} start date`,appendText:`${n.startDateSymbol} `}),r.includes(n.scheduledDateSymbol)||a.push({displayText:`${n.scheduledDateSymbol} scheduled date`,appendText:`${n.scheduledDateSymbol} `}),globalThis.SHOW_DEPENDENCY_SUGGESTIONS&&(r.includes(n.idSymbol)||a.push({displayText:`${n.idSymbol} id`,appendText:`${n.idSymbol}`}),r.includes(n.dependsOnSymbol)||a.push({displayText:`${n.dependsOnSymbol} depends on id`,appendText:`${n.dependsOnSymbol}`})),!s(r)){let d=n.prioritySymbols,f=["High","Medium","Low","Highest","Lowest"];for(let m=0;m<f.length;m++){let y=f[m],g=d[y];a.push({displayText:i?`${g} priority`:`${g} ${y.toLowerCase()} priority`,appendText:`${g}${o}`,insertSkip:i?u:void 0})}}if(r.includes(n.recurrenceSymbol)||a.push({displayText:`${n.recurrenceSymbol} recurring (repeat)`,appendText:`${n.recurrenceSymbol} `}),!r.includes(n.createdDateSymbol)){let f=Yt.parseDate("today",!0).format(J.dateFormat);a.push({textToMatch:`${n.createdDateSymbol} created`,displayText:`${n.createdDateSymbol} created today (${f})`,appendText:`${n.createdDateSymbol} ${f}`+o,insertSkip:i?u:void 0})}let l=go(r,/([a-zA-Z'_-]*)/g,e),c=[];if(l&&l.length>0){let d=l[0];if(d.length>=Math.max(1,t.autoSuggestMinMatch)){let f=a.filter(m=>(m.textToMatch||m.displayText).toLowerCase().includes(d.toLowerCase()));for(let m of f){let y=i&&(m.displayText.includes("priority")||m.displayText.includes("created"))?d.length+u:d.length;c.push({suggestionType:"match",displayText:m.displayText,appendText:m.appendText,insertAt:l.index,insertSkip:y})}}}return c.length===0&&t.autoSuggestMinMatch===0?a:c}function aN(r,e,t,n,i,s){let a=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],{postfix:o,insertSkip:u}=Om(s,r,e),l=[],c=new RegExp(`(${n})\\s*([0-9a-zA-Z ]*)`,"ug"),d=go(r,c,e);if(d&&d.length>=2){let f=d[1],m=d[2];if(m.length<t.autoSuggestMinMatch)return[];let y=m&&m.length>1?Yt.parseDate(Lu(m),!0):null;y&&y.isValid()&&l.push({displayText:`${y.format(J.dateFormat)}`,appendText:`${f} ${y.format(J.dateFormat)} `,insertAt:d.index,insertSkip:d[0].length});let g=1,T=a.filter(E=>m&&m.length>=g&&E.toLowerCase().includes(m.toLowerCase())).slice(0,i);T.length===0&&(T=a.slice(0,i));for(let E of T){let x=`${Yt.parseDate(E,!0).format(J.dateFormat)}`,q=s?d[0].length+u:d[0].length;l.push({suggestionType:"match",displayText:`${E} (${x})`,appendText:`${f} ${x}`+o,insertAt:d.index,insertSkip:q})}}return l}function oN(r,e,t,n,i){var d;let s=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],{postfix:a,insertSkip:o}=Om(i,r,e),u=[],l=new RegExp(`(${n})\\s*([0-9a-zA-Z ]*)`,"ug"),c=go(r,l,e);if(c&&c.length>=2){let f=c[1],m=c[2];if(m.length<t.autoSuggestMinMatch)return[];if(m.length>0){let E=(d=st.fromText({recurrenceRuleText:m,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:d.toText();if(E){let S=`${f} ${E}`+a,x=i?c[0].length+o:c[0].length;if(u.push({suggestionType:"match",displayText:`\u2705 ${E}`,appendText:S,insertAt:c.index,insertSkip:x}),c[0]==S)return[]}}let y=1,g=t.autoSuggestMaxItems/2,T=s.filter(E=>m&&m.length>=y&&E.toLowerCase().includes(m.toLowerCase())).slice(0,g);T.length===0&&m.trim().length===0&&(T=s.slice(0,g));for(let E of T)u.push({suggestionType:"match",displayText:`${E}`,appendText:`${f} ${E} `,insertAt:c.index,insertSkip:c[0].length})}return u}function uN(r,e,t,n){let i=[],s=new RegExp(`(${t})\\s*(${ki.source})?`,"ug"),a=go(r,s,e);if(a&&a[0].trim().length<=t.length){let o=ho(n.map(u=>u.id));i.push({suggestionType:"match",displayText:"generate unique id",appendText:`${t} ${o}`,insertAt:a.index,insertSkip:t.length})}return i}function lN(r,e,t,n,i,s,a){let o=[],u=s?Bn("()[]"):ov(),l=new RegExp(`(${n})([0-9a-zA-Z-_ ^,]*,)*([^,${u}]*)`,"ug"),c=go(r,l,e);if(c&&c.length>=1){let d=c[2]||"",f=c[3],m=[];if(d){let y=d.split(",").map(g=>g.trim());m=i.filter(g=>g.id&&y.includes(g.id))}if(f.length>=t.autoSuggestMinMatch){let y=zu(f.trim(),i,a,[],m);for(let g of y)o.push({suggestionType:"match",displayText:`${g.descriptionWithoutTags} - From: ${g.filename}.md`,appendText:`${n}${d}`,insertAt:c.index,insertSkip:n.length+d.length+f.length,taskItDependsOn:g})}}return o}function go(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<t&&t<=i.index+i[0].length)return i}function cN(r,e){if(e.length===0)return!1;let t=Object.fromEntries(e.map(([i,s])=>[i,0])),n=Object.fromEntries(e.map(([i,s])=>[s,i]));for(let i of r)i in t?t[i]++:i in n&&(t[n[i]]=Math.max(0,t[n[i]]-1));return Object.values(t).some(i=>i>0)}function dN(r,e){if(e.length===0)return null;let t=Object.fromEntries(e.map(([s,a])=>[s,0])),n=Object.fromEntries(e.map(([s,a])=>[a,s])),i=[];for(let s=0;s<r.length;s++){let a=r[s];if(a in t)t[a]++,i.push({bracket:a,idx:s});else if(a in n){if(t[n[a]]>=1){for(let o=i.length-1;o>=0;o--)if(i[o].bracket==n[a]){i.splice(o,1);break}}t[n[a]]=Math.max(0,t[n[a]]-1)}}return i.length>0?i[i.length-1].bracket:null}function fv(r,e){return(t,n,i,s,a)=>cN(t.slice(0,n),e)?r(t,n,i,s,a):[]}function pv(r,e,t){let n=_e.getInstance().includedIn(r),i=fN(t,e,n);return typeof i=="boolean"?i:n&&pN(r,e.ch)}function fN(r,e,t){var n,i;return(i=(n=r==null?void 0:r.editorComponent)==null?void 0:n.showTasksPluginAutoSuggest)==null?void 0:i.call(n,e,r,t)}function pN(r,e){if(r.length===0)return!1;let t=ae.extractTaskComponents(r);if(!t)return!1;let n=t.indentation+t.listMarker+" ["+t.status.symbol+"] ";return e>=n.length}function Hr(r){let e=["(?:",/(?=[^\]]+\])\[/,"|",/(?=[^)]+\))\(/,")",/ */,r,/ */,/[)\]]/,/(?: *,)?/,/$/].map(t=>t instanceof RegExp?t.source:t).join("");return new RegExp(e,r.flags)}var Dm={prioritySymbols:{Highest:"priority:: highest",High:"priority:: high",Medium:"priority:: medium",Low:"priority:: low",Lowest:"priority:: lowest",None:""},startDateSymbol:"start::",createdDateSymbol:"created::",scheduledDateSymbol:"scheduled::",dueDateSymbol:"due::",doneDateSymbol:"completion::",cancelledDateSymbol:"cancelled::",recurrenceSymbol:"repeat::",idSymbol:"id::",dependsOnSymbol:"dependsOn::",TaskFormatRegularExpressions:{priorityRegex:Hr(/priority:: *(highest|high|medium|low|lowest)/),startDateRegex:Hr(/start:: *(\d{4}-\d{2}-\d{2})/),createdDateRegex:Hr(/created:: *(\d{4}-\d{2}-\d{2})/),scheduledDateRegex:Hr(/scheduled:: *(\d{4}-\d{2}-\d{2})/),dueDateRegex:Hr(/due:: *(\d{4}-\d{2}-\d{2})/),doneDateRegex:Hr(/completion:: *(\d{4}-\d{2}-\d{2})/),cancelledDateRegex:Hr(/cancelled:: *(\d{4}-\d{2}-\d{2})/),recurrenceRegex:Hr(/repeat:: *([a-zA-Z0-9, !]+)/),dependsOnRegex:Hr(new RegExp("dependsOn:: *("+km.source+")")),idRegex:Hr(new RegExp("id:: *("+ki.source+")"))}},Ku=class extends Ei{constructor(){super(Dm)}parsePriority(e){switch(e){case"highest":return"0";case"high":return"1";case"medium":return"2";case"low":return"4";case"lowest":return"5";default:return"3"}}componentToString(e,t,n){let i=super.componentToString(e,t,n),s=["blockLink","description"];return i!==""&&!s.includes(n)?`  [${i.trim()}]`:i}};var zt=(a=>(a.TODO="TODO",a.DONE="DONE",a.IN_PROGRESS="IN_PROGRESS",a.CANCELLED="CANCELLED",a.NON_TASK="NON_TASK",a.EMPTY="EMPTY",a))(zt||{}),Ke=class{constructor(e,t,n,i,s="TODO"){this.symbol=e,this.name=t,this.nextStatusSymbol=n,this.availableAsCommand=i,this.type=s}};var Et=class{get symbol(){return this.configuration.symbol}get name(){return this.configuration.name}get nextStatusSymbol(){return this.configuration.nextStatusSymbol}get nextSymbol(){return this.configuration.nextStatusSymbol}get availableAsCommand(){return this.configuration.availableAsCommand}get type(){return this.configuration.type}get typeGroupText(){let e=this.type,t;switch(e){case"IN_PROGRESS":t="1";break;case"TODO":t="2";break;case"DONE":t="3";break;case"CANCELLED":t="4";break;case"NON_TASK":t="5";break;case"EMPTY":t="6";break}return`%%${t}%%${e}`}constructor(e){this.configuration=e}static makeDone(){return new Et(new Ke("x","Done"," ",!0,"DONE"))}static makeEmpty(){return new Et(new Ke("","EMPTY","",!0,"EMPTY"))}static makeTodo(){return new Et(new Ke(" ","Todo","x",!0,"TODO"))}static makeCancelled(){return new Et(new Ke("-","Cancelled"," ",!0,"CANCELLED"))}static makeInProgress(){return new Et(new Ke("/","In Progress","x",!0,"IN_PROGRESS"))}static makeNonTask(){return new Et(new Ke("Q","Non-Task","A",!0,"NON_TASK"))}static getTypeForUnknownSymbol(e){switch(e){case"x":case"X":return"DONE";case"/":return"IN_PROGRESS";case"-":return"CANCELLED";case"":return"EMPTY";case" ":default:return"TODO"}}static getTypeFromStatusTypeString(e){return zt[e]||"TODO"}static createUnknownStatus(e){return new Et(new Ke(e,"Unknown","x",!1,"TODO"))}static createFromImportedValue(e){let t=e[0],n=Et.getTypeFromStatusTypeString(e[3]);return new Et(new Ke(t,e[1],e[2],!1,n))}isCompleted(){return this.type==="DONE"}isCancelled(){return this.type==="CANCELLED"}identicalTo(e){let t=["symbol","name","nextStatusSymbol","availableAsCommand","type"];for(let n of t)if(this[n]!==e[n])return!1;return!0}previewText(){let e="";return Et.tasksPluginCanCreateCommandsForStatuses()&&this.availableAsCommand&&(e=" Available as a command."),`- [${this.symbol}] => [${this.nextStatusSymbol}], name: '${this.name}', type: '${this.configuration.type}'.${e}`}static tasksPluginCanCreateCommandsForStatuses(){return!1}},ne=Et;ne.DONE=Et.makeDone(),ne.EMPTY=Et.makeEmpty(),ne.TODO=Et.makeTodo();var Qu=class{constructor(e=!1,t=!1,n=!1){this.ignoreSortInstructions=e,this.showTaskHiddenData=t,this.recordTimings=n}};var Le=class{constructor(){this.coreStatuses=[ne.makeTodo().configuration,ne.makeDone().configuration],this.customStatuses=[ne.makeInProgress().configuration,ne.makeCancelled().configuration]}static addStatus(e,t){e.push(t)}static replaceStatus(e,t,n){let i=this.findStatusIndex(t,e);return i<=-1?!1:(e.splice(i,1,n),!0)}static findStatusIndex(e,t){let n=new ne(e);return t.findIndex(i=>new ne(i).previewText()==n.previewText())}static deleteStatus(e,t){let n=this.findStatusIndex(t,e);return n<=-1?!1:(e.splice(n,1),!0)}static deleteAllCustomStatuses(e){e.customStatuses.splice(0)}static resetAllCustomStatuses(e){Le.deleteAllCustomStatuses(e),new Le().customStatuses.forEach(n=>{Le.addStatus(e.customStatuses,n)})}static bulkAddStatusCollection(e,t){let n=[];return t.forEach(i=>{e.customStatuses.find(a=>a.symbol==i[0]&&a.name==i[1]&&a.nextStatusSymbol==i[2])?n.push(`The status ${i[1]} (${i[0]}) is already added.`):Le.addStatus(e.customStatuses,ne.createFromImportedValue(i))}),n}static allStatuses(e){return e.coreStatuses.concat(e.customStatuses)}static applyToStatusRegistry(e,t){t.clearStatuses(),Le.allStatuses(e).forEach(n=>{t.add(n)})}};var mv=[{index:9999,internalName:"INTERNAL_TESTING_ENABLED_BY_DEFAULT",displayName:"Test Item. Used to validate the Feature Framework.",description:"Description",enabledByDefault:!0,stable:!1}];var vn=class{constructor(e,t,n,i,s,a){this.internalName=e;this.index=t;this.description=n;this.displayName=i;this.enabledByDefault=s;this.stable=a}static get values(){let e=[];return mv.forEach(t=>{e=[...e,new vn(t.internalName,t.index,t.description,t.displayName,t.enabledByDefault,t.stable)]}),e}static get settingsFlags(){let e={};return vn.values.forEach(t=>{e[t.internalName]=t.enabledByDefault}),e}static fromString(e){for(let t of vn.values)if(e===t.internalName)return t;throw new RangeError(`Illegal argument passed to fromString(): ${e} does not correspond to any available Feature ${this.prototype.constructor.name}`)}};var Dr={tasksPluginEmoji:{displayName:"Tasks Emoji Format",taskSerializer:new Ei(po),buildSuggestions:Sm(po,Em,!1)},dataview:{displayName:"Dataview",taskSerializer:new Ku,buildSuggestions:fv(Sm(Dm,Em,!0),[["(",")"],["[","]"]])}},Rm={globalQuery:"",globalFilter:"",removeGlobalFilter:!1,taskFormat:"tasksPluginEmoji",setCreatedDate:!1,setDoneDate:!0,setCancelledDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6,provideAccessKeys:!0,useFilenameAsScheduledDate:!1,filenameAsDateFolders:[],recurrenceOnNextLine:!1,statusSettings:new Le,features:vn.settingsFlags,generalSettings:{},headingOpened:{},debugSettings:new Qu,loggingOptions:{minLevels:{"":"info",tasks:"info","tasks.Cache":"info","tasks.Events":"info","tasks.File":"info","tasks.Query":"info","tasks.Task":"info"}}},wn=K({},Rm);function xm(r,e){for(let t in r)e[t]===void 0&&(e[t]=r[t])}var Z=()=>(xm(vn.settingsFlags,wn.features),xm(Rm.loggingOptions.minLevels,wn.loggingOptions.minLevels),xm(Rm.debugSettings,wn.debugSettings),wn.statusSettings.customStatuses.forEach((r,e,t)=>{var i,s;let n=ne.getTypeFromStatusTypeString(r.type);t[e]=new Ke((i=r.symbol)!=null?i:" ",r.name,(s=r.nextStatusSymbol)!=null?s:"x",r.availableAsCommand,n)}),K({},wn)),Qe=r=>(wn=K(K({},wn),r),Z());var Oi=(r,e)=>(wn.generalSettings[r]=e,Z()),hv=r=>{var e;return(e=wn.features[r])!=null?e:!1};function yo(){return Dr[Z().taskFormat]}function Xu(r){let t={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[r];return t!==void 0?t:r}function gv(r){let e=[...r],t="";return e.forEach(n=>{t+=Xu(n)}),t}var De=class{constructor(){this._registeredStatuses=[];this.addDefaultStatusTypes()}set(e){this.clearStatuses(),e.forEach(t=>{this.add(t)})}get registeredStatuses(){return this._registeredStatuses.filter(({symbol:e})=>e!==ne.EMPTY.symbol)}static getInstance(){return De.instance||(De.instance=new De),De.instance}add(e){this.hasSymbol(e.symbol)||(e instanceof ne?this._registeredStatuses.push(e):this._registeredStatuses.push(new ne(e)))}bySymbol(e){return this.hasSymbol(e)?this.getSymbol(e):ne.EMPTY}bySymbolOrCreate(e){return this.hasSymbol(e)?this.getSymbol(e):ne.createUnknownStatus(e)}byName(e){return this._registeredStatuses.filter(({name:t})=>t===e).length>0?this._registeredStatuses.filter(({name:t})=>t===e)[0]:ne.EMPTY}resetToDefaultStatuses(){this.clearStatuses(),this.addDefaultStatusTypes()}clearStatuses(){this._registeredStatuses=[]}getNextStatus(e){if(e.nextStatusSymbol!==""){let t=this.bySymbol(e.nextStatusSymbol);if(t!==null)return t}return ne.EMPTY}getNextStatusOrCreate(e){let t=this.getNextStatus(e);return t.type!=="EMPTY"?t:ne.createUnknownStatus(e.nextStatusSymbol)}getNextRecurrenceStatusOrCreate(e){let t=this.getNextStatusOrCreate(e),n=this.getNextRecurrenceStatusOfType(t,"TODO");if(n)return n;let i=this.getNextRecurrenceStatusOfType(t,"IN_PROGRESS");return i||this.bySymbolOrCreate(" ")}getNextRecurrenceStatusOfType(e,t){if(e.type===t)return e;let n=e;for(let i=0;i<this.registeredStatuses.length-1;i++)if(n=this.getNextStatusOrCreate(n),n.type===t)return n}findUnknownStatuses(e){let t=e.filter(s=>!this.hasSymbol(s.symbol)),n=new De,i=[];return t.forEach(s=>{if(n.hasSymbol(s.symbol))return;let a=De.copyStatusWithNewName(s,`Unknown (${s.symbol})`);i.push(a),n.add(a)}),i.sort((s,a)=>s.symbol.localeCompare(a.symbol,void 0,{numeric:!0}))}static copyStatusWithNewName(e,t){let n=new Ke(e.symbol,t,e.nextStatusSymbol,e.availableAsCommand,e.type);return new ne(n)}getSymbol(e){return this._registeredStatuses.filter(({symbol:t})=>t===e)[0]}hasSymbol(e){return this._registeredStatuses.find(t=>t.symbol===e)!==void 0}addDefaultStatusTypes(){[ne.makeTodo(),ne.makeInProgress(),ne.makeDone(),ne.makeCancelled()].forEach(t=>{this.add(t)})}mermaidDiagram(e=!1){let t=this.registeredStatuses,n="mermaid",i=[],s=[];return t.forEach((a,o)=>{let u=this.getMermaidNodeLabel(a,e);i.push(`${o+1}${u}`);let l=this.getNextStatus(a);if(this.addEdgeIfNotToInternal(t,l,s,o,!1),a.type==="DONE"){let c=this.getNextRecurrenceStatusOrCreate(a);c.symbol!==l.symbol&&this.addEdgeIfNotToInternal(t,c,s,o,!0)}}),`
\`\`\`${n}
flowchart LR

classDef TODO        stroke:#f33,stroke-width:3px;
classDef DONE        stroke:#0c0,stroke-width:3px;
classDef IN_PROGRESS stroke:#fa0,stroke-width:3px;
classDef CANCELLED   stroke:#ddd,stroke-width:3px;
classDef NON_TASK    stroke:#99e,stroke-width:3px;

${i.join(`
`)}
${s.join(`
`)}

linkStyle default stroke:gray
\`\`\`
`}addEdgeIfNotToInternal(e,t,n,i,s){let a=e.findIndex(l=>l.symbol===t.symbol),o=a!==-1,u=t.type!=="EMPTY";if(o&&u){let l;s?l='-. "\u{1F501}" .-> ':l=" --> ";let c=`${i+1}${l}${a+1}`;n.push(c)}}getMermaidNodeLabel(e,t){let n=gv(e.name),i=e.type;if(t){let s=Xu(e.symbol),a=Xu(e.nextStatusSymbol),o=`[${s}] -> [${a}]`,u=`'${n}'`,l=`(${i})`;return`["${u}<br>${o}<br>${l}"]:::${i}`}else return`["${n}"]:::${i}`}};var yv=require("obsidian");var Vr=class{constructor(e,t){this.name=e,this.sortOrder=t}get groupText(){return this.name!==""?`%%${this.sortOrder}%% ${this.name}`:""}};var Pt=class{constructor(e){this._date=null;this._date=e}get moment(){return this._date}formatAsDate(e=""){return this.format(J.dateFormat,e)}formatAsDateAndTime(e=""){return this.format(J.dateTimeFormat,e)}format(e,t=""){return this._date?this._date.format(e):t}toISOString(e){return this._date?this._date.toISOString(e):""}get category(){let e=window.moment(),t=this.moment;return t?t.isBefore(e,"day")?new Vr("Overdue",1):t.isSame(e,"day")?new Vr("Today",2):t.isValid()?new Vr("Future",3):new Vr("Invalid date",0):new Vr("Undated",4)}get fromNow(){let e=this.moment;if(!e)return new Vr("",0);let t=this.fromNowOrder(e);return new Vr(e.fromNow(),t)}fromNowOrder(e){if(!e.isValid())return 0;let t=window.moment(),n=e.isSameOrBefore(t,"day"),i=this.fromNowStartDateOfGroup(e,n,t);return Number((n?1:3)+i.format("YYYYMMDD"))}fromNowStartDateOfGroup(e,t,n){let i=e.fromNow(!0).split(" "),s,a=Number(i[0]);isNaN(a)?s=1:s=a;let o=i[1];return t?n.subtract(s,o):n.add(s,o)}postpone(e="days",t=1){if(!this._date)throw new yv.Notice("Cannot postpone a null date");let n=window.moment().startOf("day");return this._date.isSameOrAfter(n,"day")?this._date.clone().add(t,e):n.add(t,e)}};var kn=class{static priorityNameUsingNone(e){let t="ERROR";switch(e){case"1":t="High";break;case"0":t="Highest";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break;case"5":t="Lowest";break}return t}static priorityNameUsingNormal(e){return kn.priorityNameUsingNone(e).replace("None","Normal")}};var hN=require("obsidian"),vv=na(_v());var Mm=class extends vv.EventEmitter2{constructor(){super(...arguments);this.options={minLevels:{"":"info",tasks:"info"}};this.consoleLoggerRegistered=!1;this.arrAvg=t=>t.reduce((n,i)=>n+i,0)/t.length}configure(t){return this.options=Object.assign({},this.options,t),this}getLogger(t){let n="none",i="";for(let s in this.options.minLevels)t.startsWith(s)&&s.length>=i.length&&(n=this.options.minLevels[s],i=s);return new Cm(this,t,n)}onLogEntry(t){return this.on("log",t),this}registerConsoleLogger(){return this.consoleLoggerRegistered?this:(this.onLogEntry(t=>{let n=`[${window.moment().format("YYYY-MM-DD-HH:mm:ss.SSS")}][${t.level}][${t.module}]`;switch(t.traceId&&(n+=`[${t.traceId}]`),n+=` ${t.message}`,t.objects===void 0&&(t.objects=""),t.level){case"trace":console.trace(n,t.objects);break;case"debug":console.debug(n,t.objects);break;case"info":console.info(n,t.objects);break;case"warn":console.warn(n,t.objects);break;case"error":console.error(n,t.objects);break;default:console.log(`{${t.level}} ${n}`,t.objects)}}),this.consoleLoggerRegistered=!0,this)}},St=new Mm,Cm=class{constructor(e,t,n){this.levels={trace:1,debug:2,info:3,warn:4,error:5};this.logManager=e,this.module=t,this.minLevel=this.levelToInt(n)}levelToInt(e){return e.toLowerCase()in this.levels?this.levels[e.toLowerCase()]:99}log(e,t,n){if(this.levelToInt(e)<this.minLevel)return;let s={level:e,module:this.module,message:t,objects:n,traceId:void 0};this.logManager.emit("log",s)}trace(e,t){this.log("trace",e,t)}debug(e,t){this.log("debug",e,t)}info(e,t){this.log("info",e,t)}warn(e,t){this.log("warn",e,t)}error(e,t){this.log("error",e,t)}logWithId(e,t,n,i){if(this.levelToInt(e)<this.minLevel)return;let a={level:e,module:this.module,message:n,objects:i,traceId:t};this.logManager.emit("log",a)}traceWithId(e,t,n){this.logWithId("trace",e,t,n)}debugWithId(e,t,n){this.logWithId("debug",e,t,n)}infoWithId(e,t,n){this.logWithId("info",e,t,n)}warnWithId(e,t,n){this.logWithId("warn",e,t,n)}errorWithId(e,t,n){this.logWithId("error",e,t,n)}};function Am(r,e){let t=St.getLogger("tasks");switch(r){case"trace":t.trace(e);break;case"debug":t.debug(e);break;case"info":t.info(e);break;case"warn":t.warn(e);break;case"error":t.error(e);break;default:break}}function Zu(r,e,t){r.debug(`${e}: task line number: ${t.taskLocation.lineNumber}. file path: "${t.path}"`),r.debug(`${e} original: ${t.originalMarkdown}`)}function Ju(r,e,t){t.map((n,i)=>{r.debug(`${e} ==> ${i+1}   : ${n.toFileLineString()}`)})}var yt=class{static fromPath(e){let{useFilenameAsScheduledDate:t,filenameAsDateFolders:n}=Z();return!t||!this.matchesAnyFolder(n,e)?null:this.extractDateFromPath(e)}static matchesAnyFolder(e,t){return e.length===0?!0:e.some(n=>t.startsWith(n+"/"))}static extractDateFromPath(e){let t=Math.max(0,e.lastIndexOf("/")+1),n=e.lastIndexOf("."),i=e.substring(t,n),s=/(\d{4})-(\d{2})-(\d{2})/.exec(i);if(s||(s=/(\d{4})(\d{2})(\d{2})/.exec(i)),s){let a=window.moment([parseInt(s[1]),parseInt(s[2])-1,parseInt(s[3])]);if(a.isValid())return a}return null}static canApplyFallback({startDate:e,scheduledDate:t,dueDate:n}){return e===null&&n===null&&t===null}static updateTaskPath(e,t,n){let i=e.scheduledDate,s=e.scheduledDateIsInferred;return n===null?s&&(s=!1,i=null):s?i=n:this.canApplyFallback(e)&&(i=n,s=!0),new ae(he(K({},e),{taskLocation:e.taskLocation.fromRenamedFile(new Ve(t)),scheduledDate:i,scheduledDateIsInferred:s}))}static removeInferredStatusIfNeeded(e,t){let n=e.scheduledDateIsInferred?e.scheduledDate:null;return t.map(i=>(n!==null&&!n.isSame(i.scheduledDate,"day")&&(i=new ae(he(K({},i),{scheduledDateIsInferred:!1}))),i))}};var el=class{constructor(e,t){this.parent=null;this.children=[];this.originalMarkdown=e,this.parent=t,t!==null&&t.children.push(this)}};var xr=class{static calculate(e){var n,i,s;let t=0;if((n=e.dueDate)!=null&&n.isValid()){let a=window.moment().startOf("day"),o=Math.round(a.diff(e.dueDate)/xr.milliSecondsPerDay),u;o>=7?u=1:o>=-14?u=(o+14)*.8/21+.2:u=.2,t+=u*xr.dueCoefficient}switch((i=e.scheduledDate)!=null&&i.isValid()&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*xr.scheduledCoefficient),(s=e.startDate)!=null&&s.isValid()&&window.moment().isBefore(e.startDate)&&(t+=1*xr.startedCoefficient),e.priority){case"0":t+=1.5*xr.priorityCoefficient;break;case"1":t+=1*xr.priorityCoefficient;break;case"2":t+=.65*xr.priorityCoefficient;break;case"3":t+=.325*xr.priorityCoefficient;break;case"5":t-=.3*xr.priorityCoefficient;break}return t}},En=xr;En.dueCoefficient=12,En.scheduledCoefficient=5,En.startedCoefficient=-3,En.priorityCoefficient=6,En.milliSecondsPerDay=1e3*60*60*24;var ae=class extends el{constructor({status:t,description:n,taskLocation:i,indentation:s,listMarker:a,priority:o,createdDate:u,startDate:l,scheduledDate:c,dueDate:d,doneDate:f,cancelledDate:m,recurrence:y,dependsOn:g,id:T,blockLink:E,tags:S,originalMarkdown:x,scheduledDateIsInferred:q,parent:W=null}){super(x,W);this._urgency=null;this.status=t,this.description=n,this.indentation=s,this.listMarker=a,this.taskLocation=i,this.tags=S,this.priority=o,this.createdDate=u,this.startDate=l,this.scheduledDate=c,this.dueDate=d,this.doneDate=f,this.cancelledDate=m,this.recurrence=y,this.dependsOn=g,this.id=T,this.blockLink=E,this.scheduledDateIsInferred=q}static fromLine({line:t,taskLocation:n,fallbackDate:i}){let s=ae.extractTaskComponents(t);return s===null||!_e.getInstance().includedIn(s.body)?null:ae.parseTaskSignifiers(t,n,i)}static parseTaskSignifiers(t,n,i){let s=ae.extractTaskComponents(t);if(s===null)return null;let{taskSerializer:a}=yo(),o=a.deserialize(s.body),u=!1;return yt.canApplyFallback(o)&&i!==null&&(o.scheduledDate=i,u=!0),o.tags=o.tags.map(l=>l.trim()),o.tags=o.tags.filter(l=>!_e.getInstance().equals(l)),new ae(he(K(K({},s),o),{taskLocation:n,originalMarkdown:t,scheduledDateIsInferred:u}))}static extractTaskComponents(t){let n=t.match(J.taskRegex);if(n===null)return null;let i=n[1],s=n[2],a=n[3],o=De.getInstance().bySymbolOrCreate(a),u=n[4].trim(),l=u.match(J.blockLinkRegex),c=l!==null?l[0]:"";return c!==""&&(u=u.replace(J.blockLinkRegex,"").trim()),{indentation:i,listMarker:s,status:o,body:u,blockLink:c}}toString(){return yo().taskSerializer.serialize(this)}toFileLineString(){return`${this.indentation}${this.listMarker} [${this.status.symbol}] ${this.toString()}`}toggle(){let t=St.getLogger("tasks.Task"),n="toggle()";Zu(t,n,this);let i=De.getInstance().getNextStatusOrCreate(this.status),s=this.handleNewStatus(i);return Ju(t,n,s),s}handleNewStatus(t,n=window.moment()){if(t.identicalTo(this.status))return[this];let{setDoneDate:i}=Z(),s=this.newDate(t,"DONE",this.doneDate,i,n),{setCancelledDate:a}=Z(),o=this.newDate(t,"CANCELLED",this.cancelledDate,a,n),u=null;t.isCompleted()&&!this.status.isCompleted()&&this.recurrence!==null&&(u=this.recurrence.next(n));let l=new ae(he(K({},this),{status:t,doneDate:s,cancelledDate:o})),c=[];if(u!==null){let d=this.createNextOccurrence(t,u);c.push(d)}return c.push(l),c}newDate(t,n,i,s,a){let o=null;return t.type===n&&(this.status.type!==n?s&&(o=a):o=i),o}createNextOccurrence(t,n){let{setCreatedDate:i}=Z(),s=null;i&&(s=window.moment());let a=null,o=null,l=De.getInstance().getNextRecurrenceStatusOrCreate(t);return new ae(he(K(K({},this),n),{status:l,blockLink:"",id:"",dependsOn:[],createdDate:s,cancelledDate:a,doneDate:o}))}toggleWithRecurrenceInUsersOrder(){let t=this.toggle();return this.putRecurrenceInUsersOrder(t)}handleNewStatusWithRecurrenceInUsersOrder(t,n=window.moment()){St.getLogger("tasks.Task").debug(`changed task ${this.taskLocation.path} ${this.taskLocation.lineNumber} ${this.originalMarkdown} status to '${t.symbol}'`);let s=this.handleNewStatus(t,n);return this.putRecurrenceInUsersOrder(s)}putRecurrenceInUsersOrder(t){let{recurrenceOnNextLine:n}=Z();return n?t.reverse():t}get isDone(){return this.status.type==="DONE"||this.status.type==="CANCELLED"||this.status.type==="NON_TASK"}isBlocked(t){if(this.dependsOn.length===0||this.isDone)return!1;for(let n of this.dependsOn)if(!!t.find(s=>s.id===n&&!s.isDone))return!0;return!1}isBlocking(t){return this.id===""||this.isDone?!1:t.some(n=>n.isDone?!1:n.dependsOn.includes(this.id))}get priorityNumber(){return Number.parseInt(this.priority)}get priorityNameGroupText(){let t=kn.priorityNameUsingNormal(this.priority);return`%%${this.priority}%%${t} priority`}get descriptionWithoutTags(){return this.description.replace(J.hashTags,"").trim()}get priorityName(){return kn.priorityNameUsingNormal(this.priority)}get urgency(){return this._urgency===null&&(this._urgency=En.calculate(this)),this._urgency}get path(){return this.taskLocation.path}get cancelled(){return new Pt(this.cancelledDate)}get created(){return new Pt(this.createdDate)}get done(){return new Pt(this.doneDate)}get due(){return new Pt(this.dueDate)}get scheduled(){return new Pt(this.scheduledDate)}get start(){return new Pt(this.startDate)}get happensDates(){return Array.of(this.startDate,this.scheduledDate,this.dueDate)}get happens(){let t=this.happensDates,n=Array.from(t).sort(fr);for(let i of n)if(i!=null&&i.isValid())return new Pt(i);return new Pt(null)}get isRecurring(){return this.recurrence!==null}get recurrenceRule(){return this.recurrence?this.recurrence.toText():""}get heading(){return this.precedingHeader}get hasHeading(){return this.precedingHeader!==null}get file(){return this.taskLocation.tasksFile}get filename(){let t=this.path.match(/([^/]+)\.md$/);return t!==null?t[1]:null}get lineNumber(){return this.taskLocation.lineNumber}get sectionStart(){return this.taskLocation.sectionStart}get sectionIndex(){return this.taskLocation.sectionIndex}get precedingHeader(){return this.taskLocation.precedingHeader}getLinkText({isFilenameUnique:t}){let n;return t?n=this.filename:n="/"+this.path,n===null?null:(this.precedingHeader!==null&&this.precedingHeader!==n&&(n=n+" > "+this.precedingHeader),n)}static tasksListsIdentical(t,n){return t.length!==n.length?!1:t.every((i,s)=>i.identicalTo(n[s]))}identicalTo(t){var a,o;let n=["description","path","indentation","listMarker","lineNumber","sectionStart","sectionIndex","precedingHeader","priority","blockLink","scheduledDateIsInferred","id","dependsOn"];for(let u of n)if(((a=this[u])==null?void 0:a.toString())!==((o=t[u])==null?void 0:o.toString()))return!1;if(!this.status.identicalTo(t.status)||this.tags.length!==t.tags.length||!this.tags.every(function(u,l){return u===t.tags[l]}))return!1;n=ae.allDateFields();for(let u of n){let l=this[u],c=t[u];if(fr(l,c)!==0)return!1}let i=this.recurrence,s=t.recurrence;return i===null&&s!==null||i!==null&&s===null?!1:!(i&&s&&!i.identicalTo(s))}static allDateFields(){return["createdDate","startDate","scheduledDate","dueDate","doneDate","cancelledDate"]}static extractHashtags(t){var n,i;return(i=(n=t.match(J.hashTags))==null?void 0:n.map(s=>s.trim()))!=null?i:[]}};var bo=class{constructor(e){this.fetch=e;this._value=void 0}get value(){return this._value===void 0&&(this._value=this.fetch()),this._value}};var ft=class{constructor(e,t,n,i,s){this._tasksFile=e,this._lineNumber=t,this._sectionStart=n,this._sectionIndex=i,this._precedingHeader=s}static fromUnknownPosition(e){return new ft(e,0,0,0,null)}fromRenamedFile(e){return new ft(e,this.lineNumber,this.sectionStart,this.sectionIndex,this.precedingHeader)}get tasksFile(){return this._tasksFile}get path(){return this._tasksFile.path}get lineNumber(){return this._lineNumber}get sectionStart(){return this._sectionStart}get sectionIndex(){return this._sectionIndex}get precedingHeader(){return this._precedingHeader}get hasKnownPath(){return this.path!==""}};function gN(r,e,t,n,i,s){var y;let a=new Ve(r),o=[],u=e.split(`
`),l=u.length,c=new bo(()=>yt.fromPath(r)),d=null,f=0,m=new Map;for(let g of t)if(g.task!==void 0){let T=g.position.start.line;if(T>=l)return n.debug(`${r} Obsidian gave us a line number ${T} past the end of the file. ${l}.`),o;if((d===null||d.position.end.line<T)&&(d=hs.getSection(T,i.sections),f=0),d===null)continue;let E=u[T];if(E===void 0){n.debug(`${r}: line ${T} - ignoring 'undefined' line.`);continue}let S;try{if(S=ae.fromLine({line:E,taskLocation:new ft(a,T,d.position.start.line,f,hs.getPrecedingHeader(T,i.headings)),fallbackDate:c.value}),S!==null){let x=(y=m.get(g.parent))!=null?y:null;x!==null&&(S=new ae(he(K({},S),{parent:x}))),m.set(T,S)}}catch(x){s(x,r,g,E);continue}S!==null&&(f++,o.push(S))}return o}var hs=class{constructor({metadataCache:e,vault:t,events:n}){this.logger=St.getLogger("tasks.Cache");this.logger.debug("Creating Cache object"),this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new Yo,this.state="Cold",this.logger.debug("Cache.constructor(): state = Cold"),this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){this.logger.info("Unloading Cache");for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.logger.debug("Cache.notifySubscribers()"),this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){this.logger.debug("Cache.subscribeToCache()");let e=this.metadataCache.on("resolved",()=>P(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){this.logger.debug("Cache.subscribeToVault()");let{useFilenameAsScheduledDate:e}=Z(),t=this.vault.on("create",s=>{s instanceof ms.TFile&&(this.logger.debug(`Cache.subscribeToVault.createdEventReference() ${s.path}`),this.tasksMutex.runExclusive(()=>{this.indexFile(s)}))});this.vaultEventReferences.push(t);let n=this.vault.on("delete",s=>{s instanceof ms.TFile&&(this.logger.debug(`Cache.subscribeToVault.deletedEventReference() ${s.path}`),this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(a=>a.path!==s.path),this.notifySubscribers()}))});this.vaultEventReferences.push(n);let i=this.vault.on("rename",(s,a)=>{s instanceof ms.TFile&&(this.logger.debug(`Cache.subscribeToVault.renamedEventReference() ${s.path}`),this.tasksMutex.runExclusive(()=>{let o=new Ve(s.path),u=new bo(()=>yt.fromPath(s.path));this.tasks=this.tasks.map(l=>l.path===a?e?yt.updateTaskPath(l,s.path,u.value):new ae(he(K({},l),{taskLocation:l.taskLocation.fromRenamedFile(o)})):l),this.notifySubscribers()}))});this.vaultEventReferences.push(i)}subscribeToEvents(){this.logger.debug("Cache.subscribeToEvents()");let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.logger.debug("Cache.loadVault()"),this.tasksMutex.runExclusive(()=>P(this,null,function*(){this.state="Initializing",this.logger.debug("Cache.loadVault(): state = Initializing"),yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.logger.debug("Cache.loadVault(): state = Warm"),this.notifySubscribers()}))}indexFile(e){return P(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;if(!e.path.endsWith(".md")){this.logger.debug("indexFile: skipping non-markdown file: "+e.path);return}this.logger.debug("Cache.indexFile: "+e.path);let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=this.getTasksFromFileContent(a,i,t,e.path,this.reportTaskParsingErrorToUser,this.logger)}ae.tasksListsIdentical(n,s)||(this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.logger.debug("Cache.indexFile: "+e.path+`: read ${s.length} task(s)`),this.notifySubscribers())})}getTasksFromFileContent(e,t,n,i,s,a){return gN(i,e,t,a,n,s)}reportTaskParsingErrorToUser(e,t,n,i){let s=`There was an error reading one of the tasks in this vault.
The following task has been ignored, to prevent Tasks queries getting stuck with 'Loading Tasks ...'
Error: ${e}
File: ${t}
Line number: ${n.position.start.line}
Task line: ${i}

Please create a bug report for this message at
https://github.com/obsidian-tasks-group/obsidian-tasks/issues/new/choose
to help us find and fix the underlying issue.

Include:
- either a screenshot of the error popup, or copy the text from the console, if on a desktop machine.
- the output from running the Obsidian command 'Show debug info'

The error popup will only be shown when Tasks is starting up, but if the error persists,
it will be shown in the console every time this file is edited during the Obsidian
session.
`;this.logger.error(s),e instanceof Error&&this.logger.error(e.stack?e.stack:"Cannot determine stack"),this.state==="Initializing"&&new ms.Notice(s,1e4)}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var th=require("obsidian");var Tw=require("obsidian");function Ue(){}function Fm(r){return r()}function wv(){return Object.create(null)}function Nt(r){r.forEach(Fm)}function nl(r){return typeof r=="function"}function zr(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function kv(r){return Object.keys(r).length===0}var Ev=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global,_o=class{constructor(e){this.options=e,this._listeners="WeakMap"in Ev?new WeakMap:void 0}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!==null&&e!==void 0?e:this._observer=new ResizeObserver(t=>{var n;for(let i of t)_o.entries.set(i.target,i),(n=this._listeners.get(i.target))===null||n===void 0||n(i)})}};_o.entries="WeakMap"in Ev?new WeakMap:void 0;var Sv=!1;function yN(){Sv=!0}function bN(){Sv=!1}function F(r,e){r.appendChild(e)}function de(r,e,t){r.insertBefore(e,t||null)}function oe(r){r.parentNode&&r.parentNode.removeChild(r)}function Ri(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function Q(r){return document.createElement(r)}function TN(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Me(r){return document.createTextNode(r)}function ue(){return Me(" ")}function Ov(){return Me("")}function xe(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function Dv(r){return function(e){return e.preventDefault(),r.call(this,e)}}function L(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function xv(r){let e;return{p(...t){e=t,e.forEach(n=>r.push(n))},r(){e.forEach(t=>r.splice(r.indexOf(t),1))}}}function _N(r){return Array.from(r.childNodes)}function Rr(r,e){e=""+e,r.data!==e&&(r.data=e)}function mr(r,e){r.value=e==null?"":e}function Lm(r,e,t){for(let n=0;n<r.options.length;n+=1){let i=r.options[n];if(i.__value===e){i.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function Rv(r){let e=r.querySelector(":checked");return e&&e.__value}var tl;function vN(){if(tl===void 0){tl=!1;try{typeof window!="undefined"&&window.parent&&window.parent.document}catch(r){tl=!0}}return tl}function Mv(r,e){getComputedStyle(r).position==="static"&&(r.style.position="relative");let n=Q("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;let i=vN(),s;return i?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=xe(window,"message",a=>{a.source===n.contentWindow&&e()})):(n.src="about:blank",n.onload=()=>{s=xe(n.contentWindow,"resize",e),e()}),F(r,n),()=>{(i||s&&n.contentWindow)&&s(),oe(n)}}function Sn(r,e,t){r.classList[t?"add":"remove"](e)}var Ts=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=TN(t.nodeName):this.e=Q(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)de(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(oe)}};var vo;function To(r){vo=r}function wN(){if(!vo)throw new Error("Function called outside component initialization");return vo}function Um(r){wN().$$.on_mount.push(r)}var ys=[];var je=[],bs=[],Nm=[],kN=Promise.resolve(),Im=!1;function EN(){Im||(Im=!0,kN.then(Cv))}function xi(r){bs.push(r)}function Ot(r){Nm.push(r)}var Pm=new Set,gs=0;function Cv(){if(gs!==0)return;let r=vo;do{try{for(;gs<ys.length;){let e=ys[gs];gs++,To(e),SN(e.$$)}}catch(e){throw ys.length=0,gs=0,e}for(To(null),ys.length=0,gs=0;je.length;)je.pop()();for(let e=0;e<bs.length;e+=1){let t=bs[e];Pm.has(t)||(Pm.add(t),t())}bs.length=0}while(ys.length);for(;Nm.length;)Nm.pop()();Im=!1,Pm.clear(),To(r)}function SN(r){if(r.fragment!==null){r.update(),Nt(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(xi)}}function ON(r){let e=[],t=[];bs.forEach(n=>r.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),bs=e}var rl=new Set,Di;function Av(){Di={r:0,c:[],p:Di}}function Pv(){Di.r||Nt(Di.c),Di=Di.p}function It(r,e){r&&r.i&&(rl.delete(r),r.i(e))}function Kt(r,e,t,n){if(r&&r.o){if(rl.has(r))return;rl.add(r),Di.c.push(()=>{rl.delete(r),n&&(t&&r.d(1),n())}),r.o(e)}else n&&n()}var DN=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Sj=new Set([...DN]);function Dt(r,e,t){let n=r.$$.props[e];n!==void 0&&(r.$$.bound[n]=t,t(r.$$.ctx[n]))}function Mr(r){r&&r.c()}function hr(r,e,t,n){let{fragment:i,after_update:s}=r.$$;i&&i.m(e,t),n||xi(()=>{let a=r.$$.on_mount.map(Fm).filter(nl);r.$$.on_destroy?r.$$.on_destroy.push(...a):Nt(a),r.$$.on_mount=[]}),s.forEach(xi)}function Qt(r,e){let t=r.$$;t.fragment!==null&&(ON(t.after_update),Nt(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function xN(r,e){r.$$.dirty[0]===-1&&(ys.push(r),EN(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function Kr(r,e,t,n,i,s,a,o=[-1]){let u=vo;To(r);let l=r.$$={fragment:null,ctx:[],props:s,update:Ue,not_equal:i,bound:wv(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:wv(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(d,f,...m)=>{let y=m.length?m[0]:f;return l.ctx&&i(l.ctx[d],l.ctx[d]=y)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](y),c&&xN(r,d)),f}):[],l.update(),c=!0,Nt(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){yN();let d=_N(e.target);l.fragment&&l.fragment.l(d),d.forEach(oe)}else l.fragment&&l.fragment.c();e.intro&&It(r.$$.fragment),hr(r,e.target,e.anchor,e.customElement),bN(),Cv()}To(u)}var RN;typeof HTMLElement=="function"&&(RN=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(Fm).filter(nl);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){Nt(this.$$.on_disconnect)}$destroy(){Qt(this,1),this.$destroy=Ue}$on(r,e){if(!nl(e))return Ue;let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!kv(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var pr=class{$destroy(){Qt(this,1),this.$destroy=Ue}$on(e,t){if(!nl(t))return Ue;let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!kv(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};function Nv(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})}function _s(r){return r.charAt(0).toUpperCase()+r.slice(1)}function pt(r,e){if(e===null)return _s(r);let t=r.toLowerCase().indexOf(e.toLowerCase());if(t===-1)return`${_s(r)} (<span class="accesskey">${e.toLowerCase()}</span>)`;let n=r.substring(0,t);return n+='<span class="accesskey">',t===0?n+=r.substring(t,t+1).toUpperCase():n+=r.substring(t,t+1),n+="</span>",n+=r.substring(t+1),n=_s(n),n}function MN(r){let e,t=pt(r[2],r[4])+"",n,i,s,a,o,u,l,c,d;return{c(){e=Q("label"),n=ue(),i=Q("input"),s=ue(),a=Q("code"),o=Me(r[3]),u=ue(),l=new Ts(!1),L(e,"for",r[2]),L(i,"id",r[2]),L(i,"type","text"),L(i,"class","tasks-modal-date-input"),L(i,"placeholder",CN),L(i,"accesskey",r[4]),Sn(i,"tasks-modal-error",!r[1]),l.a=null,L(a,"class","tasks-modal-parsed-date")},m(f,m){de(f,e,m),e.innerHTML=t,de(f,n,m),de(f,i,m),mr(i,r[0]),de(f,s,m),de(f,a,m),F(a,o),F(a,u),l.m(r[5],a),c||(d=xe(i,"input",r[7]),c=!0)},p(f,[m]){m&20&&t!==(t=pt(f[2],f[4])+"")&&(e.innerHTML=t),m&4&&L(e,"for",f[2]),m&4&&L(i,"id",f[2]),m&16&&L(i,"accesskey",f[4]),m&1&&i.value!==f[0]&&mr(i,f[0]),m&2&&Sn(i,"tasks-modal-error",!f[1]),m&8&&Rr(o,f[3]),m&32&&l.p(f[5])},i:Ue,o:Ue,d(f){f&&oe(e),f&&oe(n),f&&oe(i),f&&oe(s),f&&oe(a),c=!1,d()}}}var CN="Try 'Mon' or 'tm' then space";function AN(r,e,t){let{id:n}=e,{dateSymbol:i}=e,{date:s}=e,{isDateValid:a}=e,{forwardOnly:o}=e,{accesskey:u}=e,l;function c(){s=this.value,t(0,s),t(2,n),t(6,o),t(5,l)}return r.$$set=d=>{"id"in d&&t(2,n=d.id),"dateSymbol"in d&&t(3,i=d.dateSymbol),"date"in d&&t(0,s=d.date),"isDateValid"in d&&t(1,a=d.isDateValid),"forwardOnly"in d&&t(6,o=d.forwardOnly),"accesskey"in d&&t(4,u=d.accesskey)},r.$$.update=()=>{if(r.$$.dirty&101){e:t(0,s=Lu(s)),t(5,l=av(n,s,o)),t(1,a=!l.includes("invalid"))}},[s,a,n,i,u,l,o,c]}var Wm=class extends pr{constructor(e){super(),Kr(this,e,AN,MN,zr,{id:2,dateSymbol:3,date:0,isDateValid:1,forwardOnly:6,accesskey:4})}},Mi=Wm;var Ci=Math.min,Ft=Math.max,ko=Math.round;var On=r=>({x:r,y:r}),PN={left:"right",right:"left",bottom:"top",top:"bottom"},NN={start:"end",end:"start"};function qm(r,e,t){return Ft(r,Ci(e,t))}function vs(r,e){return typeof r=="function"?r(e):r}function Dn(r){return r.split("-")[0]}function ws(r){return r.split("-")[1]}function $m(r){return r==="x"?"y":"x"}function jm(r){return r==="y"?"height":"width"}function ks(r){return["top","bottom"].includes(Dn(r))?"y":"x"}function Gm(r){return $m(ks(r))}function Iv(r,e,t){t===void 0&&(t=!1);let n=ws(r),i=Gm(r),s=jm(i),a=i==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=wo(a)),[a,wo(a)]}function Fv(r){let e=wo(r);return[il(r),e,il(e)]}function il(r){return r.replace(/start|end/g,e=>NN[e])}function IN(r,e,t){let n=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(r){case"top":case"bottom":return t?e?i:n:e?n:i;case"left":case"right":return e?s:a;default:return[]}}function Lv(r,e,t,n){let i=ws(r),s=IN(Dn(r),t==="start",n);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(il)))),s}function wo(r){return r.replace(/left|right|bottom|top/g,e=>PN[e])}function FN(r){return K({top:0,right:0,bottom:0,left:0},r)}function Uv(r){return typeof r!="number"?FN(r):{top:r,right:r,bottom:r,left:r}}function Ai(r){return he(K({},r),{top:r.y,left:r.x,right:r.x+r.width,bottom:r.y+r.height})}function Wv(r,e,t){let{reference:n,floating:i}=r,s=ks(e),a=Gm(e),o=jm(a),u=Dn(e),l=s==="y",c=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,f=n[o]/2-i[o]/2,m;switch(u){case"top":m={x:c,y:n.y-i.height};break;case"bottom":m={x:c,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:d};break;case"left":m={x:n.x-i.width,y:d};break;default:m={x:n.x,y:n.y}}switch(ws(e)){case"start":m[a]-=f*(t&&l?-1:1);break;case"end":m[a]+=f*(t&&l?-1:1);break}return m}var qv=(r,e,t)=>P(void 0,null,function*(){let{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:a}=t,o=s.filter(Boolean),u=yield a.isRTL==null?void 0:a.isRTL(e),l=yield a.getElementRects({reference:r,floating:e,strategy:i}),{x:c,y:d}=Wv(l,n,u),f=n,m={},y=0;for(let g=0;g<o.length;g++){let{name:T,fn:E}=o[g],{x:S,y:x,data:q,reset:W}=yield E({x:c,y:d,initialPlacement:n,placement:f,strategy:i,middlewareData:m,rects:l,platform:a,elements:{reference:r,floating:e}});if(c=S!=null?S:c,d=x!=null?x:d,m=he(K({},m),{[T]:K(K({},m[T]),q)}),W&&y<=50){y++,typeof W=="object"&&(W.placement&&(f=W.placement),W.rects&&(l=W.rects===!0?yield a.getElementRects({reference:r,floating:e,strategy:i}):W.rects),{x:c,y:d}=Wv(l,f,u)),g=-1;continue}}return{x:c,y:d,placement:f,strategy:i,middlewareData:m}});function sl(r,e){return P(this,null,function*(){var t;e===void 0&&(e={});let{x:n,y:i,platform:s,rects:a,elements:o,strategy:u}=r,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:m=0}=vs(e,r),y=Uv(m),T=o[f?d==="floating"?"reference":"floating":d],E=Ai(yield s.getClippingRect({element:(t=yield s.isElement==null?void 0:s.isElement(T))==null||t?T:T.contextElement||(yield s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:l,rootBoundary:c,strategy:u})),S=d==="floating"?he(K({},a.floating),{x:n,y:i}):a.reference,x=yield s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating),q=(yield s.isElement==null?void 0:s.isElement(x))?(yield s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},W=Ai(s.convertOffsetParentRelativeRectToViewportRelativeRect?yield s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:S,offsetParent:x,strategy:u}):S);return{top:(E.top-W.top+y.top)/q.y,bottom:(W.bottom-E.bottom+y.bottom)/q.y,left:(E.left-W.left+y.left)/q.x,right:(W.right-E.right+y.right)/q.x}})}var Ym=function(r){return r===void 0&&(r={}),{name:"flip",options:r,fn(t){return P(this,null,function*(){var n,i;let{placement:s,middlewareData:a,rects:o,initialPlacement:u,platform:l,elements:c}=t,D=vs(r,t),{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:T=!0}=D,E=Go(D,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if((n=a.arrow)!=null&&n.alignmentOffset)return{};let S=Dn(s),x=Dn(u)===u,q=yield l.isRTL==null?void 0:l.isRTL(c.floating),W=m||(x||!T?[wo(u)]:Fv(u));!m&&g!=="none"&&W.push(...Lv(u,T,g,q));let re=[u,...W],H=yield sl(t,E),Y=[],be=((i=a.flip)==null?void 0:i.overflows)||[];if(d&&Y.push(H[S]),f){let V=Iv(s,o,q);Y.push(H[V[0]],H[V[1]])}if(be=[...be,{placement:s,overflows:Y}],!Y.every(V=>V<=0)){var Pe,j;let V=(((Pe=a.flip)==null?void 0:Pe.index)||0)+1,U=re[V];if(U)return{data:{index:V,overflows:be},reset:{placement:U}};let X=(j=be.filter(p=>p.overflows[0]<=0).sort((p,h)=>p.overflows[1]-h.overflows[1])[0])==null?void 0:j.placement;if(!X)switch(y){case"bestFit":{var $;let p=($=be.map(h=>[h.placement,h.overflows.filter(b=>b>0).reduce((b,_)=>b+_,0)]).sort((h,b)=>h[1]-b[1])[0])==null?void 0:$[0];p&&(X=p);break}case"initialPlacement":X=u;break}if(s!==X)return{reset:{placement:X}}}return{}})}}};function LN(r,e){return P(this,null,function*(){let{placement:t,platform:n,elements:i}=r,s=yield n.isRTL==null?void 0:n.isRTL(i.floating),a=Dn(t),o=ws(t),u=ks(t)==="y",l=["left","top"].includes(a)?-1:1,c=s&&u?-1:1,d=vs(e,r),{mainAxis:f,crossAxis:m,alignmentAxis:y}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:K({mainAxis:0,crossAxis:0,alignmentAxis:null},d);return o&&typeof y=="number"&&(m=o==="end"?y*-1:y),u?{x:m*c,y:f*l}:{x:f*l,y:m*c}})}var al=function(r){return r===void 0&&(r=0),{name:"offset",options:r,fn(t){return P(this,null,function*(){var n,i;let{x:s,y:a,placement:o,middlewareData:u}=t,l=yield LN(t,r);return o===((n=u.offset)==null?void 0:n.placement)&&(i=u.arrow)!=null&&i.alignmentOffset?{}:{x:s+l.x,y:a+l.y,data:he(K({},l),{placement:o})}})}}},ol=function(r){return r===void 0&&(r={}),{name:"shift",options:r,fn(t){return P(this,null,function*(){let{x:n,y:i,placement:s}=t,E=vs(r,t),{mainAxis:a=!0,crossAxis:o=!1,limiter:u={fn:S=>{let{x,y:q}=S;return{x,y:q}}}}=E,l=Go(E,["mainAxis","crossAxis","limiter"]),c={x:n,y:i},d=yield sl(t,l),f=ks(Dn(s)),m=$m(f),y=c[m],g=c[f];if(a){let S=m==="y"?"top":"left",x=m==="y"?"bottom":"right",q=y+d[S],W=y-d[x];y=qm(q,y,W)}if(o){let S=f==="y"?"top":"left",x=f==="y"?"bottom":"right",q=g+d[S],W=g-d[x];g=qm(q,g,W)}let T=u.fn(he(K({},t),{[m]:y,[f]:g}));return he(K({},T),{data:{x:T.x-n,y:T.y-i}})})}}};var Bm=function(r){return r===void 0&&(r={}),{name:"size",options:r,fn(t){return P(this,null,function*(){let{placement:n,rects:i,platform:s,elements:a}=t,H=vs(r,t),{apply:o=()=>{}}=H,u=Go(H,["apply"]),l=yield sl(t,u),c=Dn(n),d=ws(n),f=ks(n)==="y",{width:m,height:y}=i.floating,g,T;c==="top"||c==="bottom"?(g=c,T=d===((yield s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(T=c,g=d==="end"?"top":"bottom");let E=y-l[g],S=m-l[T],x=!t.middlewareData.shift,q=E,W=S;if(f){let Y=m-l.left-l.right;W=d||x?Ci(S,Y):Y}else{let Y=y-l.top-l.bottom;q=d||x?Ci(E,Y):Y}if(x&&!d){let Y=Ft(l.left,0),be=Ft(l.right,0),Pe=Ft(l.top,0),j=Ft(l.bottom,0);f?W=m-2*(Y!==0||be!==0?Y+be:Ft(l.left,l.right)):q=y-2*(Pe!==0||j!==0?Pe+j:Ft(l.top,l.bottom))}yield o(he(K({},t),{availableWidth:W,availableHeight:q}));let re=yield s.getDimensions(a.floating);return m!==re.width||y!==re.height?{reset:{rects:!0}}:{}})}}};function xn(r){return jv(r)?(r.nodeName||"").toLowerCase():"#document"}function Lt(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function Rn(r){var e;return(e=(jv(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function jv(r){return r instanceof Node||r instanceof Lt(r).Node}function Qr(r){return r instanceof Element||r instanceof Lt(r).Element}function Cr(r){return r instanceof HTMLElement||r instanceof Lt(r).HTMLElement}function $v(r){return typeof ShadowRoot=="undefined"?!1:r instanceof ShadowRoot||r instanceof Lt(r).ShadowRoot}function Es(r){let{overflow:e,overflowX:t,overflowY:n,display:i}=Xt(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(i)}function Gv(r){return["table","td","th"].includes(xn(r))}function ll(r){let e=cl(),t=Xt(r);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function Yv(r){let e=Pi(r);for(;Cr(e)&&!Eo(e);){if(ll(e))return e;e=Pi(e)}return null}function cl(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Eo(r){return["html","body","#document"].includes(xn(r))}function Xt(r){return Lt(r).getComputedStyle(r)}function So(r){return Qr(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.pageXOffset,scrollTop:r.pageYOffset}}function Pi(r){if(xn(r)==="html")return r;let e=r.assignedSlot||r.parentNode||$v(r)&&r.host||Rn(r);return $v(e)?e.host:e}function Bv(r){let e=Pi(r);return Eo(e)?r.ownerDocument?r.ownerDocument.body:r.body:Cr(e)&&Es(e)?e:Bv(e)}function ul(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);let i=Bv(r),s=i===((n=r.ownerDocument)==null?void 0:n.body),a=Lt(i);return s?e.concat(a,a.visualViewport||[],Es(i)?i:[],a.frameElement&&t?ul(a.frameElement):[]):e.concat(i,ul(i,[],t))}function zv(r){let e=Xt(r),t=parseFloat(e.width)||0,n=parseFloat(e.height)||0,i=Cr(r),s=i?r.offsetWidth:t,a=i?r.offsetHeight:n,o=ko(t)!==s||ko(n)!==a;return o&&(t=s,n=a),{width:t,height:n,$:o}}function Kv(r){return Qr(r)?r:r.contextElement}function Ss(r){let e=Kv(r);if(!Cr(e))return On(1);let t=e.getBoundingClientRect(),{width:n,height:i,$:s}=zv(e),a=(s?ko(t.width):t.width)/n,o=(s?ko(t.height):t.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}var UN=On(0);function Qv(r){let e=Lt(r);return!cl()||!e.visualViewport?UN:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function WN(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==Lt(r)?!1:e}function Oo(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);let i=r.getBoundingClientRect(),s=Kv(r),a=On(1);e&&(n?Qr(n)&&(a=Ss(n)):a=Ss(r));let o=WN(s,t,n)?Qv(s):On(0),u=(i.left+o.x)/a.x,l=(i.top+o.y)/a.y,c=i.width/a.x,d=i.height/a.y;if(s){let f=Lt(s),m=n&&Qr(n)?Lt(n):n,y=f.frameElement;for(;y&&n&&m!==f;){let g=Ss(y),T=y.getBoundingClientRect(),E=Xt(y),S=T.left+(y.clientLeft+parseFloat(E.paddingLeft))*g.x,x=T.top+(y.clientTop+parseFloat(E.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,d*=g.y,u+=S,l+=x,y=Lt(y).frameElement}}return Ai({width:c,height:d,x:u,y:l})}function qN(r){let{rect:e,offsetParent:t,strategy:n}=r,i=Cr(t),s=Rn(t);if(t===s)return e;let a={scrollLeft:0,scrollTop:0},o=On(1),u=On(0);if((i||!i&&n!=="fixed")&&((xn(t)!=="body"||Es(s))&&(a=So(t)),Cr(t))){let l=Oo(t);o=Ss(t),u.x=l.x+t.clientLeft,u.y=l.y+t.clientTop}return{width:e.width*o.x,height:e.height*o.y,x:e.x*o.x-a.scrollLeft*o.x+u.x,y:e.y*o.y-a.scrollTop*o.y+u.y}}function $N(r){return Array.from(r.getClientRects())}function Xv(r){return Oo(Rn(r)).left+So(r).scrollLeft}function jN(r){let e=Rn(r),t=So(r),n=r.ownerDocument.body,i=Ft(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=Ft(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight),a=-t.scrollLeft+Xv(r),o=-t.scrollTop;return Xt(n).direction==="rtl"&&(a+=Ft(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:a,y:o}}function GN(r,e){let t=Lt(r),n=Rn(r),i=t.visualViewport,s=n.clientWidth,a=n.clientHeight,o=0,u=0;if(i){s=i.width,a=i.height;let l=cl();(!l||l&&e==="fixed")&&(o=i.offsetLeft,u=i.offsetTop)}return{width:s,height:a,x:o,y:u}}function YN(r,e){let t=Oo(r,!0,e==="fixed"),n=t.top+r.clientTop,i=t.left+r.clientLeft,s=Cr(r)?Ss(r):On(1),a=r.clientWidth*s.x,o=r.clientHeight*s.y,u=i*s.x,l=n*s.y;return{width:a,height:o,x:u,y:l}}function Hv(r,e,t){let n;if(e==="viewport")n=GN(r,t);else if(e==="document")n=jN(Rn(r));else if(Qr(e))n=YN(e,t);else{let i=Qv(r);n=he(K({},e),{x:e.x-i.x,y:e.y-i.y})}return Ai(n)}function Zv(r,e){let t=Pi(r);return t===e||!Qr(t)||Eo(t)?!1:Xt(t).position==="fixed"||Zv(t,e)}function BN(r,e){let t=e.get(r);if(t)return t;let n=ul(r,[],!1).filter(o=>Qr(o)&&xn(o)!=="body"),i=null,s=Xt(r).position==="fixed",a=s?Pi(r):r;for(;Qr(a)&&!Eo(a);){let o=Xt(a),u=ll(a);!u&&o.position==="fixed"&&(i=null),(s?!u&&!i:!u&&o.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Es(a)&&!u&&Zv(r,a))?n=n.filter(c=>c!==a):i=o,a=Pi(a)}return e.set(r,n),n}function HN(r){let{element:e,boundary:t,rootBoundary:n,strategy:i}=r,a=[...t==="clippingAncestors"?BN(e,this._c):[].concat(t),n],o=a[0],u=a.reduce((l,c)=>{let d=Hv(e,c,i);return l.top=Ft(d.top,l.top),l.right=Ci(d.right,l.right),l.bottom=Ci(d.bottom,l.bottom),l.left=Ft(d.left,l.left),l},Hv(e,o,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function VN(r){return zv(r)}function zN(r,e,t){let n=Cr(e),i=Rn(e),s=t==="fixed",a=Oo(r,!0,s,e),o={scrollLeft:0,scrollTop:0},u=On(0);if(n||!n&&!s)if((xn(e)!=="body"||Es(i))&&(o=So(e)),n){let l=Oo(e,!0,s,e);u.x=l.x+e.clientLeft,u.y=l.y+e.clientTop}else i&&(u.x=Xv(i));return{x:a.left+o.scrollLeft-u.x,y:a.top+o.scrollTop-u.y,width:a.width,height:a.height}}function Vv(r,e){return!Cr(r)||Xt(r).position==="fixed"?null:e?e(r):r.offsetParent}function Jv(r,e){let t=Lt(r);if(!Cr(r))return t;let n=Vv(r,e);for(;n&&Gv(n)&&Xt(n).position==="static";)n=Vv(n,e);return n&&(xn(n)==="html"||xn(n)==="body"&&Xt(n).position==="static"&&!ll(n))?t:n||Yv(r)||t}var KN=function(r){return P(this,null,function*(){let{reference:e,floating:t,strategy:n}=r,i=this.getOffsetParent||Jv,s=this.getDimensions;return{reference:zN(e,yield i(t),n),floating:K({x:0,y:0},yield s(t))}})};function QN(r){return Xt(r).direction==="rtl"}var XN={convertOffsetParentRelativeRectToViewportRelativeRect:qN,getDocumentElement:Rn,getClippingRect:HN,getOffsetParent:Jv,getElementRects:KN,getClientRects:$N,getDimensions:VN,getScale:Ss,isElement:Qr,isRTL:QN};var Hm=(r,e,t)=>{let n=new Map,i=K({platform:XN},t),s=he(K({},i.platform),{_c:n});return qv(r,e,he(K({},i),{platform:s}))};function ew(r,e,t){let n=r.slice();return n[5]=e[t],n}function tw(r,e,t){let n=r.slice();n[40]=e[t],n[43]=t;let i=n[17](n[40].taskLocation.path);return n[41]=i,n}function rw(r){let e,t,n,i=r[10],s=[];for(let a=0;a<i.length;a+=1)s[a]=iw(tw(r,i,a));return{c(){e=Q("ul");for(let a=0;a<s.length;a+=1)s[a].c();L(e,"class","task-dependency-dropdown")},m(a,o){de(a,e,o);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);r[31](e),t||(n=xe(e,"mouseleave",r[32]),t=!0)},p(a,o){if(o[0]&928832){i=a[10];let u;for(u=0;u<i.length;u+=1){let l=tw(a,i,u);s[u]?s[u].p(l,o):(s[u]=iw(l),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=i.length}},d(a){a&&oe(e),Ri(s,a),r[31](null),t=!1,n()}}}function nw(r){let e,t=r[41]+"",n,i,s;function a(...o){return r[28](r[41],...o)}return{c(){e=Q("div"),n=Me(t),L(e,"class","dependency-path")},m(o,u){de(o,e,u),F(e,n),i||(s=xe(e,"mouseenter",a),i=!0)},p(o,u){r=o,u[0]&1024&&t!==(t=r[41]+"")&&Rr(n,t)},d(o){o&&oe(e),i=!1,s()}}}function iw(r){let e,t,n,i=r[40].status.symbol+"",s,a,o=Si(r[40])+"",u,l,c,d,f,m;function y(...S){return r[27](r[40],...S)}let g=r[41]&&nw(r);function T(){return r[29](r[40])}function E(){return r[30](r[43])}return{c(){e=Q("li"),t=Q("div"),n=Me("["),s=Me(i),a=Me("] "),u=Me(o),c=ue(),g&&g.c(),d=ue(),L(t,"class",l=r[41]?"dependency-name-shared":"dependency-name"),Sn(e,"selected",r[6]!==null&&r[43]===r[11])},m(S,x){de(S,e,x),F(e,t),F(t,n),F(t,s),F(t,a),F(t,u),F(e,c),g&&g.m(e,null),F(e,d),f||(m=[xe(t,"mouseenter",y),xe(e,"mousedown",T),xe(e,"mouseenter",E)],f=!0)},p(S,x){r=S,x[0]&1024&&i!==(i=r[40].status.symbol+"")&&Rr(s,i),x[0]&1024&&o!==(o=Si(r[40])+"")&&Rr(u,o),x[0]&1024&&l!==(l=r[41]?"dependency-name-shared":"dependency-name")&&L(t,"class",l),r[41]?g?g.p(r,x):(g=nw(r),g.c(),g.m(e,d)):g&&(g.d(1),g=null),x[0]&2112&&Sn(e,"selected",r[6]!==null&&r[43]===r[11])},d(S){S&&oe(e),g&&g.d(),f=!1,Nt(m)}}}function sw(r){let e,t=r[0][r[1]],n=[];for(let i=0;i<t.length;i+=1)n[i]=aw(ew(r,t,i));return{c(){e=Q("div");for(let i=0;i<n.length;i+=1)n[i].c();L(e,"class","task-dependencies-container results-dependency")},m(i,s){de(i,e,s);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(i,s){if(s[0]&802819){t=i[0][i[1]];let a;for(a=0;a<t.length;a+=1){let o=ew(i,t,a);n[a]?n[a].p(o,s):(n[a]=aw(o),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(i){i&&oe(e),Ri(n,i)}}}function aw(r){let e,t,n,i=r[5].status.symbol+"",s,a,o=Si(r[5])+"",u,l,c,d,f,m;function y(){return r[33](r[5])}function g(...T){return r[34](r[5],...T)}return{c(){e=Q("div"),t=Q("span"),n=Me("["),s=Me(i),a=Me("] "),u=Me(o),l=ue(),c=Q("button"),c.innerHTML='<svg style="display: block; margin: auto;" xmlns="http://www.w3.org/2000/svg" width="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>',d=ue(),L(t,"class","task-dependency-name"),L(c,"type","button"),L(c,"class","task-dependency-delete"),L(e,"class","task-dependency")},m(T,E){de(T,e,E),F(e,t),F(t,n),F(t,s),F(t,a),F(t,u),F(e,l),F(e,c),F(e,d),f||(m=[xe(c,"click",y),xe(e,"mouseenter",g)],f=!0)},p(T,E){r=T,E[0]&3&&i!==(i=r[5].status.symbol+"")&&Rr(s,i),E[0]&3&&o!==(o=Si(r[5])+"")&&Rr(u,o)},d(T){T&&oe(e),f=!1,Nt(m)}}}function ZN(r){let e,t=pt(r[2],r[3])+"",n,i,s,a,o,u,l,c,d,f=r[10]&&r[10].length!==0&&rw(r),m=r[0][r[1]].length!==0&&sw(r);return{c(){e=Q("label"),n=ue(),i=Q("span"),s=Q("input"),o=ue(),f&&f.c(),u=ue(),m&&m.c(),l=Ov(),L(e,"for",r[1]),L(s,"accesskey",r[3]),L(s,"id",r[1]),L(s,"class","tasks-modal-dependency-input"),L(s,"type","text"),L(s,"placeholder",r[4]),xi(()=>r[26].call(i))},m(y,g){de(y,e,g),e.innerHTML=t,de(y,n,g),de(y,i,g),F(i,s),r[22](s),mr(s,r[6]),a=Mv(i,r[26].bind(i)),de(y,o,g),f&&f.m(y,g),de(y,u,g),m&&m.m(y,g),de(y,l,g),c||(d=[xe(s,"input",r[23]),xe(s,"keydown",r[24]),xe(s,"focus",r[16]),xe(s,"blur",r[25])],c=!0)},p(y,g){g[0]&12&&t!==(t=pt(y[2],y[3])+"")&&(e.innerHTML=t),g[0]&2&&L(e,"for",y[1]),g[0]&8&&L(s,"accesskey",y[3]),g[0]&2&&L(s,"id",y[1]),g[0]&16&&L(s,"placeholder",y[4]),g[0]&64&&s.value!==y[6]&&mr(s,y[6]),y[10]&&y[10].length!==0?f?f.p(y,g):(f=rw(y),f.c(),f.m(u.parentNode,u)):f&&(f.d(1),f=null),y[0][y[1]].length!==0?m?m.p(y,g):(m=sw(y),m.c(),m.m(l.parentNode,l)):m&&(m.d(1),m=null)},i:Ue,o:Ue,d(y){y&&oe(e),y&&oe(n),y&&oe(i),r[22](null),a(),y&&oe(o),f&&f.d(y),y&&oe(u),m&&m.d(y),y&&oe(l),c=!1,Nt(d)}}}function JN(r,e,t){let{task:n}=e,{editableTask:i}=e,{allTasks:s}=e,{_onDescriptionKeyDown:a}=e,{type:o}=e,{labelText:u}=e,{accesskey:l}=e,{placeholder:c="Type to search..."}=e,d="",f=null,m=0,y,g=!1,T=!1,E,S;function x(v){t(0,i[o]=[...i[o],v],i),t(6,d=""),t(7,g=!1)}function q(v){t(0,i[o]=i[o].filter(R=>R!==v),i)}function W(v){var R;if(f!==null){switch(v.key){case"ArrowUp":v.preventDefault(),!!m&&m>0?t(11,m-=1):t(11,m=f.length-1);break;case"ArrowDown":v.preventDefault(),!!m&&m<f.length-1?t(11,m+=1):t(11,m=0);break;case"Enter":m!==null?(v.preventDefault(),x(f[m]),t(11,m=null),t(7,g=!1)):a(v);break;default:t(11,m=0);break}m&&((R=S==null?void 0:S.getElementsByTagName("li")[m])===null||R===void 0||R.scrollIntoView({block:"nearest"}))}}function re(v){return!v&&!T?[]:(T=!1,zu(v,s,n,i.blockedBy,i.blocking))}function H(){t(7,g=!0),T=!0}function Y(v,R){!v||!R||Hm(v,R,{middleware:[al(6),ol(),Ym(),Bm({apply(){R&&Object.assign(R.style,{width:`${y}px`})}})]}).then(({x:N,y:te})=>{R.style.left=`${N}px`,R.style.top=`${te}px`})}function be(v){return v===n.taskLocation.path?"":v}function Pe(v){return Si(v)}function j(v,R){let N=v.createDiv();N.addClasses(["tooltip","pop-up"]),N.innerText=R,Hm(v,N,{placement:"top",middleware:[al(-18),ol()]}).then(({x:te,y:le})=>{N.style.left=`${te}px`,N.style.top=`${le}px`}),v.addEventListener("mouseleave",()=>N.remove())}function $(v){je[v?"unshift":"push"](()=>{E=v,t(8,E)})}function D(){d=this.value,t(6,d)}let V=v=>W(v),U=()=>t(7,g=!1);function X(){y=this.clientWidth,t(12,y)}let p=(v,R)=>j(R.currentTarget,Pe(v)),h=(v,R)=>j(R.currentTarget,v),b=v=>x(v),_=v=>t(11,m=v);function w(v){je[v?"unshift":"push"](()=>{S=v,t(9,S)})}let O=()=>t(11,m=null),M=v=>q(v),A=(v,R)=>j(R.currentTarget,Pe(v));return r.$$set=v=>{"task"in v&&t(5,n=v.task),"editableTask"in v&&t(0,i=v.editableTask),"allTasks"in v&&t(20,s=v.allTasks),"_onDescriptionKeyDown"in v&&t(21,a=v._onDescriptionKeyDown),"type"in v&&t(1,o=v.type),"labelText"in v&&t(2,u=v.labelText),"accesskey"in v&&t(3,l=v.accesskey),"placeholder"in v&&t(4,c=v.placeholder)},r.$$.update=()=>{if(r.$$.dirty[0]&768){e:Y(E,S)}if(r.$$.dirty[0]&192){e:t(10,f=g?re(d):null)}},[i,o,u,l,c,n,d,g,E,S,f,m,y,x,q,W,H,be,Pe,j,s,a,$,D,V,U,X,p,h,b,_,w,O,M,A]}var Vm=class extends pr{constructor(e){super(),Kr(this,e,JN,ZN,zr,{task:5,editableTask:0,allTasks:20,_onDescriptionKeyDown:21,type:1,labelText:2,accesskey:3,placeholder:4},null,[-1,-1])}},zm=Vm;var xo=require("obsidian");var Do,Km,Qm,eI=["md"];function pl(){return St.getLogger("tasks.File")}var ow=({metadataCache:r,vault:e,workspace:t})=>{Do=r,Km=e,Qm=t},gr=t=>P(void 0,[t],function*({originalTask:r,newTasks:e}){if(Km===void 0||Do===void 0||Qm===void 0){dl("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]);let n=pl(),i="replaceTaskWithTasks()";Zu(n,i,r),Ju(n,i,e),yield lw({originalTask:r,newTasks:e,vault:Km,metadataCache:Do,workspace:Qm,previousTries:0})});function dl(r){console.error(r),new xo.Notice(r,15e3)}function uw(r){console.warn(r),new xo.Notice(r,1e4)}function tI(r){pl().debug(r)}var Vn=class extends Error{},fl=class extends Error{},lw=a=>P(void 0,[a],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,workspace:i,previousTries:s}){let o=pl();o.debug(`tryRepetitive after ${s} previous tries`);let u=()=>P(void 0,null,function*(){if(s>10){let c=`Tasks: Could not find the correct task line to update.

The task line not updated is:
${r.originalMarkdown}

In this markdown file:
"${r.taskLocation.path}"

Note: further clicks on this checkbox will usually now be ignored until the file is opened (or certain, specific edits are made - it's complicated).

Recommendations:

1. Close all panes that have the above file open, and then re-open the file.

2. Check for exactly identical copies of the task line, in this file, and see if you can make them different.
`;dl(c);return}let l=Math.min(Math.pow(10,s),100);o.debug(`timeout = ${l}`),setTimeout(()=>P(void 0,null,function*(){yield lw({originalTask:r,newTasks:e,vault:t,metadataCache:n,workspace:i,previousTries:s+1})}),l)});try{let[l,c,d]=yield cw(r,t),f=[...d.slice(0,l),...e.map(m=>m.toFileLineString()),...d.slice(l+1)];yield t.modify(c,f.join(`
`))}catch(l){if(l instanceof Vn){l.message&&uw(l.message),yield u();return}else if(l instanceof fl){yield u();return}else l instanceof Error&&dl(l.message)}});function cw(r,e){return P(this,null,function*(){if(Do===void 0)throw new Vn;let t=e.getAbstractFileByPath(r.path);if(!(t instanceof xo.TFile))throw new Vn(`Tasks: No file found for task ${r.description}. Retrying ...`);if(!eI.includes(t.extension))throw new Error(`Tasks: Does not support files with the ${t.extension} file extension.`);let n=Do.getFileCache(t);if(n==null||n===null)throw new Vn(`Tasks: No file cache found for file ${t.path}. Retrying ...`);let i=n.listItems;if(i===void 0||i.length===0)throw new Vn(`Tasks: No list items found in file cache of ${t.path}. Retrying ...`);let a=(yield e.read(t)).split(`
`),o=rI(r,a,i,tI);if(o===void 0)throw new fl;return[o,t,a]})}function Xm(r,e){return P(this,null,function*(){try{let[t,n,i]=yield cw(r,e);return[t,n]}catch(t){t instanceof Vn?t.message&&uw(t.message):t instanceof Error&&dl(t.message)}})}function dw(r,e){return r<e.length}function rI(r,e,t,n){let i=nI(r,e);return i!==void 0||(i=iI(r,e),i!==void 0)?i:sI(r,e,t,n)}function nI(r,e){let t=r.taskLocation.lineNumber;if(dw(t,e)&&e[t]===r.originalMarkdown)return pl().debug(`Found original markdown at original line number ${t}`),t}function iI(r,e){let t=[];for(let n=0;n<e.length;n++)e[n]===r.originalMarkdown&&t.push(n);if(t.length===1)return t[0]}function sI(r,e,t,n){let i,s=0;for(let a of t){let o=a.position.start.line;if(!dw(o,e))return;if(o<r.taskLocation.sectionStart||a.task===void 0)continue;let u=e[o];if(_e.getInstance().includedIn(u)){if(s===r.taskLocation.sectionIndex){if(u===r.originalMarkdown)i=o;else{n(`Tasks: Unable to find task in file ${r.taskLocation.path}.
Expected task:
${r.originalMarkdown}
Found task:
${u}`);return}break}s++}}return i}var Os=class{constructor(e){this.addGlobalFilterOnSave=e.addGlobalFilterOnSave,this.originalBlocking=e.originalBlocking,this.description=e.description,this.status=e.status,this.priority=e.priority,this.recurrenceRule=e.recurrenceRule,this.createdDate=e.createdDate,this.startDate=e.startDate,this.scheduledDate=e.scheduledDate,this.dueDate=e.dueDate,this.doneDate=e.doneDate,this.cancelledDate=e.cancelledDate,this.forwardOnly=e.forwardOnly,this.blockedBy=e.blockedBy,this.blocking=e.blocking}static fromTask(e,t){let n=_e.getInstance().removeAsWordFrom(e.description),i=n!=e.description||!_e.getInstance().includedIn(e.description),s="none";e.priority==="5"?s="lowest":e.priority==="4"?s="low":e.priority==="2"?s="medium":e.priority==="1"?s="high":e.priority==="0"&&(s="highest");let a=[];for(let u of e.dependsOn){let l=t.find(c=>c.id===u);!l||a.push(l)}let o=t.filter(u=>u.dependsOn.includes(e.id));return new Os({addGlobalFilterOnSave:i,originalBlocking:o,description:n,status:e.status,priority:s,recurrenceRule:e.recurrence?e.recurrence.toText():"",createdDate:e.created.formatAsDate(),startDate:e.start.formatAsDate(),scheduledDate:e.scheduled.formatAsDate(),dueDate:e.due.formatAsDate(),doneDate:e.done.formatAsDate(),cancelledDate:e.cancelled.formatAsDate(),forwardOnly:!0,blockedBy:a,blocking:o})}applyEdits(e,t){return P(this,null,function*(){let n=this.description.trim();this.addGlobalFilterOnSave&&(n=_e.getInstance().prependTo(n));let i=wi(this.startDate,this.forwardOnly),s=wi(this.scheduledDate,this.forwardOnly),a=wi(this.dueDate,this.forwardOnly),o=wi(this.cancelledDate,this.forwardOnly),u=wi(this.createdDate,this.forwardOnly),l=wi(this.doneDate,this.forwardOnly),c=null;this.recurrenceRule&&(c=st.fromText({recurrenceRuleText:this.recurrenceRule,startDate:i,scheduledDate:s,dueDate:a}));let d;switch(this.priority){case"lowest":d="5";break;case"low":d="4";break;case"medium":d="2";break;case"high":d="1";break;case"highest":d="0";break;default:d="3"}let f=[];for(let S of this.blockedBy){let x=yield aI(S,t);f.push(x)}let m=e.id,y=[],g=[];(this.blocking.toString()!==this.originalBlocking.toString()||this.blocking.length!==0)&&(e.id===""&&(m=ho(t.filter(S=>S.id!=="").map(S=>S.id))),y=this.originalBlocking.filter(S=>!this.blocking.includes(S)),g=this.blocking.filter(S=>!this.originalBlocking.includes(S)));let T=new ae(he(K({},e),{description:n,status:e.status,priority:d,recurrence:c,startDate:i,scheduledDate:s,dueDate:a,doneDate:l,createdDate:u,cancelledDate:o,dependsOn:f.map(S=>S.id),id:m}));for(let S of y){let x=lv(S,T);yield gr({originalTask:S,newTasks:x})}for(let S of g){let x=uv(S,T);yield gr({originalTask:S,newTasks:x})}let E=l||window.moment();return T.handleNewStatusWithRecurrenceInUsersOrder(this.status,E)})}parseAndValidateRecurrence(){var t;if(!this.recurrenceRule)return{parsedRecurrence:"<i>not recurring</>",isRecurrenceValid:!0};let e=(t=st.fromText({recurrenceRuleText:this.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:t.toText();return e?this.startDate||this.scheduledDate||this.dueDate?{parsedRecurrence:e,isRecurrenceValid:!0}:{parsedRecurrence:"<i>due, scheduled or start date required</i>",isRecurrenceValid:!1}:{parsedRecurrence:"<i>invalid recurrence rule</i>",isRecurrenceValid:!1}}};function aI(r,e){return P(this,null,function*(){if(r.id!=="")return r;let t=e.filter(i=>i.id!==""),n=Vu(r,t.map(i=>i.id));return yield gr({originalTask:r,newTasks:n}),n})}function oI(r){let e,t=pt("Recurs",r[2])+"",n,i,s,a,o,u,l,c,d;return{c(){e=Q("label"),n=ue(),i=Q("input"),s=ue(),a=Q("code"),o=Me(r[4]),u=ue(),l=new Ts(!1),L(e,"for","recurrence"),L(i,"id","recurrence"),L(i,"type","text"),L(i,"class","tasks-modal-date-input"),L(i,"placeholder","Try 'every day when done'"),L(i,"accesskey",r[2]),Sn(i,"tasks-modal-error",!r[1]),l.a=null,L(a,"class","tasks-modal-parsed-date")},m(f,m){de(f,e,m),e.innerHTML=t,de(f,n,m),de(f,i,m),mr(i,r[0].recurrenceRule),de(f,s,m),de(f,a,m),F(a,o),F(a,u),l.m(r[3],a),c||(d=xe(i,"input",r[5]),c=!0)},p(f,[m]){m&4&&t!==(t=pt("Recurs",f[2])+"")&&(e.innerHTML=t),m&4&&L(i,"accesskey",f[2]),m&1&&i.value!==f[0].recurrenceRule&&mr(i,f[0].recurrenceRule),m&2&&Sn(i,"tasks-modal-error",!f[1]),m&8&&l.p(f[3])},i:Ue,o:Ue,d(f){f&&oe(e),f&&oe(n),f&&oe(i),f&&oe(s),f&&oe(a),c=!1,d()}}}function uI(r,e,t){let{editableTask:n}=e,{isRecurrenceValid:i}=e,{accesskey:s}=e,a,{recurrenceSymbol:o}=Dr.tasksPluginEmoji.taskSerializer.symbols;function u(){n.recurrenceRule=this.value,t(0,n)}return r.$$set=l=>{"editableTask"in l&&t(0,n=l.editableTask),"isRecurrenceValid"in l&&t(1,i=l.isRecurrenceValid),"accesskey"in l&&t(2,s=l.accesskey)},r.$$.update=()=>{if(r.$$.dirty&1){e:t(3,{parsedRecurrence:a,isRecurrenceValid:i}=n.parseAndValidateRecurrence(),a,(t(1,i),t(0,n)))}},[n,i,s,a,o,u]}var Zm=class extends pr{constructor(e){super(),Kr(this,e,uI,oI,zr,{editableTask:0,isRecurrenceValid:1,accesskey:2})}},fw=Zm;function pw(r,e,t){let n=r.slice();return n[7]=e[t],n}function mw(r){let e,t=r[7].name+"",n,i,s=r[7].symbol+"",a,o,u;return{c(){e=Q("option"),n=Me(t),i=Me(" ["),a=Me(s),o=Me("]"),e.__value=u=r[7].symbol,e.value=e.__value},m(l,c){de(l,e,c),F(e,n),F(e,i),F(e,a),F(e,o)},p(l,c){c&1&&t!==(t=l[7].name+"")&&Rr(n,t),c&1&&s!==(s=l[7].symbol+"")&&Rr(a,s),c&1&&u!==(u=l[7].symbol)&&(e.__value=u,e.value=e.__value)},d(l){l&&oe(e)}}}function lI(r){let e,t=pt("Status",r[1])+"",n,i,s,a,o=r[0],u=[];for(let l=0;l<o.length;l+=1)u[l]=mw(pw(r,o,l));return{c(){e=Q("label"),n=ue(),i=Q("select");for(let l=0;l<u.length;l+=1)u[l].c();L(e,"for","status"),L(i,"id","status-type"),L(i,"class","status-editor-status-selector"),L(i,"accesskey",r[1]),r[2]===void 0&&xi(()=>r[6].call(i))},m(l,c){de(l,e,c),e.innerHTML=t,de(l,n,c),de(l,i,c);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(i,null);Lm(i,r[2],!0),s||(a=[xe(i,"change",r[6]),xe(i,"change",r[3])],s=!0)},p(l,[c]){if(c&2&&t!==(t=pt("Status",l[1])+"")&&(e.innerHTML=t),c&1){o=l[0];let d;for(d=0;d<o.length;d+=1){let f=pw(l,o,d);u[d]?u[d].p(f,c):(u[d]=mw(f),u[d].c(),u[d].m(i,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=o.length}c&2&&L(i,"accesskey",l[1]),c&5&&Lm(i,l[2])},i:Ue,o:Ue,d(l){l&&oe(e),l&&oe(n),l&&oe(i),Ri(u,l),s=!1,Nt(a)}}}function cI(r,e,t){let{task:n}=e,{editableTask:i}=e,{statusOptions:s}=e,{accesskey:a}=e,o=n.status.symbol,u=()=>{let c=s.find(f=>f.symbol===o);if(c)t(4,i.status=c,i);else{console.log(`Error in EditTask: cannot find status with symbol ${o}`);return}let d=n.handleNewStatus(c).pop();d&&(t(4,i.doneDate=d.done.formatAsDate(),i),t(4,i.cancelledDate=d.cancelled.formatAsDate(),i))};function l(){o=Rv(this),t(2,o),t(0,s)}return r.$$set=c=>{"task"in c&&t(5,n=c.task),"editableTask"in c&&t(4,i=c.editableTask),"statusOptions"in c&&t(0,s=c.statusOptions),"accesskey"in c&&t(1,a=c.accesskey)},[s,a,o,u,i,n,l]}var Jm=class extends pr{constructor(e){super(),Kr(this,e,cI,lI,zr,{task:5,editableTask:4,statusOptions:0,accesskey:1})}},hw=Jm;function gw(r,e,t){let n=r.slice();return n[49]=e[t].value,n[50]=e[t].label,n[51]=e[t].symbol,n[52]=e[t].accessKey,n[53]=e[t].accessKeyIndex,n}function dI(r){let e,t=r[50]+"",n;return{c(){e=Q("span"),n=Me(t)},m(i,s){de(i,e,s),F(e,n)},p:Ue,d(i){i&&oe(e)}}}function fI(r){let e,t=r[50].substring(0,r[53])+"",n,i,s=r[50].substring(r[53],r[53]+1)+"",a,o,u=r[50].substring(r[53]+1)+"",l;return{c(){e=Q("span"),n=Me(t),i=Q("span"),a=Me(s),o=Q("span"),l=Me(u),L(i,"class","accesskey")},m(c,d){de(c,e,d),F(e,n),de(c,i,d),F(i,a),de(c,o,d),F(o,l)},p:Ue,d(c){c&&oe(e),c&&oe(i),c&&oe(o)}}}function pI(r){let e,t=r[51]+"",n;return{c(){e=Q("span"),n=Me(t)},m(i,s){de(i,e,s),F(e,n)},p:Ue,d(i){i&&oe(e)}}}function yw(r){let e,t,n,i,s,a,o,u,l=r[51]&&r[51].charCodeAt(0)>=256,c,d,f,m,y;function g(x,q){return x[11]?fI:dI}let T=g(r,[-1,-1]),E=T(r),S=l&&pI(r);return f=xv(r[32][0]),{c(){e=Q("div"),t=Q("input"),a=ue(),o=Q("label"),E.c(),u=ue(),S&&S.c(),d=ue(),L(t,"type","radio"),L(t,"id",n="priority-"+r[49]),t.__value=i=r[49],t.value=t.__value,L(t,"accesskey",s=r[15](r[52])),L(o,"for",c="priority-"+r[49]),L(e,"class","task-modal-priority-option-container"),f.p(t)},m(x,q){de(x,e,q),F(e,t),t.checked=t.__value===r[3].priority,F(e,a),F(e,o),E.m(o,null),F(o,u),S&&S.m(o,null),F(e,d),m||(y=xe(t,"change",r[31]),m=!0)},p(x,q){q[0]&32768&&s!==(s=x[15](x[52]))&&L(t,"accesskey",s),q[0]&8&&(t.checked=t.__value===x[3].priority),T===(T=g(x,q))&&E?E.p(x,q):(E.d(1),E=T(x),E&&(E.c(),E.m(o,u))),l&&S.p(x,q)},d(x){x&&oe(e),E.d(),S&&S.d(),f.r(),m=!1,y()}}}function mI(r){let e;return{c(){e=Q("div"),e.innerHTML="<i>Blocking and blocked by fields are disabled when vault tasks is empty</i>"},m(t,n){de(t,e,n)},p:Ue,i:Ue,o:Ue,d(t){t&&oe(e)}}}function hI(r){let e,t,n,i;return e=new zm({props:{type:"blockedBy",labelText:"Before this",task:r[0],editableTask:r[3],allTasks:r[2],_onDescriptionKeyDown:r[24],accesskey:r[15]("b"),placeholder:"Search for tasks that the task being edited depends on..."}}),n=new zm({props:{type:"blocking",labelText:"After this",task:r[0],editableTask:r[3],allTasks:r[2],_onDescriptionKeyDown:r[24],accesskey:r[15]("e"),placeholder:"Search for tasks that depend on this task being done..."}}),{c(){Mr(e.$$.fragment),t=ue(),Mr(n.$$.fragment)},m(s,a){hr(e,s,a),de(s,t,a),hr(n,s,a),i=!0},p(s,a){let o={};a[0]&1&&(o.task=s[0]),a[0]&8&&(o.editableTask=s[3]),a[0]&4&&(o.allTasks=s[2]),a[0]&32768&&(o.accesskey=s[15]("b")),e.$set(o);let u={};a[0]&1&&(u.task=s[0]),a[0]&8&&(u.editableTask=s[3]),a[0]&4&&(u.allTasks=s[2]),a[0]&32768&&(u.accesskey=s[15]("e")),n.$set(u)},i(s){i||(It(e.$$.fragment,s),It(n.$$.fragment,s),i=!0)},o(s){Kt(e.$$.fragment,s),Kt(n.$$.fragment,s),i=!1},d(s){Qt(e,s),s&&oe(t),Qt(n,s)}}}function gI(r){let e,t,n,i=pt("Description",r[15]("t"))+"",s,a,o,u,l,c,d,f,m,y,g,T,E,S,x,q,W,re,H,Y,be,Pe,j,$,D,V,U,X,p,h,b=pt("Only future dates:",r[15]("f"))+"",_,w,O,M,A,v,R,N,te,le,fe,Ne,Ce,Rt,nn,Fr,G,qt,Xe,Ah,sn,oc,uc,Ph,an,lc,cc,Nh,Gi,ai,Ih,$o,Fh,zs,Lr,dc,Lh,Yi=r[22],vt=[];for(let C=0;C<Yi.length;C+=1)vt[C]=yw(gw(r,Yi,C));function Nk(C){r[33](C)}let Uh={editableTask:r[3],accesskey:r[15]("r")};r[10]!==void 0&&(Uh.isRecurrenceValid=r[10]),S=new fw({props:Uh}),je.push(()=>Dt(S,"isRecurrenceValid",Nk));function Ik(C){r[34](C)}function Fk(C){r[35](C)}let fc={id:"due",dateSymbol:r[18],forwardOnly:r[3].forwardOnly,accesskey:r[15]("d")};r[3].dueDate!==void 0&&(fc.date=r[3].dueDate),r[7]!==void 0&&(fc.isDateValid=r[7]),W=new Mi({props:fc}),je.push(()=>Dt(W,"date",Ik)),je.push(()=>Dt(W,"isDateValid",Fk));function Lk(C){r[36](C)}function Uk(C){r[37](C)}let pc={id:"scheduled",dateSymbol:r[17],forwardOnly:r[3].forwardOnly,accesskey:r[15]("s")};r[3].scheduledDate!==void 0&&(pc.date=r[3].scheduledDate),r[8]!==void 0&&(pc.isDateValid=r[8]),be=new Mi({props:pc}),je.push(()=>Dt(be,"date",Lk)),je.push(()=>Dt(be,"isDateValid",Uk));function Wk(C){r[38](C)}function qk(C){r[39](C)}let mc={id:"start",dateSymbol:r[16],forwardOnly:r[3].forwardOnly,accesskey:r[15]("a")};r[3].startDate!==void 0&&(mc.date=r[3].startDate),r[9]!==void 0&&(mc.isDateValid=r[9]),D=new Mi({props:mc}),je.push(()=>Dt(D,"date",Wk)),je.push(()=>Dt(D,"isDateValid",qk));let Wh=[hI,mI],In=[];function qh(C,ee){return C[2].length>0&&C[14]?0:1}N=qh(r,[-1,-1]),te=In[N]=Wh[N](r);function $k(C){r[41](C)}let $h={task:r[0],statusOptions:r[1],accesskey:r[15]("u")};r[3]!==void 0&&($h.editableTask=r[3]),Rt=new hw({props:$h}),je.push(()=>Dt(Rt,"editableTask",$k));function jk(C){r[42](C)}function Gk(C){r[43](C)}let hc={id:"created",dateSymbol:r[20],forwardOnly:r[3].forwardOnly,accesskey:r[15]("c")};r[3].createdDate!==void 0&&(hc.date=r[3].createdDate),r[5]!==void 0&&(hc.isDateValid=r[5]),G=new Mi({props:hc}),je.push(()=>Dt(G,"date",jk)),je.push(()=>Dt(G,"isDateValid",Gk));function Yk(C){r[44](C)}function Bk(C){r[45](C)}let gc={id:"done",dateSymbol:r[21],forwardOnly:r[3].forwardOnly,accesskey:r[15]("x")};r[3].doneDate!==void 0&&(gc.date=r[3].doneDate),r[6]!==void 0&&(gc.isDateValid=r[6]),sn=new Mi({props:gc}),je.push(()=>Dt(sn,"date",Yk)),je.push(()=>Dt(sn,"isDateValid",Bk));function Hk(C){r[46](C)}function Vk(C){r[47](C)}let yc={id:"cancelled",dateSymbol:r[19],forwardOnly:r[3].forwardOnly,accesskey:r[15]("-")};return r[3].cancelledDate!==void 0&&(yc.date=r[3].cancelledDate),r[4]!==void 0&&(yc.isDateValid=r[4]),an=new Mi({props:yc}),je.push(()=>Dt(an,"date",Hk)),je.push(()=>Dt(an,"isDateValid",Vk)),{c(){e=Q("form"),t=Q("section"),n=Q("label"),s=ue(),a=Q("textarea"),u=ue(),l=Q("section"),c=Q("label"),d=Me("Priority"),m=ue();for(let C=0;C<vt.length;C+=1)vt[C].c();y=ue(),g=Q("hr"),T=ue(),E=Q("section"),Mr(S.$$.fragment),q=ue(),Mr(W.$$.fragment),Y=ue(),Mr(be.$$.fragment),$=ue(),Mr(D.$$.fragment),X=ue(),p=Q("div"),h=Q("label"),_=ue(),w=Q("input"),M=ue(),A=Q("hr"),v=ue(),R=Q("section"),te.c(),le=ue(),fe=Q("hr"),Ne=ue(),Ce=Q("section"),Mr(Rt.$$.fragment),Fr=ue(),Mr(G.$$.fragment),Ah=ue(),Mr(sn.$$.fragment),Ph=ue(),Mr(an.$$.fragment),Nh=ue(),Gi=Q("section"),ai=Q("button"),Ih=Me("Apply"),Fh=ue(),zs=Q("button"),zs.textContent="Cancel",L(n,"for","description"),L(a,"id","description"),L(a,"class","tasks-modal-description"),L(a,"placeholder","Take out the trash"),L(a,"accesskey",o=r[15]("t")),L(t,"class","tasks-modal-description-section"),L(c,"for",f="priority-"+r[3].priority),L(l,"class","tasks-modal-priority-section"),L(h,"for","forwardOnly"),L(w,"id","forwardOnly"),L(w,"type","checkbox"),L(w,"class","task-list-item-checkbox tasks-modal-checkbox"),L(w,"accesskey",O=r[15]("f")),L(p,"class","future-dates-only"),L(E,"class","tasks-modal-dates-section"),L(R,"class","tasks-modal-dependencies-section"),L(Ce,"class","tasks-modal-dates-section"),ai.disabled=$o=!r[13],L(ai,"type","submit"),L(ai,"class","mod-cta"),L(zs,"type","button"),L(Gi,"class","tasks-modal-button-section"),L(e,"class","tasks-modal")},m(C,ee){de(C,e,ee),F(e,t),F(t,n),n.innerHTML=i,F(t,s),F(t,a),mr(a,r[3].description),r[30](a),F(e,u),F(e,l),F(l,c),F(c,d),F(l,m);for(let on=0;on<vt.length;on+=1)vt[on]&&vt[on].m(l,null);F(e,y),F(e,g),F(e,T),F(e,E),hr(S,E,null),F(E,q),hr(W,E,null),F(E,Y),hr(be,E,null),F(E,$),hr(D,E,null),F(E,X),F(E,p),F(p,h),h.innerHTML=b,F(p,_),F(p,w),w.checked=r[3].forwardOnly,F(e,M),F(e,A),F(e,v),F(e,R),In[N].m(R,null),F(e,le),F(e,fe),F(e,Ne),F(e,Ce),hr(Rt,Ce,null),F(Ce,Fr),hr(G,Ce,null),F(Ce,Ah),hr(sn,Ce,null),F(Ce,Ph),hr(an,Ce,null),F(e,Nh),F(e,Gi),F(Gi,ai),F(ai,Ih),F(Gi,Fh),F(Gi,zs),Lr=!0,dc||(Lh=[xe(a,"input",r[29]),xe(a,"keydown",r[24]),xe(a,"paste",r[25]),xe(a,"drop",r[25]),xe(w,"change",r[40]),xe(zs,"click",r[23]),xe(e,"submit",Dv(r[26]))],dc=!0)},p(C,ee){if((!Lr||ee[0]&32768)&&i!==(i=pt("Description",C[15]("t"))+"")&&(n.innerHTML=i),(!Lr||ee[0]&32768&&o!==(o=C[15]("t")))&&L(a,"accesskey",o),ee[0]&8&&mr(a,C[3].description),(!Lr||ee[0]&8&&f!==(f="priority-"+C[3].priority))&&L(c,"for",f),ee[0]&4229128){Yi=C[22];let rr;for(rr=0;rr<Yi.length;rr+=1){let jh=gw(C,Yi,rr);vt[rr]?vt[rr].p(jh,ee):(vt[rr]=yw(jh),vt[rr].c(),vt[rr].m(l,null))}for(;rr<vt.length;rr+=1)vt[rr].d(1);vt.length=Yi.length}let on={};ee[0]&8&&(on.editableTask=C[3]),ee[0]&32768&&(on.accesskey=C[15]("r")),!x&&ee[0]&1024&&(x=!0,on.isRecurrenceValid=C[10],Ot(()=>x=!1)),S.$set(on);let Ks={};ee[0]&8&&(Ks.forwardOnly=C[3].forwardOnly),ee[0]&32768&&(Ks.accesskey=C[15]("d")),!re&&ee[0]&8&&(re=!0,Ks.date=C[3].dueDate,Ot(()=>re=!1)),!H&&ee[0]&128&&(H=!0,Ks.isDateValid=C[7],Ot(()=>H=!1)),W.$set(Ks);let Qs={};ee[0]&8&&(Qs.forwardOnly=C[3].forwardOnly),ee[0]&32768&&(Qs.accesskey=C[15]("s")),!Pe&&ee[0]&8&&(Pe=!0,Qs.date=C[3].scheduledDate,Ot(()=>Pe=!1)),!j&&ee[0]&256&&(j=!0,Qs.isDateValid=C[8],Ot(()=>j=!1)),be.$set(Qs);let Xs={};ee[0]&8&&(Xs.forwardOnly=C[3].forwardOnly),ee[0]&32768&&(Xs.accesskey=C[15]("a")),!V&&ee[0]&8&&(V=!0,Xs.date=C[3].startDate,Ot(()=>V=!1)),!U&&ee[0]&512&&(U=!0,Xs.isDateValid=C[9],Ot(()=>U=!1)),D.$set(Xs),(!Lr||ee[0]&32768)&&b!==(b=pt("Only future dates:",C[15]("f"))+"")&&(h.innerHTML=b),(!Lr||ee[0]&32768&&O!==(O=C[15]("f")))&&L(w,"accesskey",O),ee[0]&8&&(w.checked=C[3].forwardOnly);let bc=N;N=qh(C,ee),N===bc?In[N].p(C,ee):(Av(),Kt(In[bc],1,1,()=>{In[bc]=null}),Pv(),te=In[N],te?te.p(C,ee):(te=In[N]=Wh[N](C),te.c()),It(te,1),te.m(R,null));let Zs={};ee[0]&1&&(Zs.task=C[0]),ee[0]&2&&(Zs.statusOptions=C[1]),ee[0]&32768&&(Zs.accesskey=C[15]("u")),!nn&&ee[0]&8&&(nn=!0,Zs.editableTask=C[3],Ot(()=>nn=!1)),Rt.$set(Zs);let Js={};ee[0]&8&&(Js.forwardOnly=C[3].forwardOnly),ee[0]&32768&&(Js.accesskey=C[15]("c")),!qt&&ee[0]&8&&(qt=!0,Js.date=C[3].createdDate,Ot(()=>qt=!1)),!Xe&&ee[0]&32&&(Xe=!0,Js.isDateValid=C[5],Ot(()=>Xe=!1)),G.$set(Js);let ea={};ee[0]&8&&(ea.forwardOnly=C[3].forwardOnly),ee[0]&32768&&(ea.accesskey=C[15]("x")),!oc&&ee[0]&8&&(oc=!0,ea.date=C[3].doneDate,Ot(()=>oc=!1)),!uc&&ee[0]&64&&(uc=!0,ea.isDateValid=C[6],Ot(()=>uc=!1)),sn.$set(ea);let ta={};ee[0]&8&&(ta.forwardOnly=C[3].forwardOnly),ee[0]&32768&&(ta.accesskey=C[15]("-")),!lc&&ee[0]&8&&(lc=!0,ta.date=C[3].cancelledDate,Ot(()=>lc=!1)),!cc&&ee[0]&16&&(cc=!0,ta.isDateValid=C[4],Ot(()=>cc=!1)),an.$set(ta),(!Lr||ee[0]&8192&&$o!==($o=!C[13]))&&(ai.disabled=$o)},i(C){Lr||(It(S.$$.fragment,C),It(W.$$.fragment,C),It(be.$$.fragment,C),It(D.$$.fragment,C),It(te),It(Rt.$$.fragment,C),It(G.$$.fragment,C),It(sn.$$.fragment,C),It(an.$$.fragment,C),Lr=!0)},o(C){Kt(S.$$.fragment,C),Kt(W.$$.fragment,C),Kt(be.$$.fragment,C),Kt(D.$$.fragment,C),Kt(te),Kt(Rt.$$.fragment,C),Kt(G.$$.fragment,C),Kt(sn.$$.fragment,C),Kt(an.$$.fragment,C),Lr=!1},d(C){C&&oe(e),r[30](null),Ri(vt,C),Qt(S),Qt(W),Qt(be),Qt(D),In[N].d(),Qt(Rt),Qt(G),Qt(sn),Qt(an),dc=!1,Nt(Lh)}}}function yI(r,e,t){let n,{task:i}=e,{onSubmit:s}=e,{statusOptions:a}=e,{allTasks:o}=e,{prioritySymbols:u,startDateSymbol:l,scheduledDateSymbol:c,dueDateSymbol:d,cancelledDateSymbol:f,createdDateSymbol:m,doneDateSymbol:y}=Dr.tasksPluginEmoji.taskSerializer.symbols,g,T=Os.fromTask(i,o),E=!0,S=!0,x=!0,q=!0,W=!0,re=!0,H=!0,Y=!0,be=!0,Pe=!0,j=!1,$=[{value:"lowest",label:"Lowest",symbol:u.Lowest,accessKey:"o",accessKeyIndex:1},{value:"low",label:"Low",symbol:u.Low,accessKey:"l",accessKeyIndex:0},{value:"none",label:"Normal",symbol:u.None,accessKey:"n",accessKeyIndex:0},{value:"medium",label:"Medium",symbol:u.Medium,accessKey:"m",accessKeyIndex:0},{value:"high",label:"High",symbol:u.High,accessKey:"h",accessKeyIndex:0},{value:"highest",label:"Highest",symbol:u.Highest,accessKey:"i",accessKeyIndex:1}];Um(()=>{let{provideAccessKeys:G}=Z();t(11,be=G),t(14,j=!0),setTimeout(()=>{g.focus()},10)});let D=()=>{s([])},V=G=>{G.key==="Enter"&&(G.preventDefault(),Pe&&X())},U=()=>{setTimeout(()=>{t(3,T.description=T.description.replace(/[\r\n]+/g," "),T)},0)},X=()=>Nv(void 0,void 0,void 0,function*(){let G=yield T.applyEdits(i,o);s(G)}),p=[[]];function h(){T.description=this.value,t(3,T)}function b(G){je[G?"unshift":"push"](()=>{g=G,t(12,g)})}function _(){T.priority=this.__value,t(3,T)}function w(G){Y=G,t(10,Y)}function O(G){r.$$.not_equal(T.dueDate,G)&&(T.dueDate=G,t(3,T))}function M(G){W=G,t(7,W)}function A(G){r.$$.not_equal(T.scheduledDate,G)&&(T.scheduledDate=G,t(3,T))}function v(G){re=G,t(8,re)}function R(G){r.$$.not_equal(T.startDate,G)&&(T.startDate=G,t(3,T))}function N(G){H=G,t(9,H)}function te(){T.forwardOnly=this.checked,t(3,T)}function le(G){T=G,t(3,T)}function fe(G){r.$$.not_equal(T.createdDate,G)&&(T.createdDate=G,t(3,T))}function Ne(G){x=G,t(5,x)}function Ce(G){r.$$.not_equal(T.doneDate,G)&&(T.doneDate=G,t(3,T))}function Rt(G){q=G,t(6,q)}function nn(G){r.$$.not_equal(T.cancelledDate,G)&&(T.cancelledDate=G,t(3,T))}function Fr(G){S=G,t(4,S)}return r.$$set=G=>{"task"in G&&t(0,i=G.task),"onSubmit"in G&&t(27,s=G.onSubmit),"statusOptions"in G&&t(1,a=G.statusOptions),"allTasks"in G&&t(2,o=G.allTasks)},r.$$.update=()=>{if(r.$$.dirty[0]&2048){e:t(15,n=G=>be?G:null)}if(r.$$.dirty[0]&8){e:t(28,E=T.description.trim()!=="")}if(r.$$.dirty[0]&268437488){e:t(13,Pe=W&&Y&&re&&H&&E&&S&&x&&q)}},[i,a,o,T,S,x,q,W,re,H,Y,be,g,Pe,j,n,l,c,d,f,m,y,$,D,V,U,X,s,E,h,b,_,p,w,O,M,A,v,R,N,te,le,fe,Ne,Ce,Rt,nn,Fr]}var eh=class extends pr{constructor(e){super(),Kr(this,e,yI,gI,zr,{task:0,onSubmit:27,statusOptions:1,allTasks:2},null,[-1,-1])}},bw=eh;var zn=class extends Tw.Modal{constructor({app:t,task:n,onSubmit:i,allTasks:s}){super(t);this.task=n,this.allTasks=s,this.onSubmit=a=>{a.length&&i(a),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task"),this.modalEl.style.paddingBottom="0";let{contentEl:t}=this;this.contentEl.style.paddingBottom="0";let n=this.getKnownStatusesAndCurrentTaskStatusIfNotKnown();new bw({target:t,props:{task:this.task,statusOptions:n,onSubmit:this.onSubmit,allTasks:this.allTasks}})}getKnownStatusesAndCurrentTaskStatusIfNotKnown(){let t=De.getInstance().registeredStatuses;return De.getInstance().bySymbol(this.task.status.symbol)===ne.EMPTY&&t.push(this.task.status),t}onClose(){let{contentEl:t}=this;t.empty()}};function bI(){let{setCreatedDate:r}=Z();return r?window.moment():null}function TI(r){let{setCreatedDate:e}=Z();if(!e||r.createdDate!==null)return!1;let t=r.description==="",n=!_e.getInstance().isEmpty(),i=!_e.getInstance().includedIn(r.description);return t||n&&i}var ml=({line:r,path:e})=>{var f,m;let t=ae.parseTaskSignifiers(r,ft.fromUnknownPosition(new Ve(e)),yt.fromPath(e)),n=bI();if(t!==null)return TI(t)?new ae(he(K({},t),{createdDate:n})):t;let i=r.match(J.nonTaskRegex);if(i===null)return console.error("Tasks: Cannot create task on line:",r),new ae({status:ne.TODO,description:"",taskLocation:ft.fromUnknownPosition(new Ve(e)),indentation:"",listMarker:"-",priority:"3",createdDate:n,startDate:null,scheduledDate:null,dueDate:null,doneDate:null,cancelledDate:null,recurrence:null,dependsOn:[],id:"",blockLink:"",tags:[],originalMarkdown:"",scheduledDateIsInferred:!1});let s=i[1],a=(f=i[2])!=null?f:"-",o=(m=i[4])!=null?m:" ",u=De.getInstance().bySymbolOrCreate(o),l=i[5],c=r.match(J.blockLinkRegex),d=c!==null?c[0]:"";return d!==""&&(l=l.replace(J.blockLinkRegex,"")),new ae({status:u,description:l,taskLocation:ft.fromUnknownPosition(new Ve(e)),indentation:s,listMarker:a,blockLink:d,priority:"3",createdDate:n,startDate:null,scheduledDate:null,dueDate:null,doneDate:null,cancelledDate:null,recurrence:null,tags:[],originalMarkdown:"",scheduledDateIsInferred:!1,id:"",dependsOn:[]})};var _w=(r,e,t,n,i)=>{var f;if(r)return t instanceof th.MarkdownView;if(!(t instanceof th.MarkdownView))return;let s=(f=t.file)==null?void 0:f.path;if(s===void 0)return;let o=e.getCursor().line,u=e.getLine(o),l=ml({line:u,path:s}),c=m=>{let y=yt.removeInferredStatusIfNeeded(l,m).map(g=>g.toFileLineString()).join(`
`);e.setLine(o,y)};new zn({app:n,task:l,onSubmit:c,allTasks:i}).open()};var rh=require("obsidian");var vw=(r,e,t)=>{var u;if(r)return t instanceof rh.MarkdownView;if(!(t instanceof rh.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=nh(a,n);e.setLine(s,o.text),e.setCursor(_I(i,o))},nh=(r,e)=>{let t=ae.fromLine({line:r,taskLocation:ft.fromUnknownPosition(new Ve(e)),fallbackDate:null});if(t!==null){let n=t.toggleWithRecurrenceInUsersOrder().map(i=>i.toFileLineString());return{text:n.join(`
`),moveTo:{line:n.length-1}}}else{let n=r.match(J.taskRegex);if(n!==null){let i=n[3],a=De.getInstance().bySymbol(i).nextStatusSymbol;return{text:r.replace(J.taskRegex,`$1- [${a}] $4`)}}else if(J.listItemRegex.test(r)){let i=r.replace(J.listItemRegex,"$1$2 [ ]");return{text:i,moveTo:{ch:i.length}}}else{let i=r.replace(J.indentationRegex,"$1- ");return{text:i,moveTo:{ch:i.length}}}}},_I=(r,e)=>{var s;let t={line:0,ch:r.ch},n=K(K({},t),(s=e.moveTo)!=null?s:{}),i=e.text.split(`
`)[n.line].length;return{line:r.line+n.line,ch:Math.min(n.ch,i)}};var hl=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>_w(t,n,i,this.app,this.plugin.getTasks())}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:vw})}};var Kn=class{constructor(){this.hidePostponeButton=!1;this.hideTaskCount=!1;this.hideBacklinks=!1;this.hideEditButton=!1;this.hideUrgency=!0;this.shortMode=!1;this.explainQuery=!1}};function Ni(r,e){let t=`Error: ${r}.
The error message was:
    `,n="";return e instanceof Error?n+=e:n+="Unknown error",`${t}"${n}"`}var vI=Object.prototype.toString,xs=Array.isArray||function(e){return vI.call(e)==="[object Array]"};function sh(r){return typeof r=="function"}function wI(r){return xs(r)?"array":typeof r}function ih(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function ww(r,e){return r!=null&&typeof r=="object"&&e in r}function kI(r,e){return r!=null&&typeof r!="object"&&r.hasOwnProperty&&r.hasOwnProperty(e)}var EI=RegExp.prototype.test;function SI(r,e){return EI.call(r,e)}var OI=/\S/;function DI(r){return!SI(OI,r)}var xI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function RI(r){return String(r).replace(/[&<>"'`=\/]/g,function(t){return xI[t]})}var MI=/\s*/,CI=/\s+/,kw=/\s*=/,AI=/\s*\}/,PI=/#|\^|\/|>|\{|&|=|!/;function NI(r,e){if(!r)return[];var t=!1,n=[],i=[],s=[],a=!1,o=!1,u="",l=0;function c(){if(a&&!o)for(;s.length;)delete i[s.pop()];else s=[];a=!1,o=!1}var d,f,m;function y(Y){if(typeof Y=="string"&&(Y=Y.split(CI,2)),!xs(Y)||Y.length!==2)throw new Error("Invalid tags: "+Y);d=new RegExp(ih(Y[0])+"\\s*"),f=new RegExp("\\s*"+ih(Y[1])),m=new RegExp("\\s*"+ih("}"+Y[1]))}y(e||yr.tags);for(var g=new Mo(r),T,E,S,x,q,W;!g.eos();){if(T=g.pos,S=g.scanUntil(d),S)for(var re=0,H=S.length;re<H;++re)x=S.charAt(re),DI(x)?(s.push(i.length),u+=x):(o=!0,t=!0,u+=" "),i.push(["text",x,T,T+1]),T+=1,x===`
`&&(c(),u="",l=0,t=!1);if(!g.scan(d))break;if(a=!0,E=g.scan(PI)||"name",g.scan(MI),E==="="?(S=g.scanUntil(kw),g.scan(kw),g.scanUntil(f)):E==="{"?(S=g.scanUntil(m),g.scan(AI),g.scanUntil(f),E="&"):S=g.scanUntil(f),!g.scan(f))throw new Error("Unclosed tag at "+g.pos);if(E==">"?q=[E,S,T,g.pos,u,l,t]:q=[E,S,T,g.pos],l++,i.push(q),E==="#"||E==="^")n.push(q);else if(E==="/"){if(W=n.pop(),!W)throw new Error('Unopened section "'+S+'" at '+T);if(W[1]!==S)throw new Error('Unclosed section "'+W[1]+'" at '+T)}else E==="name"||E==="{"||E==="&"?o=!0:E==="="&&y(S)}if(c(),W=n.pop(),W)throw new Error('Unclosed section "'+W[1]+'" at '+g.pos);return FI(II(i))}function II(r){for(var e=[],t,n,i=0,s=r.length;i<s;++i)t=r[i],t&&(t[0]==="text"&&n&&n[0]==="text"?(n[1]+=t[1],n[3]=t[3]):(e.push(t),n=t));return e}function FI(r){for(var e=[],t=e,n=[],i,s,a=0,o=r.length;a<o;++a)switch(i=r[a],i[0]){case"#":case"^":t.push(i),n.push(i),t=i[4]=[];break;case"/":s=n.pop(),s[5]=i[2],t=n.length>0?n[n.length-1][4]:e;break;default:t.push(i)}return e}function Mo(r){this.string=r,this.tail=r,this.pos=0}Mo.prototype.eos=function(){return this.tail===""};Mo.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};Mo.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};function Ds(r,e){this.view=r,this.cache={".":this.view},this.parent=e}Ds.prototype.push=function(e){return new Ds(e,this)};Ds.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var i=this,s,a,o,u=!1;i;){if(e.indexOf(".")>0)for(s=i.view,a=e.split("."),o=0;s!=null&&o<a.length;)o===a.length-1&&(u=ww(s,a[o])||kI(s,a[o])),s=s[a[o++]];else s=i.view[e],u=ww(i.view,e);if(u){n=s;break}i=i.parent}t[e]=n}return sh(n)&&(n=n.call(this.view)),n};function xt(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}xt.prototype.clearCache=function(){typeof this.templateCache!="undefined"&&this.templateCache.clear()};xt.prototype.parse=function(e,t){var n=this.templateCache,i=e+":"+(t||yr.tags).join(":"),s=typeof n!="undefined",a=s?n.get(i):void 0;return a==null&&(a=NI(e,t),s&&n.set(i,a)),a};xt.prototype.render=function(e,t,n,i){var s=this.getConfigTags(i),a=this.parse(e,s),o=t instanceof Ds?t:new Ds(t,void 0);return this.renderTokens(a,o,n,e,i)};xt.prototype.renderTokens=function(e,t,n,i,s){for(var a="",o,u,l,c=0,d=e.length;c<d;++c)l=void 0,o=e[c],u=o[0],u==="#"?l=this.renderSection(o,t,n,i,s):u==="^"?l=this.renderInverted(o,t,n,i,s):u===">"?l=this.renderPartial(o,t,n,s):u==="&"?l=this.unescapedValue(o,t):u==="name"?l=this.escapedValue(o,t,s):u==="text"&&(l=this.rawValue(o)),l!==void 0&&(a+=l);return a};xt.prototype.renderSection=function(e,t,n,i,s){var a=this,o="",u=t.lookup(e[1]);function l(f){return a.render(f,t,n,s)}if(!!u){if(xs(u))for(var c=0,d=u.length;c<d;++c)o+=this.renderTokens(e[4],t.push(u[c]),n,i,s);else if(typeof u=="object"||typeof u=="string"||typeof u=="number")o+=this.renderTokens(e[4],t.push(u),n,i,s);else if(sh(u)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(t.view,i.slice(e[3],e[5]),l),u!=null&&(o+=u)}else o+=this.renderTokens(e[4],t,n,i,s);return o}};xt.prototype.renderInverted=function(e,t,n,i,s){var a=t.lookup(e[1]);if(!a||xs(a)&&a.length===0)return this.renderTokens(e[4],t,n,i,s)};xt.prototype.indentPartial=function(e,t,n){for(var i=t.replace(/[^ \t]/g,""),s=e.split(`
`),a=0;a<s.length;a++)s[a].length&&(a>0||!n)&&(s[a]=i+s[a]);return s.join(`
`)};xt.prototype.renderPartial=function(e,t,n,i){if(!!n){var s=this.getConfigTags(i),a=sh(n)?n(e[1]):n[e[1]];if(a!=null){var o=e[6],u=e[5],l=e[4],c=a;u==0&&l&&(c=this.indentPartial(a,l,o));var d=this.parse(c,s);return this.renderTokens(d,t,n,c,i)}}};xt.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n};xt.prototype.escapedValue=function(e,t,n){var i=this.getConfigEscape(n)||yr.escape,s=t.lookup(e[1]);if(s!=null)return typeof s=="number"&&i===yr.escape?String(s):i(s)};xt.prototype.rawValue=function(e){return e[1]};xt.prototype.getConfigTags=function(e){return xs(e)?e:e&&typeof e=="object"?e.tags:void 0};xt.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!xs(e))return e.escape};var yr={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(r){Ro.templateCache=r},get templateCache(){return Ro.templateCache}},Ro=new xt;yr.clearCache=function(){return Ro.clearCache()};yr.parse=function(e,t){return Ro.parse(e,t)};yr.render=function(e,t,n,i){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+wI(e)+'" was given as the first argument for mustache#render(template, view, partials)');return Ro.render(e,t,n,i)};yr.escape=RI;yr.Scanner=Mo;yr.Context=Ds;yr.Writer=xt;var ah=yr;var xw=na(Dw());function Rw(r,e){ah.escape=function(t){return t};try{return ah.render(r,(0,xw.default)(e))}catch(t){let n="";throw t instanceof Error?n=`There was an error expanding one or more placeholders.

The error message was:
    ${t.message.replace(/ > /g,".").replace("Missing Mustache data property","Unknown property")}`:n="Unknown error expanding placeholders.",n+=`

The problem is in:
    ${r}`,Error(n)}}function Mw(r){return uh(r,[])}function uh(r,e){return{query:{file:new Ve(r),allTasks:e}}}var Rs=class{constructor(e=""){this.indentation=e}explainQuery(e){if(e.error!==void 0)return this.explainError(e);let t=[];return t.push(this.explainFilters(e)),t.push(this.explainGroups(e)),t.push(this.explainSorters(e)),t.push(this.explainQueryLimits(e)),t.push(this.explainDebugSettings()),t.filter(n=>n!=="").join(`
`)}explainError(e){let t="";return t+=`Query has an error:
`,t+=e.error+`
`,t}explainFilters(e){return e.filters.length===0?this.indent(`No filters supplied. All tasks will match the query.
`):e.filters.map(n=>n.explainFilterIndented(this.indentation)).join(`
`)}explainGroups(e){let t=e.grouping.length;if(t===0)return this.indent(`No grouping instructions supplied.
`);let n="";for(let i=0;i<t;i++)n+=this.indentation+e.grouping[i].instruction+`
`;return n}explainSorters(e){let t=e.sorting.length;if(t===0)return this.indent(`No sorting instructions supplied.
`);let n="";for(let i=0;i<t;i++)n+=this.indentation+e.sorting[i].instruction+`
`;return n}explainQueryLimits(e){function t(i){let s=`At most ${i} task`;return i!==1&&(s+="s"),s}let n=[];if(e.limit!==void 0){let i=t(e.limit)+`.
`;n.push(this.indent(i))}if(e.taskGroupLimit!==void 0){let i=t(e.taskGroupLimit)+` per group (if any "group by" options are supplied).
`;n.push(this.indent(i))}return n.join(`
`)}explainDebugSettings(){let e="",{debugSettings:t}=Z();return t.ignoreSortInstructions&&(e+=this.indent(`NOTE: All sort instructions, including default sort order, are disabled, due to 'ignoreSortInstructions' setting.
`)),e}indent(e){return this.indentation+e}};var Se=class{constructor(e,t=[],n=""){this.description=e,this.symbol=n,this.children=t}static booleanAnd(e){return this.combineOrCreateExplanation("All of",e,"AND")}static booleanOr(e){return this.combineOrCreateExplanation("At least one of",e,"OR")}static booleanNot(e){return new Se("None of",e,"NOT")}static booleanXor(e){return new Se("Exactly one of",e,"XOR")}asString(e=""){if(this.children.length==0)return e+this.description;let t=e;this.symbol===""?t+=this.description:(t+=this.symbol,this.children.length>1&&(t+=` (${this.description})`),t+=":");let n=e+"  ";for(let i=0;i<this.children.length;i++)t+=`
${this.children[i].asString(n)}`;return t}static combineOrCreateExplanation(e,t,n){if(t.length===2){let i=t[0],s=t[1];if(i.symbol===n&&s.symbol==="")return i.children.push(s),i}return new Se(e,t,n)}};var Ms=class{matchesAnyOf(e){return e.some(t=>this.matches(t))}};var Cs=class extends Ms{constructor(t){super();this.stringToFind=t}matches(t){return Cs.stringIncludesCaseInsensitive(t,this.stringToFind)}static stringIncludesCaseInsensitive(t,n){return t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}explanation(t){return new Se(t)}};var Qn=class extends Ms{constructor(t){super();this.regex=t}static validateAndConstruct(t){let n=/^\/(.+)\/([^/]*)$/,i=t.match(n);if(i!==null){let s=new RegExp(i[1],i[2]);return new Qn(s)}else return null}matches(t){return t.match(this.regex)!==null}static helpMessage(){return String.raw`See https://publish.obsidian.md/tasks/Queries/Regular+Expressions

Regular expressions must look like this:
    /pattern/
or this:
    /pattern/flags

Where:
- pattern: The 'regular expression' pattern to search for.
- flags:   Optional characters that modify the search.
           i => make the search case-insensitive
           u => add Unicode support

Examples:  /^Log/
           /^Log/i
           /File Name\.md/
           /waiting|waits|waited/i
           /\d\d:\d\d/

The following characters have special meaning in the pattern:
to find them literally, you must add a \ before them:
    [\^$.|?*+()

CAUTION! Regular expression (or 'regex') searching is a powerful
but advanced feature that requires thorough knowledge in order to
use successfully, and not miss intended search results.
`}explanation(t){let i=LI(t,"using regex: ",this.regexAsString());return new Se(i)}regexAsString(){let t=`'${this.regex.source}' with `;switch(this.regex.flags.length){case 0:t+="no flags";break;case 1:t+=`flag '${this.regex.flags}'`;break;default:t+=`flags '${this.regex.flags}'`;break}return t}};function LI(r,e,t){var o;let n=r.match(/\//);if(!n)return"Error explaining instruction. Could not find a slash character";let i=2,s=((o=n.index)!=null?o:i)-i;return`${e.padEnd(s)}${t}`}var Ar=class{constructor(e,t,n,i){this.instruction=e,this.property=t,this.comparator=Ar.maybeReverse(i,n)}static maybeReverse(e,t){return e?Ar.makeReversedComparator(t):t}static makeReversedComparator(e){return(t,n,i)=>e(t,n,i)*-1}};var Xn=class{constructor(e,t,n,i){this.instruction=e,this.property=t,this.grouper=n,this.reverse=i}};var ke=class{canCreateFilterForLine(e){return ke.lineMatchesFilter(this.filterRegExp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}fieldNameSingular(){return this.fieldName()}fieldNameSingularEscaped(){return Bn(this.fieldNameSingular())}supportsSorting(){return!1}createSorterFromLine(e){if(!this.supportsSorting())return null;let t=ke.getMatch(this.sorterRegExp(),e);if(t===null)return null;let n=!!t[1];return this.createSorter(n)}sorterRegExp(){if(!this.supportsSorting())throw Error(`sorterRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^sort by ${this.fieldNameSingularEscaped()}( reverse)?`,"i")}sorterInstruction(e){let t=`sort by ${this.fieldNameSingular()}`;return e&&(t+=" reverse"),t}comparator(){throw Error(`comparator() unimplemented for ${this.fieldNameSingular()}`)}createSorter(e){return new Ar(this.sorterInstruction(e),this.fieldNameSingular(),this.comparator(),e)}createNormalSorter(){return this.createSorter(!1)}createReverseSorter(){return this.createSorter(!0)}supportsGrouping(){return!1}createGrouperFromLine(e){if(!this.supportsGrouping())return null;let t=ke.getMatch(this.grouperRegExp(),e);if(t===null)return null;let n=!!t[1];return this.createGrouper(n)}grouperRegExp(){if(!this.supportsGrouping())throw Error(`grouperRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^group by ${this.fieldNameSingularEscaped()}( reverse)?$`,"i")}grouperInstruction(e){let t=`group by ${this.fieldNameSingular()}`;return e&&(t+=" reverse"),t}grouper(){throw Error(`grouper() unimplemented for ${this.fieldNameSingular()}`)}createGrouper(e){return new Xn(this.grouperInstruction(e),this.fieldNameSingular(),this.grouper(),e)}createNormalGrouper(){return this.createGrouper(!1)}createReverseGrouper(){return this.createGrouper(!0)}};var Mn=class{constructor(e,t){this._rawInstruction=e,this._anyContinuationLinesRemoved=t.trim(),this._anyPlaceholdersExpanded=this._anyContinuationLinesRemoved}recordExpandedPlaceholders(e){this._anyPlaceholdersExpanded=e}get rawInstruction(){return this._rawInstruction}get anyContinuationLinesRemoved(){return this._anyContinuationLinesRemoved}get anyPlaceholdersExpanded(){return this._anyPlaceholdersExpanded}explainStatement(e){function t(a,o){o!==a&&(s+=` =>
${e}${o}`)}let n=this._rawInstruction.trim(),i=n.split(`
`).join(`
`+e),s=`${e}${i}`;return this._rawInstruction.includes(`
`)&&(s+=`
`+e),t(n,this._anyContinuationLinesRemoved),t(this._anyContinuationLinesRemoved,this._anyPlaceholdersExpanded),s}allLinesIdentical(){return this._rawInstruction===this._anyContinuationLinesRemoved&&this._rawInstruction===this._anyPlaceholdersExpanded}};var bt=class{constructor(e,t,n){this._statement=new Mn(e,e),this.explanation=n,this.filterFunction=t}get statement(){return this._statement}setStatement(e){this._statement=e}get instruction(){return this._statement.anyPlaceholdersExpanded}explainFilterIndented(e){let t=this._statement.explainStatement(e);return this.onlyNeedsOneLineExplanation()?`${t}
`:`${t} =>
${this.explanation.asString(e+"  ")}
`}simulateExplainFilter(){return this.onlyNeedsOneLineExplanation()?this.explanation:new Se(this.instruction+" =>",[this.explanation])}onlyNeedsOneLineExplanation(){return this.explanation.asString("")===this.instruction}};var Xr=class{constructor(e){this.instruction=e}get queryComponent(){return this._queryComponent}set queryComponent(e){this._queryComponent=e}get error(){return this._error}set error(e){this._error=e}isValid(){return this._queryComponent!==void 0}static fromObject(e,t){let n=new Xr(e);return n._queryComponent=t,n}static fromError(e,t){let n=new Xr(e);return n._error=t,n}};var ie=class{constructor(e){this.object=e}get instruction(){return this.object.instruction}get filter(){return this.object.queryComponent}isValid(){return this.object.isValid()}get error(){return this.object.error}get filterFunction(){if(this.filter)return this.filter.filterFunction}static fromFilter(e){return new ie(Xr.fromObject(e.instruction,e))}static fromError(e,t){return new ie(Xr.fromError(e,t))}};var Ie=class extends ke{createFilterOrErrorMessage(e){let t=ke.getMatch(this.filterRegExp(),e);if(t===null)return ie.fromError(e,`do not understand query filter (${this.fieldName()})`);let n=t[1].toLowerCase(),i=t[2],s=null;if(n.includes("include"))s=new Cs(i);else if(n.includes("regex")){try{s=Qn.validateAndConstruct(i)}catch(u){let l=Ni("Parsing regular expression",u)+`

${Qn.helpMessage()}`;return ie.fromError(e,l)}if(s===null)return ie.fromError(e,`Invalid instruction: '${e}'

${Qn.helpMessage()}`)}if(s===null)return ie.fromError(e,`do not understand query filter (${this.fieldName()})`);let a=n.match(/not/)!==null,o=new bt(e,this.getFilter(s,a),s.explanation(e));return ie.fromFilter(o)}fieldPattern(){return this.fieldNameSingularEscaped()}filterOperatorPattern(){return"includes|does not include|regex matches|regex does not match"}filterRegExp(){return new RegExp(`^(?:${this.fieldPattern()}) (${this.filterOperatorPattern()}) (.*)`,"i")}getFilter(e,t){return n=>{let i=e.matches(this.value(n));return t?!i:i}}comparator(){return(e,t)=>this.value(e).localeCompare(this.value(t),void 0,{numeric:!0})}grouper(){return e=>[this.value(e)]}static escapeMarkdownCharacters(e){return e.replace(/\\/g,"\\\\").replace(/_/g,"\\_")}};var Ii=class extends Ie{fieldName(){return"description"}value(e){return _e.getInstance().removeAsSubstringFrom(e.description)}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=Ii.cleanDescription(e.description),i=Ii.cleanDescription(t.description);return n.localeCompare(i,void 0,{numeric:!0})}}static cleanDescription(e){e=_e.getInstance().removeAsSubstringFrom(e);let t=/^\[\[?([^\]]*)]]?/,n=e.match(t);if(n!==null){let i=n[1];e=i.substring(i.indexOf("|")+1)+e.replace(t,"")}return e=this.replaceFormatting(e,/^\*\*([^*]+)\*\*/),e=this.replaceFormatting(e,/^\*([^*]+)\*/),e=this.replaceFormatting(e,/^==([^=]+)==/),e=this.replaceFormatting(e,/^__([^_]+)__/),e=this.replaceFormatting(e,/^_([^_]+)_/),e}static replaceFormatting(e,t){let n=e.match(t);return n!==null&&(e=n[1]+e.replace(t,"")),e}};var gl=class{findUnexpandedDateText(e){let t=["<%","YYYY-MM-DD"];for(let n of t)if(e.includes(n))return this.unexpandedDateTextMessage(n);return null}unexpandedDateTextMessage(e){return`Instruction contains unexpanded template text: "${e}" - and cannot be interpreted.

Possible causes:
- The query is an a template file, and is not intended to be searched.
- A command such as "Replace templates in the active file" needs to be run.
- The core "Daily notes" plugin is in use, and the template contained
  date calculations that it does not support.
- Some sample template text was accidentally pasted in to a tasks query,
  instead of in to a template file.

See: https://publish.obsidian.md/tasks/Advanced/Instruction+contains+unexpanded+template+text
`}};var yl=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e.toLocaleLowerCase()===this._instruction.toLocaleLowerCase()}createFilterOrErrorMessage(e){return this.canCreateFilterForLine(e)?ie.fromFilter(new bt(e,this._filter,new Se(e))):ie.fromError(e,`do not understand filter: ${e}`)}};var Ut=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new yl(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let t of this._filters){let n=t.createFilterOrErrorMessage(e);if(n.error===void 0)return n}return ie.fromError(e,`do not understand filter: ${e}`)}};var at=class extends ke{constructor(t=null){super();t!==null?this.filterInstructions=t:(this.filterInstructions=new Ut,this.filterInstructions.add(`has ${this.fieldName()} date`,n=>this.date(n)!==null),this.filterInstructions.add(`no ${this.fieldName()} date`,n=>this.date(n)===null),this.filterInstructions.add(`${this.fieldName()} date is invalid`,n=>{let i=this.date(n);return i!==null&&!i.isValid()}))}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){var f;let n=this.checkForUnexpandedTemplateText(t);if(n)return ie.fromError(t,n);let i=this.filterInstructions.createFilterOrErrorMessage(t);if(i.isValid())return i;let s=ke.getMatch(this.filterRegExp(),t);if(s===null)return ie.fromError(t,"do not understand query filter ("+this.fieldName()+" date)");let a=s[1],o=(f=s[2])==null?void 0:f.toLowerCase(),u=s[3],l=Yt.parseDateRange(u);if(!l.isValid()){let m=Yt.parseDate(a);m.isValid()&&(l=new kt(m,m))}if(!l.isValid())return ie.fromError(t,"do not understand "+this.fieldName()+" date");let c=this.buildFilterFunction(o,l),d=at.buildExplanation(this.fieldNameForExplanation(),o,this.filterResultIfFieldMissing(),l);return ie.fromFilter(new bt(t,c,d))}buildFilterFunction(t,n){let i;switch(t){case"before":i=s=>s?s.isBefore(n.start):this.filterResultIfFieldMissing();break;case"after":i=s=>s?s.isAfter(n.end):this.filterResultIfFieldMissing();break;case"on or before":case"in or before":i=s=>s?s.isSameOrBefore(n.end):this.filterResultIfFieldMissing();break;case"on or after":case"in or after":i=s=>s?s.isSameOrAfter(n.start):this.filterResultIfFieldMissing();break;default:i=s=>s?s.isSameOrAfter(n.start)&&s.isSameOrBefore(n.end):this.filterResultIfFieldMissing()}return this.getFilter(i)}getFilter(t){return n=>t(this.date(n))}filterRegExp(){return new RegExp(`^${this.fieldNameForFilterInstruction()} (((?:on|in) or before|before|(?:on|in) or after|after|on|in)? ?(.*))`,"i")}fieldNameForFilterInstruction(){return this.fieldName()}static buildExplanation(t,n,i,s){let a=n,o="YYYY-MM-DD (dddd Do MMMM YYYY)",u;switch(n){case"before":case"on or after":u=s.start.format(o);break;case"after":case"on or before":u=s.end.format(o);break;case"in or before":a="on or before",u=s.end.format(o);break;case"in or after":a="on or after",u=s.start.format(o);break;default:if(!s.start.isSame(s.end)){let c=`${t} date is between:`,d=[new Se(`${s.start.format(o)} and`),new Se(`${s.end.format(o)} inclusive`)];return i&&d.push(new Se(`OR no ${t} date`)),new Se(c,d)}a="on",u=s.start.format(o);break}let l=`${t} date is ${a} ${u}`;return i&&(l+=` OR no ${t} date`),new Se(l)}fieldNameForExplanation(){return this.fieldName()}supportsSorting(){return!0}comparator(){return(t,n)=>fr(this.date(t),this.date(n))}supportsGrouping(){return!0}grouper(){return t=>{let n=this.date(t);return n===null?["No "+this.fieldName()+" date"]:n.isValid()?[n.format("YYYY-MM-DD dddd")]:["%%0%% Invalid "+this.fieldName()+" date"]}}checkForUnexpandedTemplateText(t){return new gl().findUnexpandedDateText(t)}};var bl=class extends at{fieldName(){return"created"}date(e){return e.createdDate}filterResultIfFieldMissing(){return!1}};var Tl=class extends at{fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}};var As=class extends at{fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}};var Zr=class extends ke{constructor(){super(...arguments);this._filters=new Ut}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegExp(){return null}};var _l=class extends Zr{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};var Co=class extends Xr{};function lh(r,e){let t=r.map(([n])=>n);try{let n=e.includes("return")?e:`return ${e}`,i=e&&new Function(...t,n);return i instanceof Function?Co.fromObject(e,i):Co.fromError(e,"Error parsing group function")}catch(n){return Co.fromError(e,Ni(`Failed parsing expression "${e}"`,n))}}function ch(r,e){let t=e.map(([n,i])=>i);return r(...t)}function dh(r,e,t){try{return ch(r,e)}catch(n){return Ni(`Failed calculating expression "${t}"`,n)}}function vl(r,e){return[["task",r],["query",e?e.query:null]]}function Cw(r,e,t){let n=vl(r,t||null),i=lh(n,e);return i.error?i.error:dh(i.queryComponent,n,e)}var Ao=class{constructor(e){this.line=e,this.functionOrError=lh(vl(null,null),e)}isValid(){return this.functionOrError.isValid()}get parseError(){return this.functionOrError.error}evaluate(e,t){if(!this.isValid())throw Error(`Error: Cannot evaluate an expression which is not valid: "${this.line}" gave error: "${this.parseError}"`);return ch(this.functionOrError.queryComponent,vl(e,t||null))}evaluateOrCatch(e,t){return this.isValid()?dh(this.functionOrError.queryComponent,vl(e,t),this.line):`Error: Cannot evaluate an expression which is not valid: "${this.line}" gave error: "${this.parseError}"`}};function fh(r){if(r===null)return"null";let e=typeof r;return e==="object"?r.constructor.name:e}var wl=class extends ke{createFilterOrErrorMessage(e){let t=ke.getMatch(this.filterRegExp(),e);if(t===null)return ie.fromError(e,"Unable to parse line");let n=t[1],i=new Ao(n);return i.isValid()?ie.fromFilter(new bt(e,UI(i),new Se(e))):ie.fromError(e,i.parseError)}fieldName(){return"function"}filterRegExp(){return new RegExp(`^filter by ${this.fieldNameSingularEscaped()} (.*)`,"i")}supportsSorting(){return!0}sorterRegExp(){return new RegExp(`^sort by ${this.fieldNameSingularEscaped()}( reverse)? (.*)`,"i")}createSorterFromLine(e){let t=ke.getMatch(this.sorterRegExp(),e);if(t===null)return null;let n=!!t[1],i=t[2],s=new Ao(i);if(!s.isValid())throw new Error(s.parseError);let a=(o,u,l)=>{try{let c=l.queryContext(),d=this.validateTaskSortKey(s.evaluate(o,c)),f=this.validateTaskSortKey(s.evaluate(u,c));return this.compareTaskSortKeys(d,f)}catch(c){throw c instanceof Error&&(c.message+=`: while evaluating instruction '${e}'`),c}};return new Ar(e,this.fieldNameSingular(),a,n)}validateTaskSortKey(e){function t(n){throw new Error(`"${n}" is not a valid sort key`)}return e===void 0&&t("undefined"),Number.isNaN(e)&&t("NaN (Not a Number)"),Array.isArray(e)&&t("array"),e}compareTaskSortKeys(e,t){let n=fh(e),i=fh(t),s=this.compareTaskSortKeysIfOptionalMoment(e,t,n,i);if(s!==void 0)return s;let a=this.compareTaskSortKeysIfEitherIsNull(e,t);if(a!==void 0)return a;if(n!==i)throw new Error(`Unable to compare two different sort key types '${n}' and '${i}' order`);if(n==="string")return e.localeCompare(t,void 0,{numeric:!0});if(n==="TasksDate")return fr(e.moment,t.moment);if(n==="boolean")return Number(t)-Number(e);let o=Number(e)-Number(t);if(isNaN(o))throw new Error(`Unable to determine sort order for sort key types '${n}' and '${i}'`);return o}compareTaskSortKeysIfOptionalMoment(e,t,n,i){let s=n==="Moment",a=i==="Moment";if(s&&a||s&&t===null||a&&e===null)return fr(e,t)}compareTaskSortKeysIfEitherIsNull(e,t){if(e===null&&t===null)return 0;if(e===null&&t!==null)return-1;if(e!==null&&t===null)return 1}supportsGrouping(){return!0}createGrouperFromLine(e){let t=ke.getMatch(this.grouperRegExp(),e);if(t===null)return null;let n=!!t[1],i=t[2];return new Xn(e,"function",qI(i),n)}grouperRegExp(){return new RegExp(`^group by ${this.fieldNameSingularEscaped()}( reverse)? (.*)`,"i")}grouper(){throw Error("grouper() function not valid for FunctionField. Use createGrouperFromLine() instead.")}};function UI(r){return(e,t)=>{let n=t.queryContext();return WI(r,e,n)}}function WI(r,e,t){let n=r.evaluate(e,t);if(typeof n=="boolean")return n;throw Error(`filtering function must return true or false. This returned "${n}".`)}function qI(r){return(e,t)=>{let n=t.queryContext();return $I(e,r,n)}}function $I(r,e,t){try{let n=Cw(r,e,t);return Array.isArray(n)?n.map(s=>s.toString()):n===null?[]:[n.toString()]}catch(n){let i=`Error: Failed calculating expression "${e}". The error message was: `;return n instanceof Error?[i+n.message]:[i+"Unknown error"]}}var kl=class extends Ie{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}};var Ps=class extends Ie{fieldName(){return"path"}value(e){return e.path}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>[Ie.escapeMarkdownCharacters(e.path.replace(".md",""))]}};var ph=class extends ke{createFilterOrErrorMessage(e){var n;let t=ke.getMatch(this.filterRegExp(),e);if(t!==null){let i=t[5],s=null;switch(i.toLowerCase()){case"lowest":s="5";break;case"low":s="4";break;case"none":s="3";break;case"medium":s="2";break;case"high":s="1";break;case"highest":s="0";break}if(s===null)return ie.fromError(e,"do not understand priority");let a=e,o;switch((n=t[3])==null?void 0:n.toLowerCase()){case"above":o=u=>u.priority.localeCompare(s)<0;break;case"below":o=u=>u.priority.localeCompare(s)>0;break;case"not":o=u=>u.priority!==s;break;default:o=u=>u.priority===s,a=`${this.fieldName()} is ${i}`}return ie.fromFilter(new bt(e,o,new Se(a)))}else return ie.fromError(e,"do not understand query filter (priority)")}fieldName(){return"priority"}filterRegExp(){return ph.priorityRegexp}supportsSorting(){return!0}comparator(){return(e,t)=>e.priority.localeCompare(t.priority)}supportsGrouping(){return!0}grouper(){return e=>[e.priorityNameGroupText]}},Fi=ph;Fi.priorityRegexp=/^priority(\s+is)?(\s+(above|below|not))?(\s+(lowest|low|none|medium|high|highest))$/i;var El=class extends at{fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}};var Sl=class extends at{fieldName(){return"start"}fieldNameForFilterInstruction(){return"starts"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}};var Ol=class extends at{constructor(){let e=new Ut;e.add("has happens date",t=>this.dates(t).some(n=>n!==null)),e.add("no happens date",t=>!this.dates(t).some(n=>n!==null)),super(e)}fieldName(){return"happens"}fieldNameForExplanation(){return"due, start or scheduled"}date(e){return this.earliestDate(e)}dates(e){return e.happensDates}earliestDate(e){return e.happens.moment}filterResultIfFieldMissing(){return!1}getFilter(e){return t=>this.dates(t).some(n=>e(n))}};var Dl=class extends Zr{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}supportsSorting(){return!0}comparator(){return(e,t)=>e.recurrence!==null&&t.recurrence===null?-1:e.recurrence===null&&t.recurrence!==null?1:0}supportsGrouping(){return!0}grouper(){return e=>e.recurrence!==null?["Recurring"]:["Not Recurring"]}};var Zn=class extends Zr{constructor(){super(),this._filters.add("done",e=>e.isDone),this._filters.add("not done",e=>!e.isDone)}fieldName(){return"status"}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=Zn.oldStatusName(e),i=Zn.oldStatusName(t);return n<i?1:n>i?-1:0}}static oldStatusName(e){return e.status.symbol===" "?"Todo":"Done"}supportsGrouping(){return!0}grouper(){return e=>[Zn.oldStatusName(e)]}};var xl=class extends Ie{fieldNamePlural(){return this.fieldNameSingular()+"s"}fieldName(){return`${this.fieldNameSingular()}/${this.fieldNamePlural()}`}fieldPattern(){return`${this.fieldNameSingular()}|${this.fieldNamePlural()}`}filterOperatorPattern(){return`${super.filterOperatorPattern()}|include|do not include`}value(e){return this.values(e).join(", ")}getFilter(e,t){return n=>{let i=e.matchesAnyOf(this.values(n));return t?!i:i}}createGrouper(e){return new Xn(this.grouperInstruction(e),this.fieldNamePlural(),this.grouper(),e)}grouperRegExp(){if(!this.supportsGrouping())throw Error(`grouperRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^group by ${this.fieldNamePlural()}( reverse)?$`,"i")}grouperInstruction(e){let t=`group by ${this.fieldNamePlural()}`;return e&&(t+=" reverse"),t}};var Li=class extends xl{constructor(){super();this.filterInstructions=new Ut,this.filterInstructions.add(`has ${this.fieldNameSingular()}`,t=>this.values(t).length>0),this.filterInstructions.add(`has ${this.fieldNamePlural()}`,t=>this.values(t).length>0),this.filterInstructions.add(`no ${this.fieldNameSingular()}`,t=>this.values(t).length===0),this.filterInstructions.add(`no ${this.fieldNamePlural()}`,t=>this.values(t).length===0)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);return n.isValid()?n:super.createFilterOrErrorMessage(t)}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}fieldNameSingular(){return"tag"}values(t){return t.tags}supportsSorting(){return!0}createSorterFromLine(t){let n=t.match(this.sorterRegExp());if(n===null)return null;let i=!!n[1],s=isNaN(+n[2])?1:+n[2],a=Li.makeCompareByTagComparator(s);return new Ar(t,this.fieldNameSingular(),a,i)}sorterRegExp(){return/^sort by tag( reverse)?[\s]*(\d+)?/i}comparator(){return Li.makeCompareByTagComparator(1)}static makeCompareByTagComparator(t){return(n,i)=>{if(n.tags.length===0&&i.tags.length===0)return 0;if(n.tags.length===0)return 1;if(i.tags.length===0)return-1;let s=t-1;if(n.tags.length<t&&i.tags.length>=t)return 1;if(i.tags.length<t&&n.tags.length>=t)return-1;if(n.tags.length<t&&i.tags.length<t)return 0;let a=n.tags[s],o=i.tags[s];return a.localeCompare(o,void 0,{numeric:!0})}}supportsGrouping(){return!0}grouper(){return t=>t.tags.length==0?["(No tags)"]:t.tags}};var Bw=na(Yw());function Jn(r){return new RegExp("["+Bn(r)+"]").source}var kh=[["(",")"],["[","]"],["{","}"],['"','"']],An=class{constructor(e,t,n){this.openFilterChars=e,this.closeFilterChars=t,this.openAndCloseFilterChars=n,this.openFilter=Jn(this.openFilterChars),this.closeFilter=Jn(this.closeFilterChars)}static allSupportedDelimiters(){let e="",t="",n="";for(let[i,s]of kh)e+=i,t+=s,n+=An.openAndClosing(i,s);return new An(e,t,n)}static fromInstructionLine(e){let t=e.trim(),i=/^[A-Z ]*\s*(.*)/.exec(t);if(i){let a=i[1],o=a[0],u=a.slice(-1);for(let[l,c]of kh)if(o===l&&u===c){let d=this.openAndClosing(l,c);return new An(l,c,d)}}let s="All filters in a Boolean instruction must be inside one of these pairs of delimiter characters: "+kh.map(([a,o])=>a+"..."+o).join(" or ")+". Combinations of those delimiters are no longer supported.";throw new Error(s)}static openAndClosing(e,t){let n=e;return t!=e&&(n+=t),n}};var ei=class{static preprocessExpression(e,t){let n=ei.splitLine(e,t);return ei.getFiltersAndSimplifiedLine(n,t)}static splitLine(e,t){let n=new RegExp("("+t.closeFilter+"\\s*(?:AND|OR|AND +NOT|OR +NOT|XOR)\\s*"+t.openFilter+")"),i=e.split(n),s=new RegExp("(NOT\\s*"+t.openFilter+")"),a=i.flatMap(l=>l.split(s)).filter(l=>l!==""),o=new RegExp("(^"+Jn(t.openFilterChars+" ")+"*)"),u=new RegExp("("+Jn(t.closeFilterChars+" ")+"*$)");return a.flatMap(l=>l.split(o)).flatMap(l=>l.split(u)).filter(l=>l!=="")}static getFiltersAndSimplifiedLine(e,t){let n="",i=1,s={};e.forEach(l=>{if(!ei.isAFilter(l,t))n+=`${l}`;else{let c=`f${i}`;s[c]=l,n+=c,i++}});let a=new RegExp(`(${t.closeFilter})([A-Z])`,"g");n=n.replace(a,"$1 $2");let o=new RegExp(`([A-Z])(${t.openFilter})`,"g");n=n.replace(o,"$1 $2");let u=t.openFilterChars;if(u!='"'&&u!="("){let l=new RegExp(Jn(u),"g");n=n.replace(l,"(");let c=t.closeFilterChars,d=new RegExp(Jn(c),"g");n=n.replace(d,")")}return{simplifiedLine:n,filters:s}}static isAFilter(e,t){let n=new RegExp("^"+Jn(" "+t.openAndCloseFilterChars)+"+$"),i=new RegExp("^ *"+t.closeFilter+" *(AND|OR|XOR) *"+t.openFilter+" *$"),s=new RegExp("^(AND|OR|XOR|NOT) *"+t.openFilter+"$"),a=new RegExp("^"+t.closeFilter+" *(AND|OR|XOR)$");return![n,i,s,a,/^(AND|OR|XOR|NOT)$/].some(u=>RegExp(u).exec(e))}};var Pl=class extends ke{constructor(){super();this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={};let t=An.allSupportedDelimiters();this.basicBooleanRegexp=new RegExp("(.*(AND|OR|XOR|NOT)\\s*"+t.openFilter+".*|"+t.openFilter+".+"+t.closeFilter+")","g")}filterRegExp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){if(t.length===0)return ie.fromError(t,"empty line");let n;try{n=An.fromInstructionLine(t)}catch(o){let u=o instanceof Error?o.message:"unknown error type";return ie.fromError(t,this.helpMessageFromSimpleError(t,u))}let i=ei.preprocessExpression(t,n),s=i.simplifiedLine,a=i.filters;try{let o=(0,Bw.parse)(s);for(let c of o)if(c.name==="IDENTIFIER"&&c.value){let d=c.value.trim(),f=a[d];if(c.value=f,!(f in this.subFields)){let m=No(f);if(m===null)return this.helpMessage(t,`couldn't parse sub-expression '${f}'`,i);if(m.error)return this.helpMessage(t,`couldn't parse sub-expression '${f}': ${m.error}`,i);m.filter&&(this.subFields[f]=m.filter)}}else if(c.name==="OPERATOR"){if(c.value==null)return this.helpMessage(t,"empty operator in boolean query",i);if(!this.supportedOperators.includes(c.value))return this.helpMessage(t,`unknown boolean operator '${c.value}'`,i)}let u=(c,d)=>this.filterTaskWithParsedQuery(c,o,d),l=this.constructExplanation(o);return ie.fromFilter(new bt(t,u,l))}catch(o){let u=o instanceof Error?o.message:"unknown error type";return this.helpMessage(t,`malformed boolean query -- ${u} (check the documentation for guidelines)`,i)}}filterTaskWithParsedQuery(t,n,i){let s=u=>u==="true",a=u=>u?"true":"false",o=[];for(let u of n)if(u.name==="IDENTIFIER"){if(u.value==null)throw Error("null token value");let c=this.subFields[u.value.trim()].filterFunction(t,i);o.push(a(c))}else if(u.name==="OPERATOR")if(u.value==="NOT"){let l=s(o.pop());o.push(a(!l))}else if(u.value==="OR"){let l=s(o.pop()),c=s(o.pop());o.push(a(l||c))}else if(u.value==="AND"){let l=s(o.pop()),c=s(o.pop());o.push(a(l&&c))}else if(u.value==="XOR"){let l=s(o.pop()),c=s(o.pop());o.push(a(l&&!c||!l&&c))}else throw Error("Unsupported operator: "+u.value);else throw Error("Unsupported token type: "+u);return s(o[0])}constructExplanation(t){let n=[];for(let i of t)if(i.name==="IDENTIFIER")this.explainExpression(i,n);else if(i.name==="OPERATOR")this.explainOperator(i,n);else throw Error("Unsupported token type: "+i.name);return n[0]}explainExpression(t,n){if(t.value==null)throw Error("null token value");let i=this.subFields[t.value.trim()],s=this.simulateExplainFilter(i);n.push(s)}simulateExplainFilter(t){return t.simulateExplainFilter()}explainOperator(t,n){if(t.value==="NOT"){let i=n.pop();n.push(Se.booleanNot([i]))}else if(t.value==="OR"){let i=n.pop(),s=n.pop();n.push(Se.booleanOr([s,i]))}else if(t.value==="AND"){let i=n.pop(),s=n.pop();n.push(Se.booleanAnd([s,i]))}else if(t.value==="XOR"){let i=n.pop(),s=n.pop();n.push(Se.booleanXor([s,i]))}else throw Error("Unsupported operator: "+t.value)}helpMessage(t,n,i){let s=i.filters,a=this.stringifySubExpressionsForErrorMessage(s),u=`${this.helpMessageFromSimpleError(t,n)}

The instruction was converted to the following simplified line:
    ${i.simplifiedLine}

Where the sub-expressions in the simplified line are:
${a}

For help, see:
    https://publish.obsidian.md/tasks/Queries/Combining+Filters
`;return ie.fromError(t,u)}stringifySubExpressionsForErrorMessage(t){return Object.entries(t).map(([n,i])=>`    '${n}': '${i}'
        => ${this.stringifySubExpressionStatus(i)}`).join(`
`)}stringifySubExpressionStatus(t){let n=No(t);return n?n.error?`ERROR:
           ${n.error.split(`
`).map(s=>s.trim()).join(`
           `)}`:"OK":`ERROR:
           do not understand query`}helpMessageFromSimpleError(t,n){return`Could not interpret the following instruction as a Boolean combination:
    ${t}

The error message is:
    ${n}`}};var Nl=class extends Ie{fieldName(){return"filename"}value(e){let t=e.filename;return t===null?"":t+".md"}supportsSorting(){return!0}supportsGrouping(){return!0}grouper(){return e=>{let t=e.filename;return t===null?["Unknown Location"]:["[["+t+"]]"]}}};var $s=class extends ke{canCreateFilterForLine(e){return!1}createFilterOrErrorMessage(e){return ie.fromError(e,"Filtering by urgency is not yet supported")}fieldName(){return"urgency"}filterRegExp(){throw Error(`filterRegExp() unimplemented for ${this.fieldName()}`)}supportsSorting(){return!0}comparator(){return(e,t)=>t.urgency-e.urgency}supportsGrouping(){return!0}grouper(){return e=>[`${e.urgency.toFixed(2)}`]}createGrouper(e){return super.createGrouper(!e)}grouperInstruction(e){return super.grouperInstruction(!e)}};var Il=class extends Ie{constructor(){super()}fieldName(){return"status.name"}value(e){return e.status.name}supportsSorting(){return!0}supportsGrouping(){return!0}};var rn=class extends ke{canCreateFilterForLine(e){let t=new RegExp(`^(?:${this.fieldNameSingularEscaped()})`,"i");return ke.lineMatchesFilter(t,e)}createFilterOrErrorMessage(e){let t=ke.getMatch(this.filterRegExp(),e);if(t===null)return this.helpMessage(e);let n=t[1].toLowerCase(),i=t[2],s=zt[i.toUpperCase()];if(!s)return this.helpMessage(e);let a;switch(n){case"is":a=o=>o.status.type===s;break;case"is not":a=o=>o.status.type!==s;break;default:return this.helpMessage(e)}return ie.fromFilter(new bt(e,a,new Se(e)))}filterRegExp(){return new RegExp(`^(?:${this.fieldNameSingularEscaped()}) (is|is not) ([^ ]+)$`,"i")}helpMessage(e){let t=Object.values(zt).filter(i=>i!=="EMPTY").join(" "),n=`Invalid ${this.fieldNameSingular()} instruction: '${e}'.
    Allowed options: 'is' and 'is not' (without quotes).
    Allowed values:  ${t}
                     Note: values are case-insensitive,
                           so 'in_progress' works too, for example.
    Example:         ${this.fieldNameSingular()} is not NON_TASK`;return ie.fromError(e,n)}fieldName(){return"status.type"}value(e){return e.status.type}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=rn.groupName(e),i=rn.groupName(t);return n.localeCompare(i,void 0,{numeric:!0})}}supportsGrouping(){return!0}grouper(){return e=>[rn.groupName(e)]}static groupName(e){return e.status.typeGroupText}};var Fl=class extends Ie{fieldName(){return"recurrence"}value(e){return e.recurrence!==null?e.recurrence.toText():""}supportsGrouping(){return!0}grouper(){return e=>e.recurrence!==null?[e.recurrence.toText()]:["None"]}};var Ll=class extends Ie{fieldName(){return"folder"}value(e){return e.file.folder}supportsGrouping(){return!0}grouper(){return e=>[Ie.escapeMarkdownCharacters(this.value(e))]}};var Ul=class extends Ie{fieldName(){return"root"}value(e){return e.file.root}supportsGrouping(){return!0}grouper(){return e=>[Ie.escapeMarkdownCharacters(this.value(e))]}};var Wl=class extends Ie{fieldName(){return"backlink"}value(e){let t=e.getLinkText({isFilenameUnique:!0});return t===null?"Unknown Location":t}createFilterOrErrorMessage(e){return ie.fromError(e,"backlink field does not support filtering")}canCreateFilterForLine(e){return!1}supportsGrouping(){return!0}grouper(){return e=>{let t=e.filename;if(t===null)return["Unknown Location"];let n=e.precedingHeader;return n===null?["[["+t+"]]"]:[`[[${t}#${n}|${t} > ${n}]]`]}}};var ql=class extends at{fieldName(){return"cancelled"}date(e){return e.cancelledDate}filterResultIfFieldMissing(){return!1}};var $l=class extends Zr{constructor(){super(),this._filters.add("is blocking",(e,t)=>e.isBlocking(t.allTasks)),this._filters.add("is not blocking",(e,t)=>!e.isBlocking(t.allTasks)),this._filters.add("is blocked",(e,t)=>e.isBlocked(t.allTasks)),this._filters.add("is not blocked",(e,t)=>!e.isBlocked(t.allTasks))}fieldName(){return"blocking"}};var jl=class extends Ie{constructor(){super();this.filterInstructions=new Ut;this.filterInstructions.add("has id",t=>t.id.length>0),this.filterInstructions.add("no id",t=>t.id.length===0)}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);return n.isValid()?n:super.createFilterOrErrorMessage(t)}fieldName(){return"id"}value(t){return t.id}supportsSorting(){return!0}supportsGrouping(){return!0}};var Gl=class extends ke{constructor(){super();this.filterInstructions=new Ut;this.filterInstructions.add("has depends on",t=>t.dependsOn.length>0),this.filterInstructions.add("no depends on",t=>t.dependsOn.length===0)}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);return n.isValid()?n:ie.fromError(t,"Unknown instruction")}fieldName(){return"blocked by"}filterRegExp(){return null}};var Eh=[()=>new Il,()=>new rn,()=>new Zn,()=>new Dl,()=>new Fi,()=>new Ol,()=>new ql,()=>new bl,()=>new Sl,()=>new El,()=>new As,()=>new Tl,()=>new Ps,()=>new Ll,()=>new Ul,()=>new Wl,()=>new Ii,()=>new Li,()=>new kl,()=>new _l,()=>new Nl,()=>new $s,()=>new Fl,()=>new wl,()=>new jl,()=>new Gl,()=>new $l,()=>new Pl];function No(r){for(let e of Eh){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}function Hw(r){let e=/^sort by /i;if(r.match(e)===null)return null;for(let t of Eh){let i=t().createSorterFromLine(r);if(i)return i}return null}function Vw(r){let e=/^group by /i;if(r.match(e)===null)return null;for(let t of Eh){let i=t().createGrouperFromLine(r);if(i)return i}return null}var Yl=class{constructor(e,t,n){this.nestingLevel=e,this.displayName=t,this.property=n}};var Bl=class{constructor(e,t){this.lastHeadingAtLevel=new Array;this.groupers=t;let i=e.keys().next().value.length;for(let s=0;s<i;s++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new Yl(n,i,this.groupers[n].property));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var Hl=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var Vl=class extends Hl{},zl=class{constructor(e,t,n){this.root=new Vl(t),this.buildGroupingTree(e,n)}buildGroupingTree(e,t){let n=[this.root];for(let i of e){let s=[];for(let a of n)for(let o of a.values){let u=i.grouper(o,t);u.length===0&&u.push("");for(let l of u){let c=a.children.get(l);c===void 0&&(c=new Vl([]),a.children.set(l,c),s.push(c)),c.values.push(o)}}n=s}}generateTaskTreeStorage(){return this.root.generateAllPaths()}};var Kl=class{constructor(e,t){this.groups=e,this.groupHeadings=[],this.tasks=t}setGroupHeadings(e){for(let t of e)this.groupHeadings.push(t)}applyTaskLimit(e){this.tasks=this.tasks.slice(0,e)}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} [${t.property}] ${t.displayName}
`;return e+=this.tasksAsStringOfLines(),e}};var js=class{constructor(e,t,n){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length,this._groupers=e;let s=new zl(e,t,n).generateTaskTreeStorage();this.addTaskGroups(s),this.sortTaskGroups(),this.setGroupsHeadings(s)}get groupers(){return this._groupers}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";e+=`Groupers (if any):
`;for(let n of this._groupers){let i=n.reverse?" reverse":"";e+=`- ${n.property}${i}
`}for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTaskGroups(e){for(let[t,n]of e){let i=new Kl(t,n);this.addTaskGroup(i)}}addTaskGroup(e){this._groups.push(e)}sortTaskGroups(){let e=(t,n)=>{let i=t.groups,s=n.groups;for(let a=0;a<i.length;a++){let o=this._groupers[a],u=i[a].localeCompare(s[a],void 0,{numeric:!0});if(u!==0)return o.reverse?-u:u}return 0};this._groups.sort(e)}setGroupsHeadings(e){let t=new Bl(e,this._groupers);for(let n of this._groups)n.setGroupHeadings(t.getHeadingsForTaskGroup(n.groups))}applyTaskLimit(e){this._groupers.length!==0&&(this._groups.forEach(t=>{t.applyTaskLimit(e)}),this.recalculateTotalTaskCount())}recalculateTotalTaskCount(){let e=[];this._groups.forEach(n=>{e=[...e,...n.tasks]});let t=[...new Set(e)];this._totalTaskCount=t.length}};var ti=class{constructor(e,t){this.queryPath=e,this.allTasks=[...t]}static fromAllTasks(e){return new ti(void 0,e)}queryContext(){return this.queryPath?uh(this.queryPath,this.allTasks):void 0}};function zw(r){return`task${r!==1?"s":""}`}var qi=class{constructor(e,t){this.totalTasksCountBeforeLimit=0;this._searchErrorMessage=void 0;this.taskGroups=e,this.totalTasksCountBeforeLimit=t}get searchErrorMessage(){return this._searchErrorMessage}set searchErrorMessage(e){this._searchErrorMessage=e}get totalTasksCount(){return this.taskGroups.totalTasksCount()}totalTasksCountDisplayText(){let e=this.totalTasksCount,t=this.totalTasksCountBeforeLimit;return e===t?`${e} ${zw(e)}`:`${e} of ${t} ${zw(t)}`}get groups(){return this.taskGroups.groups}static fromError(e){let t=new qi(new js([],[],ti.fromAllTasks([])),0);return t._searchErrorMessage=e,t}};function Kw(r){return r.endsWith("\\")}function Qw(r){return r.endsWith("\\\\")}function mF(r){return r.replace(/^[ \t]*/,"")}function hF(r){return r.replace(/[ \t]*\\$/,"")}function gF(r,e){let t=r;return e&&(t=mF(r)),Qw(t)?t=t.slice(0,-1):Kw(r)&&(t=hF(t)),t}function Xw(r){let e=[],t=!1,n="",i="";for(let s of r.split(`
`)){let a=gF(s,t);t?(n+=`
`+s,i+=" "+a):(n=s,i=a),Qw(s)?t=!1:t=Kw(s),t||(i.trim()!==""&&e.push(new Mn(n,i)),n="",i="")}return e}var Gs=class{static by(e,t,n){let i=this.defaultSorters().map(a=>a.comparator),s=[];for(let a of e)s.push(a.comparator);return t.sort(Gs.makeCompositeComparator([...s,...i],n))}static defaultSorters(){return[new rn().createNormalSorter(),new $s().createNormalSorter(),new As().createNormalSorter(),new Fi().createNormalSorter(),new Ps().createNormalSorter()]}static makeCompositeComparator(e,t){return(n,i)=>{for(let s of e){let a=s(n,i,t);if(a!==0)return a}return 0}}};var Pn=class{constructor(e,t=void 0){this._limit=void 0;this._taskGroupLimit=void 0;this._taskLayoutOptions=new Br;this._queryLayoutOptions=new Kn;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this._ignoreGlobalQuery=!1;this.hideOptionsRegexp=/^(hide|show) (task count|backlink|priority|cancelled date|created date|start date|scheduled date|done date|due date|recurrence rule|edit button|postpone button|urgency|tags|depends on|id)/i;this.shortModeRegexp=/^short/i;this.fullModeRegexp=/^full/i;this.explainQueryRegexp=/^explain/i;this.ignoreGlobalQueryRegexp=/^ignore global query/i;this.logger=St.getLogger("tasks.Query");this._queryId="";this.limitRegexp=/^limit (groups )?(to )?(\d+)( tasks?)?/i;this.commentRegexp=/^#.*/;this._queryId=this.generateQueryId(10),this.source=e,this.filePath=t,this.debug(`Creating query: ${this.formatQueryForLogging()}`),Xw(e).forEach(n=>{let i=this.expandPlaceholders(n,t);if(this.error===void 0)try{this.parseLine(i,n)}catch(s){let a;s instanceof Error?a=s.message:a="Unknown error",this.setError(a,n);return}})}get queryId(){return this._queryId}parseLine(e,t){switch(!0){case this.shortModeRegexp.test(e):this._queryLayoutOptions.shortMode=!0;break;case this.fullModeRegexp.test(e):this._queryLayoutOptions.shortMode=!1;break;case this.explainQueryRegexp.test(e):this._queryLayoutOptions.explainQuery=!0;break;case this.ignoreGlobalQueryRegexp.test(e):this._ignoreGlobalQuery=!0;break;case this.limitRegexp.test(e):this.parseLimit(e);break;case this.parseSortBy(e):break;case this.parseGroupBy(e):break;case this.hideOptionsRegexp.test(e):this.parseHideOptions(e);break;case this.commentRegexp.test(e):break;case this.parseFilter(e,t):break;default:this.setError("do not understand query",t)}}formatQueryForLogging(){return`[${this.source.split(`
`).join(" ; ")}]`}expandPlaceholders(e,t){let n=e.anyContinuationLinesRemoved;if(n.includes("{{")&&n.includes("}}")&&this.filePath===void 0)return this._error=`The query looks like it contains a placeholder, with "{{" and "}}"
but no file path has been supplied, so cannot expand placeholder values.
The query is:
${n}`,n;let i=n;if(t){let s=Mw(t);try{i=Rw(n,s)}catch(a){return a instanceof Error?this._error=a.message:this._error="Internal error. expandPlaceholders() threw something other than Error.",n}}return e.recordExpandedPlaceholders(i),i}append(e){return this.source===""?e:e.source===""?this:new Pn(`${this.source}
${e.source}`,this.filePath)}explainQuery(){return new Rs().explainQuery(this)}get limit(){return this._limit}get taskGroupLimit(){return this._taskGroupLimit}get taskLayoutOptions(){return this._taskLayoutOptions}get queryLayoutOptions(){return this._queryLayoutOptions}get filters(){return this._filters}addFilter(e){this._filters.push(e)}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}setError(e,t){t.allLinesIdentical()?this._error=`${e}
Problem line: "${t.rawInstruction}"`:this._error=`${e}
Problem statement:
${t.explainStatement("    ")}
`}get ignoreGlobalQuery(){return this._ignoreGlobalQuery}applyQueryToTasks(e){this.debug(`Executing query: ${this.formatQueryForLogging()}`);let t=new ti(this.filePath,e);try{this.filters.forEach(o=>{e=e.filter(u=>o.filterFunction(u,t))});let{debugSettings:n}=Z(),i=n.ignoreSortInstructions?e:Gs.by(this.sorting,e,t),s=i.slice(0,this.limit),a=new js(this.grouping,s,t);return this._taskGroupLimit!==void 0&&a.applyTaskLimit(this._taskGroupLimit),new qi(a,i.length)}catch(n){let i="Search failed";return qi.fromError(Ni(i,n))}}parseHideOptions(e){let t=e.match(this.hideOptionsRegexp);if(t!==null){let n=t[1].toLowerCase()==="hide";switch(t[2].toLowerCase()){case"task count":this._queryLayoutOptions.hideTaskCount=n;break;case"backlink":this._queryLayoutOptions.hideBacklinks=n;break;case"postpone button":this._queryLayoutOptions.hidePostponeButton=n;break;case"priority":this._taskLayoutOptions.setVisibility("priority",!n);break;case"cancelled date":this._taskLayoutOptions.setVisibility("cancelledDate",!n);break;case"created date":this._taskLayoutOptions.setVisibility("createdDate",!n);break;case"start date":this._taskLayoutOptions.setVisibility("startDate",!n);break;case"scheduled date":this._taskLayoutOptions.setVisibility("scheduledDate",!n);break;case"due date":this._taskLayoutOptions.setVisibility("dueDate",!n);break;case"done date":this._taskLayoutOptions.setVisibility("doneDate",!n);break;case"recurrence rule":this._taskLayoutOptions.setVisibility("recurrenceRule",!n);break;case"edit button":this._queryLayoutOptions.hideEditButton=n;break;case"urgency":this._queryLayoutOptions.hideUrgency=n;break;case"tags":this._taskLayoutOptions.setTagsVisibility(!n);break;case"id":this._taskLayoutOptions.setVisibility("id",!n);break;case"depends on":this._taskLayoutOptions.setVisibility("dependsOn",!n);break;default:this.setError("do not understand hide/show option",new Mn(e,e))}}}parseFilter(e,t){var i;let n=No(e);return n!=null?(n.filter?(n.filter.setStatement(t),this._filters.push(n.filter)):this.setError((i=n.error)!=null?i:"Unknown error",t),!0):!1}parseLimit(e){let t=e.match(this.limitRegexp);if(t===null){this.setError("do not understand query limit",new Mn(e,e));return}let n=Number.parseInt(t[3],10);t[1]!==void 0?this._taskGroupLimit=n:this._limit=n}parseSortBy(e){let t=Hw(e);return t?(this._sorting.push(t),!0):!1}parseGroupBy(e){let t=Vw(e);return t?(this._grouping.push(t),!0):!1}generateQueryId(e){let t="AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz1234567890";return Array.from({length:e},()=>t[Math.floor(Math.random()*t.length)]).join("")}debug(e,t){this.logger.debugWithId(this._queryId,`"${this.filePath}": ${e}`,t)}};var ri=class{constructor(e=ri.empty){this._source=e}static getInstance(){return ri.instance||(ri.instance=new ri),ri.instance}set(e){this._source=e}query(e=void 0){return new Pn(this._source,e)}hasInstructions(){return this._source.trim()!==ri.empty}},Tr=ri;Tr.empty="";var Ql=class{constructor({obsidianEvents:e}){this.logger=St.getLogger("tasks.Events");this.obsidianEvents=e}onCacheUpdate(e){return this.logger.debug("TasksEvents.onCacheUpdate()"),this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.logger.debug("TasksEvents.triggerCacheUpdate()"),this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.logger.debug("TasksEvents.onRequestCacheUpdate()"),this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.logger.debug("TasksEvents.triggerRequestCacheUpdate()"),this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.logger.debug("TasksEvents.off()"),this.obsidianEvents.offref(e)}};var tk=require("obsidian");var ek=require("obsidian");var Sh=class{constructor(e){this.newStatus=e}apply(e){return this.isCheckedForTask(e)?[e]:e.handleNewStatusWithRecurrenceInUsersOrder(this.newStatus)}instructionDisplayName(){return`Change status to: [${this.newStatus.symbol}] ${this.newStatus.name}`}isCheckedForTask(e){return this.newStatus.symbol===e.status.symbol}};function Zw(r){let e=[],t=new Le().coreStatuses.map(n=>n.symbol);for(let n of[!0,!1])for(let i of r.registeredStatuses)t.includes(i.symbol)===n&&e.push(new Sh(i));return e}var Jw=require("obsidian");function Io(r,e){return P(this,null,function*(){yield gr({originalTask:r,newTasks:e})})}var Ys=class extends Jw.Menu{constructor(t){super();this.taskSaver=t}addItemsForInstructions(t,n){for(let i of t)this.addItemForInstruction(n,i)}addItemForInstruction(t,n){this.addItem(i=>this.getMenuItemCallback(t,i,n))}getMenuItemCallback(t,n,i){n.setTitle(i.instructionDisplayName()).setChecked(i.isCheckedForTask(t)).onClick(()=>P(this,null,function*(){let s=i.apply(t);(s.length!==1||!Object.is(s[0],t))&&(yield this.taskSaver(t,s))}))}};var Xl=class extends Ys{constructor(e,t,n=Io){super(n);let i=Zw(e);this.addItemsForInstructions(i,t)}};var Zl=class{constructor(){this.data=yF}addDataAttribute(e,t,n){this.data[n].addDataAttribute(e,t,n)}addClassName(e,t){let n=this.data[t].className;e.classList.add(n)}},Oh=class{constructor(e,t,n){if(e==="")throw Error("Developer note: CSS class cannot be an empty string, please specify one.");this.className=e,this.attributeName=t,this.attributeValueCalculator=n}addDataAttribute(e,t,n){if(this.attributeName===Oh.noAttributeName)return;let i=this.attributeValueCalculator(n,t);i!==""&&(e.dataset[this.attributeName]=i)}},Nr=Oh;Nr.noAttributeName="",Nr.noAttributeValueCalculator=()=>"",Nr.dateAttributeCalculator=(e,t)=>{let i="far";function s(o){let l=window.moment().startOf("day").diff(o,"days");if(isNaN(l))return null;if(l===0)return"today";let c="";return l>0?c+="past-":l<0&&(c+="future-"),Math.abs(l)<=7?c+=Math.abs(l).toString()+"d":c+=i,c}let a=t[e];if(!Array.isArray(a)&&a instanceof window.moment){let o=s(a);if(o)return o}return""};function Fo(r){return new Nr(r,Nr.noAttributeName,Nr.noAttributeValueCalculator)}function Bs(r,e){return new Nr(r,e,Nr.dateAttributeCalculator)}var yF={createdDate:Bs("task-created","taskCreated"),dueDate:Bs("task-due","taskDue"),startDate:Bs("task-start","taskStart"),scheduledDate:Bs("task-scheduled","taskScheduled"),doneDate:Bs("task-done","taskDone"),cancelledDate:Bs("task-cancelled","taskCancelled"),priority:new Nr("task-priority","taskPriority",(r,e)=>kn.priorityNameUsingNormal(e.priority).toLocaleLowerCase()),description:Fo("task-description"),recurrenceRule:Fo("task-recurring"),dependsOn:Fo("task-dependsOn"),id:Fo("task-id"),blockLink:Fo("task-block-link")};function er(r,e){let t=document.createElement(r);return e.appendChild(t),t}var ni=class{static obsidianMarkdownRenderer(e,t,n,i){return P(this,null,function*(){if(!i)throw new Error("Must call the Obsidian renderer with an Obsidian Component object");yield ek.MarkdownRenderer.renderMarkdown(e,t,n,i)})}constructor({textRenderer:e=ni.obsidianMarkdownRenderer,obsidianComponent:t,parentUlElement:n,taskLayoutOptions:i,queryLayoutOptions:s}){this.textRenderer=e,this.obsidianComponent=t,this.parentUlElement=n,this.taskLayoutOptions=i,this.queryLayoutOptions=s}renderTaskLine(e,t,n){return P(this,null,function*(){let i=er("li",this.parentUlElement);i.classList.add("task-list-item","plugin-tasks-list-item");let s=er("span",i);s.classList.add("tasks-list-text"),yield this.taskToHtml(e,s,i);let a=er("input",i);return a.classList.add("task-list-item-checkbox"),a.type="checkbox",e.status.symbol!==" "&&(a.checked=!0,i.classList.add("is-checked")),e.taskLocation.hasKnownPath&&(a.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),a.disabled=!0;let l=e.toggleWithRecurrenceInUsersOrder();gr({originalTask:e,newTasks:l})}),a.addEventListener("contextmenu",u=>{new Xl(De.getInstance(),e).showAtPosition({x:u.clientX,y:u.clientY})}),a.setAttribute("title","Right-click for options")),i.prepend(a),i.setAttribute("data-task",e.status.symbol.trim()),i.setAttribute("data-line",t.toString()),i.setAttribute("data-task-status-name",e.status.name),i.setAttribute("data-task-status-type",e.status.type),a.setAttribute("data-line",t.toString()),this.queryLayoutOptions.shortMode&&this.addTooltip(e,s,n),i})}taskToHtml(e,t,n){return P(this,null,function*(){let i=new Zl,s=Dr.tasksPluginEmoji.taskSerializer;for(let a of this.taskLayoutOptions.shownComponents){let o=s.componentToString(e,this.queryLayoutOptions.shortMode,a);if(o){let u=er("span",t),l=er("span",u);yield this.renderComponentText(l,o,a,e),this.addInternalClasses(a,l),i.addClassName(u,a),i.addDataAttribute(u,e,a),i.addDataAttribute(n,e,a)}}for(let a of this.taskLayoutOptions.hiddenComponents)i.addDataAttribute(n,e,a);n.dataset.taskPriority===void 0&&i.addDataAttribute(n,e,"priority")})}renderComponentText(e,t,n,i){return P(this,null,function*(){if(n==="description"){t=_e.getInstance().removeAsWordFromDependingOnSettings(t);let{debugSettings:s}=Z();s.showTaskHiddenData&&(t+=`<br>\u{1F41B} <b>${i.lineNumber}</b> . ${i.sectionStart} . ${i.sectionIndex} . '<code>${i.originalMarkdown}</code>'<br>'<code>${i.path}</code>' > '<code>${i.precedingHeader}</code>'<br>`),yield this.textRenderer(t,e,i.path,this.obsidianComponent);let a=e.querySelector("blockquote"),o=a!=null?a:e,u=o.querySelector("p");if(u!==null){for(;u.firstChild;)o.insertBefore(u.firstChild,u);u.remove()}e.querySelectorAll("p").forEach(l=>{l.hasChildNodes()||l.remove()}),e.querySelectorAll(".footnotes").forEach(l=>{l.remove()})}else e.innerHTML=t})}addInternalClasses(e,t){function n(i){let s=/["&\x00\r\n]/g,a=i.replace(s,"-");return a=a.replace(/^[-_]+/,""),a.length>0?a:null}if(e==="description"){let i=t.getElementsByClassName("tag");for(let s=0;s<i.length;s++){let a=i[s].textContent;if(a){let o=n(a),u=i[s];o&&(u.dataset.tagName=o)}}}}addTooltip(e,t,n){let{recurrenceSymbol:i,startDateSymbol:s,createdDateSymbol:a,scheduledDateSymbol:o,dueDateSymbol:u,cancelledDateSymbol:l,doneDateSymbol:c}=Dr.tasksPluginEmoji.taskSerializer.symbols;t.addEventListener("mouseenter",()=>{function d(g,T,E){T&&g.createDiv().setText(f({signifier:E,date:T}))}function f({signifier:g,date:T}){return`${g} ${T.format(J.dateFormat)} (${T.from(window.moment().startOf("day"))})`}let m=t.createDiv();m.addClasses(["tooltip","pop-up"]),e.recurrence&&m.createDiv().setText(`${i} ${e.recurrence.toText()}`),d(m,e.createdDate,a),d(m,e.startDate,s),d(m,e.scheduledDate,o),d(m,e.dueDate,u),d(m,e.cancelledDate,l),d(m,e.doneDate,c);let y=e.getLinkText({isFilenameUnique:n});y&&m.createDiv().setText(`\u{1F517} ${y}`),t.addEventListener("mouseleave",()=>{m.remove()})})}};var Jl=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return P(this,null,function*(){var d;let n=new tk.MarkdownRenderChild(e);t.addChild(n);let i=e.findAll(".task-list-item").filter(f=>{var g;let m=(g=f.textContent)==null?void 0:g.split(`
`);if(m===void 0)return!1;let y=null;for(let T=0;T<m.length;T=T+1)if(m[T]!==""){y=m[T];break}return y===null?!1:_e.getInstance().includedIn(y)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let f=a.lineStart;f<=a.lineEnd;f++){let m=o[f];if(m===void 0)continue;let y=null,g=ae.fromLine({line:m,taskLocation:new ft(new Ve(s),f,a.lineStart,u,y),fallbackDate:null});g!==null&&(l.push(g),u++)}let c=new ni({obsidianComponent:n,parentUlElement:e,taskLayoutOptions:new Br,queryLayoutOptions:new Kn});for(let f=0;f<i.length;f++){let m=l[f],y=i[f];if(m===void 0||y===void 0)continue;let g=(d=y.getAttr("data-line"))!=null?d:"0",T=Number.parseInt(g,10),E=yield c.renderTaskLine(m,T),S=y.childNodes;for(let W=0;W<S.length;W=W+1){let re=S[W];re.nodeName.toLowerCase()==="div"?E.prepend(re):re.nodeName.toLowerCase()==="ul"&&E.append(re)}let x=y.querySelectorAll("[data-footnote-id]"),q=E.querySelectorAll("[data-footnote-id]");if(x.length===q.length)for(let W=0;W<x.length;W++)q[W].replaceWith(x[W]);y.replaceWith(E)}})}};var rk=require("@codemirror/view"),nk=require("obsidian");var ik=()=>rk.ViewPlugin.fromClass(Dh),Dh=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let f=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(f),new nk.Notice(f,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=ae.fromLine({line:a.text,taskLocation:ft.fromUnknownPosition(new Ve("")),fallbackDate:null});if(o===null)return!1;e.preventDefault();let l=o.toggleWithRecurrenceInUsersOrder().map(f=>f.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let d=t.checked;return setTimeout(()=>{t.checked=d},1),!0}};var Hs=require("obsidian");function Lo(r,e,t){e&&r.push(bF(t))}function bF(r){return`tasks-layout-hide-${r}`}var ec=class{constructor(e){e?this.queryLayoutOptions=e:this.queryLayoutOptions=new Kn}getHiddenClasses(){let e=[],t=[[this.queryLayoutOptions.hideUrgency,"urgency"],[this.queryLayoutOptions.hideBacklinks,"backlinks"],[this.queryLayoutOptions.hideEditButton,"edit-button"],[this.queryLayoutOptions.hidePostponeButton,"postpone-button"]];for(let[n,i]of t)Lo(e,n,i);return this.queryLayoutOptions.shortMode&&e.push("tasks-layout-short-mode"),e}};function sk(r,e,t,n=void 0){let i="";e.isEmpty()||(i+=`Only tasks containing the global filter '${e.get()}'.

`);let s=new Rs("  "),a=new Pn(r,n);if(!a.ignoreGlobalQuery&&t.hasInstructions()){let o=t.query(n);i+=`Explanation of the global query:

${s.explainQuery(o)}
`}return i+=`Explanation of this Tasks code block query:

${s.explainQuery(a)}`,i}function tc(r,e,t){let n=new Pn(r,t);return n.ignoreGlobalQuery?n:e.query(t).append(n)}function ak(r){for(let t of ae.allDateFields()){let n=r[t];if(n&&!n.isValid())return!1}let e=r.happensDates.some(t=>!!(t!=null&&t.isValid()));return!r.isDone&&e}function Uo(r){return r.dueDate?"dueDate":r.scheduledDate?"scheduledDate":r.startDate?"startDate":null}function xh(r,e,t,n){let i=r[e];return lk(i,r,e,t,n)}function ok(r,e,t,n){let i=window.moment();return lk(i,r,e,t,n)}function uk(r,e,t,n){return ck(r,e,null)}function lk(r,e,t,n,i){let s=new Pt(r).postpone(n,i);return ck(e,t,s)}function ck(r,e,t){let n=yt.removeInferredStatusIfNeeded(r,[new ae(he(K({},r),{[e]:t}))])[0];return{postponedDate:t,postponedTask:n}}function dk(r,e){if(r){let t=r==null?void 0:r.format("DD MMM YYYY");return`Task's ${e} changed to ${t}`}else return`Task's ${e} removed`}function fk(r,e,t){return`\u2139\uFE0F ${Rh(r,e,t)} (right-click for more options)`}function Rh(r,e,t){let n=Uo(r),i=r[n];return gk(n,i,e,t)}function pk(r,e,t){let n=Uo(r),i=window.moment().startOf("day");return gk(n,i,e,t)}function mk(r,e,t){let n=Uo(r);return n==="scheduledDate"&&r.scheduledDateIsInferred?"Cannot remove inferred scheduled date":`Remove ${hk(n)}`}function TF(r){return _s(r.replace("Date",""))}function hk(r){return r.replace("Date"," date")}function gk(r,e,t,n){let s=new Pt(e).postpone(n,t).format("ddd Do MMM"),a=t!=1?t:"a";return e.isSameOrBefore(window.moment(),"day")?`${TF(r)} in ${a} ${n}, on ${s}`.replace(" in 0 days"," today").replace("in a day","tomorrow"):`Postpone ${hk(r)} by ${a} ${n}, to ${s}`}var rc=class{constructor(e){e?this.taskLayoutOptions=e:this.taskLayoutOptions=new Br}generateHiddenClasses(){let e=[];return this.taskLayoutOptions.toggleableComponents.forEach(t=>{Lo(e,!this.taskLayoutOptions.isShown(t),t)}),Lo(e,!this.taskLayoutOptions.areTagsShown(),"tags"),e}};var Mh=require("obsidian");var ii=class extends Ys{constructor(e,t,n=Io){super(n);let i=(l,c,d,f,m,y)=>{let g=m(t,f,d);c.setTitle(g).onClick(()=>ii.postponeOnClickCallback(l,t,f,d,y,n))},s=pk,a=ok;this.addItem(l=>i(e,l,"days",0,s,a)),this.addItem(l=>i(e,l,"day",1,s,a)),this.addSeparator();let o=Rh,u=xh;this.addItem(l=>i(e,l,"days",2,o,u)),this.addItem(l=>i(e,l,"days",3,o,u)),this.addItem(l=>i(e,l,"days",4,o,u)),this.addItem(l=>i(e,l,"days",5,o,u)),this.addItem(l=>i(e,l,"days",6,o,u)),this.addSeparator(),this.addItem(l=>i(e,l,"week",1,o,u)),this.addItem(l=>i(e,l,"weeks",2,o,u)),this.addItem(l=>i(e,l,"weeks",3,o,u)),this.addItem(l=>i(e,l,"month",1,o,u)),this.addSeparator(),this.addItem(l=>i(e,l,"days",2,mk,uk))}static postponeOnClickCallback(o,u,l,c){return P(this,arguments,function*(e,t,n,i,s=xh,a=Io){let d=Uo(t);if(d===null){let y="\u26A0\uFE0F Postponement requires a date: due, scheduled or start.";return new Mh.Notice(y,1e4)}let{postponedDate:f,postponedTask:m}=s(t,d,i,n);yield a(t,m),ii.postponeSuccessCallback(e,d,f)})}static postponeSuccessCallback(e,t,n){e.style.pointerEvents="none";let i=dk(n,t);new Mh.Notice(i,2e3)}};var Wo=class{constructor(e){this.label=e,this.start()}start(){!this.recordTimings()||performance.mark(this.labelForStart())}finish(){!this.recordTimings()||(performance.mark(this.labelForEnd()),performance.measure(this.label,this.labelForStart(),this.labelForEnd()),this.printDuration())}printDuration(){let e=performance.getEntriesByName(this.label),t=e[e.length-1];t?console.log(this.label+":",t.duration,"milliseconds"):console.log(`Measurement for ${this.label} not found`)}labelForStart(){return`${this.label} - start`}labelForEnd(){return`${this.label} - end`}recordTimings(){let{debugSettings:e}=Z();return e.recordTimings}};var nc=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.plugin=e,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return P(this,null,function*(){n.addChild(new Ch({app:this.app,plugin:this.plugin,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},Ch=class extends Hs.MarkdownRenderChild{constructor({app:t,plugin:n,events:i,container:s,source:a,filePath:o}){super(s);switch(this.app=t,this.plugin=n,this.events=i,this.source=a,this.filePath=o,this.containerEl.className){case"block-language-tasks":this.query=tc(this.source,Tr.getInstance(),this.filePath),this.queryType="tasks";break;default:this.query=tc(this.source,Tr.getInstance(),this.filePath),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=tc(this.source,Tr.getInstance(),this.filePath),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return P(this,arguments,function*({tasks:t,state:n}){var a;let s=er("div",this.containerEl);n==="Warm"&&this.query.error===void 0?yield this.renderQuerySearchResults(t,n,s):this.query.error!==void 0?this.renderErrorMessage(s,this.query.error):this.renderLoadingMessage(s),(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}renderQuerySearchResults(t,n,i){return P(this,null,function*(){let s=this.explainAndPerformSearch(n,t,i);if(s.searchErrorMessage!==void 0){this.renderErrorMessage(i,s.searchErrorMessage);return}yield this.renderSearchResults(s,i)})}explainAndPerformSearch(t,n,i){let s=new Wo(`Search: ${this.query.queryId} - ${this.filePath}`);s.start(),this.query.debug(`[render] Render called: plugin state: ${t}; searching ${n.length} tasks`),this.query.queryLayoutOptions.explainQuery&&this.createExplanation(i);let a=this.query.applyQueryToTasks(n);return s.finish(),a}renderSearchResults(t,n){return P(this,null,function*(){let i=new Wo(`Render: ${this.query.queryId} - ${this.filePath}`);i.start(),yield this.addAllTaskGroups(t.taskGroups,n);let s=t.totalTasksCount;this.addTaskCount(n,t),this.query.debug(`[render] ${s} tasks displayed`),i.finish()})}renderErrorMessage(t,n){t.createDiv().innerHTML=`<pre>Tasks query: ${n.replace(/\n/g,"<br>")}</pre>`}renderLoadingMessage(t){t.setText("Loading Tasks ...")}createExplanation(t){let n=sk(this.source,_e.getInstance(),Tr.getInstance(),this.filePath),i=er("pre",t);i.addClasses(["plugin-tasks-query-explanation"]),i.setText(n),t.appendChild(i)}createTaskList(t,n){return P(this,null,function*(){let i=er("ul",n);i.addClasses(["contains-task-list","plugin-tasks-query-result"]);let s=new rc(this.query.taskLayoutOptions);i.addClasses(s.generateHiddenClasses());let a=new ec(this.query.queryLayoutOptions);i.addClasses(a.getHiddenClasses());let o=this.getGroupingAttribute();o&&o.length>0&&(i.dataset.taskGroupBy=o);let u=new ni({obsidianComponent:this,parentUlElement:i,taskLayoutOptions:this.query.taskLayoutOptions,queryLayoutOptions:this.query.queryLayoutOptions});for(let[l,c]of t.entries())yield this.addTask(i,u,c,l);n.appendChild(i)})}addTask(t,n,i,s){return P(this,null,function*(){let a=this.isFilenameUnique({task:i}),o=yield n.renderTaskLine(i,s,a);o.querySelectorAll("[data-footnote-id]").forEach(d=>d.remove());let l=o.createSpan("task-extras");this.query.queryLayoutOptions.hideUrgency||this.addUrgency(l,i);let c=this.query.queryLayoutOptions.shortMode;this.query.queryLayoutOptions.hideBacklinks||this.addBacklinks(l,i,c,a),this.query.queryLayoutOptions.hideEditButton||this.addEditButton(l,i,this.plugin.getTasks()),!this.query.queryLayoutOptions.hidePostponeButton&&ak(i)&&this.addPostponeButton(l,i,c),t.appendChild(o)})}addEditButton(t,n,i){let s=er("a",t);s.addClass("tasks-edit"),s.title="Edit task",s.href="#",s.onClickEvent(a=>{a.preventDefault();let o=l=>P(this,null,function*(){yield gr({originalTask:n,newTasks:yt.removeInferredStatusIfNeeded(n,l)})});new zn({app:this.app,task:n,onSubmit:o,allTasks:i}).open()})}addUrgency(t,n){let i=new Intl.NumberFormat().format(n.urgency);t.createSpan({text:i,cls:"tasks-urgency"})}addAllTaskGroups(t,n){return P(this,null,function*(){for(let i of t.groups)yield this.addGroupHeadings(n,i.groupHeadings),yield this.createTaskList(i.tasks,n)})}addGroupHeadings(t,n){return P(this,null,function*(){for(let i of n)yield this.addGroupHeading(t,i)})}addGroupHeading(t,n){return P(this,null,function*(){let i="h6";n.nestingLevel===0?i="h4":n.nestingLevel===1&&(i="h5");let s=er(i,t);s.addClass("tasks-group-heading"),yield Hs.MarkdownRenderer.renderMarkdown(n.displayName,s,this.filePath,this)})}addBacklinks(t,n,i,s){var c;let a=t.createSpan({cls:"tasks-backlink"});i||a.append(" (");let o=er("a",a);o.rel="noopener",o.target="_blank",o.addClass("internal-link"),i&&o.addClass("internal-link-short-mode");let u;i?u=" \u{1F517}":u=(c=n.getLinkText({isFilenameUnique:s}))!=null?c:"",o.setText(u);let l=this.app.vault;o.addEventListener("click",d=>P(this,null,function*(){let f=yield Xm(n,l);if(f){let[m,y]=f,g=this.app.workspace.getLeaf(Hs.Keymap.isModEvent(d));d.preventDefault(),yield g.openFile(y,{eState:{line:m}})}})),o.addEventListener("mousedown",d=>P(this,null,function*(){if(d.button===1){let f=yield Xm(n,l);if(f){let[m,y]=f,g=this.app.workspace.getLeaf("tab");d.preventDefault(),yield g.openFile(y,{eState:{line:m}})}}})),i||a.append(")")}addPostponeButton(t,n,i){let a="day",o=fk(n,1,a),u=er("a",t);u.addClass("tasks-postpone"),i&&u.addClass("tasks-postpone-short-mode"),u.title=o,u.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation(),ii.postponeOnClickCallback(u,n,1,a)}),u.addEventListener("contextmenu",l=>P(this,null,function*(){l.preventDefault(),l.stopPropagation(),new ii(u,n).showAtPosition({x:l.clientX,y:l.clientY})}))}addTaskCount(t,n){this.query.queryLayoutOptions.hideTaskCount||t.createDiv({text:n.totalTasksCountDisplayText(),cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}getGroupingAttribute(){let t=[];for(let n of this.query.grouping)t.push(n.property);return t.join(",")}};var Ee=require("obsidian");var ic=class{constructor(e){this._markdown="";this.columnNames=e,this.addTitleRow()}get markdown(){return this._markdown}addTitleRow(){let e="|",t="|";this.columnNames.forEach(n=>{e+=` ${n} |`,t+=" ----- |"}),this._markdown+=`${e}
`,this._markdown+=`${t}
`}addRow(e){let t=this.makeRowText(e);this._markdown+=`${t}
`}addRowIfNew(e){let t=this.makeRowText(e);this._markdown.includes(t)||(this._markdown+=`${t}
`)}makeRowText(e){let t="|";return e.forEach(n=>{t+=` ${n} |`}),t}};function yk(r,e){return r.findIndex(t=>t.symbol===e)}function Nn(r){return r===""?r:"`"+(r!==" "?r:"space")+"`"}function _F(r,e){let t=ne.getTypeForUnknownSymbol(r.symbol);r.type!==t&&(t==="TODO"&&r.symbol!==" "||e.push(`For information, the conventional type for status symbol ${Nn(r.symbol)} is ${Nn(t)}: you may wish to review this type.`))}function vF(r,e,t){let n=yk(r,e.nextStatusSymbol);if(n===-1){t.push(`Next symbol ${Nn(e.nextStatusSymbol)} is unknown: create a status with symbol ${Nn(e.nextStatusSymbol)}.`);return}if(e.type!=="DONE")return;let i=r[n];if(i){if(i.type!=="TODO"&&i.type!=="IN_PROGRESS"){let s="https://publish.obsidian.md/tasks/Getting+Started/Statuses/Recurring+Tasks+and+Custom+Statuses",a=[`This \`DONE\` status is followed by ${Nn(i.type)}, not \`TODO\` or \`IN_PROGRESS\`.`,"If used to complete a recurring task, it will instead be followed by `TODO` or `IN_PROGRESS`, to ensure the next task matches the `not done` filter.",`See [Recurring Tasks and Custom Statuses](${s}).`].join("<br>");t.push(a)}}else t.push("Unexpected failure to find the next status.")}function wF(r,e,t){let n=[];return e.symbol===ne.EMPTY.symbol?(n.push("Empty symbol: this status will be ignored."),n):yk(r,e.symbol)!=t?(n.push(`Duplicate symbol '${Nn(e.symbol)}': this status will be ignored.`),n):(_F(e,n),vF(r,e,n),n)}function bk(r){let e=new ic(["Status Symbol","Next Status Symbol","Status Name","Status Type","Problems (if any)"]),t=Le.allStatuses(r);return t.forEach((n,i)=>{e.addRow([Nn(n.symbol),Nn(n.nextStatusSymbol),n.name,Nn(n.type),wF(t,n,i).join("<br>")])}),e.markdown}function Tk(r,e,t,n){let s=bk(r),a=e.mermaidDiagram(!0);return`# ${t}

## About this file

This file was created by the Obsidian Tasks plugin (version ${n}) to help visualise the task statuses in this vault.

If you change the Tasks status settings, you can get an updated report by:

- Going to \`Settings\` -> \`Tasks\`.
- Clicking on \`Review and check your Statuses\`.

You can delete this file any time.

## Status Settings

<!--
Switch to Live Preview or Reading Mode to see the table.
If there are any Markdown formatting characters in status names, such as '*' or '_',
Obsidian may only render the table correctly in Reading Mode.
-->

These are the status values in the Core and Custom statuses sections.

${s}
## Loaded Settings

<!-- Switch to Live Preview or Reading Mode to see the diagram. -->

These are the settings actually used by Tasks.
${a}`}function _k(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],[">","Rescheduled","x","TODO"],["<","Scheduled","x","TODO"],["!","Important","x","TODO"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],["?","Question","x","TODO"],["*","Star","x","TODO"],["n","Note","x","TODO"],["l","Location","x","TODO"],["i","Information","x","TODO"],["I","Idea","x","TODO"],["S","Amount","x","TODO"],["p","Pro","x","TODO"],["c","Con","x","TODO"],["b","Bookmark","x","TODO"],['"',"Quote","x","TODO"],["0","Speech bubble 0","0","NON_TASK"],["1","Speech bubble 1","1","NON_TASK"],["2","Speech bubble 2","2","NON_TASK"],["3","Speech bubble 3","3","NON_TASK"],["4","Speech bubble 4","4","NON_TASK"],["5","Speech bubble 5","5","NON_TASK"],["6","Speech bubble 6","6","NON_TASK"],["7","Speech bubble 7","7","NON_TASK"],["8","Speech bubble 8","8","NON_TASK"],["9","Speech bubble 9","9","NON_TASK"]]}function vk(){return[[" ","incomplete","x","TODO"],["x","complete / done"," ","DONE"],["-","cancelled"," ","CANCELLED"],[">","deferred","x","TODO"],["/","in progress, or half-done","x","IN_PROGRESS"],["!","Important","x","TODO"],["?","question","x","TODO"],["R","review","x","TODO"],["+","Inbox / task that should be processed later","x","TODO"],["b","bookmark","x","TODO"],["B","brainstorm","x","TODO"],["D","deferred or scheduled","x","TODO"],["I","Info","x","TODO"],["i","idea","x","TODO"],["N","note","x","TODO"],["Q","quote","x","TODO"],["W","win / success / reward","x","TODO"],["P","pro","x","TODO"],["C","con","x","TODO"]]}function wk(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],[">","Deferred","x","TODO"],["!","Important","x","TODO"],["?","Question","x","TODO"],["r","Review","x","TODO"]]}function kk(){return[[" ","Unchecked","x","TODO"],["x","Regular"," ","DONE"],["X","Checked"," ","DONE"],["-","Dropped"," ","CANCELLED"],[">","Forward","x","TODO"],["D","Date","x","TODO"],["?","Question","x","TODO"],["/","Half Done","x","IN_PROGRESS"],["+","Add","x","TODO"],["R","Research","x","TODO"],["!","Important","x","TODO"],["i","Idea","x","TODO"],["B","Brainstorm","x","TODO"],["P","Pro","x","TODO"],["C","Con","x","TODO"],["Q","Quote","x","TODO"],["N","Note","x","TODO"],["b","Bookmark","x","TODO"],["I","Information","x","TODO"],["p","Paraphrase","x","TODO"],["L","Location","x","TODO"],["E","Example","x","TODO"],["A","Answer","x","TODO"],["r","Reward","x","TODO"],["c","Choice","x","TODO"],["d","Doing","x","IN_PROGRESS"],["T","Time","x","TODO"],["@","Character / Person","x","TODO"],["t","Talk","x","TODO"],["O","Outline / Plot","x","TODO"],["~","Conflict","x","TODO"],["W","World","x","TODO"],["f","Clue / Find","x","TODO"],["F","Foreshadow","x","TODO"],["H","Favorite / Health","x","TODO"],["&","Symbolism","x","TODO"],["s","Secret","x","TODO"]]}function Ek(){return[[" ","Unchecked","x","TODO"],["x","Checked"," ","DONE"],[">","Rescheduled","x","TODO"],["<","Scheduled","x","TODO"],["!","Important","x","TODO"],["-","Cancelled"," ","CANCELLED"],["/","In Progress","x","IN_PROGRESS"],["?","Question","x","TODO"],["*","Star","x","TODO"],["n","Note","x","TODO"],["l","Location","x","TODO"],["i","Information","x","TODO"],["I","Idea","x","TODO"],["S","Amount","x","TODO"],["p","Pro","x","TODO"],["c","Con","x","TODO"],["b","Bookmark","x","TODO"],["f","Fire","x","TODO"],["k","Key","x","TODO"],["w","Win","x","TODO"],["u","Up","x","TODO"],["d","Down","x","TODO"]]}function Sk(){return[[" ","to-do","x","TODO"],["/","incomplete","x","IN_PROGRESS"],["x","done"," ","DONE"],["-","canceled"," ","CANCELLED"],[">","forwarded","x","TODO"],["<","scheduling","x","TODO"],["?","question","x","TODO"],["!","important","x","TODO"],["*","star","x","TODO"],['"',"quote","x","TODO"],["l","location","x","TODO"],["b","bookmark","x","TODO"],["i","information","x","TODO"],["S","savings","x","TODO"],["I","idea","x","TODO"],["p","pros","x","TODO"],["c","cons","x","TODO"],["f","fire","x","TODO"],["k","key","x","TODO"],["w","win","x","TODO"],["u","up","x","TODO"],["d","down","x","TODO"]]}function Ok(){return[[" ","to-do","x","TODO"],["/","incomplete","x","IN_PROGRESS"],["x","done"," ","DONE"],["-","canceled"," ","CANCELLED"],[">","forwarded","x","TODO"],["<","scheduling","x","TODO"],["?","question","x","TODO"],["!","important","x","TODO"],["*","star","x","TODO"],['"',"quote","x","TODO"],["l","location","x","TODO"],["b","bookmark","x","TODO"],["i","information","x","TODO"],["S","savings","x","TODO"],["I","idea","x","TODO"],["p","pros","x","TODO"],["c","cons","x","TODO"],["f","fire","x","TODO"],["k","key","x","TODO"],["w","win","x","TODO"],["u","up","x","TODO"],["d","down","x","TODO"]]}var Dk=[{text:"Core Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:"<p>These are the core statuses that Tasks supports natively, with no need for custom CSS styling or theming.</p><p>You can add edit and add your own custom statuses in the section below.</p>"},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertTaskCoreStatusSettings",featureFlag:"",notice:null}]},{text:"Custom Statuses",level:"h3",class:"",open:!0,notice:{class:"setting-item-description",text:null,html:`<p>You should first <b>select and install a CSS Snippet or Theme</b> to style custom checkboxes.</p><p>Then, use the buttons below to set up your custom statuses, to match your chosen CSS checkboxes.</p><p><b>Note</b> Any statuses with the same symbol as any earlier statuses will be ignored. You can confirm the actually loaded statuses by running the 'Create or edit task' command and looking at the Status drop-down.</p><p></p><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Statuses">documentation</a> to get started!</p>`},settings:[{name:"",description:"",type:"function",initialValue:"",placeholder:"",settingName:"insertCustomTaskStatusSettings",featureFlag:"",notice:null}]}];var Ir=require("obsidian");var $i=class{validate(e){let t=[];return t.push(...this.validateSymbol(e)),t.push(...this.validateName(e)),t.push(...this.validateNextSymbol(e)),t}validateStatusCollectionEntry(e){let[t,n,i,s]=e,a=[];if(a.push(...this.validateType(s)),t===i&&s!=="NON_TASK"&&a.push(`Status symbol '${t}' toggles to itself`),a.length>0)return a;let o=ne.createFromImportedValue(e).configuration;return a.push(...this.validateSymbolTypeConventions(o)),a.push(...this.validate(o)),a}validateSymbol(e){return $i.validateOneSymbol(e.symbol,"Task Status Symbol")}validateNextSymbol(e){return $i.validateOneSymbol(e.nextStatusSymbol,"Task Next Status Symbol")}validateName(e){let t=[];return e.name.length===0&&t.push("Task Status Name cannot be empty."),t}validateType(e){let t=zt[e],n=[];return t||n.push(`Status Type "${e}" is not a valid type`),t=="EMPTY"&&n.push('Status Type "EMPTY" is not permitted in user data'),n}validateSymbolTypeConventions(e){let t=[],n=e.symbol,i=new De,s=n==="X"?"x":n,a=i.bySymbol(s);return a.type!=="EMPTY"&&(e.nextStatusSymbol!==a.nextStatusSymbol&&t.push(`Next Status Symbol for symbol '${n}': '${e.nextStatusSymbol}' is inconsistent with convention '${a.nextStatusSymbol}'`),e.type!==a.type&&t.push(`Status Type for symbol '${n}': '${e.type}' is inconsistent with convention '${a.type}'`)),t}static validateOneSymbol(e,t){let n=[];return e.length===0&&n.push(`${t} cannot be empty.`),e.length>1&&n.push(`${t} ("${e}") must be a single character.`),n}};var ji=new $i,tr=class extends Ir.Modal{constructor(t,n,i){super(t.app);this.plugin=t;this.saved=!1;this.error=!1;this.statusSymbol=n.symbol,this.statusName=n.name,this.statusNextSymbol=n.nextStatusSymbol,this.statusAvailableAsCommand=n.availableAsCommand,this.type=n.type,this.isCoreStatus=i}statusConfiguration(){return new Ke(this.statusSymbol,this.statusName,this.statusNextSymbol,this.statusAvailableAsCommand,this.type)}display(){return P(this,null,function*(){let{contentEl:t}=this;t.empty();let n=t.createDiv(),i;new Ir.Setting(n).setName("Task Status Symbol").setDesc("This is the character between the square braces. (It can only be edited for Custom statuses, and not Core statuses.)").addText(l=>{i=l,l.setValue(this.statusSymbol).onChange(c=>{this.statusSymbol=c,tr.setValid(l,ji.validateSymbol(this.statusConfiguration()))})}).setDisabled(this.isCoreStatus).then(l=>{tr.setValid(i,ji.validateSymbol(this.statusConfiguration()))});let s;new Ir.Setting(n).setName("Task Status Name").setDesc("This is the friendly name of the task status.").addText(l=>{s=l,l.setValue(this.statusName).onChange(c=>{this.statusName=c,tr.setValid(l,ji.validateName(this.statusConfiguration()))})}).then(l=>{tr.setValid(s,ji.validateName(this.statusConfiguration()))});let a;new Ir.Setting(n).setName("Task Next Status Symbol").setDesc("When clicked on this is the symbol that should be used next.").addText(l=>{a=l,l.setValue(this.statusNextSymbol).onChange(c=>{this.statusNextSymbol=c,tr.setValid(l,ji.validateNextSymbol(this.statusConfiguration()))})}).then(l=>{tr.setValid(a,ji.validateNextSymbol(this.statusConfiguration()))}),new Ir.Setting(n).setName("Task Status Type").setDesc("Control how the status behaves for searching and toggling.").addDropdown(l=>{["TODO","IN_PROGRESS","DONE","CANCELLED","NON_TASK"].forEach(d=>{l.addOption(d,d)}),l.setValue(this.type).onChange(d=>{this.type=ne.getTypeFromStatusTypeString(d)})}),ne.tasksPluginCanCreateCommandsForStatuses()&&new Ir.Setting(n).setName("Available as command").setDesc("If enabled this status will be available as a command so you can assign a hotkey and toggle the status using it.").addToggle(l=>{l.setValue(this.statusAvailableAsCommand).onChange(c=>P(this,null,function*(){this.statusAvailableAsCommand=c}))});let o=t.createDiv(),u=new Ir.Setting(o);u.addButton(l=>(l.setTooltip("Save").setIcon("checkmark").onClick(()=>P(this,null,function*(){let c=ji.validate(this.statusConfiguration());if(c.length>0){let d=c.join(`
`)+`

Fix errors before saving.`;new Ir.Notice(d);return}this.saved=!0,this.close()})),l)),u.addExtraButton(l=>(l.setIcon("cross").setTooltip("Cancel").onClick(()=>{this.saved=!1,this.close()}),l))})}onOpen(){this.display()}static setValidationError(t){t.inputEl.addClass("tasks-settings-is-invalid")}static removeValidationError(t){t.inputEl.removeClass("tasks-settings-is-invalid")}static setValid(t,n){n.length===0?tr.removeValidationError(t):tr.setValidationError(t)}};var Wt=class extends Ee.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.customFunctions={insertTaskCoreStatusSettings:this.insertTaskCoreStatusSettings.bind(this),insertCustomTaskStatusSettings:this.insertCustomTaskStatusSettings.bind(this)};this.plugin=t}saveSettings(t){return P(this,null,function*(){yield this.plugin.saveSettings(),t&&this.display()})}display(){let{containerEl:t}=this;t.empty(),this.containerEl.addClass("tasks-settings"),t.createEl("h3",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),t.createEl("h4",{text:"Task Format Settings"}),new Ee.Setting(t).setName("Task Format").setDesc(Wt.createFragmentWithHTML('<p>The format that Tasks uses to read and write tasks.</p><p><b>Important:</b> Tasks currently only supports one format at a time. Selecting Dataview will currently <b>stop Tasks reading its own emoji signifiers</b>.</p><p>See the <a href="https://publish.obsidian.md/tasks/Reference/Task+Formats/About+Task+Formats">documentation</a>.</p>')).addDropdown(i=>{for(let s of Object.keys(Dr))i.addOption(s,Dr[s].displayName);i.setValue(Z().taskFormat).onChange(s=>P(this,null,function*(){Qe({taskFormat:s}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Global filter Settings"}),new Ee.Setting(t).setName("Global task filter").setDesc(Wt.createFragmentWithHTML('<p><b>Recommended: Leave empty if you want all checklist items in your vault to be tasks managed by this plugin.</b></p><p>Use a global filter if you want Tasks to only act on a subset of your "<code>- [ ]</code>" checklist items, so that a checklist item must include the specified string in its description in order to be considered a task.<p><p>For example, if you set the global filter to <code>#task</code>, the Tasks plugin will only handle checklist items tagged with <code>#task</code>.</br>Other checklist items will remain normal checklist items and not appear in queries or get a done date set.</p><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Global+Filter">documentation</a>.</p>')).addText(i=>{i.setPlaceholder("e.g. #task or TODO").setValue(_e.getInstance().get()).onChange(s=>P(this,null,function*(){Qe({globalFilter:s}),_e.getInstance().set(s),yield this.plugin.saveSettings()}))}),new Ee.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(i=>{let s=Z();i.setValue(s.removeGlobalFilter).onChange(a=>P(this,null,function*(){Qe({removeGlobalFilter:a}),_e.getInstance().setRemoveGlobalFilter(a),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Global Query"}),OF(new Ee.Setting(t).setDesc(Wt.createFragmentWithHTML('<p>A query that is automatically included at the start of every Tasks block in the vault. Useful for adding default filters, or layout options.</p><p>See the <a href="https://publish.obsidian.md/tasks/Queries/Global+Query">documentation</a>.</p>')).addTextArea(i=>{let s=Z();i.inputEl.rows=4,i.setPlaceholder(`# For example...
path does not include _templates/
limit 300
show urgency`).setValue(s.globalQuery).onChange(a=>P(this,null,function*(){Qe({globalQuery:a}),Tr.getInstance().set(a),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Task Statuses"});let{headingOpened:n}=Z();Dk.forEach(i=>{this.addOneSettingsBlock(t,i,n)}),t.createEl("h4",{text:"Date Settings"}),new Ee.Setting(t).setName("Set created date on every added task").setDesc(Wt.createFragmentWithHTML(`Enabling this will add a timestamp \u2795 YYYY-MM-DD before other date values, when a task is created with 'Create or edit task', or by completing a recurring task.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Dates#Created+date">documentation</a>.</p>`)).addToggle(i=>{let s=Z();i.setValue(s.setCreatedDate).onChange(a=>P(this,null,function*(){Qe({setCreatedDate:a}),yield this.plugin.saveSettings()}))}),new Ee.Setting(t).setName("Set done date on every completed task").setDesc(Wt.createFragmentWithHTML('Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Dates#Done+date">documentation</a>.</p>')).addToggle(i=>{let s=Z();i.setValue(s.setDoneDate).onChange(a=>P(this,null,function*(){Qe({setDoneDate:a}),yield this.plugin.saveSettings()}))}),new Ee.Setting(t).setName("Set cancelled date on every cancelled task").setDesc(Wt.createFragmentWithHTML('Enabling this will add a timestamp \u274C YYYY-MM-DD at the end when a task is toggled to cancelled.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Dates#Cancelled+date">documentation</a>.</p>')).addToggle(i=>{let s=Z();i.setValue(s.setCancelledDate).onChange(a=>P(this,null,function*(){Qe({setCancelledDate:a}),yield this.plugin.saveSettings()}))}),new Ee.Setting(t).setName("Use filename as Scheduled date for undated tasks").setDesc(Wt.createFragmentWithHTML('Save time entering Scheduled (\u23F3) dates.</br>If this option is enabled, any undated tasks will be given a default Scheduled date extracted from their file name.</br>The date in the file name must be in one of <code>YYYY-MM-DD</code> or <code>YYYYMMDD</code> formats.</br>Undated tasks have none of Due (\u{1F4C5} ), Scheduled (\u23F3) and Start (\u{1F6EB}) dates.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Use+Filename+as+Default+Date">documentation</a>.</p>')).addToggle(i=>{let s=Z();i.setValue(s.useFilenameAsScheduledDate).onChange(a=>P(this,null,function*(){Qe({useFilenameAsScheduledDate:a}),yield this.plugin.saveSettings()}))}),new Ee.Setting(t).setName("Folders with default Scheduled dates").setDesc("Leave empty if you want to use default Scheduled dates everywhere, or enter a comma-separated list of folders.").addText(i=>P(this,null,function*(){let s=Z();yield this.plugin.saveSettings(),i.setValue(Wt.renderFolderArray(s.filenameAsDateFolders)).onChange(a=>P(this,null,function*(){let o=Wt.parseCommaSeparatedFolders(a);Qe({filenameAsDateFolders:o}),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Recurring task Settings"}),new Ee.Setting(t).setName("Next recurrence appears on the line below").setDesc(Wt.createFragmentWithHTML('Enabling this will make the next recurrence of a task appear on the line below the completed task. Otherwise the next recurrence will appear before the completed one.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Recurring+Tasks">documentation</a>.</p>')).addToggle(i=>{let{recurrenceOnNextLine:s}=Z();i.setValue(s).onChange(a=>P(this,null,function*(){Qe({recurrenceOnNextLine:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Auto-suggest Settings"}),new Ee.Setting(t).setName("Auto-suggest task content").setDesc(Wt.createFragmentWithHTML('Enabling this will open an intelligent suggest menu while typing inside a recognized task line.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Auto-Suggest">documentation</a>.</p>')).addToggle(i=>{let s=Z();i.setValue(s.autoSuggestInEditor).onChange(a=>P(this,null,function*(){Qe({autoSuggestInEditor:a}),yield this.plugin.saveSettings()}))}),new Ee.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(i=>{let s=Z();i.setLimits(0,3,1).setValue(s.autoSuggestMinMatch).setDynamicTooltip().onChange(a=>P(this,null,function*(){Qe({autoSuggestMinMatch:a}),yield this.plugin.saveSettings()}))}),new Ee.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(i=>{let s=Z();i.setLimits(3,12,1).setValue(s.autoSuggestMaxItems).setDynamicTooltip().onChange(a=>P(this,null,function*(){Qe({autoSuggestMaxItems:a}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Dialog Settings"}),new Ee.Setting(t).setName("Provide access keys in dialogs").setDesc(Wt.createFragmentWithHTML('If the access keys (keyboard shortcuts) for various controls in dialog boxes conflict with system keyboard shortcuts or assistive technology functionality that is important for you, you may want to deactivate them here.</br><p>See the <a href="https://publish.obsidian.md/tasks/Getting+Started/Create+or+edit+Task#Keyboard+shortcuts">documentation</a>.</p>')).addToggle(i=>{let s=Z();i.setValue(s.provideAccessKeys).onChange(a=>P(this,null,function*(){Qe({provideAccessKeys:a}),yield this.plugin.saveSettings()}))})}addOneSettingsBlock(t,n,i){let s=t.createEl("details",{cls:"tasks-nested-settings",attr:K({},n.open||i[n.text]?{open:!0}:{})});s.empty(),s.ontoggle=()=>{i[n.text]=s.open,Qe({headingOpened:i}),this.plugin.saveSettings()};let a=s.createEl("summary");if(new Ee.Setting(a).setHeading().setName(n.text),a.createDiv("collapser").createDiv("handle"),n.notice!==null){let o=s.createEl("div",{cls:n.notice.class,text:n.notice.text});n.notice.html!==null&&o.insertAdjacentHTML("beforeend",n.notice.html)}n.settings.forEach(o=>{if(!(o.featureFlag!==""&&!hv(o.featureFlag))&&(o.type==="checkbox"?new Ee.Setting(s).setName(o.name).setDesc(o.description).addToggle(u=>{let l=Z();l.generalSettings[o.settingName]||Oi(o.settingName,o.initialValue),u.setValue(l.generalSettings[o.settingName]).onChange(c=>P(this,null,function*(){Oi(o.settingName,c),yield this.plugin.saveSettings()}))}):o.type==="text"?new Ee.Setting(s).setName(o.name).setDesc(o.description).addText(u=>{let l=Z();l.generalSettings[o.settingName]||Oi(o.settingName,o.initialValue);let c=d=>P(this,null,function*(){Oi(o.settingName,d),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,Ee.debounce)(c,500,!0))}):o.type==="textarea"?new Ee.Setting(s).setName(o.name).setDesc(o.description).addTextArea(u=>{let l=Z();l.generalSettings[o.settingName]||Oi(o.settingName,o.initialValue);let c=d=>P(this,null,function*(){Oi(o.settingName,d),yield this.plugin.saveSettings()});u.setPlaceholder(o.placeholder.toString()).setValue(l.generalSettings[o.settingName].toString()).onChange((0,Ee.debounce)(c,500,!0)),u.inputEl.rows=8,u.inputEl.cols=40}):o.type==="function"&&this.customFunctions[o.settingName](s,this),o.notice!==null)){let u=s.createEl("p",{cls:o.notice.class,text:o.notice.text});o.notice.html!==null&&u.insertAdjacentHTML("beforeend",o.notice.html)}})}static parseCommaSeparatedFolders(t){return t.split(",").map(n=>n.trim()).map(n=>n.replace(/^\/|\/$/g,"")).filter(n=>n!=="")}static renderFolderArray(t){return t.join(",")}insertTaskCoreStatusSettings(t,n){let{statusSettings:i}=Z();i.coreStatuses.forEach(a=>{xk(t,a,i.coreStatuses,i,n,n.plugin,!0)}),new Ee.Setting(t).addButton(a=>{let o="Review and check your Statuses";a.setButtonText(o).setCta().onClick(()=>P(this,null,function*(){let l=window.moment().format("YYYY-MM-DD HH-mm-ss"),c=`Tasks Plugin - ${o} ${l}.md`,d=this.plugin.manifest.version,f=De.getInstance(),m=Tk(i,f,o,d),y=yield app.vault.create(c,m);yield this.app.workspace.getLeaf(!0).openFile(y)})),a.setTooltip("Create a new file in the root of the vault, containing a Mermaid diagram of the current status settings.")}).infoEl.remove()}insertCustomTaskStatusSettings(t,n){let{statusSettings:i}=Z();i.customStatuses.forEach(l=>{xk(t,l,i.customStatuses,i,n,n.plugin,!1)}),t.createEl("div"),new Ee.Setting(t).addButton(l=>{l.setButtonText("Add New Task Status").setCta().onClick(()=>P(this,null,function*(){Le.addStatus(i.customStatuses,new Ke("","","",!1,"TODO")),yield Vs(i,n)}))}).infoEl.remove();let a=[["AnuPpuccin Theme",_k()],["Aura Theme",vk()],["Ebullientworks Theme",wk()],["ITS Theme & SlRvb Checkboxes",kk()],["Minimal Theme",Sk()],["Things Theme",Ok()],["LYT Mode Theme (Dark mode only)",Ek()]];for(let[l,c]of a)new Ee.Setting(t).addButton(f=>{let m=`${l}: Add ${c.length} supported Statuses`;f.setButtonText(m).onClick(()=>P(this,null,function*(){yield SF(c,i,n)}))}).infoEl.remove();new Ee.Setting(t).addButton(l=>{l.setButtonText("Add All Unknown Status Types").setCta().onClick(()=>P(this,null,function*(){let d=this.plugin.getTasks().map(m=>m.status),f=De.getInstance().findUnknownStatuses(d);f.length!==0&&(f.forEach(m=>{Le.addStatus(i.customStatuses,m)}),yield Vs(i,n))}))}).infoEl.remove(),new Ee.Setting(t).addButton(l=>{l.setButtonText("Reset Custom Status Types to Defaults").setWarning().onClick(()=>P(this,null,function*(){Le.resetAllCustomStatuses(i),yield Vs(i,n)}))}).infoEl.remove()}},qo=Wt;qo.createFragmentWithHTML=t=>createFragment(n=>n.createDiv().innerHTML=t);function xk(r,e,t,n,i,s,a){let o=r.createEl("pre");o.addClass("row-for-status"),o.textContent=new ne(e).previewText();let u=new Ee.Setting(r);u.infoEl.replaceWith(o),a||u.addExtraButton(l=>{l.setIcon("cross").setTooltip("Delete").onClick(()=>P(this,null,function*(){Le.deleteStatus(t,e)&&(yield Vs(n,i))}))}),u.addExtraButton(l=>{l.setIcon("pencil").setTooltip("Edit").onClick(()=>P(this,null,function*(){let c=new tr(s,e,a);c.onClose=()=>P(this,null,function*(){c.saved&&Le.replaceStatus(t,e,c.statusConfiguration())&&(yield Vs(n,i))}),c.open()}))}),u.infoEl.remove()}function SF(r,e,t){return P(this,null,function*(){Le.bulkAddStatusCollection(e,r).forEach(i=>{new Ee.Notice(i)}),yield Vs(e,t)})}function Vs(r,e){return P(this,null,function*(){Qe({statusSettings:r}),Le.applyToStatusRegistry(r,De.getInstance()),yield e.saveSettings(!0)})}function OF(r){let{settingEl:e,infoEl:t,controlEl:n}=r,i=n.querySelector("textarea");i!==null&&(e.style.display="block",t.style.marginRight="0px",i.style.minWidth="-webkit-fill-available")}var si=require("obsidian");function Rk(r){console.error(r),new si.Notice(r+`

This message has been written to the console.
`,1e4)}var sc=class extends si.EditorSuggest{constructor(t,n,i){super(t);this.settings=n,this.plugin=i,t.scope.register([],"Tab",()=>{var a;let s=(a=this.context)==null?void 0:a.editor;return s?(s.exec("indentMore"),!1):!0})}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return pv(s,t,n)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){var u,l,c;let n=t.query,i=t.editor.getCursor(),s=this.plugin.getTasks(),a=s.find(d=>d.taskLocation.path==t.file.path&&d.taskLocation.lineNumber==i.line);return((c=(l=(u=yo()).buildSuggestions)==null?void 0:l.call(u,n,i.ch,this.settings,s,a))!=null?c:[]).map(d=>he(K({},d),{context:t}))}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){return P(this,null,function*(){var l,c,d;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let f=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(c=(l=i==null?void 0:i.cm)==null?void 0:l.contentDOM)==null||c.dispatchEvent(f);return}if(t.taskItDependsOn!=null){let f=Vu(t.taskItDependsOn,this.plugin.getTasks().map(m=>m.id));if(t.appendText+=` ${f.id}`,t.taskItDependsOn!==f)if(t.context.file.path==f.path){let m=t.taskItDependsOn.originalMarkdown,y={line:t.taskItDependsOn.lineNumber,ch:0},g={line:t.taskItDependsOn.lineNumber,ch:m.length},T=t.context.editor.getRange(y,g);if(T!==m){let E=`Error adding new ID, due to mismatched data in Tasks memory and the editor:
task line in memory: '${t.taskItDependsOn.originalMarkdown}'

task line in editor: '${T}'

file: '${f.path}'
`;Rk(E);return}t.context.editor.replaceRange(f.toFileLineString(),y,g)}else gr({originalTask:t.taskItDependsOn,newTasks:f})}let s=t.context.editor.getCursor(),a={line:s.line,ch:(d=t.insertAt)!=null?d:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length});let u=t.context.editor.cm.state.field(si.editorInfoField);if(u instanceof si.MarkdownView)yield u.save();else{let f=`Failed to save "${t.context.file.path}" automatically.
Please save the file to ensure edits are retained.`;Rk(f)}})}};var Mk=(r,e)=>{let t,n=new Promise((a,o)=>{t=a});return e(r,a=>{let o=a.map(u=>u.toFileLineString()).join(`
`);t(o)}).open(),n};var Ck=(r,e)=>{let t=ml({line:"",path:""});return new zn({app:r,task:t,onSubmit:e,allTasks:[]})};var Ak=r=>({createTaskLineModal:()=>Mk(r,Ck),executeToggleTaskDoneCommand:(e,t)=>nh(e,t).text});var ac=class extends Pk.Plugin{get apiV1(){return Ak(app)}onload(){return P(this,null,function*(){St.registerConsoleLogger(),Am("info",`loading plugin "${this.manifest.name}" v${this.manifest.version}`),yield this.loadSettings();let{loggingOptions:t}=Z();St.configure(t),this.addSettingTab(new qo({plugin:this})),ow({metadataCache:this.app.metadataCache,vault:this.app.vault,workspace:this.app.workspace}),yield this.loadTaskStatuses();let n=new Ql({obsidianEvents:this.app.workspace});this.cache=new hs({metadataCache:this.app.metadataCache,vault:this.app.vault,events:n}),this.inlineRenderer=new Jl({plugin:this}),this.queryRenderer=new nc({plugin:this,events:n}),this.registerEditorExtension(ik()),this.registerEditorSuggest(new sc(this.app,Z(),this)),new hl({plugin:this})})}loadTaskStatuses(){return P(this,null,function*(){let{statusSettings:t}=Z();Le.applyToStatusRegistry(t,De.getInstance())})}onunload(){var t;Am("info",`unloading plugin "${this.manifest.name}" v${this.manifest.version}`),(t=this.cache)==null||t.unload()}loadSettings(){return P(this,null,function*(){let t=yield this.loadData();Qe(t),t=Z(),_e.getInstance().set(t.globalFilter),_e.getInstance().setRemoveGlobalFilter(t.removeGlobalFilter),Tr.getInstance().set(t.globalQuery),yield this.loadTaskStatuses()})}saveSettings(){return P(this,null,function*(){yield this.saveData(Z())})}getTasks(){return this.cache===void 0?[]:this.cache.getTasks()}};
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
